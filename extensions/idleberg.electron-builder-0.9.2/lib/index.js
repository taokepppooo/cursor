'use strict';

var vscode = require('vscode');
var child_process = require('child_process');
var fs = require('fs');
var os = require('os');
var path = require('path');

var xr=Object.create;var se=Object.defineProperty;var Er=Object.getOwnPropertyDescriptor;var Sr=Object.getOwnPropertyNames;var Pr=Object.getPrototypeOf,Fr=Object.prototype.hasOwnProperty;var m=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(r,t)=>(typeof require<"u"?require:r)[t]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var S=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports);var Or=(e,r,t,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let o of Sr(r))!Fr.call(e,o)&&o!==t&&se(e,o,{get:()=>r[o],enumerable:!(n=Er(r,o))||n.enumerable});return e};var X=(e,r,t)=>(t=e!=null?xr(Pr(e)):{},Or(!e||!e.__esModule?se(t,"default",{value:e,enumerable:!0}):t,e));var re=S(ee=>{Object.defineProperty(ee,"__esModule",{value:!0});var _r=m("vscode"),w=m("path");function $r(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var d=$r(_r);function L(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i);})}return new(t||(t=Promise))(function(i,a){function s(l){try{c(n.next(l));}catch(g){a(g);}}function u(l){try{c(n.throw(l));}catch(g){a(g);}}function c(l){l.done?i(l.value):o(l.value).then(s,u);}c((n=n.apply(e,[])).next());})}function W(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(c){return function(l){return u([c,l])}}function u(c){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,o&&(i=c[0]&2?o.return:c[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,c[1])).done)return i;switch(o=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,o=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){t.label=c[1];break}if(c[0]===6&&t.label<i[1]){t.label=i[1],i=c;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(c);break}i[2]&&t.ops.pop(),t.trys.pop();continue}c=r.call(e,t);}catch(l){c=[6,l],o=0;}finally{n=i=0;}if(c[0]&5)throw c[1];return {value:c[0]?c[1]:void 0,done:!0}}}var ce=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ee(e){var r={exports:{}};return e(r,r.exports),r.exports}var A=function(e){return e&&e.Math==Math&&e},p=A(typeof globalThis=="object"&&globalThis)||A(typeof window=="object"&&window)||A(typeof self=="object"&&self)||A(typeof ce=="object"&&ce)||function(){return this}()||Function("return this")(),k=function(e){try{return !!e()}catch{return !0}},K=!k(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7}),Se={}.propertyIsEnumerable,Pe=Object.getOwnPropertyDescriptor,Cr=Pe&&!Se.call({1:2},1),Mr=Cr?function(r){var t=Pe(this,r);return !!t&&t.enumerable}:Se,jr={f:Mr},Fe=function(e,r){return {enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:r}},Tr={}.toString,Oe=function(e){return Tr.call(e).slice(8,-1)},kr="".split,Br=k(function(){return !Object("z").propertyIsEnumerable(0)})?function(e){return Oe(e)=="String"?kr.call(e,""):Object(e)}:Object,J=function(e){if(e==null)throw TypeError("Can't call method on "+e);return e},Z=function(e){return Br(J(e))},y=function(e){return typeof e=="object"?e!==null:typeof e=="function"},_e=function(e,r){if(!y(e))return e;var t,n;if(typeof(t=e.toString)=="function"&&!y(n=t.call(e))||typeof(t=e.valueOf)=="function"&&!y(n=t.call(e))||!r)return n;throw TypeError("Can't convert object to primitive value")},Nr={}.hasOwnProperty,h=function(e,r){return Nr.call(e,r)},U=p.document,Ar=y(U)&&y(U.createElement),Ir=function(e){return Ar?U.createElement(e):{}},$e=!K&&!k(function(){return Object.defineProperty(Ir("div"),"a",{get:function(){return 7}}).a!=7}),ue=Object.getOwnPropertyDescriptor,Dr=K?ue:function(r,t){if(r=Z(r),t=_e(t,!0),$e)try{return ue(r,t)}catch{}if(h(r,t))return Fe(!jr.f.call(r,t),r[t])},Ce={f:Dr},G=function(e){if(!y(e))throw TypeError(String(e)+" is not an object");return e},le=Object.defineProperty,Lr=K?le:function(r,t,n){if(G(r),t=_e(t,!0),G(n),$e)try{return le(r,t,n)}catch{}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return "value"in n&&(r[t]=n.value),r},Me={f:Lr},j=K?function(e,r,t){return Me.f(e,r,Fe(1,t))}:function(e,r,t){return e[r]=t,e},V=function(e,r){try{j(p,e,r);}catch{p[e]=r;}return r},fe="__core-js_shared__",Wr=p[fe]||V(fe,{}),E=Wr,Gr=Function.toString;typeof E.inspectSource!="function"&&(E.inspectSource=function(e){return Gr.call(e)});var je=E.inspectSource,de=p.WeakMap,Rr=typeof de=="function"&&/native code/.test(je(de)),Te=Ee(function(e){(e.exports=function(r,t){return E[r]||(E[r]=t!==void 0?t:{})})("versions",[]).push({version:"3.8.1",mode:"global",copyright:"\xA9 2020 Denis Pushkarev (zloirock.ru)"});}),qr=0,Kr=Math.random(),ke=function(e){return "Symbol("+String(e===void 0?"":e)+")_"+(++qr+Kr).toString(36)},ge=Te("keys"),Hr=function(e){return ge[e]||(ge[e]=ke(e))},Be={},Xr=p.WeakMap,R,T,q,zr=function(e){return q(e)?T(e):R(e,{})},Jr=function(e){return function(r){var t;if(!y(r)||(t=T(r)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return t}};Rr?(b=E.state||(E.state=new Xr),pe=b.get,ve=b.has,he=b.set,R=function(e,r){return r.facade=e,he.call(b,e,r),r},T=function(e){return pe.call(b,e)||{}},q=function(e){return ve.call(b,e)}):(P=Hr("state"),Be[P]=!0,R=function(e,r){return r.facade=e,j(e,P,r),r},T=function(e){return h(e,P)?e[P]:{}},q=function(e){return h(e,P)});var b,pe,ve,he,P,ye={set:R,get:T,has:q,enforce:zr,getterFor:Jr},Ur=Ee(function(e){var r=ye.get,t=ye.enforce,n=String(String).split("String");(e.exports=function(o,i,a,s){var u=s?!!s.unsafe:!1,c=s?!!s.enumerable:!1,l=s?!!s.noTargetGet:!1,g;if(typeof a=="function"&&(typeof i=="string"&&!h(a,"name")&&j(a,"name",i),g=t(a),g.source||(g.source=n.join(typeof i=="string"?i:""))),o===p){c?o[i]=a:V(i,a);return}else u?!l&&o[i]&&(c=!0):delete o[i];c?o[i]=a:j(o,i,a);})(Function.prototype,"toString",function(){return typeof this=="function"&&r(this).source||je(this)});}),z=p,we=function(e){return typeof e=="function"?e:void 0},Yr=function(e,r){return arguments.length<2?we(z[e])||we(p[e]):z[e]&&z[e][r]||p[e]&&p[e][r]},Qr=Math.ceil,Zr=Math.floor,Ne=function(e){return isNaN(e=+e)?0:(e>0?Zr:Qr)(e)},Vr=Math.min,et=function(e){return e>0?Vr(Ne(e),9007199254740991):0},rt=Math.max,tt=Math.min,nt=function(e,r){var t=Ne(e);return t<0?rt(t+r,0):tt(t,r)},me=function(e){return function(r,t,n){var o=Z(r),i=et(o.length),a=nt(n,i),s;if(e&&t!=t){for(;i>a;)if(s=o[a++],s!=s)return !0}else for(;i>a;a++)if((e||a in o)&&o[a]===t)return e||a||0;return !e&&-1}},ot={includes:me(!0),indexOf:me(!1)},it=ot.indexOf,at=function(e,r){var t=Z(e),n=0,o=[],i;for(i in t)!h(Be,i)&&h(t,i)&&o.push(i);for(;r.length>n;)h(t,i=r[n++])&&(~it(o,i)||o.push(i));return o},st=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],ct=st.concat("length","prototype"),ut=Object.getOwnPropertyNames||function(r){return at(r,ct)},lt={f:ut},ft=Object.getOwnPropertySymbols,dt={f:ft},gt=Yr("Reflect","ownKeys")||function(r){var t=lt.f(G(r)),n=dt.f;return n?t.concat(n(r)):t},pt=function(e,r){for(var t=gt(r),n=Me.f,o=Ce.f,i=0;i<t.length;i++){var a=t[i];h(e,a)||n(e,a,o(r,a));}},vt=/#|\.prototype\./,B=function(e,r){var t=yt[ht(e)];return t==mt?!0:t==wt?!1:typeof r=="function"?k(r):!!r},ht=B.normalize=function(e){return String(e).replace(vt,".").toLowerCase()},yt=B.data={},wt=B.NATIVE="N",mt=B.POLYFILL="P",bt=B,xt=Ce.f,Et=function(e,r){var t=e.target,n=e.global,o=e.stat,i,a,s,u,c,l;if(n?a=p:o?a=p[t]||V(t,{}):a=(p[t]||{}).prototype,a)for(s in r){if(c=r[s],e.noTargetGet?(l=xt(a,s),u=l&&l.value):u=a[s],i=bt(n?s:t+(o?".":"#")+s,e.forced),!i&&u!==void 0){if(typeof c==typeof u)continue;pt(c,u);}(e.sham||u&&u.sham)&&j(c,"sham",!0),Ur(a,s,c,e);}},Ae=!!Object.getOwnPropertySymbols&&!k(function(){return !String(Symbol())}),St=Ae&&!Symbol.sham&&typeof Symbol.iterator=="symbol",I=Te("wks"),M=p.Symbol,Pt=St?M:M&&M.withoutSetter||ke,Ie=function(e){return h(I,e)||(Ae&&h(M,e)?I[e]=M[e]:I[e]=Pt("Symbol."+e)),I[e]},Ft=Ie("match"),Ot=function(e){var r;return y(e)&&((r=e[Ft])!==void 0?!!r:Oe(e)=="RegExp")},_t=function(){var e=G(this),r="";return e.global&&(r+="g"),e.ignoreCase&&(r+="i"),e.multiline&&(r+="m"),e.dotAll&&(r+="s"),e.unicode&&(r+="u"),e.sticky&&(r+="y"),r},$t=Ie("replace"),Ct=RegExp.prototype;Et({target:"String",proto:!0},{replaceAll:function e(r,t){var n=J(this),o,i,a,s,u,c,l,g,v;if(r!=null){if(o=Ot(r),o&&(i=String(J("flags"in Ct?r.flags:_t.call(r))),!~i.indexOf("g")))throw TypeError("`.replaceAll` does not allow non-global regexes");if(a=r[$t],a!==void 0)return a.call(r,n,t)}if(s=String(n),u=String(r),u==="")return e.call(s,/(?:)/g,t);if(c=s.split(u),typeof t!="function")return c.join(String(t));for(l=c[0],g=l.length,v=1;v<c.length;v++)l+=String(t(u,g,s)),g+=u.length+c[v].length,l+=c[v];return l}});var x=e=>{let r=typeof e;return e!==null&&(r==="object"||r==="function")},Mt=new Set(["__proto__","prototype","constructor"]),jt=e=>!e.some(r=>Mt.has(r));function D(e){let r=e.split("."),t=[];for(let n=0;n<r.length;n++){let o=r[n];for(;o[o.length-1]==="\\"&&r[n+1]!==void 0;)o=o.slice(0,-1)+".",o+=r[++n];t.push(o);}return jt(t)?t:[]}var Y={get(e,r,t){if(!x(e)||typeof r!="string")return t===void 0?e:t;let n=D(r);if(n.length!==0){for(let o=0;o<n.length;o++)if(e=e[n[o]],e==null){if(o!==n.length-1)return t;break}return e===void 0?t:e}},set(e,r,t){if(!x(e)||typeof r!="string")return e;let n=e,o=D(r);for(let i=0;i<o.length;i++){let a=o[i];x(e[a])||(e[a]={}),i===o.length-1&&(e[a]=t),e=e[a];}return n},delete(e,r){if(!x(e)||typeof r!="string")return !1;let t=D(r);for(let n=0;n<t.length;n++){let o=t[n];if(n===t.length-1)return delete e[o],!0;if(e=e[o],!x(e))return !1}},has(e,r){if(!x(e)||typeof r!="string")return !1;let t=D(r);if(t.length===0)return !1;for(let n=0;n<t.length;n++)if(x(e)){if(!(t[n]in e))return !1;e=e[t[n]];}else return !1;return !0}};function Tt(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return L(this,void 0,void 0,function(){var t=this;return W(this,function(n){switch(!0){case e.length===0:return [2,d.default.workspace.getConfiguration()];case e.length===1:return [2,be(e[0])];default:return [2,Promise.all(e.map(function(o){return L(t,void 0,void 0,function(){return W(this,function(i){return [2,be(o)]})})}))]}})})}function be(e){return L(this,void 0,void 0,function(){var r,t;return W(this,function(n){switch(n.label){case 0:return r=e?.length?Y.get(d.default.workspace.getConfiguration(),e):d.default.workspace.getConfiguration(),r&&Object.keys(r).length?[4,kt(r)]:[3,2];case 1:return t=n.sent(),[3,3];case 2:t=r,n.label=3;case 3:return [2,t]}})})}function kt(e){return L(this,void 0,void 0,function(){var r,t,n,o,i,a,s,s,u,c;return W(this,function(l){return r=JSON.stringify(e),r?.includes("${workspaceFolder}")&&(r=r.replace(/\${workspaceFolder}/g,Q())),r?.includes("${workspaceFolderBasename}")&&(r=r.replace(/\${workspaceFolderBasename}/g,w.basename(Q()))),r?.includes("${file}")&&(r=r.replace(/\${file}/g,F())),r?.includes("${relativeFile}")&&(r=r.replace(/\${relativeFile}/g,De())),r?.includes("${relativeFileDirname}")&&(r=r.replace(/\${relativeFileDirname}/g,Bt())),r?.includes("${fileBasename}")&&(r=r.replace(/\${fileBasename}/g,Nt())),r?.includes("${fileBasenameNoExtension}")&&(r=r.replace(/\${fileBasenameNoExtension}/g,At())),r?.includes("${fileDirname}")&&(r=r.replace(/\${fileDirname}/g,It())),r?.includes("${fileExtname}")&&(r=r.replace(/\${fileExtname}/g,Le())),r?.includes("${cwd}")&&(r=r.replace(/\${cwd}/g,process.cwd())),r?.includes("${lineNumber}")&&(t=xe(),t&&parseInt(t)&&(r=r.replace(/\${lineNumber}/g,xe()))),r?.includes("${selectedText}")&&(n=Dt().join(),n&&(r=r.replace(/\${selectedText}/g,n))),r?.includes("${execPath}")&&(r=r.replace(/\${execPath}/g,process.execPath)),r?.includes("${pathSeparator}")&&(r=r.replace(/\${pathSeparator}/g,w.sep)),r&&/\${workspaceFolder:[^}]+}/.test(r)&&(o=d.default.workspace.workspaceFolders,i=/\${workspaceFolder:(?<name>[^}]+)}/g,a=r.match(i),a?.length&&a.map(function(g){var v=g.match(/\${workspaceFolder:(?<name>[^}]+)\}/).groups;if(v.name){var ae=o.find(function(br){return br.name===v.name});ae&&(r=r.replaceAll("${workspaceFolder:"+v.name+"}",ae.uri.fsPath));}})),r&&/\${env:[^}]+}/.test(r)&&(s=r.match(/\${env:(?<name>[^}]+)\}/).groups,s?.name&&process.env[s.name]&&(r=r.replace(/(\${env:[^}]+})/g,process.env[s.name]))),r&&/\${config:[^}]+}/.test(r)&&(s=r.match(/\${config:(?<name>[^}]+)\}/).groups,u=d.default.workspace.getConfiguration(),s?.name&&Y.get(u,s.name)&&(c=String(Y.get(u,s.name)),r=r.replace(/(\${config:[^}]+})/g,c))),[2,JSON.parse(r)]})})}function F(){var e=d.default.window.activeTextEditor;if(!e){d.default.window.showWarningMessage("No open editors");return}return e.document.uri.fsPath}function De(){var e=Q();return w.relative(e,F())}function Bt(){return w.dirname(De())}function Nt(){return w.basename(F())}function At(){return w.basename(F(),Le())}function It(){return w.dirname(F())}function Le(){return w.extname(F())}function xe(){var e=d.default.window.activeTextEditor;if(!e){d.default.window.showWarningMessage("No open editors");return}return String(e.selection.active.line)}function Dt(){return d.default.window.activeTextEditor.selections.map(function(e){return d.default.window.activeTextEditor.document.getText(new d.default.Range(e.start.line,e.start.character,e.end.line,e.end.character))})}function Q(e){var r,t;e===void 0&&(e="");var n=d.default.window.activeTextEditor;if(!n){d.default.window.showWarningMessage("No open editors");return}var o=d.default.workspace.getWorkspaceFolder((r=n?.document)===null||r===void 0?void 0:r.uri).uri;if(!(!((t=o.fsPath)===null||t===void 0)&&t.length)){d.default.window.showWarningMessage("No open workspaces");return}return e?.length?w.join(o.fsPath,e):o.fsPath}ee.getConfig=Tt;});var Ge=S(O=>{Object.defineProperty(O,"__esModule",{value:!0});O.sync=O.isexe=void 0;var Lt=m("fs"),Wt=m("fs/promises"),Gt=async(e,r={})=>{let{ignoreErrors:t=!1}=r;try{return We(await(0,Wt.stat)(e),r)}catch(n){let o=n;if(t||o.code==="EACCES")return !1;throw o}};O.isexe=Gt;var Rt=(e,r={})=>{let{ignoreErrors:t=!1}=r;try{return We((0,Lt.statSync)(e),r)}catch(n){let o=n;if(t||o.code==="EACCES")return !1;throw o}};O.sync=Rt;var We=(e,r)=>e.isFile()&&qt(e,r),qt=(e,r)=>{let t=r.uid??process.getuid?.(),n=r.groups??process.getgroups?.()??[],o=r.gid??process.getgid?.()??n[0];if(t===void 0||o===void 0)throw new Error("cannot get uid or gid");let i=new Set([o,...n]),a=e.mode,s=e.uid,u=e.gid,c=parseInt("100",8),l=parseInt("010",8),g=parseInt("001",8),v=c|l;return !!(a&g||a&l&&i.has(u)||a&c&&s===t||a&v&&t===0)};});var qe=S(_=>{Object.defineProperty(_,"__esModule",{value:!0});_.sync=_.isexe=void 0;var Kt=m("fs"),Ht=m("fs/promises"),Xt=async(e,r={})=>{let{ignoreErrors:t=!1}=r;try{return Re(await(0,Ht.stat)(e),e,r)}catch(n){let o=n;if(t||o.code==="EACCES")return !1;throw o}};_.isexe=Xt;var zt=(e,r={})=>{let{ignoreErrors:t=!1}=r;try{return Re((0,Kt.statSync)(e),e,r)}catch(n){let o=n;if(t||o.code==="EACCES")return !1;throw o}};_.sync=zt;var Jt=(e,r)=>{let{pathExt:t=process.env.PATHEXT||""}=r,n=t.split(";");if(n.indexOf("")!==-1)return !0;for(let o=0;o<n.length;o++){let i=n[o].toLowerCase(),a=e.substring(e.length-i.length).toLowerCase();if(i&&a===i)return !0}return !1},Re=(e,r,t)=>e.isFile()&&Jt(r,t);});var He=S(Ke=>{Object.defineProperty(Ke,"__esModule",{value:!0});});var Qe=S(f=>{var Xe=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o);}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t];}),Ut=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r});}:function(e,r){e.default=r;}),ze=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&Xe(r,e,t);return Ut(r,e),r},Yt=f&&f.__exportStar||function(e,r){for(var t in e)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&Xe(r,e,t);};Object.defineProperty(f,"__esModule",{value:!0});f.sync=f.isexe=f.posix=f.win32=void 0;var Je=ze(Ge());f.posix=Je;var Ue=ze(qe());f.win32=Ue;Yt(He(),f);var Qt=process.env._ISEXE_TEST_PLATFORM_||process.platform,Ye=Qt==="win32"?Ue:Je;f.isexe=Ye.isexe;f.sync=Ye.sync;});var sr=S((wn,ar)=>{var{isexe:Zt,sync:Vt}=Qe(),{join:en,delimiter:rn,sep:Ze,posix:Ve}=m("path"),er=process.platform==="win32",rr=new RegExp(`[${Ve.sep}${Ze===Ve.sep?"":Ze}]`.replace(/(\\)/g,"\\$1")),tn=new RegExp(`^\\.${rr.source}`),tr=e=>Object.assign(new Error(`not found: ${e}`),{code:"ENOENT"}),nr=(e,{path:r=process.env.PATH,pathExt:t=process.env.PATHEXT,delimiter:n=rn})=>{let o=e.match(rr)?[""]:[...er?[process.cwd()]:[],...(r||"").split(n)];if(er){let i=t||[".EXE",".CMD",".BAT",".COM"].join(n),a=i.split(n).flatMap(s=>[s,s.toLowerCase()]);return e.includes(".")&&a[0]!==""&&a.unshift(""),{pathEnv:o,pathExt:a,pathExtExe:i}}return {pathEnv:o,pathExt:[""]}},or=(e,r)=>{let t=/^".*"$/.test(e)?e.slice(1,-1):e;return (!t&&tn.test(r)?r.slice(0,2):"")+en(t,r)},ir=async(e,r={})=>{let{pathEnv:t,pathExt:n,pathExtExe:o}=nr(e,r),i=[];for(let a of t){let s=or(a,e);for(let u of n){let c=s+u;if(await Zt(c,{pathExt:o,ignoreErrors:!0})){if(!r.all)return c;i.push(c);}}}if(r.all&&i.length)return i;if(r.nothrow)return null;throw tr(e)},nn=(e,r={})=>{let{pathEnv:t,pathExt:n,pathExtExe:o}=nr(e,r),i=[];for(let a of t){let s=or(a,e);for(let u of n){let c=s+u;if(Vt(c,{pathExt:o,ignoreErrors:!0})){if(!r.all)return c;i.push(c);}}}if(r.all&&i.length)return i;if(r.nothrow)return null;throw tr(e)};ar.exports=ir;ir.sync=nn;});var mr=X(re());var te=X(re()),lr=X(sr());async function cn(e,r){let t=Symbol();return (await Promise.all(e.map(async n=>await r(n)?n:t))).filter(n=>n!==t)}async function fr(e){let{alwaysShowOutput:r}=await(0, te.getConfig)("electron-builder");e.clear(),r===!0&&e.show(!0);}async function dr(e){try{await fs.promises.access(e,fs.constants.F_OK);}catch{return !1}return !0}function gr(){let e=vscode.window.activeTextEditor;if(!e)return !1;let r=e.document.languageId;return un().includes(r)}async function pr(){let{pathToElectronBuilder:e}=await(0, te.getConfig)("electron-builder");if(e?.length&&e.endsWith("/node_modules/.bin/electron-builder"))return e;try{return String(await(0,lr.default)("electron-builder"))}catch(r){console.error(r),vscode.window.showErrorMessage("No Electron Builder binary detected ");}return ""}function vr(){let e=os.platform();switch(e){case"linux":return "--linux";case"darwin":return "--mac";case"win32":return "--windows";default:vscode.window.showErrorMessage(`Unsupported platform '${e}' detected, please specify custom build arguments`);}}function hr(){return ["electron-builder.yml","electron-builder.yaml","electron-builder.json","electron-builder.toml","electron-builder.js"]}function un(){return ["electron-builder-js","electron-builder-json","electron-builder-toml","electron-builder-yaml"]}async function H(){let e;try{e=vscode.window.activeTextEditor;}catch{return}try{let r=vscode.workspace.getWorkspaceFolder(e.document.uri);return r?r.uri.fsPath:""}catch{return}}function yr(e){return e.includes("--config")||e.includes("-c")}async function ne(){let e=await H();if(!e?.length)return !1;let r=path.resolve(e,"package.json");if(!await dr(r))return !1;let t;try{t=await fs.promises.readFile(r,"utf-8");}catch(o){return console.error(o),!1}let n;try{n=JSON.parse(t);}catch(o){return o instanceof Error&&(console.error(o.message),vscode.window.showErrorMessage(o.message)),!1}return !!(n.build&&n.build.appId)}async function oe(){let e=await hr(),r=await H();return r?.length?!!(await cn(e,async t=>await dr(path.resolve(r,t)))).length:!1}function wr(e){return !!hr().filter(r=>e.endsWith(`/${r}`)).length}var $=vscode.window.createOutputChannel("Electron Builder");async function ie(){let e=vscode.window.activeTextEditor;if(!e)return;if(await fr($),!gr()){$.appendLine("Active file is no eligible Electron Builder configuration");return}if(!(await ne()||await oe())){$.appendLine("No eligible Electron Builder configuration found in your workspace");return}let r=e.document,{fileName:t}=r;try{await r.save();}catch(s){vscode.window.showErrorMessage(`Could not save document ${t}, see console for details`),console.error(s);return}let n=await(0, mr.getConfig)("electron-builder"),o=n.electronBuilderArguments?.length?[...n.electronBuilderArguments]:[vr()];!yr(o)&&(wr(t)||!(await ne()||await oe()))&&o.push("--config",t);let i=child_process.spawn(await pr(),o,{cwd:await H()}),a=[];i.stdout.on("data",s=>{$.appendLine(s.toString());}),i.stderr.on("data",s=>{a.push(s),$.appendLine(s.toString());}),i.on("error",s=>{s&&s.toString().includes("ENOENT")?vscode.window.showErrorMessage("Could not find electron-builder at specified path"):vscode.window.showErrorMessage("Failed to run electron-builder, see console for details"),console.error(s);}),i.on("exit",s=>{$.show(!0),s!==0&&(n.showNotifications&&vscode.window.showErrorMessage("Building failed, see output for details"),a.length>0&&console.error(a.join(`
`)));});}async function jn(e){e.subscriptions.push(vscode.commands.registerTextEditorCommand("extension.electron-builder.build",async()=>await ie()));}/*! Bundled license information:

vscode-get-config/dist/index.js:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** *)
*/

exports.activate = jn;
