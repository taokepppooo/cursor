var Uc=Object.create;var Kr=Object.defineProperty;var jc=Object.getOwnPropertyDescriptor;var Wc=Object.getOwnPropertyNames;var zc=Object.getPrototypeOf,Vc=Object.prototype.hasOwnProperty;var bt=(_=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(_,{get:(o,c)=>(typeof require<"u"?require:o)[c]}):_)(function(_){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+_+'" is not supported')});var Hc=(_,o)=>()=>(o||_((o={exports:{}}).exports,o),o.exports);var Qc=(_,o,c,r)=>{if(o&&typeof o=="object"||typeof o=="function")for(let b of Wc(o))!Vc.call(_,b)&&b!==c&&Kr(_,b,{get:()=>o[b],enumerable:!(r=jc(o,b))||r.enumerable});return _};var $c=(_,o,c)=>(c=_!=null?Uc(zc(_)):{},Qc(o||!_||!_.__esModule?Kr(c,"default",{value:_,enumerable:!0}):c,_));var hn=Hc(yr=>{yr.read=function(_,o,c,r,b){var I,D,O=b*8-r-1,K=(1<<O)-1,re=K>>1,oe=-7,Z=c?b-1:0,ue=c?-1:1,me=_[o+Z];for(Z+=ue,I=me&(1<<-oe)-1,me>>=-oe,oe+=O;oe>0;I=I*256+_[o+Z],Z+=ue,oe-=8);for(D=I&(1<<-oe)-1,I>>=-oe,oe+=r;oe>0;D=D*256+_[o+Z],Z+=ue,oe-=8);if(I===0)I=1-re;else{if(I===K)return D?NaN:(me?-1:1)*(1/0);D=D+Math.pow(2,r),I=I-re}return(me?-1:1)*D*Math.pow(2,I-r)};yr.write=function(_,o,c,r,b,I){var D,O,K,re=I*8-b-1,oe=(1<<re)-1,Z=oe>>1,ue=b===23?Math.pow(2,-24)-Math.pow(2,-77):0,me=r?0:I-1,we=r?1:-1,Ie=o<0||o===0&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(O=isNaN(o)?1:0,D=oe):(D=Math.floor(Math.log(o)/Math.LN2),o*(K=Math.pow(2,-D))<1&&(D--,K*=2),D+Z>=1?o+=ue/K:o+=ue*Math.pow(2,1-Z),o*K>=2&&(D++,K/=2),D+Z>=oe?(O=0,D=oe):D+Z>=1?(O=(o*K-1)*Math.pow(2,b),D=D+Z):(O=o*Math.pow(2,Z-1)*Math.pow(2,b),D=0));b>=8;_[c+me]=O&255,me+=we,O/=256,b-=8);for(D=D<<b|O,re+=b;re>0;_[c+me]=D&255,me+=we,D/=256,re-=8);_[c+me-we]|=Ie*128}});var $u=bt("worker_threads").Worker,Gu=bt("worker_threads").MessageChannel,Ku=bt("worker_threads").MessagePort,Ju=bt("worker_threads").BroadcastChannel,Jr=bt("worker_threads").parentPort;var yt=Symbol("Caplink.messageChannel"),fr=Symbol("Caplink.adaptNative"),dr=Symbol("Caplink.toNative");var rn=Symbol("Caplink.proxy"),vt=Symbol("Caplink.endpoint"),Xr=Symbol("Caplink.releaseProxy"),pr=Symbol("Caplink.finalizer");var Ct=Symbol("Caplink.thrown"),Gc=_=>typeof _=="object"&&_!==null,nn=_=>typeof _=="object"&&_!==null||typeof _=="function",Yr=_=>"Worker"in globalThis&&_ instanceof globalThis.Worker||"MessagePort"in globalThis&&_ instanceof globalThis.MessagePort,Kc=_=>nn(_)&&dr in _,Jc={canHandle:_=>rn in _||vt in _,serialize(_,o){let c;if(vt in _)c=_[vt](),Yr(o)&&Kc(c)?c=c[dr]():o[fr]&&Yr(c)&&(c=o[fr](c));else{let{port1:r,port2:b}=new(o[yt]??MessageChannel);jt(_,r),c=b}return[c,[c]]},deserialize(_){return _.start(),iu(_)}},Et=new WeakMap,Xc={canHandle:_=>Ct in _,serialize({value:_}){return[_,[]]},deserialize(_){if(_ instanceof Error){if(!_.stack||!_.stack.startsWith("    at"))throw _;Object.defineProperty(_,"stack",{value:`Error: ${_.message}
${_.stack}`})}throw _}},Ut=new Map([["proxy",Jc],["throw",Xc]]);function Yc(_,o){for(let c of _)if(o===c||c==="*"||c instanceof RegExp&&c.test(o))return!0;return!1}function Zc(_){return Gc(_)&&"type"in _&&"id"in _}var Mt=new WeakMap;async function Zr(_){let o=(Mt.get(_)||0)-1;Mt.set(_,o),o===0&&("dispose"in Symbol&&Symbol.dispose in _&&_[Symbol.dispose](),"asyncDispose"in Symbol&&Symbol.asyncDispose in _&&await _[Symbol.asyncDispose](),pr in _&&typeof _[pr]=="function"&&_[pr]())}var en=new WeakSet;function jt(_,o=globalThis,c=["*"]){if(en.has(o))throw Error("Endpoint is already exposing another object and cannot be reused.");en.add(o),Mt.set(_,(Mt.get(_)||0)+1),o.addEventListener("message",async function b(I){let D=_;if(!I||!I.data||!Zc(I.data))return;if(!Yc(c,I.origin)){console.warn(`Invalid origin '${I.origin}' for caplink proxy`);return}let{data:O}=I,{id:K,type:re}=O,oe;try{switch(re){case"GET":oe=O.path.reduce((ue,me)=>ue[me],D);break;case"SET":{let Z=O.path.slice(0,-1).reduce((ue,me)=>ue[me],D);Z[O.path.slice(-1)[0]]=rt.call(o,O.value),oe=!0}break;case"APPLY":{let Z=O.path.slice(0,-1).reduce((we,Ie)=>we[Ie],D),ue=O.path.reduce((we,Ie)=>we[Ie],D),me=O.argumentList.map(rt,o);oe=ue.apply(Z,me)}break;case"CONSTRUCT":{let Z=O.path.reduce((we,Ie)=>we[Ie],D),ue=O.argumentList.map(rt,o),me=new Z(...ue);oe=hr(me)}break;case"ENDPOINT":jt(D,O.value),oe=void 0;break;case"RELEASE":oe=void 0,Zr(D);break;default:return}}catch(Z){oe={value:Z,[Ct]:0}}try{oe=await oe}catch(Z){oe={value:Z,[Ct]:0}}try{let[Z,ue]=Bt.call(o,oe);Z.id=K,(I.source??o).postMessage(Z,{transfer:ue})}catch(Z){console.error(Z);let[ue,me]=Bt.call(o,{value:new TypeError("Unserializable return value"),[Ct]:0});ue.id=K,(I.source??o).postMessage(ue,{transfer:me})}finally{re==="RELEASE"&&(o.removeEventListener("message",b),o.removeEventListener("close",r),o.removeEventListener("error",r),ru(o))}});let r=()=>{Zr(_),o.removeEventListener("close",r),o.removeEventListener("error",r)};o.addEventListener("close",r),o.addEventListener("error",r),o.start?.()}function sn(_){return"close"in _&&typeof _.close=="function"}function eu(_){return"terminate"in _&&typeof _.terminate=="function"}function tu(_){return"dispose"in Symbol&&Symbol.dispose in _&&_[Symbol.dispose]!=null}function ru(_){sn(_)&&_.close()}function nu(_,o=!1){o?tu(_)?_[Symbol.dispose]():eu(_)&&_.terminate():sn(_)&&_.close()}function iu(_,o,c={}){return mr(_,[],o,c)}function qt(_){if(_)throw new Error("Proxy has been released and is not useable"+(typeof _=="string"?`: ${_}`:""),_ instanceof Error?{cause:_}:{})}async function wt(_,o=!1,c=!1){if(Et.has(_)){let{resolvers:r,messageHandler:b}=Et.get(_);try{let I=!o&&ft(_,{type:"RELEASE"});Et.delete(_),await I}finally{r.forEach(({reject:I})=>I(new DOMException("Cancelled due to endpoint release","AbortError"))),r.clear(),_.removeEventListener("message",b),nu(_,c)}}}async function su([_,o]){let c=(Nt.get(_)||0)-1;Nt.set(_,c),c===0&&await wt(_,void 0,o)}var Nt=new WeakMap,on="FinalizationRegistry"in globalThis?new FinalizationRegistry(su):void 0;function ou(_,[o,c]){let r=(Nt.get(o)||0)+1;Nt.set(o,r),on?.register(_,[o,c],_)}function Rt(_){on?.unregister(_)}function mr(_,o=[],c=function(){},{owned:r=!1}={}){let b=!1,I=new Proxy(c,{get(D,O){if(O===Symbol.dispose||O===Xr)return()=>{b=!0,Rt(I),wt(_,!1,r).catch(()=>{})};if(O===Symbol.asyncDispose)return async()=>{b=!0,Rt(I),await wt(_,!1,r)};if(qt(b),O==="then"){if(o.length===0)return{then:()=>I};let K=ft(_,{type:"GET",path:o.map(re=>re.toString())}).then(rt.bind(_));return K.then.bind(K)}return mr(_,[...o,O])},set(D,O,K){qt(b);let[re,oe]=Bt.call(_,K);return ft(_,{type:"SET",path:[...o,O].map(Z=>Z.toString()),value:re},oe).then(rt.bind(_))},apply(D,O,K){qt(b);let re=o[o.length-1];if(re===vt){let{port1:ue,port2:me}=new(_[yt]??MessageChannel);return ft(_,{type:"ENDPOINT",value:me},[me]).catch(()=>{ue.close()}),ue}if(re==="bind")return mr(_,o.slice(0,-1));re==="call"&&(o=o.slice(0,-1),K=K.slice(1)),re==="apply"&&(o=o.slice(0,-1),K=K[1]);let[oe,Z]=tn(K,_);return ft(_,{type:"APPLY",path:o.map(ue=>ue.toString()),argumentList:oe},Z).then(rt.bind(_))},construct(D,O){qt(b);let[K,re]=tn(O,_);return ft(_,{type:"CONSTRUCT",path:o.map(oe=>oe.toString()),argumentList:K},re).then(rt.bind(_))},has(D,O){return qt(b),O===Symbol.dispose||O===Xr||O===Symbol.asyncDispose||O===vt||O==="then"}});return _.addEventListener("close",async D=>{b=D.reason??"closed",Rt(I),await wt(_,!0,r)}),_.addEventListener("error",async D=>{b=D.error instanceof Error?D.error:"errored",Rt(I),await wt(_,!0,r)}),ou(I,[_,r]),I}var au="flat"in Array.prototype?_=>_.flat():_=>Array.prototype.concat.apply([],_);function tn(_,o){let c=_.map(Bt,o);return[c.map(r=>r[0]),au(c.map(r=>r[1]))]}var an=new WeakMap;function St(_,o){return an.set(_,o),_}function hr(_){let o=_;return o[rn]=!0,o}function Bt(_){if(nn(_)){for(let[o,c]of Ut)if(c.canHandle(_,this)){let[r,b]=c.serialize(_,this);return[{type:"HANDLER",name:o,value:r},b]}}return[{type:"RAW",value:_},an.get(_)||[]]}function rt(_){switch(_.type){case"HANDLER":return Ut.get(_.name).deserialize(_.value,this);case"RAW":return _.value}}var lu=_=>o=>{let{data:c}=o;if(!c?.id)return;let r=_.get(c.id);r&&(_.delete(c.id),r.resolve(c))};function ft(_,o,c){return new Promise((r,b)=>{let I=Et.get(_)?.resolvers;if(!I){I=new Map;let O=lu(I);Et.set(_,{resolvers:I,messageHandler:O}),_.addEventListener("message",O),_.start?.()}let D=cu();o.id=D,I.set(D,{resolve:r,reject:b}),_.postMessage(o,c)})}function cu(){return Math.random()*2**32>>>0}var _u="FinalizationRegistry"in globalThis?new FinalizationRegistry(async _=>{_.postMessage(null),_.close()}):void 0,fu=new AbortController().signal;Ut.set("abortsignal",{canHandle(_){return _ instanceof AbortSignal||_?.constructor?.name==="AbortSignal"},serialize(_,o){if(_.aborted)return[{aborted:!0},[]];let{port1:c,port2:r}=new(o[yt]??MessageChannel);return _.addEventListener("abort",()=>c.postMessage({reason:_.reason}),{once:!0}),c.addEventListener("message",()=>{}),_u?.register(_,c),[{aborted:!1,port:r},[r]]},deserialize({aborted:_,port:o}){if(_)return AbortSignal.abort();if(!o)return fu;let c=new AbortController;return o.addEventListener("message",r=>{r.data&&"reason"in r.data&&c.abort(r.data.reason),o.close()},{once:!0}),o.start(),c.signal}});var du=_=>o=>{"handleEvent"in _?_.handleEvent({data:o}):_({data:o})};function gr(_){if(!("on"in _)||!("off"in _))return _;let o=new WeakMap;return{postMessage:_.postMessage.bind(_),addEventListener:(c,r)=>{let b=du(r);_.on(c,b),o.set(r,b)},removeEventListener:(c,r)=>{let b=o.get(r);b&&(_.off(c,b),o.delete(r))},..._.start&&{start:_.start.bind(_)}}}function cn(_){let o=_.reduce((b,I)=>b+I.length,0),c=new Uint8Array(o),r=0;for(let b of _)c.set(b,r),r+=b.length;return c}var nt=new Map,He=new Map,un=(_,o)=>({io:mu(_.wasm,_.capi),vfs:pu(_.wasm,_.capi,o)}),_n=2**20,Wt=2**30,fn=200*_n;function dn(_,o,c,{maxFileSize:r=200*_n}={}){let b=new ArrayBuffer(o.byteLength,{maxByteLength:Math.min(r,4*Wt)||4*Wt}),I=new Uint8Array(b);fn=r,I.set(o),nt.set(_,{name:_,flags:0,size:o.byteLength,data:I,lockType:0}),c&&nt.set(`${_}-wal`,{name:`${_}-wal`,flags:0,size:c.byteLength,data:c,lockType:0})}var pu=(_,o,c)=>({xOpen:(r,b,I,D,O)=>{let K=_.cstrToJs(b);K||=Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(36);let re=nt.get(K);if(!re)if(D&o.SQLITE_OPEN_CREATE){let Z=new ArrayBuffer(0,{maxByteLength:Math.min(fn,4*Wt)||4*Wt});re={name:K,flags:D,size:0,data:new Uint8Array(Z),lockType:o.SQLITE_LOCK_NONE},nt.set(K,re)}else return o.SQLITE_CANTOPEN;let oe=new o.sqlite3_file(I);return oe.$pMethods=c.pointer,oe.dispose(),He.set(I,re),_.poke32(O,D),o.SQLITE_OK},xDelete:(r,b,I)=>{let D=_.cstrToJs(b);return nt.delete(D),o.SQLITE_OK},xAccess:(r,b,I,D)=>{let O=_.cstrToJs(b),K=nt.has(O);return _.poke32(D,K?1:0),o.SQLITE_OK},xFullPathname:(r,b,I,D)=>_.cstrncpy(D,b,I)<I?o.SQLITE_OK:o.SQLITE_CANTOPEN,xRandomness:(r,b,I)=>{let D=_.heap8u(),O=0;for(;O<b;++O)D[I+O]=Math.random()*255e3&255;return O},xSleep:(r,b)=>o.SQLITE_OK,xCurrentTime:(r,b)=>(_.poke(b,24405875e-1+new Date().getTime()/864e5,"double"),o.SQLITE_OK),xGetLastError:()=>(console.warn("OPFS xGetLastError() has nothing sensible to return."),o.SQLITE_OK)}),mu=(_,o)=>({xClose:c=>{let r=He.get(c);return He.delete(c),r.flags&o.SQLITE_OPEN_DELETEONCLOSE&&nt.delete(r.name),o.SQLITE_OK},xRead:(c,r,b,I)=>{let D=He.get(c),O=Number(I),K=D.data.subarray(O,O+b);return _.heap8u().set(K,r),K.byteLength<b?(_.heap8u().fill(0,r+K.byteLength,r+b),o.SQLITE_IOERR_SHORT_READ):o.SQLITE_OK},xWrite:(c,r,b,I)=>{let D=He.get(c),O=Number(I);if(O+b>D.data.byteLength)if(D.data.buffer.resizable)D.data.buffer.resize(O+b);else{let re=Math.max(O+b,2*D.data.byteLength),oe=new Uint8Array(re);oe.set(D.data),D.data=oe}let K=_.heap8u().subarray(r,r+b);return D.data.set(K,O),D.size=Math.max(D.size,O+b),o.SQLITE_OK},xTruncate:(c,r)=>{let b=He.get(c),I=Number(r);return b.size=Math.min(b.size,I),b.data.buffer.resizable&&b.data.buffer.resize(I),o.SQLITE_OK},xSync:(c,r)=>o.SQLITE_OK,xFileSize:(c,r)=>{let b=He.get(c);return _.poke64(r,BigInt(b.size)),o.SQLITE_OK},xLock:(c,r)=>{let b=He.get(c);return b.lockType=r,o.SQLITE_OK},xUnlock:(c,r)=>{let b=He.get(c);return b.lockType=r,o.SQLITE_OK},xCheckReservedLock:(c,r)=>{let b=He.get(c);return _.poke(r,b.lockType?1:0,"i32"),o.SQLITE_OK},xFileControl:(c,r,b)=>o.SQLITE_NOTFOUND,xSectorSize:c=>4096,xDeviceCharacteristics:c=>o.SQLITE_IOCAP_UNDELETABLE_WHEN_OPEN});var xr=(()=>{var _="";return function(o={}){var c,r=o,b,I,D=new Promise((e,t)=>{b=e,I=t}),O=typeof window=="object",K=typeof importScripts=="function",re=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type!="renderer",oe=!O&&!re&&!K;let Z=globalThis.sqlite3InitModuleState||Object.assign(Object.create(null),{debugModule:()=>{}});delete globalThis.sqlite3InitModuleState,Z.debugModule("globalThis.location =",globalThis.location);var ue=Object.assign({},r),me=[],we="./this.program",Ie=(e,t)=>{throw t},Oe="";function Ye(e){return r.locateFile?r.locateFile(e,Oe):Oe+e}var Ce,We;(O||K)&&(K?Oe=self.location.href:typeof document<"u"&&document.currentScript&&(Oe=document.currentScript.src),_&&(Oe=_),Oe.startsWith("blob:")?Oe="":Oe=Oe.substr(0,Oe.replace(/[?#].*/,"").lastIndexOf("/")+1),K&&(We=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),Ce=e=>fetch(e,{credentials:"same-origin"}).then(t=>t.ok?t.arrayBuffer():Promise.reject(new Error(t.status+" : "+t.url))));var Ke=r.print||console.log.bind(console),Ne=r.printErr||console.error.bind(console);Object.assign(r,ue),ue=null,r.arguments&&(me=r.arguments),r.thisProgram&&(we=r.thisProgram);var Ze=r.wasmBinary,ze,Ft=!1,kr;function Ir(e,t){e||at(t)}var Ru,De,ot,et,Bn,ve,Pe,tr,je,Un,rr;function Fr(){var e=ze.buffer;r.HEAP8=De=new Int8Array(e),r.HEAP16=et=new Int16Array(e),r.HEAPU8=ot=new Uint8Array(e),r.HEAPU16=Bn=new Uint16Array(e),r.HEAP32=ve=new Int32Array(e),r.HEAPU32=Pe=new Uint32Array(e),r.HEAPF32=tr=new Float32Array(e),r.HEAPF64=rr=new Float64Array(e),r.HEAP64=je=new BigInt64Array(e),r.HEAPU64=Un=new BigUint64Array(e)}if(r.wasmMemory)ze=r.wasmMemory;else{var jn=r.INITIAL_MEMORY||16777216;ze=new WebAssembly.Memory({initial:jn/65536,maximum:32768})}Fr();var Or=[],Pr=[],Cu=[],Lr=[],Wn=!1;function zn(){if(r.preRun)for(typeof r.preRun=="function"&&(r.preRun=[r.preRun]);r.preRun.length;)Qn(r.preRun.shift());or(Or)}function Vn(){Wn=!0,!r.noFSInit&&!u.initialized&&u.init(),u.ignorePermissions=!1,Je.init(),or(Pr)}function Hn(){if(r.postRun)for(typeof r.postRun=="function"&&(r.postRun=[r.postRun]);r.postRun.length;)Gn(r.postRun.shift());or(Lr)}function Qn(e){Or.unshift(e)}function $n(e){Pr.unshift(e)}function Mu(e){}function Gn(e){Lr.unshift(e)}var tt=0,nr=null,ht=null;function Nu(e){return e}function ir(e){tt++,r.monitorRunDependencies?.(tt)}function Ot(e){if(tt--,r.monitorRunDependencies?.(tt),tt==0&&(nr!==null&&(clearInterval(nr),nr=null),ht)){var t=ht;ht=null,t()}}function at(e){r.onAbort?.(e),e="Aborted("+e+")",Ne(e),Ft=!0,e+=". Build with -sASSERTIONS for more info.";var t=new WebAssembly.RuntimeError(e);throw I(t),t}var Kn="data:application/octet-stream;base64,",Dr=e=>e.startsWith(Kn),Bu=e=>e.startsWith("file://");function Jn(){if(r.locateFile){var e="sqlite3.wasm";return Dr(e)?e:Ye(e)}return new URL("sqlite3.wasm","file:./sqlite-viewer-core/vscode/build/assets/").href}var sr;function Rr(e){if(e==sr&&Ze)return new Uint8Array(Ze);if(We)return We(e);throw"both async and sync fetching of the wasm failed"}function Xn(e){return Ze?Promise.resolve().then(()=>Rr(e)):Ce(e).then(t=>new Uint8Array(t),()=>Rr(e))}function Cr(e,t,n){return Xn(e).then(a=>WebAssembly.instantiate(a,t)).then(n,a=>{Ne(`failed to asynchronously prepare wasm: ${a}`),at(a)})}function Yn(e,t,n,a){return!e&&typeof WebAssembly.instantiateStreaming=="function"&&!Dr(t)&&typeof fetch=="function"?fetch(t,{credentials:"same-origin"}).then(i=>{var s=WebAssembly.instantiateStreaming(i,n);return s.then(a,function(g){return Ne(`wasm streaming compile failed: ${g}`),Ne("falling back to ArrayBuffer instantiation"),Cr(t,n,a)})}):Cr(t,n,a)}function Zn(){return{env:zr,wasi_snapshot_preview1:zr}}function ei(){var e=Zn();function t(a,i){return x=a.exports,$n(x.__wasm_call_ctors),Ot("wasm-instantiate"),x}ir("wasm-instantiate");function n(a){t(a.instance)}if(r.instantiateWasm)try{return r.instantiateWasm(e,t)}catch(a){Ne(`Module.instantiateWasm callback failed with error: ${a}`),I(a)}return sr??=Jn(),Yn(Ze,sr,e,n).catch(I),{}}function Uu(e){this.name="ExitStatus",this.message=`Program terminated with exit(${e})`,this.status=e}var or=e=>{for(;e.length>0;)e.shift()(r)};function ju(e,t="i8"){switch(t.endsWith("*")&&(t="*"),t){case"i1":return De[e];case"i8":return De[e];case"i16":return et[e>>1];case"i32":return ve[e>>2];case"i64":return je[e>>3];case"float":return tr[e>>2];case"double":return rr[e>>3];case"*":return Pe[e>>2];default:at(`invalid type for getValue: ${t}`)}}var Wu=r.noExitRuntime||!0;function zu(e,t,n="i8"){switch(n.endsWith("*")&&(n="*"),n){case"i1":De[e]=t;break;case"i8":De[e]=t;break;case"i16":et[e>>1]=t;break;case"i32":ve[e>>2]=t;break;case"i64":je[e>>3]=BigInt(t);break;case"float":tr[e>>2]=t;break;case"double":rr[e>>3]=t;break;case"*":Pe[e>>2]=t;break;default:at(`invalid type for setValue: ${n}`)}}var Vu=e=>Hr(e),Hu=()=>Qr(),Se={isAbs:e=>e.charAt(0)==="/",splitPath:e=>{var t=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return t.exec(e).slice(1)},normalizeArray:(e,t)=>{for(var n=0,a=e.length-1;a>=0;a--){var i=e[a];i==="."?e.splice(a,1):i===".."?(e.splice(a,1),n++):n&&(e.splice(a,1),n--)}if(t)for(;n;n--)e.unshift("..");return e},normalize:e=>{var t=Se.isAbs(e),n=e.substr(-1)==="/";return e=Se.normalizeArray(e.split("/").filter(a=>!!a),!t).join("/"),!e&&!t&&(e="."),e&&n&&(e+="/"),(t?"/":"")+e},dirname:e=>{var t=Se.splitPath(e),n=t[0],a=t[1];return!n&&!a?".":(a&&(a=a.substr(0,a.length-1)),n+a)},basename:e=>{if(e==="/")return"/";e=Se.normalize(e),e=e.replace(/\/$/,"");var t=e.lastIndexOf("/");return t===-1?e:e.substr(t+1)},join:(...e)=>Se.normalize(e.join("/")),join2:(e,t)=>Se.normalize(e+"/"+t)},ti=()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return e=>crypto.getRandomValues(e);at("initRandomDevice")},Mr=e=>(Mr=ti())(e),$e={resolve:(...e)=>{for(var t="",n=!1,a=e.length-1;a>=-1&&!n;a--){var i=a>=0?e[a]:u.cwd();if(typeof i!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!i)return"";t=i+"/"+t,n=Se.isAbs(i)}return t=Se.normalizeArray(t.split("/").filter(s=>!!s),!n).join("/"),(n?"/":"")+t||"."},relative:(e,t)=>{e=$e.resolve(e).substr(1),t=$e.resolve(t).substr(1);function n(W){for(var X=0;X<W.length&&W[X]==="";X++);for(var J=W.length-1;J>=0&&W[J]==="";J--);return X>J?[]:W.slice(X,J-X+1)}for(var a=n(e.split("/")),i=n(t.split("/")),s=Math.min(a.length,i.length),g=s,y=0;y<s;y++)if(a[y]!==i[y]){g=y;break}for(var B=[],y=g;y<a.length;y++)B.push("..");return B=B.concat(i.slice(g)),B.join("/")}},Nr=typeof TextDecoder<"u"?new TextDecoder:void 0,lt=(e,t,n)=>{for(var a=t+n,i=t;e[i]&&!(i>=a);)++i;if(i-t>16&&e.buffer&&Nr)return Nr.decode(e.subarray(t,i));for(var s="";t<i;){var g=e[t++];if(!(g&128)){s+=String.fromCharCode(g);continue}var y=e[t++]&63;if((g&224)==192){s+=String.fromCharCode((g&31)<<6|y);continue}var B=e[t++]&63;if((g&240)==224?g=(g&15)<<12|y<<6|B:g=(g&7)<<18|y<<12|B<<6|e[t++]&63,g<65536)s+=String.fromCharCode(g);else{var W=g-65536;s+=String.fromCharCode(55296|W>>10,56320|W&1023)}}return s},ar=[],Pt=e=>{for(var t=0,n=0;n<e.length;++n){var a=e.charCodeAt(n);a<=127?t++:a<=2047?t+=2:a>=55296&&a<=57343?(t+=4,++n):t+=3}return t},lr=(e,t,n,a)=>{if(!(a>0))return 0;for(var i=n,s=n+a-1,g=0;g<e.length;++g){var y=e.charCodeAt(g);if(y>=55296&&y<=57343){var B=e.charCodeAt(++g);y=65536+((y&1023)<<10)|B&1023}if(y<=127){if(n>=s)break;t[n++]=y}else if(y<=2047){if(n+1>=s)break;t[n++]=192|y>>6,t[n++]=128|y&63}else if(y<=65535){if(n+2>=s)break;t[n++]=224|y>>12,t[n++]=128|y>>6&63,t[n++]=128|y&63}else{if(n+3>=s)break;t[n++]=240|y>>18,t[n++]=128|y>>12&63,t[n++]=128|y>>6&63,t[n++]=128|y&63}}return t[n]=0,n-i};function Br(e,t,n){var a=n>0?n:Pt(e)+1,i=new Array(a),s=lr(e,i,0,i.length);return t&&(i.length=s),i}var ri=()=>{if(!ar.length){var e=null;if(typeof window<"u"&&typeof window.prompt=="function"&&(e=window.prompt("Input: "),e!==null&&(e+=`
`)),!e)return null;ar=Br(e,!0)}return ar.shift()},Je={ttys:[],init(){},shutdown(){},register(e,t){Je.ttys[e]={input:[],output:[],ops:t},u.registerDevice(e,Je.stream_ops)},stream_ops:{open(e){var t=Je.ttys[e.node.rdev];if(!t)throw new u.ErrnoError(43);e.tty=t,e.seekable=!1},close(e){e.tty.ops.fsync(e.tty)},fsync(e){e.tty.ops.fsync(e.tty)},read(e,t,n,a,i){if(!e.tty||!e.tty.ops.get_char)throw new u.ErrnoError(60);for(var s=0,g=0;g<a;g++){var y;try{y=e.tty.ops.get_char(e.tty)}catch{throw new u.ErrnoError(29)}if(y===void 0&&s===0)throw new u.ErrnoError(6);if(y==null)break;s++,t[n+g]=y}return s&&(e.node.timestamp=Date.now()),s},write(e,t,n,a,i){if(!e.tty||!e.tty.ops.put_char)throw new u.ErrnoError(60);try{for(var s=0;s<a;s++)e.tty.ops.put_char(e.tty,t[n+s])}catch{throw new u.ErrnoError(29)}return a&&(e.node.timestamp=Date.now()),s}},default_tty_ops:{get_char(e){return ri()},put_char(e,t){t===null||t===10?(Ke(lt(e.output,0)),e.output=[]):t!=0&&e.output.push(t)},fsync(e){e.output&&e.output.length>0&&(Ke(lt(e.output,0)),e.output=[])},ioctl_tcgets(e){return{c_iflag:25856,c_oflag:5,c_cflag:191,c_lflag:35387,c_cc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},ioctl_tcsets(e,t,n){return 0},ioctl_tiocgwinsz(e){return[24,80]}},default_tty1_ops:{put_char(e,t){t===null||t===10?(Ne(lt(e.output,0)),e.output=[]):t!=0&&e.output.push(t)},fsync(e){e.output&&e.output.length>0&&(Ne(lt(e.output,0)),e.output=[])}}},ni=(e,t)=>(ot.fill(0,e,e+t),e),Ur=(e,t)=>Math.ceil(e/t)*t,jr=e=>{e=Ur(e,65536);var t=Vr(65536,e);return t?ni(t,e):0},be={ops_table:null,mount(e){return be.createNode(null,"/",16895,0)},createNode(e,t,n,a){if(u.isBlkdev(n)||u.isFIFO(n))throw new u.ErrnoError(63);be.ops_table||={dir:{node:{getattr:be.node_ops.getattr,setattr:be.node_ops.setattr,lookup:be.node_ops.lookup,mknod:be.node_ops.mknod,rename:be.node_ops.rename,unlink:be.node_ops.unlink,rmdir:be.node_ops.rmdir,readdir:be.node_ops.readdir,symlink:be.node_ops.symlink},stream:{llseek:be.stream_ops.llseek}},file:{node:{getattr:be.node_ops.getattr,setattr:be.node_ops.setattr},stream:{llseek:be.stream_ops.llseek,read:be.stream_ops.read,write:be.stream_ops.write,allocate:be.stream_ops.allocate,mmap:be.stream_ops.mmap,msync:be.stream_ops.msync}},link:{node:{getattr:be.node_ops.getattr,setattr:be.node_ops.setattr,readlink:be.node_ops.readlink},stream:{}},chrdev:{node:{getattr:be.node_ops.getattr,setattr:be.node_ops.setattr},stream:u.chrdev_stream_ops}};var i=u.createNode(e,t,n,a);return u.isDir(i.mode)?(i.node_ops=be.ops_table.dir.node,i.stream_ops=be.ops_table.dir.stream,i.contents={}):u.isFile(i.mode)?(i.node_ops=be.ops_table.file.node,i.stream_ops=be.ops_table.file.stream,i.usedBytes=0,i.contents=null):u.isLink(i.mode)?(i.node_ops=be.ops_table.link.node,i.stream_ops=be.ops_table.link.stream):u.isChrdev(i.mode)&&(i.node_ops=be.ops_table.chrdev.node,i.stream_ops=be.ops_table.chrdev.stream),i.timestamp=Date.now(),e&&(e.contents[t]=i,e.timestamp=i.timestamp),i},getFileDataAsTypedArray(e){return e.contents?e.contents.subarray?e.contents.subarray(0,e.usedBytes):new Uint8Array(e.contents):new Uint8Array(0)},expandFileStorage(e,t){var n=e.contents?e.contents.length:0;if(!(n>=t)){var a=1024*1024;t=Math.max(t,n*(n<a?2:1.125)>>>0),n!=0&&(t=Math.max(t,256));var i=e.contents;e.contents=new Uint8Array(t),e.usedBytes>0&&e.contents.set(i.subarray(0,e.usedBytes),0)}},resizeFileStorage(e,t){if(e.usedBytes!=t)if(t==0)e.contents=null,e.usedBytes=0;else{var n=e.contents;e.contents=new Uint8Array(t),n&&e.contents.set(n.subarray(0,Math.min(t,e.usedBytes))),e.usedBytes=t}},node_ops:{getattr(e){var t={};return t.dev=u.isChrdev(e.mode)?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,u.isDir(e.mode)?t.size=4096:u.isFile(e.mode)?t.size=e.usedBytes:u.isLink(e.mode)?t.size=e.link.length:t.size=0,t.atime=new Date(e.timestamp),t.mtime=new Date(e.timestamp),t.ctime=new Date(e.timestamp),t.blksize=4096,t.blocks=Math.ceil(t.size/t.blksize),t},setattr(e,t){t.mode!==void 0&&(e.mode=t.mode),t.timestamp!==void 0&&(e.timestamp=t.timestamp),t.size!==void 0&&be.resizeFileStorage(e,t.size)},lookup(e,t){throw u.genericErrors[44]},mknod(e,t,n,a){return be.createNode(e,t,n,a)},rename(e,t,n){if(u.isDir(e.mode)){var a;try{a=u.lookupNode(t,n)}catch{}if(a)for(var i in a.contents)throw new u.ErrnoError(55)}delete e.parent.contents[e.name],e.parent.timestamp=Date.now(),e.name=n,t.contents[n]=e,t.timestamp=e.parent.timestamp},unlink(e,t){delete e.contents[t],e.timestamp=Date.now()},rmdir(e,t){var n=u.lookupNode(e,t);for(var a in n.contents)throw new u.ErrnoError(55);delete e.contents[t],e.timestamp=Date.now()},readdir(e){var t=[".",".."];for(var n of Object.keys(e.contents))t.push(n);return t},symlink(e,t,n){var a=be.createNode(e,t,41471,0);return a.link=n,a},readlink(e){if(!u.isLink(e.mode))throw new u.ErrnoError(28);return e.link}},stream_ops:{read(e,t,n,a,i){var s=e.node.contents;if(i>=e.node.usedBytes)return 0;var g=Math.min(e.node.usedBytes-i,a);if(g>8&&s.subarray)t.set(s.subarray(i,i+g),n);else for(var y=0;y<g;y++)t[n+y]=s[i+y];return g},write(e,t,n,a,i,s){if(t.buffer===De.buffer&&(s=!1),!a)return 0;var g=e.node;if(g.timestamp=Date.now(),t.subarray&&(!g.contents||g.contents.subarray)){if(s)return g.contents=t.subarray(n,n+a),g.usedBytes=a,a;if(g.usedBytes===0&&i===0)return g.contents=t.slice(n,n+a),g.usedBytes=a,a;if(i+a<=g.usedBytes)return g.contents.set(t.subarray(n,n+a),i),a}if(be.expandFileStorage(g,i+a),g.contents.subarray&&t.subarray)g.contents.set(t.subarray(n,n+a),i);else for(var y=0;y<a;y++)g.contents[i+y]=t[n+y];return g.usedBytes=Math.max(g.usedBytes,i+a),a},llseek(e,t,n){var a=t;if(n===1?a+=e.position:n===2&&u.isFile(e.node.mode)&&(a+=e.node.usedBytes),a<0)throw new u.ErrnoError(28);return a},allocate(e,t,n){be.expandFileStorage(e.node,t+n),e.node.usedBytes=Math.max(e.node.usedBytes,t+n)},mmap(e,t,n,a,i){if(!u.isFile(e.node.mode))throw new u.ErrnoError(43);var s,g,y=e.node.contents;if(!(i&2)&&y&&y.buffer===De.buffer)g=!1,s=y.byteOffset;else{if(g=!0,s=jr(t),!s)throw new u.ErrnoError(48);y&&((n>0||n+t<y.length)&&(y.subarray?y=y.subarray(n,n+t):y=Array.prototype.slice.call(y,n,n+t)),De.set(y,s))}return{ptr:s,allocated:g}},msync(e,t,n,a,i){return be.stream_ops.write(e,t,0,a,n,!1),0}}},ii=(e,t,n,a)=>{var i=a?"":`al ${e}`;Ce(e).then(s=>{t(new Uint8Array(s)),i&&Ot(i)},s=>{if(n)n();else throw`Loading data file "${e}" failed.`}),i&&ir(i)},si=(e,t,n,a,i,s)=>{u.createDataFile(e,t,n,a,i,s)},oi=r.preloadPlugins||[],ai=(e,t,n,a)=>{typeof Browser<"u"&&Browser.init();var i=!1;return oi.forEach(s=>{i||s.canHandle(t)&&(s.handle(e,t,n,a),i=!0)}),i},li=(e,t,n,a,i,s,g,y,B,W)=>{var X=t?$e.resolve(Se.join2(e,t)):e,J=`cp ${X}`;function te(F){function P(M){W?.(),y||si(e,t,M,a,i,B),s?.(),Ot(J)}ai(F,X,P,()=>{g?.(),Ot(J)})||P(F)}ir(J),typeof n=="string"?ii(n,te,g):te(n)},ci=e=>{var t={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},n=t[e];if(typeof n>"u")throw new Error(`Unknown file open mode: ${e}`);return n},cr=(e,t)=>{var n=0;return e&&(n|=365),t&&(n|=146),n},u={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:class{constructor(e){this.name="ErrnoError",this.errno=e}},genericErrors:{},filesystems:null,syncFSRequests:0,readFiles:{},FSStream:class{constructor(){this.shared={}}get object(){return this.node}set object(e){this.node=e}get isRead(){return(this.flags&2097155)!==1}get isWrite(){return(this.flags&2097155)!==0}get isAppend(){return this.flags&1024}get flags(){return this.shared.flags}set flags(e){this.shared.flags=e}get position(){return this.shared.position}set position(e){this.shared.position=e}},FSNode:class{constructor(e,t,n,a){e||(e=this),this.parent=e,this.mount=e.mount,this.mounted=null,this.id=u.nextInode++,this.name=t,this.mode=n,this.node_ops={},this.stream_ops={},this.rdev=a,this.readMode=365,this.writeMode=146}get read(){return(this.mode&this.readMode)===this.readMode}set read(e){e?this.mode|=this.readMode:this.mode&=~this.readMode}get write(){return(this.mode&this.writeMode)===this.writeMode}set write(e){e?this.mode|=this.writeMode:this.mode&=~this.writeMode}get isFolder(){return u.isDir(this.mode)}get isDevice(){return u.isChrdev(this.mode)}},lookupPath(e,t={}){if(e=$e.resolve(e),!e)return{path:"",node:null};var n={follow_mount:!0,recurse_count:0};if(t=Object.assign(n,t),t.recurse_count>8)throw new u.ErrnoError(32);for(var a=e.split("/").filter(J=>!!J),i=u.root,s="/",g=0;g<a.length;g++){var y=g===a.length-1;if(y&&t.parent)break;if(i=u.lookupNode(i,a[g]),s=Se.join2(s,a[g]),u.isMountpoint(i)&&(!y||y&&t.follow_mount)&&(i=i.mounted.root),!y||t.follow)for(var B=0;u.isLink(i.mode);){var W=u.readlink(s);s=$e.resolve(Se.dirname(s),W);var X=u.lookupPath(s,{recurse_count:t.recurse_count+1});if(i=X.node,B++>40)throw new u.ErrnoError(32)}}return{path:s,node:i}},getPath(e){for(var t;;){if(u.isRoot(e)){var n=e.mount.mountpoint;return t?n[n.length-1]!=="/"?`${n}/${t}`:n+t:n}t=t?`${e.name}/${t}`:e.name,e=e.parent}},hashName(e,t){for(var n=0,a=0;a<t.length;a++)n=(n<<5)-n+t.charCodeAt(a)|0;return(e+n>>>0)%u.nameTable.length},hashAddNode(e){var t=u.hashName(e.parent.id,e.name);e.name_next=u.nameTable[t],u.nameTable[t]=e},hashRemoveNode(e){var t=u.hashName(e.parent.id,e.name);if(u.nameTable[t]===e)u.nameTable[t]=e.name_next;else for(var n=u.nameTable[t];n;){if(n.name_next===e){n.name_next=e.name_next;break}n=n.name_next}},lookupNode(e,t){var n=u.mayLookup(e);if(n)throw new u.ErrnoError(n);for(var a=u.hashName(e.id,t),i=u.nameTable[a];i;i=i.name_next){var s=i.name;if(i.parent.id===e.id&&s===t)return i}return u.lookup(e,t)},createNode(e,t,n,a){var i=new u.FSNode(e,t,n,a);return u.hashAddNode(i),i},destroyNode(e){u.hashRemoveNode(e)},isRoot(e){return e===e.parent},isMountpoint(e){return!!e.mounted},isFile(e){return(e&61440)===32768},isDir(e){return(e&61440)===16384},isLink(e){return(e&61440)===40960},isChrdev(e){return(e&61440)===8192},isBlkdev(e){return(e&61440)===24576},isFIFO(e){return(e&61440)===4096},isSocket(e){return(e&49152)===49152},flagsToPermissionString(e){var t=["r","w","rw"][e&3];return e&512&&(t+="w"),t},nodePermissions(e,t){return u.ignorePermissions?0:t.includes("r")&&!(e.mode&292)||t.includes("w")&&!(e.mode&146)||t.includes("x")&&!(e.mode&73)?2:0},mayLookup(e){if(!u.isDir(e.mode))return 54;var t=u.nodePermissions(e,"x");return t||(e.node_ops.lookup?0:2)},mayCreate(e,t){try{var n=u.lookupNode(e,t);return 20}catch{}return u.nodePermissions(e,"wx")},mayDelete(e,t,n){var a;try{a=u.lookupNode(e,t)}catch(s){return s.errno}var i=u.nodePermissions(e,"wx");if(i)return i;if(n){if(!u.isDir(a.mode))return 54;if(u.isRoot(a)||u.getPath(a)===u.cwd())return 10}else if(u.isDir(a.mode))return 31;return 0},mayOpen(e,t){return e?u.isLink(e.mode)?32:u.isDir(e.mode)&&(u.flagsToPermissionString(t)!=="r"||t&512)?31:u.nodePermissions(e,u.flagsToPermissionString(t)):44},MAX_OPEN_FDS:4096,nextfd(){for(var e=0;e<=u.MAX_OPEN_FDS;e++)if(!u.streams[e])return e;throw new u.ErrnoError(33)},getStreamChecked(e){var t=u.getStream(e);if(!t)throw new u.ErrnoError(8);return t},getStream:e=>u.streams[e],createStream(e,t=-1){return e=Object.assign(new u.FSStream,e),t==-1&&(t=u.nextfd()),e.fd=t,u.streams[t]=e,e},closeStream(e){u.streams[e]=null},dupStream(e,t=-1){var n=u.createStream(e,t);return n.stream_ops?.dup?.(n),n},chrdev_stream_ops:{open(e){var t=u.getDevice(e.node.rdev);e.stream_ops=t.stream_ops,e.stream_ops.open?.(e)},llseek(){throw new u.ErrnoError(70)}},major:e=>e>>8,minor:e=>e&255,makedev:(e,t)=>e<<8|t,registerDevice(e,t){u.devices[e]={stream_ops:t}},getDevice:e=>u.devices[e],getMounts(e){for(var t=[],n=[e];n.length;){var a=n.pop();t.push(a),n.push(...a.mounts)}return t},syncfs(e,t){typeof e=="function"&&(t=e,e=!1),u.syncFSRequests++,u.syncFSRequests>1&&Ne(`warning: ${u.syncFSRequests} FS.syncfs operations in flight at once, probably just doing extra work`);var n=u.getMounts(u.root.mount),a=0;function i(g){return u.syncFSRequests--,t(g)}function s(g){if(g)return s.errored?void 0:(s.errored=!0,i(g));++a>=n.length&&i(null)}n.forEach(g=>{if(!g.type.syncfs)return s(null);g.type.syncfs(g,e,s)})},mount(e,t,n){var a=n==="/",i=!n,s;if(a&&u.root)throw new u.ErrnoError(10);if(!a&&!i){var g=u.lookupPath(n,{follow_mount:!1});if(n=g.path,s=g.node,u.isMountpoint(s))throw new u.ErrnoError(10);if(!u.isDir(s.mode))throw new u.ErrnoError(54)}var y={type:e,opts:t,mountpoint:n,mounts:[]},B=e.mount(y);return B.mount=y,y.root=B,a?u.root=B:s&&(s.mounted=y,s.mount&&s.mount.mounts.push(y)),B},unmount(e){var t=u.lookupPath(e,{follow_mount:!1});if(!u.isMountpoint(t.node))throw new u.ErrnoError(28);var n=t.node,a=n.mounted,i=u.getMounts(a);Object.keys(u.nameTable).forEach(g=>{for(var y=u.nameTable[g];y;){var B=y.name_next;i.includes(y.mount)&&u.destroyNode(y),y=B}}),n.mounted=null;var s=n.mount.mounts.indexOf(a);n.mount.mounts.splice(s,1)},lookup(e,t){return e.node_ops.lookup(e,t)},mknod(e,t,n){var a=u.lookupPath(e,{parent:!0}),i=a.node,s=Se.basename(e);if(!s||s==="."||s==="..")throw new u.ErrnoError(28);var g=u.mayCreate(i,s);if(g)throw new u.ErrnoError(g);if(!i.node_ops.mknod)throw new u.ErrnoError(63);return i.node_ops.mknod(i,s,t,n)},create(e,t){return t=t!==void 0?t:438,t&=4095,t|=32768,u.mknod(e,t,0)},mkdir(e,t){return t=t!==void 0?t:511,t&=1023,t|=16384,u.mknod(e,t,0)},mkdirTree(e,t){for(var n=e.split("/"),a="",i=0;i<n.length;++i)if(n[i]){a+="/"+n[i];try{u.mkdir(a,t)}catch(s){if(s.errno!=20)throw s}}},mkdev(e,t,n){return typeof n>"u"&&(n=t,t=438),t|=8192,u.mknod(e,t,n)},symlink(e,t){if(!$e.resolve(e))throw new u.ErrnoError(44);var n=u.lookupPath(t,{parent:!0}),a=n.node;if(!a)throw new u.ErrnoError(44);var i=Se.basename(t),s=u.mayCreate(a,i);if(s)throw new u.ErrnoError(s);if(!a.node_ops.symlink)throw new u.ErrnoError(63);return a.node_ops.symlink(a,i,e)},rename(e,t){var n=Se.dirname(e),a=Se.dirname(t),i=Se.basename(e),s=Se.basename(t),g,y,B;if(g=u.lookupPath(e,{parent:!0}),y=g.node,g=u.lookupPath(t,{parent:!0}),B=g.node,!y||!B)throw new u.ErrnoError(44);if(y.mount!==B.mount)throw new u.ErrnoError(75);var W=u.lookupNode(y,i),X=$e.relative(e,a);if(X.charAt(0)!==".")throw new u.ErrnoError(28);if(X=$e.relative(t,n),X.charAt(0)!==".")throw new u.ErrnoError(55);var J;try{J=u.lookupNode(B,s)}catch{}if(W!==J){var te=u.isDir(W.mode),F=u.mayDelete(y,i,te);if(F)throw new u.ErrnoError(F);if(F=J?u.mayDelete(B,s,te):u.mayCreate(B,s),F)throw new u.ErrnoError(F);if(!y.node_ops.rename)throw new u.ErrnoError(63);if(u.isMountpoint(W)||J&&u.isMountpoint(J))throw new u.ErrnoError(10);if(B!==y&&(F=u.nodePermissions(y,"w"),F))throw new u.ErrnoError(F);u.hashRemoveNode(W);try{y.node_ops.rename(W,B,s),W.parent=B}catch(P){throw P}finally{u.hashAddNode(W)}}},rmdir(e){var t=u.lookupPath(e,{parent:!0}),n=t.node,a=Se.basename(e),i=u.lookupNode(n,a),s=u.mayDelete(n,a,!0);if(s)throw new u.ErrnoError(s);if(!n.node_ops.rmdir)throw new u.ErrnoError(63);if(u.isMountpoint(i))throw new u.ErrnoError(10);n.node_ops.rmdir(n,a),u.destroyNode(i)},readdir(e){var t=u.lookupPath(e,{follow:!0}),n=t.node;if(!n.node_ops.readdir)throw new u.ErrnoError(54);return n.node_ops.readdir(n)},unlink(e){var t=u.lookupPath(e,{parent:!0}),n=t.node;if(!n)throw new u.ErrnoError(44);var a=Se.basename(e),i=u.lookupNode(n,a),s=u.mayDelete(n,a,!1);if(s)throw new u.ErrnoError(s);if(!n.node_ops.unlink)throw new u.ErrnoError(63);if(u.isMountpoint(i))throw new u.ErrnoError(10);n.node_ops.unlink(n,a),u.destroyNode(i)},readlink(e){var t=u.lookupPath(e),n=t.node;if(!n)throw new u.ErrnoError(44);if(!n.node_ops.readlink)throw new u.ErrnoError(28);return $e.resolve(u.getPath(n.parent),n.node_ops.readlink(n))},stat(e,t){var n=u.lookupPath(e,{follow:!t}),a=n.node;if(!a)throw new u.ErrnoError(44);if(!a.node_ops.getattr)throw new u.ErrnoError(63);return a.node_ops.getattr(a)},lstat(e){return u.stat(e,!0)},chmod(e,t,n){var a;if(typeof e=="string"){var i=u.lookupPath(e,{follow:!n});a=i.node}else a=e;if(!a.node_ops.setattr)throw new u.ErrnoError(63);a.node_ops.setattr(a,{mode:t&4095|a.mode&-4096,timestamp:Date.now()})},lchmod(e,t){u.chmod(e,t,!0)},fchmod(e,t){var n=u.getStreamChecked(e);u.chmod(n.node,t)},chown(e,t,n,a){var i;if(typeof e=="string"){var s=u.lookupPath(e,{follow:!a});i=s.node}else i=e;if(!i.node_ops.setattr)throw new u.ErrnoError(63);i.node_ops.setattr(i,{timestamp:Date.now()})},lchown(e,t,n){u.chown(e,t,n,!0)},fchown(e,t,n){var a=u.getStreamChecked(e);u.chown(a.node,t,n)},truncate(e,t){if(t<0)throw new u.ErrnoError(28);var n;if(typeof e=="string"){var a=u.lookupPath(e,{follow:!0});n=a.node}else n=e;if(!n.node_ops.setattr)throw new u.ErrnoError(63);if(u.isDir(n.mode))throw new u.ErrnoError(31);if(!u.isFile(n.mode))throw new u.ErrnoError(28);var i=u.nodePermissions(n,"w");if(i)throw new u.ErrnoError(i);n.node_ops.setattr(n,{size:t,timestamp:Date.now()})},ftruncate(e,t){var n=u.getStreamChecked(e);if(!(n.flags&2097155))throw new u.ErrnoError(28);u.truncate(n.node,t)},utime(e,t,n){var a=u.lookupPath(e,{follow:!0}),i=a.node;i.node_ops.setattr(i,{timestamp:Math.max(t,n)})},open(e,t,n){if(e==="")throw new u.ErrnoError(44);t=typeof t=="string"?ci(t):t,t&64?(n=typeof n>"u"?438:n,n=n&4095|32768):n=0;var a;if(typeof e=="object")a=e;else{e=Se.normalize(e);try{var i=u.lookupPath(e,{follow:!(t&131072)});a=i.node}catch{}}var s=!1;if(t&64)if(a){if(t&128)throw new u.ErrnoError(20)}else a=u.mknod(e,n,0),s=!0;if(!a)throw new u.ErrnoError(44);if(u.isChrdev(a.mode)&&(t&=-513),t&65536&&!u.isDir(a.mode))throw new u.ErrnoError(54);if(!s){var g=u.mayOpen(a,t);if(g)throw new u.ErrnoError(g)}t&512&&!s&&u.truncate(a,0),t&=-131713;var y=u.createStream({node:a,path:u.getPath(a),flags:t,seekable:!0,position:0,stream_ops:a.stream_ops,ungotten:[],error:!1});return y.stream_ops.open&&y.stream_ops.open(y),r.logReadFiles&&!(t&1)&&(e in u.readFiles||(u.readFiles[e]=1)),y},close(e){if(u.isClosed(e))throw new u.ErrnoError(8);e.getdents&&(e.getdents=null);try{e.stream_ops.close&&e.stream_ops.close(e)}catch(t){throw t}finally{u.closeStream(e.fd)}e.fd=null},isClosed(e){return e.fd===null},llseek(e,t,n){if(u.isClosed(e))throw new u.ErrnoError(8);if(!e.seekable||!e.stream_ops.llseek)throw new u.ErrnoError(70);if(n!=0&&n!=1&&n!=2)throw new u.ErrnoError(28);return e.position=e.stream_ops.llseek(e,t,n),e.ungotten=[],e.position},read(e,t,n,a,i){if(a<0||i<0)throw new u.ErrnoError(28);if(u.isClosed(e))throw new u.ErrnoError(8);if((e.flags&2097155)===1)throw new u.ErrnoError(8);if(u.isDir(e.node.mode))throw new u.ErrnoError(31);if(!e.stream_ops.read)throw new u.ErrnoError(28);var s=typeof i<"u";if(!s)i=e.position;else if(!e.seekable)throw new u.ErrnoError(70);var g=e.stream_ops.read(e,t,n,a,i);return s||(e.position+=g),g},write(e,t,n,a,i,s){if(a<0||i<0)throw new u.ErrnoError(28);if(u.isClosed(e))throw new u.ErrnoError(8);if(!(e.flags&2097155))throw new u.ErrnoError(8);if(u.isDir(e.node.mode))throw new u.ErrnoError(31);if(!e.stream_ops.write)throw new u.ErrnoError(28);e.seekable&&e.flags&1024&&u.llseek(e,0,2);var g=typeof i<"u";if(!g)i=e.position;else if(!e.seekable)throw new u.ErrnoError(70);var y=e.stream_ops.write(e,t,n,a,i,s);return g||(e.position+=y),y},allocate(e,t,n){if(u.isClosed(e))throw new u.ErrnoError(8);if(t<0||n<=0)throw new u.ErrnoError(28);if(!(e.flags&2097155))throw new u.ErrnoError(8);if(!u.isFile(e.node.mode)&&!u.isDir(e.node.mode))throw new u.ErrnoError(43);if(!e.stream_ops.allocate)throw new u.ErrnoError(138);e.stream_ops.allocate(e,t,n)},mmap(e,t,n,a,i){if(a&2&&!(i&2)&&(e.flags&2097155)!==2)throw new u.ErrnoError(2);if((e.flags&2097155)===1)throw new u.ErrnoError(2);if(!e.stream_ops.mmap)throw new u.ErrnoError(43);if(!t)throw new u.ErrnoError(28);return e.stream_ops.mmap(e,t,n,a,i)},msync(e,t,n,a,i){return e.stream_ops.msync?e.stream_ops.msync(e,t,n,a,i):0},ioctl(e,t,n){if(!e.stream_ops.ioctl)throw new u.ErrnoError(59);return e.stream_ops.ioctl(e,t,n)},readFile(e,t={}){if(t.flags=t.flags||0,t.encoding=t.encoding||"binary",t.encoding!=="utf8"&&t.encoding!=="binary")throw new Error(`Invalid encoding type "${t.encoding}"`);var n,a=u.open(e,t.flags),i=u.stat(e),s=i.size,g=new Uint8Array(s);return u.read(a,g,0,s,0),t.encoding==="utf8"?n=lt(g,0):t.encoding==="binary"&&(n=g),u.close(a),n},writeFile(e,t,n={}){n.flags=n.flags||577;var a=u.open(e,n.flags,n.mode);if(typeof t=="string"){var i=new Uint8Array(Pt(t)+1),s=lr(t,i,0,i.length);u.write(a,i,0,s,void 0,n.canOwn)}else if(ArrayBuffer.isView(t))u.write(a,t,0,t.byteLength,void 0,n.canOwn);else throw new Error("Unsupported data type");u.close(a)},cwd:()=>u.currentPath,chdir(e){var t=u.lookupPath(e,{follow:!0});if(t.node===null)throw new u.ErrnoError(44);if(!u.isDir(t.node.mode))throw new u.ErrnoError(54);var n=u.nodePermissions(t.node,"x");if(n)throw new u.ErrnoError(n);u.currentPath=t.path},createDefaultDirectories(){u.mkdir("/tmp"),u.mkdir("/home"),u.mkdir("/home/web_user")},createDefaultDevices(){u.mkdir("/dev"),u.registerDevice(u.makedev(1,3),{read:()=>0,write:(a,i,s,g,y)=>g}),u.mkdev("/dev/null",u.makedev(1,3)),Je.register(u.makedev(5,0),Je.default_tty_ops),Je.register(u.makedev(6,0),Je.default_tty1_ops),u.mkdev("/dev/tty",u.makedev(5,0)),u.mkdev("/dev/tty1",u.makedev(6,0));var e=new Uint8Array(1024),t=0,n=()=>(t===0&&(t=Mr(e).byteLength),e[--t]);u.createDevice("/dev","random",n),u.createDevice("/dev","urandom",n),u.mkdir("/dev/shm"),u.mkdir("/dev/shm/tmp")},createSpecialDirectories(){u.mkdir("/proc");var e=u.mkdir("/proc/self");u.mkdir("/proc/self/fd"),u.mount({mount(){var t=u.createNode(e,"fd",16895,73);return t.node_ops={lookup(n,a){var i=+a,s=u.getStreamChecked(i),g={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>s.path}};return g.parent=g,g}},t}},{},"/proc/self/fd")},createStandardStreams(e,t,n){e?u.createDevice("/dev","stdin",e):u.symlink("/dev/tty","/dev/stdin"),t?u.createDevice("/dev","stdout",null,t):u.symlink("/dev/tty","/dev/stdout"),n?u.createDevice("/dev","stderr",null,n):u.symlink("/dev/tty1","/dev/stderr");var a=u.open("/dev/stdin",0),i=u.open("/dev/stdout",1),s=u.open("/dev/stderr",1)},staticInit(){[44].forEach(e=>{u.genericErrors[e]=new u.ErrnoError(e),u.genericErrors[e].stack="<generic error, no stack>"}),u.nameTable=new Array(4096),u.mount(be,{},"/"),u.createDefaultDirectories(),u.createDefaultDevices(),u.createSpecialDirectories(),u.filesystems={MEMFS:be}},init(e,t,n){u.initialized=!0,e??=r.stdin,t??=r.stdout,n??=r.stderr,u.createStandardStreams(e,t,n)},quit(){u.initialized=!1;for(var e=0;e<u.streams.length;e++){var t=u.streams[e];t&&u.close(t)}},findObject(e,t){var n=u.analyzePath(e,t);return n.exists?n.object:null},analyzePath(e,t){try{var n=u.lookupPath(e,{follow:!t});e=n.path}catch{}var a={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var n=u.lookupPath(e,{parent:!0});a.parentExists=!0,a.parentPath=n.path,a.parentObject=n.node,a.name=Se.basename(e),n=u.lookupPath(e,{follow:!t}),a.exists=!0,a.path=n.path,a.object=n.node,a.name=n.node.name,a.isRoot=n.path==="/"}catch(i){a.error=i.errno}return a},createPath(e,t,n,a){e=typeof e=="string"?e:u.getPath(e);for(var i=t.split("/").reverse();i.length;){var s=i.pop();if(s){var g=Se.join2(e,s);try{u.mkdir(g)}catch{}e=g}}return g},createFile(e,t,n,a,i){var s=Se.join2(typeof e=="string"?e:u.getPath(e),t),g=cr(a,i);return u.create(s,g)},createDataFile(e,t,n,a,i,s){var g=t;e&&(e=typeof e=="string"?e:u.getPath(e),g=t?Se.join2(e,t):e);var y=cr(a,i),B=u.create(g,y);if(n){if(typeof n=="string"){for(var W=new Array(n.length),X=0,J=n.length;X<J;++X)W[X]=n.charCodeAt(X);n=W}u.chmod(B,y|146);var te=u.open(B,577);u.write(te,n,0,n.length,0,s),u.close(te),u.chmod(B,y)}},createDevice(e,t,n,a){var i=Se.join2(typeof e=="string"?e:u.getPath(e),t),s=cr(!!n,!!a);u.createDevice.major??=64;var g=u.makedev(u.createDevice.major++,0);return u.registerDevice(g,{open(y){y.seekable=!1},close(y){a?.buffer?.length&&a(10)},read(y,B,W,X,J){for(var te=0,F=0;F<X;F++){var P;try{P=n()}catch{throw new u.ErrnoError(29)}if(P===void 0&&te===0)throw new u.ErrnoError(6);if(P==null)break;te++,B[W+F]=P}return te&&(y.node.timestamp=Date.now()),te},write(y,B,W,X,J){for(var te=0;te<X;te++)try{a(B[W+te])}catch{throw new u.ErrnoError(29)}return X&&(y.node.timestamp=Date.now()),te}}),u.mkdev(i,s,g)},forceLoadFile(e){if(e.isDevice||e.isFolder||e.link||e.contents)return!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");try{e.contents=We(e.url),e.usedBytes=e.contents.length}catch{throw new u.ErrnoError(29)}},createLazyFile(e,t,n,a,i){class s{constructor(){this.lengthKnown=!1,this.chunks=[]}get(F){if(!(F>this.length-1||F<0)){var P=F%this.chunkSize,M=F/this.chunkSize|0;return this.getter(M)[P]}}setDataGetter(F){this.getter=F}cacheLength(){var F=new XMLHttpRequest;if(F.open("HEAD",n,!1),F.send(null),!(F.status>=200&&F.status<300||F.status===304))throw new Error("Couldn't load "+n+". Status: "+F.status);var P=Number(F.getResponseHeader("Content-length")),M,T=(M=F.getResponseHeader("Accept-Ranges"))&&M==="bytes",q=(M=F.getResponseHeader("Content-Encoding"))&&M==="gzip",N=1024*1024;T||(N=P);var z=(E,G)=>{if(E>G)throw new Error("invalid range ("+E+", "+G+") or no bytes requested!");if(G>P-1)throw new Error("only "+P+" bytes available! programmer error!");var p=new XMLHttpRequest;if(p.open("GET",n,!1),P!==N&&p.setRequestHeader("Range","bytes="+E+"-"+G),p.responseType="arraybuffer",p.overrideMimeType&&p.overrideMimeType("text/plain; charset=x-user-defined"),p.send(null),!(p.status>=200&&p.status<300||p.status===304))throw new Error("Couldn't load "+n+". Status: "+p.status);return p.response!==void 0?new Uint8Array(p.response||[]):Br(p.responseText||"",!0)},H=this;H.setDataGetter(E=>{var G=E*N,p=(E+1)*N-1;if(p=Math.min(p,P-1),typeof H.chunks[E]>"u"&&(H.chunks[E]=z(G,p)),typeof H.chunks[E]>"u")throw new Error("doXHR failed!");return H.chunks[E]}),(q||!P)&&(N=P=1,P=this.getter(0).length,N=P,Ke("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=P,this._chunkSize=N,this.lengthKnown=!0}get length(){return this.lengthKnown||this.cacheLength(),this._length}get chunkSize(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}if(typeof XMLHttpRequest<"u"){if(!K)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var g=new s,y={isDevice:!1,contents:g}}else var y={isDevice:!1,url:n};var B=u.createFile(e,t,y,a,i);y.contents?B.contents=y.contents:y.url&&(B.contents=null,B.url=y.url),Object.defineProperties(B,{usedBytes:{get:function(){return this.contents.length}}});var W={},X=Object.keys(B.stream_ops);X.forEach(te=>{var F=B.stream_ops[te];W[te]=(...P)=>(u.forceLoadFile(B),F(...P))});function J(te,F,P,M,T){var q=te.node.contents;if(T>=q.length)return 0;var N=Math.min(q.length-T,M);if(q.slice)for(var z=0;z<N;z++)F[P+z]=q[T+z];else for(var z=0;z<N;z++)F[P+z]=q.get(T+z);return N}return W.read=(te,F,P,M,T)=>(u.forceLoadFile(B),J(te,F,P,M,T)),W.mmap=(te,F,P,M,T)=>{u.forceLoadFile(B);var q=jr(F);if(!q)throw new u.ErrnoError(48);return J(te,De,q,F,P),{ptr:q,allocated:!0}},B.stream_ops=W,B}},ui=(e,t)=>e?lt(ot,e,t):"",ye={DEFAULT_POLLMASK:5,calculateAt(e,t,n){if(Se.isAbs(t))return t;var a;if(e===-100)a=u.cwd();else{var i=ye.getStreamFromFD(e);a=i.path}if(t.length==0){if(!n)throw new u.ErrnoError(44);return a}return Se.join2(a,t)},doStat(e,t,n){var a=e(t);ve[n>>2]=a.dev,ve[n+4>>2]=a.mode,Pe[n+8>>2]=a.nlink,ve[n+12>>2]=a.uid,ve[n+16>>2]=a.gid,ve[n+20>>2]=a.rdev,je[n+24>>3]=BigInt(a.size),ve[n+32>>2]=4096,ve[n+36>>2]=a.blocks;var i=a.atime.getTime(),s=a.mtime.getTime(),g=a.ctime.getTime();return je[n+40>>3]=BigInt(Math.floor(i/1e3)),Pe[n+48>>2]=i%1e3*1e3*1e3,je[n+56>>3]=BigInt(Math.floor(s/1e3)),Pe[n+64>>2]=s%1e3*1e3*1e3,je[n+72>>3]=BigInt(Math.floor(g/1e3)),Pe[n+80>>2]=g%1e3*1e3*1e3,je[n+88>>3]=BigInt(a.ino),0},doMsync(e,t,n,a,i){if(!u.isFile(t.node.mode))throw new u.ErrnoError(43);if(a&2)return 0;var s=ot.slice(e,e+n);u.msync(t,s,i,n,a)},getStreamFromFD(e){var t=u.getStreamChecked(e);return t},varargs:void 0,getStr(e){var t=ui(e);return t}};function _i(e,t){try{return e=ye.getStr(e),u.chmod(e,t),0}catch(n){if(typeof u>"u"||n.name!=="ErrnoError")throw n;return-n.errno}}function fi(e,t,n,a){try{if(t=ye.getStr(t),t=ye.calculateAt(e,t),n&-8)return-28;var i=u.lookupPath(t,{follow:!0}),s=i.node;if(!s)return-44;var g="";return n&4&&(g+="r"),n&2&&(g+="w"),n&1&&(g+="x"),g&&u.nodePermissions(s,g)?-2:0}catch(y){if(typeof u>"u"||y.name!=="ErrnoError")throw y;return-y.errno}}function di(e,t){try{return u.fchmod(e,t),0}catch(n){if(typeof u>"u"||n.name!=="ErrnoError")throw n;return-n.errno}}function pi(e,t,n){try{return u.fchown(e,t,n),0}catch(a){if(typeof u>"u"||a.name!=="ErrnoError")throw a;return-a.errno}}function Lt(){var e=ve[+ye.varargs>>2];return ye.varargs+=4,e}var ct=Lt;function mi(e,t,n){ye.varargs=n;try{var a=ye.getStreamFromFD(e);switch(t){case 0:{var i=Lt();if(i<0)return-28;for(;u.streams[i];)i++;var s;return s=u.dupStream(a,i),s.fd}case 1:case 2:return 0;case 3:return a.flags;case 4:{var i=Lt();return a.flags|=i,0}case 12:{var i=ct(),g=0;return et[i+g>>1]=2,0}case 13:case 14:return 0}return-28}catch(y){if(typeof u>"u"||y.name!=="ErrnoError")throw y;return-y.errno}}function hi(e,t){try{var n=ye.getStreamFromFD(e);return ye.doStat(u.stat,n.path,t)}catch(a){if(typeof u>"u"||a.name!=="ErrnoError")throw a;return-a.errno}}var gi=9007199254740992,xi=-9007199254740992,gt=e=>e<xi||e>gi?NaN:Number(e);function bi(e,t){t=gt(t);try{return isNaN(t)?61:(u.ftruncate(e,t),0)}catch(n){if(typeof u>"u"||n.name!=="ErrnoError")throw n;return-n.errno}}var ut=(e,t,n)=>lr(e,ot,t,n);function yi(e,t){try{if(t===0)return-28;var n=u.cwd(),a=Pt(n)+1;return t<a?-68:(ut(n,e,t),a)}catch(i){if(typeof u>"u"||i.name!=="ErrnoError")throw i;return-i.errno}}function qi(e,t,n){ye.varargs=n;try{var a=ye.getStreamFromFD(e);switch(t){case 21509:return a.tty?0:-59;case 21505:{if(!a.tty)return-59;if(a.tty.ops.ioctl_tcgets){var i=a.tty.ops.ioctl_tcgets(a),s=ct();ve[s>>2]=i.c_iflag||0,ve[s+4>>2]=i.c_oflag||0,ve[s+8>>2]=i.c_cflag||0,ve[s+12>>2]=i.c_lflag||0;for(var g=0;g<32;g++)De[s+g+17]=i.c_cc[g]||0;return 0}return 0}case 21510:case 21511:case 21512:return a.tty?0:-59;case 21506:case 21507:case 21508:{if(!a.tty)return-59;if(a.tty.ops.ioctl_tcsets){for(var s=ct(),y=ve[s>>2],B=ve[s+4>>2],W=ve[s+8>>2],X=ve[s+12>>2],J=[],g=0;g<32;g++)J.push(De[s+g+17]);return a.tty.ops.ioctl_tcsets(a.tty,t,{c_iflag:y,c_oflag:B,c_cflag:W,c_lflag:X,c_cc:J})}return 0}case 21519:{if(!a.tty)return-59;var s=ct();return ve[s>>2]=0,0}case 21520:return a.tty?-28:-59;case 21531:{var s=ct();return u.ioctl(a,t,s)}case 21523:{if(!a.tty)return-59;if(a.tty.ops.ioctl_tiocgwinsz){var te=a.tty.ops.ioctl_tiocgwinsz(a.tty),s=ct();et[s>>1]=te[0],et[s+2>>1]=te[1]}return 0}case 21524:return a.tty?0:-59;case 21515:return a.tty?0:-59;default:return-28}}catch(F){if(typeof u>"u"||F.name!=="ErrnoError")throw F;return-F.errno}}function wi(e,t){try{return e=ye.getStr(e),ye.doStat(u.lstat,e,t)}catch(n){if(typeof u>"u"||n.name!=="ErrnoError")throw n;return-n.errno}}function vi(e,t,n){try{return t=ye.getStr(t),t=ye.calculateAt(e,t),t=Se.normalize(t),t[t.length-1]==="/"&&(t=t.substr(0,t.length-1)),u.mkdir(t,n,0),0}catch(a){if(typeof u>"u"||a.name!=="ErrnoError")throw a;return-a.errno}}function Ei(e,t,n,a){try{t=ye.getStr(t);var i=a&256,s=a&4096;return a=a&-6401,t=ye.calculateAt(e,t,s),ye.doStat(i?u.lstat:u.stat,t,n)}catch(g){if(typeof u>"u"||g.name!=="ErrnoError")throw g;return-g.errno}}function Si(e,t,n,a){ye.varargs=a;try{t=ye.getStr(t),t=ye.calculateAt(e,t);var i=a?Lt():0;return u.open(t,n,i).fd}catch(s){if(typeof u>"u"||s.name!=="ErrnoError")throw s;return-s.errno}}function Ai(e,t,n,a){try{if(t=ye.getStr(t),t=ye.calculateAt(e,t),a<=0)return-28;var i=u.readlink(t),s=Math.min(a,Pt(i)),g=De[n+s];return ut(i,n,a+1),De[n+s]=g,s}catch(y){if(typeof u>"u"||y.name!=="ErrnoError")throw y;return-y.errno}}function Ti(e){try{return e=ye.getStr(e),u.rmdir(e),0}catch(t){if(typeof u>"u"||t.name!=="ErrnoError")throw t;return-t.errno}}function ki(e,t){try{return e=ye.getStr(e),ye.doStat(u.stat,e,t)}catch(n){if(typeof u>"u"||n.name!=="ErrnoError")throw n;return-n.errno}}function Ii(e,t,n){try{return t=ye.getStr(t),t=ye.calculateAt(e,t),n===0?u.unlink(t):n===512?u.rmdir(t):at("Invalid flags passed to unlinkat"),0}catch(a){if(typeof u>"u"||a.name!=="ErrnoError")throw a;return-a.errno}}var Wr=e=>Pe[e>>2]+ve[e+4>>2]*4294967296;function Fi(e,t,n,a){try{t=ye.getStr(t),t=ye.calculateAt(e,t,!0);var i=Date.now(),s,g;if(!n)s=i,g=i;else{var y=Wr(n),B=ve[n+8>>2];B==1073741823?s=i:B==1073741822?s=-1:s=y*1e3+B/1e6,n+=16,y=Wr(n),B=ve[n+8>>2],B==1073741823?g=i:B==1073741822?g=-1:g=y*1e3+B/1e6}return(g!=-1||s!=-1)&&u.utime(t,s,g),0}catch(W){if(typeof u>"u"||W.name!=="ErrnoError")throw W;return-W.errno}}var Oi=1,Pi=()=>Oi,Li=e=>e%4===0&&(e%100!==0||e%400===0),Di=[0,31,60,91,121,152,182,213,244,274,305,335],Ri=[0,31,59,90,120,151,181,212,243,273,304,334],Ci=e=>{var t=Li(e.getFullYear()),n=t?Di:Ri,a=n[e.getMonth()]+e.getDate()-1;return a};function Mi(e,t){e=gt(e);var n=new Date(e*1e3);ve[t>>2]=n.getSeconds(),ve[t+4>>2]=n.getMinutes(),ve[t+8>>2]=n.getHours(),ve[t+12>>2]=n.getDate(),ve[t+16>>2]=n.getMonth(),ve[t+20>>2]=n.getFullYear()-1900,ve[t+24>>2]=n.getDay();var a=Ci(n)|0;ve[t+28>>2]=a,ve[t+36>>2]=-(n.getTimezoneOffset()*60);var i=new Date(n.getFullYear(),0,1),s=new Date(n.getFullYear(),6,1).getTimezoneOffset(),g=i.getTimezoneOffset(),y=(s!=g&&n.getTimezoneOffset()==Math.min(g,s))|0;ve[t+32>>2]=y}function Ni(e,t,n,a,i,s,g){i=gt(i);try{if(isNaN(i))return 61;var y=ye.getStreamFromFD(a),B=u.mmap(y,e,i,t,n),W=B.ptr;return ve[s>>2]=B.allocated,Pe[g>>2]=W,0}catch(X){if(typeof u>"u"||X.name!=="ErrnoError")throw X;return-X.errno}}function Bi(e,t,n,a,i,s){s=gt(s);try{var g=ye.getStreamFromFD(i);n&2&&ye.doMsync(e,g,t,a,s)}catch(y){if(typeof u>"u"||y.name!=="ErrnoError")throw y;return-y.errno}}var Ui=(e,t,n,a)=>{var i=new Date().getFullYear(),s=new Date(i,0,1),g=new Date(i,6,1),y=s.getTimezoneOffset(),B=g.getTimezoneOffset(),W=Math.max(y,B);Pe[e>>2]=W*60,ve[t>>2]=+(y!=B);var X=F=>{var P=F>=0?"-":"+",M=Math.abs(F),T=String(Math.floor(M/60)).padStart(2,"0"),q=String(M%60).padStart(2,"0");return`UTC${P}${T}${q}`},J=X(y),te=X(B);B<y?(ut(J,n,17),ut(te,a,17)):(ut(J,a,17),ut(te,n,17))},ji=()=>Date.now(),Wi=()=>performance.now(),zi=()=>2147483648,Vi=e=>{var t=ze.buffer,n=(e-t.byteLength+65535)/65536;try{return ze.grow(n),Fr(),1}catch{}},Hi=e=>{var t=ot.length;e>>>=0;var n=zi();if(e>n)return!1;for(var a=1;a<=4;a*=2){var i=t*(1+.2/a);i=Math.min(i,e+100663296);var s=Math.min(n,Ur(Math.max(e,i),65536)),g=Vi(s);if(g)return!0}return!1},ur={},Qi=()=>we||"./this.program",xt=()=>{if(!xt.strings){var e=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:e,_:Qi()};for(var n in ur)ur[n]===void 0?delete t[n]:t[n]=ur[n];var a=[];for(var n in t)a.push(`${n}=${t[n]}`);xt.strings=a}return xt.strings},$i=(e,t)=>{for(var n=0;n<e.length;++n)De[t++]=e.charCodeAt(n);De[t]=0},Gi=(e,t)=>{var n=0;return xt().forEach((a,i)=>{var s=t+n;Pe[e+i*4>>2]=s,$i(a,s),n+=a.length+1}),0},Ki=(e,t)=>{var n=xt();Pe[e>>2]=n.length;var a=0;return n.forEach(i=>a+=i.length+1),Pe[t>>2]=a,0};function Ji(e){try{var t=ye.getStreamFromFD(e);return u.close(t),0}catch(n){if(typeof u>"u"||n.name!=="ErrnoError")throw n;return n.errno}}function Xi(e,t){try{var n=0,a=0,i=0,s=ye.getStreamFromFD(e),g=s.tty?2:u.isDir(s.mode)?3:u.isLink(s.mode)?7:4;return De[t]=g,et[t+2>>1]=i,je[t+8>>3]=BigInt(n),je[t+16>>3]=BigInt(a),0}catch(y){if(typeof u>"u"||y.name!=="ErrnoError")throw y;return y.errno}}var Yi=(e,t,n,a)=>{for(var i=0,s=0;s<n;s++){var g=Pe[t>>2],y=Pe[t+4>>2];t+=8;var B=u.read(e,De,g,y,a);if(B<0)return-1;if(i+=B,B<y)break;typeof a<"u"&&(a+=B)}return i};function Zi(e,t,n,a){try{var i=ye.getStreamFromFD(e),s=Yi(i,t,n);return Pe[a>>2]=s,0}catch(g){if(typeof u>"u"||g.name!=="ErrnoError")throw g;return g.errno}}function es(e,t,n,a){t=gt(t);try{if(isNaN(t))return 61;var i=ye.getStreamFromFD(e);return u.llseek(i,t,n),je[a>>3]=BigInt(i.position),i.getdents&&t===0&&n===0&&(i.getdents=null),0}catch(s){if(typeof u>"u"||s.name!=="ErrnoError")throw s;return s.errno}}function ts(e){try{var t=ye.getStreamFromFD(e);return t.stream_ops?.fsync?t.stream_ops.fsync(t):0}catch(n){if(typeof u>"u"||n.name!=="ErrnoError")throw n;return n.errno}}var rs=(e,t,n,a)=>{for(var i=0,s=0;s<n;s++){var g=Pe[t>>2],y=Pe[t+4>>2];t+=8;var B=u.write(e,De,g,y,a);if(B<0)return-1;if(i+=B,B<y)break;typeof a<"u"&&(a+=B)}return i};function ns(e,t,n,a){try{var i=ye.getStreamFromFD(e),s=rs(i,t,n);return Pe[a>>2]=s,0}catch(g){if(typeof u>"u"||g.name!=="ErrnoError")throw g;return g.errno}}u.createPreloadedFile=li,u.staticInit();var zr={__syscall_chmod:_i,__syscall_faccessat:fi,__syscall_fchmod:di,__syscall_fchown32:pi,__syscall_fcntl64:mi,__syscall_fstat64:hi,__syscall_ftruncate64:bi,__syscall_getcwd:yi,__syscall_ioctl:qi,__syscall_lstat64:wi,__syscall_mkdirat:vi,__syscall_newfstatat:Ei,__syscall_openat:Si,__syscall_readlinkat:Ai,__syscall_rmdir:Ti,__syscall_stat64:ki,__syscall_unlinkat:Ii,__syscall_utimensat:Fi,_emscripten_get_now_is_monotonic:Pi,_localtime_js:Mi,_mmap_js:Ni,_munmap_js:Bi,_tzset_js:Ui,emscripten_date_now:ji,emscripten_get_now:Wi,emscripten_resize_heap:Hi,environ_get:Gi,environ_sizes_get:Ki,fd_close:Ji,fd_fdstat_get:Xi,fd_read:Zi,fd_seek:es,fd_sync:ts,fd_write:ns,memory:ze},x=ei(),is=()=>(is=x.__wasm_call_ctors)(),ss=r._sqlite3_status64=(e,t,n,a)=>(ss=r._sqlite3_status64=x.sqlite3_status64)(e,t,n,a),os=r._sqlite3_status=(e,t,n,a)=>(os=r._sqlite3_status=x.sqlite3_status)(e,t,n,a),as=r._sqlite3_db_status=(e,t,n,a,i)=>(as=r._sqlite3_db_status=x.sqlite3_db_status)(e,t,n,a,i),ls=r._sqlite3_msize=e=>(ls=r._sqlite3_msize=x.sqlite3_msize)(e),cs=r._sqlite3_vfs_find=e=>(cs=r._sqlite3_vfs_find=x.sqlite3_vfs_find)(e),us=r._sqlite3_initialize=()=>(us=r._sqlite3_initialize=x.sqlite3_initialize)(),_s=r._sqlite3_malloc=e=>(_s=r._sqlite3_malloc=x.sqlite3_malloc)(e),fs=r._sqlite3_free=e=>(fs=r._sqlite3_free=x.sqlite3_free)(e),ds=r._sqlite3_vfs_register=(e,t)=>(ds=r._sqlite3_vfs_register=x.sqlite3_vfs_register)(e,t),ps=r._sqlite3_vfs_unregister=e=>(ps=r._sqlite3_vfs_unregister=x.sqlite3_vfs_unregister)(e),ms=r._sqlite3_malloc64=e=>(ms=r._sqlite3_malloc64=x.sqlite3_malloc64)(e),hs=r._sqlite3_realloc=(e,t)=>(hs=r._sqlite3_realloc=x.sqlite3_realloc)(e,t),gs=r._sqlite3_realloc64=(e,t)=>(gs=r._sqlite3_realloc64=x.sqlite3_realloc64)(e,t),xs=r._sqlite3_value_text=e=>(xs=r._sqlite3_value_text=x.sqlite3_value_text)(e),bs=r._sqlite3_randomness=(e,t)=>(bs=r._sqlite3_randomness=x.sqlite3_randomness)(e,t),ys=r._sqlite3_stricmp=(e,t)=>(ys=r._sqlite3_stricmp=x.sqlite3_stricmp)(e,t),qs=r._sqlite3_strnicmp=(e,t,n)=>(qs=r._sqlite3_strnicmp=x.sqlite3_strnicmp)(e,t,n),ws=r._sqlite3_uri_parameter=(e,t)=>(ws=r._sqlite3_uri_parameter=x.sqlite3_uri_parameter)(e,t),vs=r._sqlite3_uri_boolean=(e,t,n)=>(vs=r._sqlite3_uri_boolean=x.sqlite3_uri_boolean)(e,t,n),Es=r._sqlite3_serialize=(e,t,n,a)=>(Es=r._sqlite3_serialize=x.sqlite3_serialize)(e,t,n,a),Ss=r._sqlite3_prepare_v2=(e,t,n,a,i)=>(Ss=r._sqlite3_prepare_v2=x.sqlite3_prepare_v2)(e,t,n,a,i),As=r._sqlite3_step=e=>(As=r._sqlite3_step=x.sqlite3_step)(e),Ts=r._sqlite3_column_int64=(e,t)=>(Ts=r._sqlite3_column_int64=x.sqlite3_column_int64)(e,t),ks=r._sqlite3_reset=e=>(ks=r._sqlite3_reset=x.sqlite3_reset)(e),Is=r._sqlite3_exec=(e,t,n,a,i)=>(Is=r._sqlite3_exec=x.sqlite3_exec)(e,t,n,a,i),Fs=r._sqlite3_column_int=(e,t)=>(Fs=r._sqlite3_column_int=x.sqlite3_column_int)(e,t),Os=r._sqlite3_finalize=e=>(Os=r._sqlite3_finalize=x.sqlite3_finalize)(e),Ps=r._sqlite3_file_control=(e,t,n,a)=>(Ps=r._sqlite3_file_control=x.sqlite3_file_control)(e,t,n,a),Ls=r._sqlite3_column_name=(e,t)=>(Ls=r._sqlite3_column_name=x.sqlite3_column_name)(e,t),Ds=r._sqlite3_column_text=(e,t)=>(Ds=r._sqlite3_column_text=x.sqlite3_column_text)(e,t),Rs=r._sqlite3_column_type=(e,t)=>(Rs=r._sqlite3_column_type=x.sqlite3_column_type)(e,t),Cs=r._sqlite3_errmsg=e=>(Cs=r._sqlite3_errmsg=x.sqlite3_errmsg)(e),Ms=r._sqlite3_deserialize=(e,t,n,a,i,s)=>(Ms=r._sqlite3_deserialize=x.sqlite3_deserialize)(e,t,n,a,i,s),Ns=r._sqlite3_clear_bindings=e=>(Ns=r._sqlite3_clear_bindings=x.sqlite3_clear_bindings)(e),Bs=r._sqlite3_value_blob=e=>(Bs=r._sqlite3_value_blob=x.sqlite3_value_blob)(e),Us=r._sqlite3_value_bytes=e=>(Us=r._sqlite3_value_bytes=x.sqlite3_value_bytes)(e),js=r._sqlite3_value_double=e=>(js=r._sqlite3_value_double=x.sqlite3_value_double)(e),Ws=r._sqlite3_value_int=e=>(Ws=r._sqlite3_value_int=x.sqlite3_value_int)(e),zs=r._sqlite3_value_int64=e=>(zs=r._sqlite3_value_int64=x.sqlite3_value_int64)(e),Vs=r._sqlite3_value_subtype=e=>(Vs=r._sqlite3_value_subtype=x.sqlite3_value_subtype)(e),Hs=r._sqlite3_value_pointer=(e,t)=>(Hs=r._sqlite3_value_pointer=x.sqlite3_value_pointer)(e,t),Qs=r._sqlite3_value_type=e=>(Qs=r._sqlite3_value_type=x.sqlite3_value_type)(e),$s=r._sqlite3_value_nochange=e=>($s=r._sqlite3_value_nochange=x.sqlite3_value_nochange)(e),Gs=r._sqlite3_value_frombind=e=>(Gs=r._sqlite3_value_frombind=x.sqlite3_value_frombind)(e),Ks=r._sqlite3_value_dup=e=>(Ks=r._sqlite3_value_dup=x.sqlite3_value_dup)(e),Js=r._sqlite3_value_free=e=>(Js=r._sqlite3_value_free=x.sqlite3_value_free)(e),Xs=r._sqlite3_result_blob=(e,t,n,a)=>(Xs=r._sqlite3_result_blob=x.sqlite3_result_blob)(e,t,n,a),Ys=r._sqlite3_result_error_toobig=e=>(Ys=r._sqlite3_result_error_toobig=x.sqlite3_result_error_toobig)(e),Zs=r._sqlite3_result_error_nomem=e=>(Zs=r._sqlite3_result_error_nomem=x.sqlite3_result_error_nomem)(e),eo=r._sqlite3_result_double=(e,t)=>(eo=r._sqlite3_result_double=x.sqlite3_result_double)(e,t),to=r._sqlite3_result_error=(e,t,n)=>(to=r._sqlite3_result_error=x.sqlite3_result_error)(e,t,n),ro=r._sqlite3_result_int=(e,t)=>(ro=r._sqlite3_result_int=x.sqlite3_result_int)(e,t),no=r._sqlite3_result_int64=(e,t)=>(no=r._sqlite3_result_int64=x.sqlite3_result_int64)(e,t),io=r._sqlite3_result_null=e=>(io=r._sqlite3_result_null=x.sqlite3_result_null)(e),so=r._sqlite3_result_pointer=(e,t,n,a)=>(so=r._sqlite3_result_pointer=x.sqlite3_result_pointer)(e,t,n,a),oo=r._sqlite3_result_subtype=(e,t)=>(oo=r._sqlite3_result_subtype=x.sqlite3_result_subtype)(e,t),ao=r._sqlite3_result_text=(e,t,n,a)=>(ao=r._sqlite3_result_text=x.sqlite3_result_text)(e,t,n,a),lo=r._sqlite3_result_zeroblob=(e,t)=>(lo=r._sqlite3_result_zeroblob=x.sqlite3_result_zeroblob)(e,t),co=r._sqlite3_result_zeroblob64=(e,t)=>(co=r._sqlite3_result_zeroblob64=x.sqlite3_result_zeroblob64)(e,t),uo=r._sqlite3_result_error_code=(e,t)=>(uo=r._sqlite3_result_error_code=x.sqlite3_result_error_code)(e,t),_o=r._sqlite3_user_data=e=>(_o=r._sqlite3_user_data=x.sqlite3_user_data)(e),fo=r._sqlite3_context_db_handle=e=>(fo=r._sqlite3_context_db_handle=x.sqlite3_context_db_handle)(e),po=r._sqlite3_vtab_nochange=e=>(po=r._sqlite3_vtab_nochange=x.sqlite3_vtab_nochange)(e),mo=r._sqlite3_vtab_in_first=(e,t)=>(mo=r._sqlite3_vtab_in_first=x.sqlite3_vtab_in_first)(e,t),ho=r._sqlite3_vtab_in_next=(e,t)=>(ho=r._sqlite3_vtab_in_next=x.sqlite3_vtab_in_next)(e,t),go=r._sqlite3_aggregate_context=(e,t)=>(go=r._sqlite3_aggregate_context=x.sqlite3_aggregate_context)(e,t),xo=r._sqlite3_get_auxdata=(e,t)=>(xo=r._sqlite3_get_auxdata=x.sqlite3_get_auxdata)(e,t),bo=r._sqlite3_set_auxdata=(e,t,n,a)=>(bo=r._sqlite3_set_auxdata=x.sqlite3_set_auxdata)(e,t,n,a),yo=r._sqlite3_column_count=e=>(yo=r._sqlite3_column_count=x.sqlite3_column_count)(e),qo=r._sqlite3_data_count=e=>(qo=r._sqlite3_data_count=x.sqlite3_data_count)(e),wo=r._sqlite3_column_blob=(e,t)=>(wo=r._sqlite3_column_blob=x.sqlite3_column_blob)(e,t),vo=r._sqlite3_column_bytes=(e,t)=>(vo=r._sqlite3_column_bytes=x.sqlite3_column_bytes)(e,t),Eo=r._sqlite3_column_double=(e,t)=>(Eo=r._sqlite3_column_double=x.sqlite3_column_double)(e,t),So=r._sqlite3_column_value=(e,t)=>(So=r._sqlite3_column_value=x.sqlite3_column_value)(e,t),Ao=r._sqlite3_column_decltype=(e,t)=>(Ao=r._sqlite3_column_decltype=x.sqlite3_column_decltype)(e,t),To=r._sqlite3_bind_blob=(e,t,n,a,i)=>(To=r._sqlite3_bind_blob=x.sqlite3_bind_blob)(e,t,n,a,i),ko=r._sqlite3_bind_double=(e,t,n)=>(ko=r._sqlite3_bind_double=x.sqlite3_bind_double)(e,t,n),Io=r._sqlite3_bind_int=(e,t,n)=>(Io=r._sqlite3_bind_int=x.sqlite3_bind_int)(e,t,n),Fo=r._sqlite3_bind_int64=(e,t,n)=>(Fo=r._sqlite3_bind_int64=x.sqlite3_bind_int64)(e,t,n),Oo=r._sqlite3_bind_null=(e,t)=>(Oo=r._sqlite3_bind_null=x.sqlite3_bind_null)(e,t),Po=r._sqlite3_bind_pointer=(e,t,n,a,i)=>(Po=r._sqlite3_bind_pointer=x.sqlite3_bind_pointer)(e,t,n,a,i),Lo=r._sqlite3_bind_text=(e,t,n,a,i)=>(Lo=r._sqlite3_bind_text=x.sqlite3_bind_text)(e,t,n,a,i),Do=r._sqlite3_bind_parameter_count=e=>(Do=r._sqlite3_bind_parameter_count=x.sqlite3_bind_parameter_count)(e),Ro=r._sqlite3_bind_parameter_name=(e,t)=>(Ro=r._sqlite3_bind_parameter_name=x.sqlite3_bind_parameter_name)(e,t),Co=r._sqlite3_bind_parameter_index=(e,t)=>(Co=r._sqlite3_bind_parameter_index=x.sqlite3_bind_parameter_index)(e,t),Mo=r._sqlite3_db_handle=e=>(Mo=r._sqlite3_db_handle=x.sqlite3_db_handle)(e),No=r._sqlite3_stmt_readonly=e=>(No=r._sqlite3_stmt_readonly=x.sqlite3_stmt_readonly)(e),Bo=r._sqlite3_stmt_isexplain=e=>(Bo=r._sqlite3_stmt_isexplain=x.sqlite3_stmt_isexplain)(e),Uo=r._sqlite3_stmt_explain=(e,t)=>(Uo=r._sqlite3_stmt_explain=x.sqlite3_stmt_explain)(e,t),jo=r._sqlite3_stmt_busy=e=>(jo=r._sqlite3_stmt_busy=x.sqlite3_stmt_busy)(e),Wo=r._sqlite3_stmt_status=(e,t,n)=>(Wo=r._sqlite3_stmt_status=x.sqlite3_stmt_status)(e,t,n),zo=r._sqlite3_sql=e=>(zo=r._sqlite3_sql=x.sqlite3_sql)(e),Vo=r._sqlite3_expanded_sql=e=>(Vo=r._sqlite3_expanded_sql=x.sqlite3_expanded_sql)(e),Ho=r._sqlite3_preupdate_old=(e,t,n)=>(Ho=r._sqlite3_preupdate_old=x.sqlite3_preupdate_old)(e,t,n),Qo=r._sqlite3_preupdate_count=e=>(Qo=r._sqlite3_preupdate_count=x.sqlite3_preupdate_count)(e),$o=r._sqlite3_preupdate_depth=e=>($o=r._sqlite3_preupdate_depth=x.sqlite3_preupdate_depth)(e),Go=r._sqlite3_preupdate_blobwrite=e=>(Go=r._sqlite3_preupdate_blobwrite=x.sqlite3_preupdate_blobwrite)(e),Ko=r._sqlite3_preupdate_new=(e,t,n)=>(Ko=r._sqlite3_preupdate_new=x.sqlite3_preupdate_new)(e,t,n),Jo=r._sqlite3_value_numeric_type=e=>(Jo=r._sqlite3_value_numeric_type=x.sqlite3_value_numeric_type)(e),Xo=r._sqlite3_set_authorizer=(e,t,n)=>(Xo=r._sqlite3_set_authorizer=x.sqlite3_set_authorizer)(e,t,n),Yo=r._sqlite3_strglob=(e,t)=>(Yo=r._sqlite3_strglob=x.sqlite3_strglob)(e,t),Zo=r._sqlite3_strlike=(e,t,n)=>(Zo=r._sqlite3_strlike=x.sqlite3_strlike)(e,t,n),ea=r._sqlite3_auto_extension=e=>(ea=r._sqlite3_auto_extension=x.sqlite3_auto_extension)(e),ta=r._sqlite3_cancel_auto_extension=e=>(ta=r._sqlite3_cancel_auto_extension=x.sqlite3_cancel_auto_extension)(e),ra=r._sqlite3_reset_auto_extension=()=>(ra=r._sqlite3_reset_auto_extension=x.sqlite3_reset_auto_extension)(),na=r._sqlite3_prepare_v3=(e,t,n,a,i,s)=>(na=r._sqlite3_prepare_v3=x.sqlite3_prepare_v3)(e,t,n,a,i,s),ia=r._sqlite3_create_module=(e,t,n,a)=>(ia=r._sqlite3_create_module=x.sqlite3_create_module)(e,t,n,a),sa=r._sqlite3_create_module_v2=(e,t,n,a,i)=>(sa=r._sqlite3_create_module_v2=x.sqlite3_create_module_v2)(e,t,n,a,i),oa=r._sqlite3_drop_modules=(e,t)=>(oa=r._sqlite3_drop_modules=x.sqlite3_drop_modules)(e,t),aa=r._sqlite3_declare_vtab=(e,t)=>(aa=r._sqlite3_declare_vtab=x.sqlite3_declare_vtab)(e,t),la=r._sqlite3_vtab_on_conflict=e=>(la=r._sqlite3_vtab_on_conflict=x.sqlite3_vtab_on_conflict)(e),ca=r._sqlite3_vtab_collation=(e,t)=>(ca=r._sqlite3_vtab_collation=x.sqlite3_vtab_collation)(e,t),ua=r._sqlite3_vtab_in=(e,t,n)=>(ua=r._sqlite3_vtab_in=x.sqlite3_vtab_in)(e,t,n),_a=r._sqlite3_vtab_rhs_value=(e,t,n)=>(_a=r._sqlite3_vtab_rhs_value=x.sqlite3_vtab_rhs_value)(e,t,n),fa=r._sqlite3_vtab_distinct=e=>(fa=r._sqlite3_vtab_distinct=x.sqlite3_vtab_distinct)(e),da=r._sqlite3_keyword_name=(e,t,n)=>(da=r._sqlite3_keyword_name=x.sqlite3_keyword_name)(e,t,n),pa=r._sqlite3_keyword_count=()=>(pa=r._sqlite3_keyword_count=x.sqlite3_keyword_count)(),ma=r._sqlite3_keyword_check=(e,t)=>(ma=r._sqlite3_keyword_check=x.sqlite3_keyword_check)(e,t),ha=r._sqlite3_complete=e=>(ha=r._sqlite3_complete=x.sqlite3_complete)(e),ga=r._sqlite3_libversion=()=>(ga=r._sqlite3_libversion=x.sqlite3_libversion)(),xa=r._sqlite3_libversion_number=()=>(xa=r._sqlite3_libversion_number=x.sqlite3_libversion_number)(),ba=r._sqlite3_shutdown=()=>(ba=r._sqlite3_shutdown=x.sqlite3_shutdown)(),ya=r._sqlite3_last_insert_rowid=e=>(ya=r._sqlite3_last_insert_rowid=x.sqlite3_last_insert_rowid)(e),qa=r._sqlite3_set_last_insert_rowid=(e,t)=>(qa=r._sqlite3_set_last_insert_rowid=x.sqlite3_set_last_insert_rowid)(e,t),wa=r._sqlite3_changes64=e=>(wa=r._sqlite3_changes64=x.sqlite3_changes64)(e),va=r._sqlite3_changes=e=>(va=r._sqlite3_changes=x.sqlite3_changes)(e),Ea=r._sqlite3_total_changes64=e=>(Ea=r._sqlite3_total_changes64=x.sqlite3_total_changes64)(e),Sa=r._sqlite3_total_changes=e=>(Sa=r._sqlite3_total_changes=x.sqlite3_total_changes)(e),Aa=r._sqlite3_txn_state=(e,t)=>(Aa=r._sqlite3_txn_state=x.sqlite3_txn_state)(e,t),Ta=r._sqlite3_close_v2=e=>(Ta=r._sqlite3_close_v2=x.sqlite3_close_v2)(e),ka=r._sqlite3_busy_handler=(e,t,n)=>(ka=r._sqlite3_busy_handler=x.sqlite3_busy_handler)(e,t,n),Ia=r._sqlite3_progress_handler=(e,t,n,a)=>(Ia=r._sqlite3_progress_handler=x.sqlite3_progress_handler)(e,t,n,a),Fa=r._sqlite3_busy_timeout=(e,t)=>(Fa=r._sqlite3_busy_timeout=x.sqlite3_busy_timeout)(e,t),Oa=r._sqlite3_interrupt=e=>(Oa=r._sqlite3_interrupt=x.sqlite3_interrupt)(e),Pa=r._sqlite3_is_interrupted=e=>(Pa=r._sqlite3_is_interrupted=x.sqlite3_is_interrupted)(e),La=r._sqlite3_create_function=(e,t,n,a,i,s,g,y)=>(La=r._sqlite3_create_function=x.sqlite3_create_function)(e,t,n,a,i,s,g,y),Da=r._sqlite3_create_function_v2=(e,t,n,a,i,s,g,y,B)=>(Da=r._sqlite3_create_function_v2=x.sqlite3_create_function_v2)(e,t,n,a,i,s,g,y,B),Ra=r._sqlite3_create_window_function=(e,t,n,a,i,s,g,y,B,W)=>(Ra=r._sqlite3_create_window_function=x.sqlite3_create_window_function)(e,t,n,a,i,s,g,y,B,W),Ca=r._sqlite3_overload_function=(e,t,n)=>(Ca=r._sqlite3_overload_function=x.sqlite3_overload_function)(e,t,n),Ma=r._sqlite3_trace_v2=(e,t,n,a)=>(Ma=r._sqlite3_trace_v2=x.sqlite3_trace_v2)(e,t,n,a),Na=r._sqlite3_commit_hook=(e,t,n)=>(Na=r._sqlite3_commit_hook=x.sqlite3_commit_hook)(e,t,n),Ba=r._sqlite3_update_hook=(e,t,n)=>(Ba=r._sqlite3_update_hook=x.sqlite3_update_hook)(e,t,n),Ua=r._sqlite3_rollback_hook=(e,t,n)=>(Ua=r._sqlite3_rollback_hook=x.sqlite3_rollback_hook)(e,t,n),ja=r._sqlite3_preupdate_hook=(e,t,n)=>(ja=r._sqlite3_preupdate_hook=x.sqlite3_preupdate_hook)(e,t,n),Wa=r._sqlite3_error_offset=e=>(Wa=r._sqlite3_error_offset=x.sqlite3_error_offset)(e),za=r._sqlite3_errcode=e=>(za=r._sqlite3_errcode=x.sqlite3_errcode)(e),Va=r._sqlite3_extended_errcode=e=>(Va=r._sqlite3_extended_errcode=x.sqlite3_extended_errcode)(e),Ha=r._sqlite3_errstr=e=>(Ha=r._sqlite3_errstr=x.sqlite3_errstr)(e),Qa=r._sqlite3_limit=(e,t,n)=>(Qa=r._sqlite3_limit=x.sqlite3_limit)(e,t,n),$a=r._sqlite3_open=(e,t)=>($a=r._sqlite3_open=x.sqlite3_open)(e,t),Ga=r._sqlite3_open_v2=(e,t,n,a)=>(Ga=r._sqlite3_open_v2=x.sqlite3_open_v2)(e,t,n,a),Ka=r._sqlite3_create_collation=(e,t,n,a,i)=>(Ka=r._sqlite3_create_collation=x.sqlite3_create_collation)(e,t,n,a,i),Ja=r._sqlite3_create_collation_v2=(e,t,n,a,i,s)=>(Ja=r._sqlite3_create_collation_v2=x.sqlite3_create_collation_v2)(e,t,n,a,i,s),Xa=r._sqlite3_collation_needed=(e,t,n)=>(Xa=r._sqlite3_collation_needed=x.sqlite3_collation_needed)(e,t,n),Ya=r._sqlite3_get_autocommit=e=>(Ya=r._sqlite3_get_autocommit=x.sqlite3_get_autocommit)(e),Za=r._sqlite3_table_column_metadata=(e,t,n,a,i,s,g,y,B)=>(Za=r._sqlite3_table_column_metadata=x.sqlite3_table_column_metadata)(e,t,n,a,i,s,g,y,B),el=r._sqlite3_extended_result_codes=(e,t)=>(el=r._sqlite3_extended_result_codes=x.sqlite3_extended_result_codes)(e,t),tl=r._sqlite3_uri_key=(e,t)=>(tl=r._sqlite3_uri_key=x.sqlite3_uri_key)(e,t),rl=r._sqlite3_uri_int64=(e,t,n)=>(rl=r._sqlite3_uri_int64=x.sqlite3_uri_int64)(e,t,n),nl=r._sqlite3_db_name=(e,t)=>(nl=r._sqlite3_db_name=x.sqlite3_db_name)(e,t),il=r._sqlite3_db_filename=(e,t)=>(il=r._sqlite3_db_filename=x.sqlite3_db_filename)(e,t),sl=r._sqlite3_db_readonly=(e,t)=>(sl=r._sqlite3_db_readonly=x.sqlite3_db_readonly)(e,t),ol=r._sqlite3_compileoption_used=e=>(ol=r._sqlite3_compileoption_used=x.sqlite3_compileoption_used)(e),al=r._sqlite3_compileoption_get=e=>(al=r._sqlite3_compileoption_get=x.sqlite3_compileoption_get)(e),ll=r._sqlite3session_diff=(e,t,n,a)=>(ll=r._sqlite3session_diff=x.sqlite3session_diff)(e,t,n,a),cl=r._sqlite3session_attach=(e,t)=>(cl=r._sqlite3session_attach=x.sqlite3session_attach)(e,t),ul=r._sqlite3session_create=(e,t,n)=>(ul=r._sqlite3session_create=x.sqlite3session_create)(e,t,n),_l=r._sqlite3session_delete=e=>(_l=r._sqlite3session_delete=x.sqlite3session_delete)(e),fl=r._sqlite3session_table_filter=(e,t,n)=>(fl=r._sqlite3session_table_filter=x.sqlite3session_table_filter)(e,t,n),dl=r._sqlite3session_changeset=(e,t,n)=>(dl=r._sqlite3session_changeset=x.sqlite3session_changeset)(e,t,n),pl=r._sqlite3session_changeset_strm=(e,t,n)=>(pl=r._sqlite3session_changeset_strm=x.sqlite3session_changeset_strm)(e,t,n),ml=r._sqlite3session_patchset_strm=(e,t,n)=>(ml=r._sqlite3session_patchset_strm=x.sqlite3session_patchset_strm)(e,t,n),hl=r._sqlite3session_patchset=(e,t,n)=>(hl=r._sqlite3session_patchset=x.sqlite3session_patchset)(e,t,n),gl=r._sqlite3session_enable=(e,t)=>(gl=r._sqlite3session_enable=x.sqlite3session_enable)(e,t),xl=r._sqlite3session_indirect=(e,t)=>(xl=r._sqlite3session_indirect=x.sqlite3session_indirect)(e,t),bl=r._sqlite3session_isempty=e=>(bl=r._sqlite3session_isempty=x.sqlite3session_isempty)(e),yl=r._sqlite3session_memory_used=e=>(yl=r._sqlite3session_memory_used=x.sqlite3session_memory_used)(e),ql=r._sqlite3session_object_config=(e,t,n)=>(ql=r._sqlite3session_object_config=x.sqlite3session_object_config)(e,t,n),wl=r._sqlite3session_changeset_size=e=>(wl=r._sqlite3session_changeset_size=x.sqlite3session_changeset_size)(e),vl=r._sqlite3changeset_start=(e,t,n)=>(vl=r._sqlite3changeset_start=x.sqlite3changeset_start)(e,t,n),El=r._sqlite3changeset_start_v2=(e,t,n,a)=>(El=r._sqlite3changeset_start_v2=x.sqlite3changeset_start_v2)(e,t,n,a),Sl=r._sqlite3changeset_start_strm=(e,t,n)=>(Sl=r._sqlite3changeset_start_strm=x.sqlite3changeset_start_strm)(e,t,n),Al=r._sqlite3changeset_start_v2_strm=(e,t,n,a)=>(Al=r._sqlite3changeset_start_v2_strm=x.sqlite3changeset_start_v2_strm)(e,t,n,a),Tl=r._sqlite3changeset_next=e=>(Tl=r._sqlite3changeset_next=x.sqlite3changeset_next)(e),kl=r._sqlite3changeset_op=(e,t,n,a,i)=>(kl=r._sqlite3changeset_op=x.sqlite3changeset_op)(e,t,n,a,i),Il=r._sqlite3changeset_pk=(e,t,n)=>(Il=r._sqlite3changeset_pk=x.sqlite3changeset_pk)(e,t,n),Fl=r._sqlite3changeset_old=(e,t,n)=>(Fl=r._sqlite3changeset_old=x.sqlite3changeset_old)(e,t,n),Ol=r._sqlite3changeset_new=(e,t,n)=>(Ol=r._sqlite3changeset_new=x.sqlite3changeset_new)(e,t,n),Pl=r._sqlite3changeset_conflict=(e,t,n)=>(Pl=r._sqlite3changeset_conflict=x.sqlite3changeset_conflict)(e,t,n),Ll=r._sqlite3changeset_fk_conflicts=(e,t)=>(Ll=r._sqlite3changeset_fk_conflicts=x.sqlite3changeset_fk_conflicts)(e,t),Dl=r._sqlite3changeset_finalize=e=>(Dl=r._sqlite3changeset_finalize=x.sqlite3changeset_finalize)(e),Rl=r._sqlite3changeset_invert=(e,t,n,a)=>(Rl=r._sqlite3changeset_invert=x.sqlite3changeset_invert)(e,t,n,a),Cl=r._sqlite3changeset_invert_strm=(e,t,n,a)=>(Cl=r._sqlite3changeset_invert_strm=x.sqlite3changeset_invert_strm)(e,t,n,a),Ml=r._sqlite3changeset_apply_v2=(e,t,n,a,i,s,g,y,B)=>(Ml=r._sqlite3changeset_apply_v2=x.sqlite3changeset_apply_v2)(e,t,n,a,i,s,g,y,B),Nl=r._sqlite3changeset_apply=(e,t,n,a,i,s)=>(Nl=r._sqlite3changeset_apply=x.sqlite3changeset_apply)(e,t,n,a,i,s),Bl=r._sqlite3changeset_apply_v2_strm=(e,t,n,a,i,s,g,y,B)=>(Bl=r._sqlite3changeset_apply_v2_strm=x.sqlite3changeset_apply_v2_strm)(e,t,n,a,i,s,g,y,B),Ul=r._sqlite3changeset_apply_strm=(e,t,n,a,i,s)=>(Ul=r._sqlite3changeset_apply_strm=x.sqlite3changeset_apply_strm)(e,t,n,a,i,s),jl=r._sqlite3changegroup_new=e=>(jl=r._sqlite3changegroup_new=x.sqlite3changegroup_new)(e),Wl=r._sqlite3changegroup_add=(e,t,n)=>(Wl=r._sqlite3changegroup_add=x.sqlite3changegroup_add)(e,t,n),zl=r._sqlite3changegroup_output=(e,t,n)=>(zl=r._sqlite3changegroup_output=x.sqlite3changegroup_output)(e,t,n),Vl=r._sqlite3changegroup_add_strm=(e,t,n)=>(Vl=r._sqlite3changegroup_add_strm=x.sqlite3changegroup_add_strm)(e,t,n),Hl=r._sqlite3changegroup_output_strm=(e,t,n)=>(Hl=r._sqlite3changegroup_output_strm=x.sqlite3changegroup_output_strm)(e,t,n),Ql=r._sqlite3changegroup_delete=e=>(Ql=r._sqlite3changegroup_delete=x.sqlite3changegroup_delete)(e),$l=r._sqlite3changeset_concat=(e,t,n,a,i,s)=>($l=r._sqlite3changeset_concat=x.sqlite3changeset_concat)(e,t,n,a,i,s),Gl=r._sqlite3changeset_concat_strm=(e,t,n,a,i,s)=>(Gl=r._sqlite3changeset_concat_strm=x.sqlite3changeset_concat_strm)(e,t,n,a,i,s),Kl=r._sqlite3session_config=(e,t)=>(Kl=r._sqlite3session_config=x.sqlite3session_config)(e,t),Jl=r._sqlite3_sourceid=()=>(Jl=r._sqlite3_sourceid=x.sqlite3_sourceid)(),Xl=r._sqlite3__wasm_pstack_ptr=()=>(Xl=r._sqlite3__wasm_pstack_ptr=x.sqlite3__wasm_pstack_ptr)(),Yl=r._sqlite3__wasm_pstack_restore=e=>(Yl=r._sqlite3__wasm_pstack_restore=x.sqlite3__wasm_pstack_restore)(e),Zl=r._sqlite3__wasm_pstack_alloc=e=>(Zl=r._sqlite3__wasm_pstack_alloc=x.sqlite3__wasm_pstack_alloc)(e),ec=r._sqlite3__wasm_pstack_remaining=()=>(ec=r._sqlite3__wasm_pstack_remaining=x.sqlite3__wasm_pstack_remaining)(),tc=r._sqlite3__wasm_pstack_quota=()=>(tc=r._sqlite3__wasm_pstack_quota=x.sqlite3__wasm_pstack_quota)(),rc=r._sqlite3__wasm_db_error=(e,t,n)=>(rc=r._sqlite3__wasm_db_error=x.sqlite3__wasm_db_error)(e,t,n),nc=r._sqlite3__wasm_test_struct=e=>(nc=r._sqlite3__wasm_test_struct=x.sqlite3__wasm_test_struct)(e),ic=r._sqlite3__wasm_enum_json=()=>(ic=r._sqlite3__wasm_enum_json=x.sqlite3__wasm_enum_json)(),sc=r._sqlite3__wasm_vfs_unlink=(e,t)=>(sc=r._sqlite3__wasm_vfs_unlink=x.sqlite3__wasm_vfs_unlink)(e,t),oc=r._sqlite3__wasm_db_vfs=(e,t)=>(oc=r._sqlite3__wasm_db_vfs=x.sqlite3__wasm_db_vfs)(e,t),ac=r._sqlite3__wasm_db_reset=e=>(ac=r._sqlite3__wasm_db_reset=x.sqlite3__wasm_db_reset)(e),lc=r._sqlite3__wasm_db_export_chunked=(e,t)=>(lc=r._sqlite3__wasm_db_export_chunked=x.sqlite3__wasm_db_export_chunked)(e,t),cc=r._sqlite3__wasm_db_serialize=(e,t,n,a,i)=>(cc=r._sqlite3__wasm_db_serialize=x.sqlite3__wasm_db_serialize)(e,t,n,a,i),uc=r._sqlite3__wasm_vfs_create_file=(e,t,n,a)=>(uc=r._sqlite3__wasm_vfs_create_file=x.sqlite3__wasm_vfs_create_file)(e,t,n,a),_c=r._sqlite3__wasm_posix_create_file=(e,t,n)=>(_c=r._sqlite3__wasm_posix_create_file=x.sqlite3__wasm_posix_create_file)(e,t,n),fc=r._sqlite3__wasm_kvvfsMakeKeyOnPstack=(e,t)=>(fc=r._sqlite3__wasm_kvvfsMakeKeyOnPstack=x.sqlite3__wasm_kvvfsMakeKeyOnPstack)(e,t),dc=r._sqlite3__wasm_kvvfs_methods=()=>(dc=r._sqlite3__wasm_kvvfs_methods=x.sqlite3__wasm_kvvfs_methods)(),pc=r._sqlite3__wasm_vtab_config=(e,t,n)=>(pc=r._sqlite3__wasm_vtab_config=x.sqlite3__wasm_vtab_config)(e,t,n),mc=r._sqlite3__wasm_db_config_ip=(e,t,n,a)=>(mc=r._sqlite3__wasm_db_config_ip=x.sqlite3__wasm_db_config_ip)(e,t,n,a),hc=r._sqlite3__wasm_db_config_pii=(e,t,n,a,i)=>(hc=r._sqlite3__wasm_db_config_pii=x.sqlite3__wasm_db_config_pii)(e,t,n,a,i),gc=r._sqlite3__wasm_db_config_s=(e,t,n)=>(gc=r._sqlite3__wasm_db_config_s=x.sqlite3__wasm_db_config_s)(e,t,n),xc=r._sqlite3__wasm_config_i=(e,t)=>(xc=r._sqlite3__wasm_config_i=x.sqlite3__wasm_config_i)(e,t),bc=r._sqlite3__wasm_config_ii=(e,t,n)=>(bc=r._sqlite3__wasm_config_ii=x.sqlite3__wasm_config_ii)(e,t,n),yc=r._sqlite3__wasm_config_j=(e,t)=>(yc=r._sqlite3__wasm_config_j=x.sqlite3__wasm_config_j)(e,t),qc=r._sqlite3__wasm_qfmt_token=(e,t)=>(qc=r._sqlite3__wasm_qfmt_token=x.sqlite3__wasm_qfmt_token)(e,t),wc=r._sqlite3__wasm_init_wasmfs=e=>(wc=r._sqlite3__wasm_init_wasmfs=x.sqlite3__wasm_init_wasmfs)(e),vc=r._sqlite3__wasm_test_intptr=e=>(vc=r._sqlite3__wasm_test_intptr=x.sqlite3__wasm_test_intptr)(e),Ec=r._sqlite3__wasm_test_voidptr=e=>(Ec=r._sqlite3__wasm_test_voidptr=x.sqlite3__wasm_test_voidptr)(e),Sc=r._sqlite3__wasm_test_int64_max=()=>(Sc=r._sqlite3__wasm_test_int64_max=x.sqlite3__wasm_test_int64_max)(),Ac=r._sqlite3__wasm_test_int64_min=()=>(Ac=r._sqlite3__wasm_test_int64_min=x.sqlite3__wasm_test_int64_min)(),Tc=r._sqlite3__wasm_test_int64_times2=e=>(Tc=r._sqlite3__wasm_test_int64_times2=x.sqlite3__wasm_test_int64_times2)(e),kc=r._sqlite3__wasm_test_int64_minmax=(e,t)=>(kc=r._sqlite3__wasm_test_int64_minmax=x.sqlite3__wasm_test_int64_minmax)(e,t),Ic=r._sqlite3__wasm_test_int64ptr=e=>(Ic=r._sqlite3__wasm_test_int64ptr=x.sqlite3__wasm_test_int64ptr)(e),Fc=r._sqlite3__wasm_test_stack_overflow=e=>(Fc=r._sqlite3__wasm_test_stack_overflow=x.sqlite3__wasm_test_stack_overflow)(e),Oc=r._sqlite3__wasm_test_str_hello=e=>(Oc=r._sqlite3__wasm_test_str_hello=x.sqlite3__wasm_test_str_hello)(e),Pc=r._sqlite3__wasm_SQLTester_strglob=(e,t)=>(Pc=r._sqlite3__wasm_SQLTester_strglob=x.sqlite3__wasm_SQLTester_strglob)(e,t),Lc=r._malloc=e=>(Lc=r._malloc=x.malloc)(e),Dc=r._free=e=>(Dc=r._free=x.free)(e),Rc=r._realloc=(e,t)=>(Rc=r._realloc=x.realloc)(e,t),Vr=(e,t)=>(Vr=x.emscripten_builtin_memalign)(e,t),Hr=e=>(Hr=x._emscripten_stack_restore)(e),Cc=e=>(Cc=x._emscripten_stack_alloc)(e),Qr=()=>(Qr=x.emscripten_stack_get_current)();r.wasmMemory=ze;var Dt;ht=function e(){Dt||$r(),Dt||(ht=e)};function $r(){if(tt>0||(zn(),tt>0))return;function e(){Dt||(Dt=!0,r.calledRun=!0,!Ft&&(Vn(),b(r),r.onRuntimeInitialized?.(),Hn()))}r.setStatus?(r.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>r.setStatus(""),1),e()},1)):e()}if(r.preInit)for(typeof r.preInit=="function"&&(r.preInit=[r.preInit]);r.preInit.length>0;)r.preInit.pop()();return $r(),r.postRun||(r.postRun=[]),r.postRun.push(function(e){"use strict";"use strict";if(globalThis.sqlite3ApiBootstrap=function t(n=globalThis.sqlite3ApiConfig||t.defaultConfig){if(t.sqlite3)return(t.sqlite3.config||console).warn("sqlite3ApiBootstrap() called multiple times.","Config and external initializers are ignored on calls after the first."),t.sqlite3;let a=Object.assign(Object.create(null),{exports:void 0,memory:void 0,bigIntEnabled:typeof e<"u"&&e.HEAPU64?!0:!!globalThis.BigInt64Array,debug:console.debug.bind(console),warn:console.warn.bind(console),error:console.error.bind(console),log:console.log.bind(console),wasmfsOpfsDir:"/opfs",useStdAlloc:!1},n||{});Object.assign(a,{allocExportName:a.useStdAlloc?"malloc":"sqlite3_malloc",deallocExportName:a.useStdAlloc?"free":"sqlite3_free",reallocExportName:a.useStdAlloc?"realloc":"sqlite3_realloc"},a),["exports","memory","wasmfsOpfsDir"].forEach(l=>{typeof a[l]=="function"&&(a[l]=a[l]())}),delete globalThis.sqlite3ApiConfig,delete t.defaultConfig;let i=Object.create(null),s=Object.create(null),g=l=>i.sqlite3_js_rc_str&&i.sqlite3_js_rc_str(l)||"Unknown result code #"+l,y=l=>typeof l=="number"&&l===(l|0);class B extends Error{constructor(...f){let d;if(f.length)if(y(f[0]))if(d=f[0],f.length===1)super(g(f[0]));else{let w=g(d);typeof f[1]=="object"?super(w,f[1]):(f[0]=w+":",super(f.join(" ")))}else f.length===2&&typeof f[1]=="object"?super(...f):super(f.join(" "));this.resultCode=d||i.SQLITE_ERROR,this.name="SQLite3Error"}}B.toss=(...l)=>{throw new B(...l)};let W=B.toss;a.wasmfsOpfsDir&&!/^\/[^/]+$/.test(a.wasmfsOpfsDir)&&W("config.wasmfsOpfsDir must be falsy or in the form '/dir-name'.");let X=l=>typeof l!="bigint"&&l===(l|0)&&l<=2147483647&&l>=-2147483648,J=function l(f){return l._max||(l._max=BigInt("0x7fffffffffffffff"),l._min=~l._max),f>=l._min&&f<=l._max},te=l=>l>=-0x7fffffffn-1n&&l<=0x7fffffffn,F=function l(f){return l._min||(l._min=Number.MIN_SAFE_INTEGER,l._max=Number.MAX_SAFE_INTEGER),f>=l._min&&f<=l._max},P=l=>l&&l.constructor&&X(l.constructor.BYTES_PER_ELEMENT)?l:!1,M=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,T=l=>l.buffer instanceof M,q=(l,f,d)=>T(l)?l.slice(f,d):l.subarray(f,d),N=l=>l&&(l instanceof Uint8Array||l instanceof Int8Array||l instanceof ArrayBuffer),z=l=>l&&(l instanceof Uint8Array||l instanceof Int8Array||l instanceof ArrayBuffer),H=l=>N(l)||W("Value is not of a supported TypedArray type."),E=new TextDecoder("utf-8"),G=function(l,f,d){return E.decode(q(l,f,d))},p=function(l){return z(l)?G(l instanceof ArrayBuffer?new Uint8Array(l):l):Array.isArray(l)?l.join(""):(s.isPtr(l)&&(l=s.cstrToJs(l)),l)};class m extends Error{constructor(...f){f.length===2&&typeof f[1]=="object"?super(...f):f.length?super(f.join(" ")):super("Allocation failed."),this.resultCode=i.SQLITE_NOMEM,this.name="WasmAllocError"}}m.toss=(...l)=>{throw new m(...l)},Object.assign(i,{sqlite3_bind_blob:void 0,sqlite3_bind_text:void 0,sqlite3_create_function_v2:(l,f,d,w,Q,ae,he,fe,xe)=>{},sqlite3_create_function:(l,f,d,w,Q,ae,he,fe)=>{},sqlite3_create_window_function:(l,f,d,w,Q,ae,he,fe,xe,qe)=>{},sqlite3_prepare_v3:(l,f,d,w,Q,ae)=>{},sqlite3_prepare_v2:(l,f,d,w,Q)=>{},sqlite3_exec:(l,f,d,w,Q)=>{},sqlite3_randomness:(l,f)=>{}});let k={affirmBindableTypedArray:H,flexibleString:p,bigIntFits32:te,bigIntFits64:J,bigIntFitsDouble:F,isBindableTypedArray:N,isInt32:X,isSQLableTypedArray:z,isTypedArray:P,typedArrayToString:G,isUIThread:()=>globalThis.window===globalThis&&!!globalThis.document,isSharedTypedArray:T,toss:function(...l){throw new Error(l.join(" "))},toss3:W,typedArrayPart:q,affirmDbHeader:function(l){l instanceof ArrayBuffer&&(l=new Uint8Array(l));let f="SQLite format 3";f.length>l.byteLength&&W("Input does not contain an SQLite3 database header.");for(let d=0;d<f.length;++d)f.charCodeAt(d)!==l[d]&&W("Input does not contain an SQLite3 database header.")},affirmIsDb:function(l){l instanceof ArrayBuffer&&(l=new Uint8Array(l));let f=l.byteLength;(f<512||f%512!==0)&&W("Byte array size",f,"is invalid for an SQLite3 db."),k.affirmDbHeader(l)}};Object.assign(s,{ptrSizeof:a.wasmPtrSizeof||4,ptrIR:a.wasmPtrIR||"i32",bigIntEnabled:!!a.bigIntEnabled,exports:a.exports||W("Missing API config.exports (WASM module exports)."),memory:a.memory||a.exports.memory||W("API config object requires a WebAssembly.Memory object","in either config.exports.memory (exported)","or config.memory (imported)."),alloc:void 0,realloc:void 0,dealloc:void 0}),s.allocFromTypedArray=function(l){l instanceof ArrayBuffer&&(l=new Uint8Array(l)),H(l);let f=s.alloc(l.byteLength||1);return s.heapForSize(l.constructor).set(l.byteLength?l:[0],f),f};{let l=a.allocExportName,f=a.deallocExportName,d=a.reallocExportName;for(let w of[l,f,d])s.exports[w]instanceof Function||W("Missing required exports[",w,"] function.");s.alloc=function w(Q){return w.impl(Q)||m.toss("Failed to allocate",Q," bytes.")},s.alloc.impl=s.exports[l],s.realloc=function w(Q,ae){let he=w.impl(Q,ae);return ae?he||m.toss("Failed to reallocate",ae," bytes."):0},s.realloc.impl=s.exports[d],s.dealloc=s.exports[f]}s.compileOptionUsed=function l(f){if(arguments.length){if(Array.isArray(f)){let d={};return f.forEach(w=>{d[w]=i.sqlite3_compileoption_used(w)}),d}else if(typeof f=="object")return Object.keys(f).forEach(d=>{f[d]=i.sqlite3_compileoption_used(d)}),f}else{if(l._result)return l._result;l._opt||(l._rx=/^([^=]+)=(.+)/,l._rxInt=/^-?\d+$/,l._opt=function(he,fe){let xe=l._rx.exec(he);fe[0]=xe?xe[1]:he,fe[1]=xe?l._rxInt.test(xe[2])?+xe[2]:xe[2]:!0});let d={},w=[0,0],Q=0,ae;for(;ae=i.sqlite3_compileoption_get(Q++);)l._opt(ae,w),d[w[0]]=w[1];return l._result=d}return typeof f=="string"?!!i.sqlite3_compileoption_used(f):!1},s.pstack=Object.assign(Object.create(null),{restore:s.exports.sqlite3__wasm_pstack_restore,alloc:function(l){return typeof l=="string"&&!(l=s.sizeofIR(l))&&m.toss("Invalid value for pstack.alloc(",arguments[0],")"),s.exports.sqlite3__wasm_pstack_alloc(l)||m.toss("Could not allocate",l,"bytes from the pstack.")},allocChunks:function(l,f){typeof f=="string"&&!(f=s.sizeofIR(f))&&m.toss("Invalid size value for allocChunks(",arguments[1],")");let d=s.pstack.alloc(l*f),w=[],Q=0,ae=0;for(;Q<l;++Q,ae+=f)w.push(d+ae);return w},allocPtr:(l=1,f=!0)=>l===1?s.pstack.alloc(f?8:s.ptrSizeof):s.pstack.allocChunks(l,f?8:s.ptrSizeof),call:function(l){let f=s.pstack.pointer;try{return l(h)}finally{s.pstack.restore(f)}}}),Object.defineProperties(s.pstack,{pointer:{configurable:!1,iterable:!0,writeable:!1,get:s.exports.sqlite3__wasm_pstack_ptr},quota:{configurable:!1,iterable:!0,writeable:!1,get:s.exports.sqlite3__wasm_pstack_quota},remaining:{configurable:!1,iterable:!0,writeable:!1,get:s.exports.sqlite3__wasm_pstack_remaining}}),i.sqlite3_randomness=(...l)=>{if(l.length===1&&k.isTypedArray(l[0])&&l[0].BYTES_PER_ELEMENT===1){let f=l[0];if(f.byteLength===0)return s.exports.sqlite3_randomness(0,0),f;let d=s.pstack.pointer;try{let w=f.byteLength,Q=0,ae=s.exports.sqlite3_randomness,he=s.heap8u(),fe=w<512?w:512,xe=s.pstack.alloc(fe);do{let qe=w>fe?fe:w;ae(qe,xe),f.set(q(he,xe,xe+qe),Q),w-=qe,Q+=qe}while(w>0)}catch(w){console.error("Highly unexpected (and ignored!) exception in sqlite3_randomness():",w)}finally{s.pstack.restore(d)}return f}s.exports.sqlite3_randomness(...l)};let U;if(i.sqlite3_wasmfs_opfs_dir=function(){if(U!==void 0)return U;let l=a.wasmfsOpfsDir;if(!l||!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle)return U="";try{return l&&s.xCallWrapped("sqlite3__wasm_init_wasmfs","i32",["string"],l)===0?U=l:U=""}catch{return U=""}},i.sqlite3_wasmfs_filename_is_persistent=function(l){let f=i.sqlite3_wasmfs_opfs_dir();return f&&l?l.startsWith(f+"/"):!1},i.sqlite3_js_db_uses_vfs=function(l,f,d=0){try{let w=i.sqlite3_vfs_find(f);return w?l?w===i.sqlite3_js_db_vfs(l,d)?w:!1:w===i.sqlite3_vfs_find(0)?w:!1:!1}catch{return!1}},i.sqlite3_js_vfs_list=function(){let l=[],f=i.sqlite3_vfs_find(0);for(;f;){let d=new i.sqlite3_vfs(f);l.push(s.cstrToJs(d.$zName)),f=d.$pNext,d.dispose()}return l},i.sqlite3_js_db_export=function(l,f=0){l=s.xWrap.testConvertArg("sqlite3*",l),l||W("Invalid sqlite3* argument."),s.bigIntEnabled||W("BigInt64 support is not enabled.");let d=s.scopedAllocPush(),w;try{let Q=s.scopedAlloc(8+s.ptrSizeof),ae=Q+8,he=f?s.isPtr(f)?f:s.scopedAllocCString(""+f):0,fe=s.exports.sqlite3__wasm_db_serialize(l,he,ae,Q,0);fe&&W("Database serialization failed with code",h.capi.sqlite3_js_rc_str(fe)),w=s.peekPtr(ae);let xe=s.peek(Q,"i64");return fe=xe?s.heap8u().slice(w,w+Number(xe)):new Uint8Array,fe}finally{w&&s.exports.sqlite3_free(w),s.scopedAllocPop(d)}},i.sqlite3_js_db_vfs=(l,f=0)=>k.sqlite3__wasm_db_vfs(l,f),i.sqlite3_js_aggregate_context=(l,f)=>i.sqlite3_aggregate_context(l,f)||(f?m.toss("Cannot allocate",f,"bytes for sqlite3_aggregate_context()"):0),i.sqlite3_js_posix_create_file=function(l,f,d){let w;f&&s.isPtr(f)?w=f:f instanceof ArrayBuffer||f instanceof Uint8Array?(w=s.allocFromTypedArray(f),(arguments.length<3||!k.isInt32(d)||d<0)&&(d=f.byteLength)):B.toss("Invalid 2nd argument for sqlite3_js_posix_create_file().");try{(!k.isInt32(d)||d<0)&&B.toss("Invalid 3rd argument for sqlite3_js_posix_create_file().");let Q=k.sqlite3__wasm_posix_create_file(l,w,d);Q&&B.toss("Creation of file failed with sqlite3 result code",i.sqlite3_js_rc_str(Q))}finally{s.dealloc(w)}},i.sqlite3_js_vfs_create_file=function(l,f,d,w){a.warn("sqlite3_js_vfs_create_file() is deprecated and","should be avoided because it can lead to C-level crashes.","See its documentation for alternative options.");let Q;d?(s.isPtr(d)?Q=d:d instanceof ArrayBuffer&&(d=new Uint8Array(d)),d instanceof Uint8Array?(Q=s.allocFromTypedArray(d),(arguments.length<4||!k.isInt32(w)||w<0)&&(w=d.byteLength)):B.toss("Invalid 3rd argument type for sqlite3_js_vfs_create_file().")):Q=0,(!k.isInt32(w)||w<0)&&(s.dealloc(Q),B.toss("Invalid 4th argument for sqlite3_js_vfs_create_file()."));try{let ae=k.sqlite3__wasm_vfs_create_file(l,f,Q,w);ae&&B.toss("Creation of file failed with sqlite3 result code",i.sqlite3_js_rc_str(ae))}finally{s.dealloc(Q)}},i.sqlite3_js_sql_to_string=l=>{if(typeof l=="string")return l;let f=p(v);return f===v?void 0:f},k.isUIThread()){let l=function(f){let d=Object.create(null);return d.prefix="kvvfs-"+f,d.stores=[],(f==="session"||f==="")&&d.stores.push(globalThis.sessionStorage),(f==="local"||f==="")&&d.stores.push(globalThis.localStorage),d};i.sqlite3_js_kvvfs_clear=function(f=""){let d=0,w=l(f);return w.stores.forEach(Q=>{let ae=[],he;for(he=0;he<Q.length;++he){let fe=Q.key(he);fe.startsWith(w.prefix)&&ae.push(fe)}ae.forEach(fe=>Q.removeItem(fe)),d+=ae.length}),d},i.sqlite3_js_kvvfs_size=function(f=""){let d=0,w=l(f);return w.stores.forEach(Q=>{let ae;for(ae=0;ae<Q.length;++ae){let he=Q.key(ae);he.startsWith(w.prefix)&&(d+=he.length,d+=Q.getItem(he).length)}}),d*2}}i.sqlite3_db_config=function(l,f,...d){switch(this.s||(this.s=s.xWrap("sqlite3__wasm_db_config_s","int",["sqlite3*","int","string:static"]),this.pii=s.xWrap("sqlite3__wasm_db_config_pii","int",["sqlite3*","int","*","int","int"]),this.ip=s.xWrap("sqlite3__wasm_db_config_ip","int",["sqlite3*","int","int","*"])),f){case i.SQLITE_DBCONFIG_ENABLE_FKEY:case i.SQLITE_DBCONFIG_ENABLE_TRIGGER:case i.SQLITE_DBCONFIG_ENABLE_FTS3_TOKENIZER:case i.SQLITE_DBCONFIG_ENABLE_LOAD_EXTENSION:case i.SQLITE_DBCONFIG_NO_CKPT_ON_CLOSE:case i.SQLITE_DBCONFIG_ENABLE_QPSG:case i.SQLITE_DBCONFIG_TRIGGER_EQP:case i.SQLITE_DBCONFIG_RESET_DATABASE:case i.SQLITE_DBCONFIG_DEFENSIVE:case i.SQLITE_DBCONFIG_WRITABLE_SCHEMA:case i.SQLITE_DBCONFIG_LEGACY_ALTER_TABLE:case i.SQLITE_DBCONFIG_DQS_DML:case i.SQLITE_DBCONFIG_DQS_DDL:case i.SQLITE_DBCONFIG_ENABLE_VIEW:case i.SQLITE_DBCONFIG_LEGACY_FILE_FORMAT:case i.SQLITE_DBCONFIG_TRUSTED_SCHEMA:case i.SQLITE_DBCONFIG_STMT_SCANSTATUS:case i.SQLITE_DBCONFIG_REVERSE_SCANORDER:return this.ip(l,f,d[0],d[1]||0);case i.SQLITE_DBCONFIG_LOOKASIDE:return this.pii(l,f,d[0],d[1],d[2]);case i.SQLITE_DBCONFIG_MAINDBNAME:return this.s(l,f,d[0]);default:return i.SQLITE_MISUSE}}.bind(Object.create(null)),i.sqlite3_value_to_js=function(l,f=!0){let d,w=i.sqlite3_value_type(l);switch(w){case i.SQLITE_INTEGER:s.bigIntEnabled?(d=i.sqlite3_value_int64(l),k.bigIntFitsDouble(d)&&(d=Number(d))):d=i.sqlite3_value_double(l);break;case i.SQLITE_FLOAT:d=i.sqlite3_value_double(l);break;case i.SQLITE_TEXT:d=i.sqlite3_value_text(l);break;case i.SQLITE_BLOB:{let Q=i.sqlite3_value_bytes(l),ae=i.sqlite3_value_blob(l);Q&&!ae&&h.WasmAllocError.toss("Cannot allocate memory for blob argument of",Q,"byte(s)"),d=Q?s.heap8u().slice(ae,ae+Number(Q)):null;break}case i.SQLITE_NULL:d=null;break;default:f&&W(i.SQLITE_MISMATCH,"Unhandled sqlite3_value_type():",w),d=void 0}return d},i.sqlite3_values_to_js=function(l,f,d=!0){let w,Q=[];for(w=0;w<l;++w)Q.push(i.sqlite3_value_to_js(s.peekPtr(f+s.ptrSizeof*w),d));return Q},i.sqlite3_result_error_js=function(l,f){f instanceof m?i.sqlite3_result_error_nomem(l):i.sqlite3_result_error(l,""+f,-1)},i.sqlite3_result_js=function(l,f){if(f instanceof Error){i.sqlite3_result_error_js(l,f);return}try{switch(typeof f){case"undefined":break;case"boolean":i.sqlite3_result_int(l,f?1:0);break;case"bigint":k.bigIntFits32(f)?i.sqlite3_result_int(l,Number(f)):k.bigIntFitsDouble(f)?i.sqlite3_result_double(l,Number(f)):s.bigIntEnabled?k.bigIntFits64(f)?i.sqlite3_result_int64(l,f):W("BigInt value",f.toString(),"is too BigInt for int64."):W("BigInt value",f.toString(),"is too BigInt.");break;case"number":{let d;k.isInt32(f)?d=i.sqlite3_result_int:s.bigIntEnabled&&Number.isInteger(f)&&k.bigIntFits64(BigInt(f))?d=i.sqlite3_result_int64:d=i.sqlite3_result_double,d(l,f);break}case"string":{let[d,w]=s.allocCString(f,!0);i.sqlite3_result_text(l,d,w,i.SQLITE_WASM_DEALLOC);break}case"object":if(f===null){i.sqlite3_result_null(l);break}else if(k.isBindableTypedArray(f)){let d=s.allocFromTypedArray(f);i.sqlite3_result_blob(l,d,f.byteLength,i.SQLITE_WASM_DEALLOC);break}default:W("Don't not how to handle this UDF result value:",typeof f,f)}}catch(d){i.sqlite3_result_error_js(l,d)}},i.sqlite3_column_js=function(l,f,d=!0){let w=i.sqlite3_column_value(l,f);return w===0?void 0:i.sqlite3_value_to_js(w,d)};let j=function(l,f,d){d=i[d],this.ptr?s.pokePtr(this.ptr,0):this.ptr=s.allocPtr();let w=d(l,f,this.ptr);if(w)return B.toss(w,arguments[2]+"() failed with code "+w);let Q=s.peekPtr(this.ptr);return Q?i.sqlite3_value_to_js(Q,!0):void 0}.bind(Object.create(null));i.sqlite3_preupdate_new_js=(l,f)=>j(l,f,"sqlite3_preupdate_new"),i.sqlite3_preupdate_old_js=(l,f)=>j(l,f,"sqlite3_preupdate_old"),i.sqlite3changeset_new_js=(l,f)=>j(l,f,"sqlite3changeset_new"),i.sqlite3changeset_old_js=(l,f)=>j(l,f,"sqlite3changeset_old");let h={WasmAllocError:m,SQLite3Error:B,capi:i,util:k,wasm:s,config:a,version:Object.create(null),client:void 0,asyncPostInit:async function l(){if(l.isReady instanceof Promise)return l.isReady;let f=t.initializersAsync;delete t.initializersAsync;let d=async()=>(h.__isUnderTest||(delete h.util,delete h.StructBinder),h),w=ae=>{throw a.error("an async sqlite3 initializer failed:",ae),ae};if(!f||!f.length)return l.isReady=d().catch(w);f=f.map(ae=>ae instanceof Function?async he=>ae(h):ae),f.push(d);let Q=Promise.resolve(h);for(;f.length;)Q=Q.then(f.shift());return l.isReady=Q.catch(w)},scriptInfo:void 0};try{t.initializers.forEach(l=>{l(h)})}catch(l){throw console.error("sqlite3 bootstrap initializer threw:",l),l}return delete t.initializers,t.sqlite3=h,h},globalThis.sqlite3ApiBootstrap.initializers=[],globalThis.sqlite3ApiBootstrap.initializersAsync=[],globalThis.sqlite3ApiBootstrap.defaultConfig=Object.create(null),globalThis.sqlite3ApiBootstrap.sqlite3=void 0,globalThis.WhWasmUtilInstaller=function(t){"use strict";t.bigIntEnabled===void 0&&(t.bigIntEnabled=!!globalThis.BigInt64Array);let n=(...p)=>{throw new Error(p.join(" "))};t.exports||Object.defineProperty(t,"exports",{enumerable:!0,configurable:!0,get:()=>t.instance&&t.instance.exports});let a=t.pointerIR||"i32",i=t.ptrSizeof=a==="i32"?4:a==="i64"?8:n("Unhandled ptrSizeof:",a),s=Object.create(null);s.heapSize=0,s.memory=null,s.freeFuncIndexes=[],s.scopedAlloc=[],s.utf8Decoder=new TextDecoder,s.utf8Encoder=new TextEncoder("utf-8"),t.sizeofIR=p=>{switch(p){case"i8":return 1;case"i16":return 2;case"i32":case"f32":case"float":return 4;case"i64":case"f64":case"double":return 8;case"*":return i;default:return(""+p).endsWith("*")?i:void 0}};let g=function(){if(!s.memory)s.memory=t.memory instanceof WebAssembly.Memory?t.memory:t.exports.memory;else if(s.heapSize===s.memory.buffer.byteLength)return s;let p=s.memory.buffer;return s.HEAP8=new Int8Array(p),s.HEAP8U=new Uint8Array(p),s.HEAP16=new Int16Array(p),s.HEAP16U=new Uint16Array(p),s.HEAP32=new Int32Array(p),s.HEAP32U=new Uint32Array(p),t.bigIntEnabled&&(s.HEAP64=new BigInt64Array(p),s.HEAP64U=new BigUint64Array(p)),s.HEAP32F=new Float32Array(p),s.HEAP64F=new Float64Array(p),s.heapSize=p.byteLength,s};t.heap8=()=>g().HEAP8,t.heap8u=()=>g().HEAP8U,t.heap16=()=>g().HEAP16,t.heap16u=()=>g().HEAP16U,t.heap32=()=>g().HEAP32,t.heap32u=()=>g().HEAP32U,t.heapForSize=function(p,m=!0){let k,U=s.memory&&s.heapSize===s.memory.buffer.byteLength?s:g();switch(p){case Int8Array:return U.HEAP8;case Uint8Array:return U.HEAP8U;case Int16Array:return U.HEAP16;case Uint16Array:return U.HEAP16U;case Int32Array:return U.HEAP32;case Uint32Array:return U.HEAP32U;case 8:return m?U.HEAP8U:U.HEAP8;case 16:return m?U.HEAP16U:U.HEAP16;case 32:return m?U.HEAP32U:U.HEAP32;case 64:if(U.HEAP64)return m?U.HEAP64U:U.HEAP64;break;default:if(t.bigIntEnabled){if(p===globalThis.BigUint64Array)return U.HEAP64U;if(p===globalThis.BigInt64Array)return U.HEAP64;break}}n("Invalid heapForSize() size: expecting 8, 16, 32,","or (if BigInt is enabled) 64.")},t.functionTable=function(){return t.exports.__indirect_function_table},t.functionEntry=function(p){let m=t.functionTable();return p<m.length?m.get(p):void 0},t.jsFuncToWasm=function p(m,k){if(p._||(p._={sigTypes:Object.assign(Object.create(null),{i:"i32",p:"i32",P:"i32",s:"i32",j:"i64",f:"f32",d:"f64"}),typeCodes:Object.assign(Object.create(null),{f64:124,f32:125,i64:126,i32:127}),uleb128Encode:function(h,l,f){f<128?h[l](f):h[l](f%128|128,f>>7)},rxJSig:/^(\w)\((\w*)\)$/,sigParams:function(h){let l=p._.rxJSig.exec(h);return l?l[2]:h.substr(1)},letterType:h=>p._.sigTypes[h]||n("Invalid signature letter:",h),pushSigType:(h,l)=>h.push(p._.typeCodes[p._.letterType(l)])}),typeof m=="string"){let h=k;k=m,m=h}let U=p._.sigParams(k),j=[1,96];p._.uleb128Encode(j,"push",U.length);for(let h of U)p._.pushSigType(j,h);return k[0]==="v"?j.push(0):(j.push(1),p._.pushSigType(j,k[0])),p._.uleb128Encode(j,"unshift",j.length),j.unshift(0,97,115,109,1,0,0,0,1),j.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array(j)),{e:{f:m}}).exports.f};let y=function(m,k,U){if(U&&!s.scopedAlloc.length&&n("No scopedAllocPush() scope is active."),typeof m=="string"){let f=k;k=m,m=f}(typeof k!="string"||!(m instanceof Function))&&n("Invalid arguments: expecting (function,signature) or (signature,function).");let j=t.functionTable(),h=j.length,l;for(;s.freeFuncIndexes.length&&(l=s.freeFuncIndexes.pop(),j.get(l));){l=null;continue}l||(l=h,j.grow(1));try{return j.set(l,m),U&&s.scopedAlloc[s.scopedAlloc.length-1].push(l),l}catch(f){if(!(f instanceof TypeError))throw l===h&&s.freeFuncIndexes.push(h),f}try{let f=t.jsFuncToWasm(m,k);j.set(l,f),U&&s.scopedAlloc[s.scopedAlloc.length-1].push(l)}catch(f){throw l===h&&s.freeFuncIndexes.push(h),f}return l};t.installFunction=(p,m)=>y(p,m,!1),t.scopedInstallFunction=(p,m)=>y(p,m,!0),t.uninstallFunction=function(p){if(!p&&p!==0)return;let m=s.freeFuncIndexes,k=t.functionTable();m.push(p);let U=k.get(p);return k.set(p,null),U},t.peek=function(m,k="i8"){k.endsWith("*")&&(k=a);let U=s.memory&&s.heapSize===s.memory.buffer.byteLength?s:g(),j=Array.isArray(m)?[]:void 0,h;do{switch(j&&(m=arguments[0].shift()),k){case"i1":case"i8":h=U.HEAP8[m>>0];break;case"i16":h=U.HEAP16[m>>1];break;case"i32":h=U.HEAP32[m>>2];break;case"float":case"f32":h=U.HEAP32F[m>>2];break;case"double":case"f64":h=Number(U.HEAP64F[m>>3]);break;case"i64":if(t.bigIntEnabled){h=BigInt(U.HEAP64[m>>3]);break}default:n("Invalid type for peek():",k)}j&&j.push(h)}while(j&&arguments[0].length);return j||h},t.poke=function(p,m,k="i8"){k.endsWith("*")&&(k=a);let U=s.memory&&s.heapSize===s.memory.buffer.byteLength?s:g();for(let j of Array.isArray(p)?p:[p])switch(k){case"i1":case"i8":U.HEAP8[j>>0]=m;continue;case"i16":U.HEAP16[j>>1]=m;continue;case"i32":U.HEAP32[j>>2]=m;continue;case"float":case"f32":U.HEAP32F[j>>2]=m;continue;case"double":case"f64":U.HEAP64F[j>>3]=m;continue;case"i64":if(U.HEAP64){U.HEAP64[j>>3]=BigInt(m);continue}default:n("Invalid type for poke(): "+k)}return this},t.peekPtr=(...p)=>t.peek(p.length===1?p[0]:p,a),t.pokePtr=(p,m=0)=>t.poke(p,m,a),t.peek8=(...p)=>t.peek(p.length===1?p[0]:p,"i8"),t.poke8=(p,m)=>t.poke(p,m,"i8"),t.peek16=(...p)=>t.peek(p.length===1?p[0]:p,"i16"),t.poke16=(p,m)=>t.poke(p,m,"i16"),t.peek32=(...p)=>t.peek(p.length===1?p[0]:p,"i32"),t.poke32=(p,m)=>t.poke(p,m,"i32"),t.peek64=(...p)=>t.peek(p.length===1?p[0]:p,"i64"),t.poke64=(p,m)=>t.poke(p,m,"i64"),t.peek32f=(...p)=>t.peek(p.length===1?p[0]:p,"f32"),t.poke32f=(p,m)=>t.poke(p,m,"f32"),t.peek64f=(...p)=>t.peek(p.length===1?p[0]:p,"f64"),t.poke64f=(p,m)=>t.poke(p,m,"f64"),t.getMemValue=t.peek,t.getPtrValue=t.peekPtr,t.setMemValue=t.poke,t.setPtrValue=t.pokePtr,t.isPtr32=p=>typeof p=="number"&&p===(p|0)&&p>=0,t.isPtr=t.isPtr32,t.cstrlen=function(p){if(!p||!t.isPtr(p))return null;let m=g().HEAP8U,k=p;for(;m[k]!==0;++k);return k-p};let B=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,W=function(p,m,k){return s.utf8Decoder.decode(p.buffer instanceof B?p.slice(m,k):p.subarray(m,k))};t.cstrToJs=function(p){let m=t.cstrlen(p);return m?W(g().HEAP8U,p,p+m):m===null?m:""},t.jstrlen=function(p){if(typeof p!="string")return null;let m=p.length,k=0;for(let U=0;U<m;++U){let j=p.charCodeAt(U);j>=55296&&j<=57343&&(j=65536+((j&1023)<<10)|p.charCodeAt(++U)&1023),j<=127?++k:j<=2047?k+=2:j<=65535?k+=3:k+=4}return k},t.jstrcpy=function(p,m,k=0,U=-1,j=!0){if((!m||!(m instanceof Int8Array)&&!(m instanceof Uint8Array))&&n("jstrcpy() target must be an Int8Array or Uint8Array."),U<0&&(U=m.length-k),!(U>0)||!(k>=0))return 0;let h=0,l=p.length,f=k,d=k+U-(j?1:0);for(;h<l&&k<d;++h){let w=p.charCodeAt(h);if(w>=55296&&w<=57343&&(w=65536+((w&1023)<<10)|p.charCodeAt(++h)&1023),w<=127){if(k>=d)break;m[k++]=w}else if(w<=2047){if(k+1>=d)break;m[k++]=192|w>>6,m[k++]=128|w&63}else if(w<=65535){if(k+2>=d)break;m[k++]=224|w>>12,m[k++]=128|w>>6&63,m[k++]=128|w&63}else{if(k+3>=d)break;m[k++]=240|w>>18,m[k++]=128|w>>12&63,m[k++]=128|w>>6&63,m[k++]=128|w&63}}return j&&(m[k++]=0),k-f},t.cstrncpy=function(p,m,k){if((!p||!m)&&n("cstrncpy() does not accept NULL strings."),k<0)k=t.cstrlen(strPtr)+1;else if(!(k>0))return 0;let U=t.heap8u(),j=0,h;for(;j<k&&(h=U[m+j]);++j)U[p+j]=h;return j<k&&(U[p+j++]=0),j},t.jstrToUintArray=(p,m=!1)=>s.utf8Encoder.encode(m?p+"\0":p);let X=(p,m)=>{(!(p.alloc instanceof Function)||!(p.dealloc instanceof Function))&&n("Object is missing alloc() and/or dealloc() function(s)","required by",m+"().")},J=function(p,m,k,U){if(X(t,U),typeof p!="string")return null;{let j=s.utf8Encoder.encode(p),h=k(j.length+1),l=g().HEAP8U;return l.set(j,h),l[h+j.length]=0,m?[h,j.length]:h}};t.allocCString=(p,m=!1)=>J(p,m,t.alloc,"allocCString()"),t.scopedAllocPush=function(){X(t,"scopedAllocPush");let p=[];return s.scopedAlloc.push(p),p},t.scopedAllocPop=function(p){X(t,"scopedAllocPop");let m=arguments.length?s.scopedAlloc.indexOf(p):s.scopedAlloc.length-1;m<0&&n("Invalid state object for scopedAllocPop()."),arguments.length===0&&(p=s.scopedAlloc[m]),s.scopedAlloc.splice(m,1);for(let k;k=p.pop();)t.functionEntry(k)?t.uninstallFunction(k):t.dealloc(k)},t.scopedAlloc=function(p){s.scopedAlloc.length||n("No scopedAllocPush() scope is active.");let m=t.alloc(p);return s.scopedAlloc[s.scopedAlloc.length-1].push(m),m},Object.defineProperty(t.scopedAlloc,"level",{configurable:!1,enumerable:!1,get:()=>s.scopedAlloc.length,set:()=>n("The 'active' property is read-only.")}),t.scopedAllocCString=(p,m=!1)=>J(p,m,t.scopedAlloc,"scopedAllocCString()");let te=function(p,m){let k=t[p?"scopedAlloc":"alloc"]((m.length+1)*t.ptrSizeof),U=0;return m.forEach(j=>{t.pokePtr(k+t.ptrSizeof*U++,t[p?"scopedAllocCString":"allocCString"](""+j))}),t.pokePtr(k+t.ptrSizeof*U,0),k};t.scopedAllocMainArgv=p=>te(!0,p),t.allocMainArgv=p=>te(!1,p),t.cArgvToJs=(p,m)=>{let k=[];for(let U=0;U<p;++U){let j=t.peekPtr(m+t.ptrSizeof*U);k.push(j?t.cstrToJs(j):null)}return k},t.scopedAllocCall=function(p){t.scopedAllocPush();try{return p()}finally{t.scopedAllocPop()}};let F=function(p,m,k){X(t,k);let U=m?"i64":a,j=t[k](p*(m?8:i));if(t.poke(j,0,U),p===1)return j;let h=[j];for(let l=1;l<p;++l)j+=m?8:i,h[l]=j,t.poke(j,0,U);return h};t.allocPtr=(p=1,m=!0)=>F(p,m,"alloc"),t.scopedAllocPtr=(p=1,m=!0)=>F(p,m,"scopedAlloc"),t.xGet=function(p){return t.exports[p]||n("Cannot find exported symbol:",p)};let P=(p,m)=>n(p+"() requires",m,"argument(s).");t.xCall=function(p,...m){let k=p instanceof Function?p:t.xGet(p);return k instanceof Function||n("Exported symbol",p,"is not a function."),k.length!==m.length&&P(k===p?k.name:p,k.length),arguments.length===2&&Array.isArray(arguments[1])?k.apply(null,arguments[1]):k.apply(null,m)},s.xWrap=Object.create(null),s.xWrap.convert=Object.create(null),s.xWrap.convert.arg=new Map,s.xWrap.convert.result=new Map;let M=s.xWrap.convert.arg,T=s.xWrap.convert.result;t.bigIntEnabled&&M.set("i64",p=>BigInt(p));let q=a==="i32"?p=>p|0:p=>BigInt(p)|BigInt(0);M.set("i32",q).set("i16",p=>(p|0)&65535).set("i8",p=>(p|0)&255).set("f32",p=>Number(p).valueOf()).set("float",M.get("f32")).set("f64",M.get("f32")).set("double",M.get("f64")).set("int",M.get("i32")).set("null",p=>p).set(null,M.get("null")).set("**",q).set("*",q),T.set("*",q).set("pointer",q).set("number",p=>Number(p)).set("void",p=>{}).set("null",p=>p).set(null,T.get("null"));{let p=["i8","i16","i32","int","f32","float","f64","double"];t.bigIntEnabled&&p.push("i64");let m=M.get(a);for(let k of p)M.set(k+"*",m),T.set(k+"*",m),T.set(k,M.get(k)||n("Missing arg converter:",k))}let N=function(p){return typeof p=="string"?t.scopedAllocCString(p):p?q(p):null};M.set("string",N).set("utf8",N).set("pointer",N),T.set("string",p=>t.cstrToJs(p)).set("utf8",T.get("string")).set("string:dealloc",p=>{try{return p?t.cstrToJs(p):null}finally{t.dealloc(p)}}).set("utf8:dealloc",T.get("string:dealloc")).set("json",p=>JSON.parse(t.cstrToJs(p))).set("json:dealloc",p=>{try{return p?JSON.parse(t.cstrToJs(p)):null}finally{t.dealloc(p)}});let z=class{constructor(p){this.name=p.name||"unnamed adapter"}convertArg(p,m,k){n("AbstractArgAdapter must be subclassed.")}};M.FuncPtrAdapter=class Ge extends z{constructor(m){super(m),M.FuncPtrAdapter.warnOnUse&&console.warn("xArg.FuncPtrAdapter is an internal-only API","and is not intended to be invoked from","client-level code. Invoked with:",m),this.name=m.name||"unnamed",this.signature=m.signature,m.contextKey instanceof Function&&(this.contextKey=m.contextKey,m.bindScope||(m.bindScope="context")),this.bindScope=m.bindScope||n("FuncPtrAdapter options requires a bindScope (explicit or implied)."),Ge.bindScopes.indexOf(m.bindScope)<0&&n("Invalid options.bindScope ("+m.bindMod+") for FuncPtrAdapter. Expecting one of: ("+Ge.bindScopes.join(", ")+")"),this.isTransient=this.bindScope==="transient",this.isContext=this.bindScope==="context",this.isPermanent=this.bindScope==="permanent",this.singleton=this.bindScope==="singleton"?[]:void 0,this.callProxy=m.callProxy instanceof Function?m.callProxy:void 0}contextKey(m,k){return this}contextMap(m){let k=this.__cmap||(this.__cmap=new Map),U=k.get(m);return U===void 0&&k.set(m,U=[]),U}convertArg(m,k,U){let j=this.singleton;if(!j&&this.isContext&&(j=this.contextMap(this.contextKey(k,U))),j&&j[0]===m)return j[1];if(m instanceof Function){this.callProxy&&(m=this.callProxy(m));let h=y(m,this.signature,this.isTransient);if(Ge.debugFuncInstall&&Ge.debugOut("FuncPtrAdapter installed",this,this.contextKey(k,U),"@"+h,m),j){if(j[1]){Ge.debugFuncInstall&&Ge.debugOut("FuncPtrAdapter uninstalling",this,this.contextKey(k,U),"@"+j[1],m);try{s.scopedAlloc[s.scopedAlloc.length-1].push(j[1])}catch{}}j[0]=m,j[1]=h}return h}else if(t.isPtr(m)||m===null||m===void 0){if(j&&j[1]&&j[1]!==m){Ge.debugFuncInstall&&Ge.debugOut("FuncPtrAdapter uninstalling",this,this.contextKey(k,U),"@"+j[1],m);try{s.scopedAlloc[s.scopedAlloc.length-1].push(j[1])}catch{}j[0]=j[1]=m|0}return m||0}else throw new TypeError("Invalid FuncPtrAdapter argument type. Expecting a function pointer or a "+(this.name?this.name+" ":"")+"function matching signature "+this.signature+".")}},M.FuncPtrAdapter.warnOnUse=!1,M.FuncPtrAdapter.debugFuncInstall=!1,M.FuncPtrAdapter.debugOut=console.debug.bind(console),M.FuncPtrAdapter.bindScopes=["transient","context","singleton","permanent"];let H=p=>M.get(p)||n("Argument adapter not found:",p),E=p=>T.get(p)||n("Result adapter not found:",p);s.xWrap.convertArg=(p,...m)=>H(p)(...m),s.xWrap.convertArgNoCheck=(p,...m)=>M.get(p)(...m),s.xWrap.convertResult=(p,m)=>p===null?m:p?E(p)(m):void 0,s.xWrap.convertResultNoCheck=(p,m)=>p===null?m:p?T.get(p)(m):void 0,t.xWrap=function(p,m,...k){arguments.length===3&&Array.isArray(arguments[2])&&(k=arguments[2]),t.isPtr(p)&&(p=t.functionEntry(p)||n("Function pointer not found in WASM function table."));let U=p instanceof Function,j=U?p:t.xGet(p);if(U&&(p=j.name||"unnamed function"),k.length!==j.length&&P(p,j.length),m===null&&j.length===0)return j;m!=null&&E(m);for(let l of k)l instanceof z?M.set(l,(...f)=>l.convertArg(...f)):H(l);let h=s.xWrap;return j.length===0?(...l)=>l.length?P(p,j.length):h.convertResult(m,j.call(null)):function(...l){l.length!==j.length&&P(p,j.length);let f=t.scopedAllocPush();try{let d=0;for(;d<l.length;++d)l[d]=h.convertArgNoCheck(k[d],l[d],l,d);return h.convertResultNoCheck(m,j.apply(null,l))}finally{t.scopedAllocPop(f)}}};let G=function(p,m,k,U,j,h){if(typeof k=="string"){if(m===1)return h.get(k);if(m===2){if(U)U instanceof Function||n(j,"requires a function argument.");else return delete h.get(k),p;return h.set(k,U),p}}n("Invalid arguments to",j)};return t.xWrap.resultAdapter=function p(m,k){return G(p,arguments.length,m,k,"resultAdapter()",T)},t.xWrap.argAdapter=function p(m,k){return G(p,arguments.length,m,k,"argAdapter()",M)},t.xWrap.FuncPtrAdapter=M.FuncPtrAdapter,t.xCallWrapped=function(p,m,k,...U){return Array.isArray(arguments[3])&&(U=arguments[3]),t.xWrap(p,m,k||[]).apply(null,U||[])},t.xWrap.testConvertArg=s.xWrap.convertArg,t.xWrap.testConvertResult=s.xWrap.convertResult,t},globalThis.WhWasmUtilInstaller.yawl=function(t){let n=()=>fetch(t.uri,{credentials:"same-origin"}),a=this,i=function(g){if(t.wasmUtilTarget){let y=(...W)=>{throw new Error(W.join(" "))},B=t.wasmUtilTarget;if(B.module=g.module,B.instance=g.instance,B.instance.exports.memory||(B.memory=t.imports&&t.imports.env&&t.imports.env.memory||y("Missing 'memory' object!")),!B.alloc&&g.instance.exports.malloc){let W=g.instance.exports;B.alloc=function(X){return W.malloc(X)||y("Allocation of",X,"bytes failed.")},B.dealloc=function(X){W.free(X)}}a(B)}return t.onload&&t.onload(g,t),g};return WebAssembly.instantiateStreaming?function(){return WebAssembly.instantiateStreaming(n(),t.imports||{}).then(i)}:function(){return n().then(y=>y.arrayBuffer()).then(y=>WebAssembly.instantiate(y,t.imports||{})).then(i)}}.bind(globalThis.WhWasmUtilInstaller),globalThis.Jaccwabyt=function t(n){let a=(...R)=>{throw new Error(R.join(" "))};!(n.heap instanceof WebAssembly.Memory)&&!(n.heap instanceof Function)&&a("config.heap must be WebAssembly.Memory instance or a function."),["alloc","dealloc"].forEach(function(R){n[R]instanceof Function||a("Config option '"+R+"' must be a function.")});let i=t,s=n.heap instanceof Function?n.heap:()=>new Uint8Array(n.heap.buffer),g=n.alloc,y=n.dealloc,B=n.log||console.log.bind(console),W=n.memberPrefix||"",X=n.memberSuffix||"",J=n.bigIntEnabled===void 0?!!globalThis.BigInt64Array:!!n.bigIntEnabled,te=globalThis.BigInt,F=globalThis.BigInt64Array,P=n.ptrSizeof||4,M=n.ptrIR||"i32";i.debugFlags||(i.__makeDebugFlags=function(R=null){R&&R.__flags&&(R=R.__flags);let ne=function le(ce){return arguments.length===0?le.__flags:(ce<0?(delete le.__flags.getter,delete le.__flags.setter,delete le.__flags.alloc,delete le.__flags.dealloc):(le.__flags.getter=(1&ce)!==0,le.__flags.setter=(2&ce)!==0,le.__flags.alloc=(4&ce)!==0,le.__flags.dealloc=(8&ce)!==0),le._flags)};return Object.defineProperty(ne,"__flags",{iterable:!1,writable:!1,value:Object.create(R)}),R||ne(0),ne},i.debugFlags=i.__makeDebugFlags());let T=function(){let R=new ArrayBuffer(2);return new DataView(R).setInt16(0,256,!0),new Int16Array(R)[0]===256}(),q=R=>R[1]==="(",N=R=>R==="p"||R==="P",z=R=>R==="P",H=R=>q(R)?"p":R[0],E=function(R){switch(H(R)){case"c":case"C":return"i8";case"i":return"i32";case"p":case"P":case"s":return M;case"j":return"i64";case"f":return"float";case"d":return"double"}a("Unhandled signature IR:",R)},G=F?()=>!0:()=>a("BigInt64Array is not available."),p=function(R){switch(H(R)){case"p":case"P":case"s":{switch(P){case 4:return"getInt32";case 8:return G()&&"getBigInt64"}break}case"i":return"getInt32";case"c":return"getInt8";case"C":return"getUint8";case"j":return G()&&"getBigInt64";case"f":return"getFloat32";case"d":return"getFloat64"}a("Unhandled DataView getter for signature:",R)},m=function(R){switch(H(R)){case"p":case"P":case"s":{switch(P){case 4:return"setInt32";case 8:return G()&&"setBigInt64"}break}case"i":return"setInt32";case"c":return"setInt8";case"C":return"setUint8";case"j":return G()&&"setBigInt64";case"f":return"setFloat32";case"d":return"setFloat64"}a("Unhandled DataView setter for signature:",R)},k=function(R){switch(H(R)){case"i":case"f":case"c":case"C":case"d":return Number;case"j":return G()&&te;case"p":case"P":case"s":switch(P){case 4:return Number;case 8:return G()&&te}break}a("Unhandled DataView set wrapper for signature:",R)},U=(R,ne)=>R+"::"+ne,j=function(R,ne){return()=>a(U(R,ne),"is read-only.")},h=new WeakMap,l="(pointer-is-external)",f=function(R,ne,le){if(le||(le=h.get(ne)),le){if(h.delete(ne),Array.isArray(ne.ondispose)){let ce;for(;ce=ne.ondispose.shift();)try{ce instanceof Function?ce.call(ne):ce instanceof ge?ce.dispose():typeof ce=="number"&&y(ce)}catch(Ee){console.warn("ondispose() for",R.structName,"@",le,"threw. NOT propagating it.",Ee)}}else if(ne.ondispose instanceof Function)try{ne.ondispose()}catch(ce){console.warn("ondispose() for",R.structName,"@",le,"threw. NOT propagating it.",ce)}delete ne.ondispose,R.debugFlags.__flags.dealloc&&B("debug.dealloc:",ne[l]?"EXTERNAL":"",R.structName,"instance:",R.structInfo.sizeof,"bytes @"+le),ne[l]||y(le)}},d=R=>({configurable:!1,writable:!1,iterable:!1,value:R}),w=function(R,ne,le){let ce=!le;le?Object.defineProperty(ne,l,d(le)):(le=g(R.structInfo.sizeof),le||a("Allocation of",R.structName,"structure failed."));try{R.debugFlags.__flags.alloc&&B("debug.alloc:",ce?"":"EXTERNAL",R.structName,"instance:",R.structInfo.sizeof,"bytes @"+le),ce&&s().fill(0,le,le+R.structInfo.sizeof),h.set(ne,le)}catch(Ee){throw f(R,ne,le),Ee}},Q=function(){let R=this.pointer;return R?new Uint8Array(s().slice(R,R+this.structInfo.sizeof)):null},he=d(R=>W+R+X),fe=function(R,ne,le=!0){let ce=R.members[ne];if(!ce&&(W||X)){for(let Ee of Object.values(R.members))if(Ee.key===ne){ce=Ee;break}!ce&&le&&a(U(R.name,ne),"is not a mapped struct member.")}return ce},xe=function R(ne,le,ce=!1){R._||(R._=ke=>ke.replace(/[^vipPsjrdcC]/g,"").replace(/[pPscC]/g,"i"));let Ee=fe(ne.structInfo,le,!0);return ce?R._(Ee.signature):Ee.signature},qe={configurable:!1,enumerable:!1,get:function(){return h.get(this)},set:()=>a("Cannot assign the 'pointer' property of a struct.")},$=d(function(){let R=[];for(let ne of Object.keys(this.structInfo.members))R.push(this.memberKey(ne));return R}),S=new TextDecoder("utf-8"),L=new TextEncoder,Y=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,ie=function(R,ne,le){return S.decode(R.buffer instanceof Y?R.slice(ne,le):R.subarray(ne,le))},A=function(R,ne,le=!1){let ce=fe(R.structInfo,ne,le);return ce&&ce.signature.length===1&&ce.signature[0]==="s"?ce:!1},C=function(R){R.signature!=="s"&&a("Invalid member type signature for C-string value:",JSON.stringify(R))},V=function(ne,le){let ce=fe(ne.structInfo,le,!0);C(ce);let Ee=ne[ce.key];if(!Ee)return null;let ke=Ee,Ae=s();for(;Ae[ke]!==0;++ke);return Ee===ke?"":ie(Ae,Ee,ke)},ee=function(R,...ne){R.ondispose?Array.isArray(R.ondispose)||(R.ondispose=[R.ondispose]):R.ondispose=[],R.ondispose.push(...ne)},se=function(R){let ne=L.encode(R),le=g(ne.length+1);le||a("Allocation error while duplicating string:",R);let ce=s();return ce.set(ne,le),ce[le+ne.length]=0,le},de=function(R,ne,le){let ce=fe(R.structInfo,ne,!0);C(ce);let Ee=se(le);return R[ce.key]=Ee,ee(R,Ee),R},ge=function(ne,le){arguments[2]!==d&&a("Do not call the StructType constructor","from client-level code."),Object.defineProperties(this,{structName:d(ne),structInfo:d(le)})};ge.prototype=Object.create(null,{dispose:d(function(){f(this.constructor,this)}),lookupMember:d(function(R,ne=!0){return fe(this.structInfo,R,ne)}),memberToJsString:d(function(R){return V(this,R)}),memberIsString:d(function(R,ne=!0){return A(this,R,ne)}),memberKey:he,memberKeys:$,memberSignature:d(function(R,ne=!1){return xe(this,R,ne)}),memoryDump:d(Q),pointer:qe,setMemberCString:d(function(R,ne){return de(this,R,ne)})}),Object.assign(ge.prototype,{addOnDispose:function(...R){return ee(this,...R),this}}),Object.defineProperties(ge,{allocCString:d(se),isA:d(R=>R instanceof ge),hasExternalPointer:d(R=>R instanceof ge&&!!R[l]),memberKey:he});let _e=R=>Number.isFinite(R)||R instanceof(te||Number),Re=function R(ne,le,ce){if(!R._){R._={getters:{},setters:{},sw:{}};let Me=["i","c","C","p","P","s","f","d","v()"];J&&Me.push("j"),Me.forEach(function(Ve){R._.getters[Ve]=p(Ve),R._.setters[Ve]=m(Ve),R._.sw[Ve]=k(Ve)});let Mc=/^[ipPsjfdcC]$/,Nc=/^[vipPsjfdcC]\([ipPsjfdcC]*\)$/;R.sigCheck=function(Ve,Bc,Gr,_r){Object.prototype.hasOwnProperty.call(Ve,Gr)&&a(Ve.structName,"already has a property named",Gr+"."),Mc.test(_r)||Nc.test(_r)||a("Malformed signature for",U(Ve.structName,Bc)+":",_r)}}let Ee=ne.memberKey(le);R.sigCheck(ne.prototype,le,Ee,ce.signature),ce.key=Ee,ce.name=le;let ke=H(ce.signature),Ae=U(ne.prototype.structName,Ee),Fe=ne.prototype.debugFlags.__flags,_t=Object.create(null);_t.configurable=!1,_t.enumerable=!1,_t.get=function(){Fe.getter&&B("debug.getter:",R._.getters[ke],"for",E(ke),Ae,"@",this.pointer,"+",ce.offset,"sz",ce.sizeof);let Me=new DataView(s().buffer,this.pointer+ce.offset,ce.sizeof)[R._.getters[ke]](0,T);return Fe.getter&&B("debug.getter:",Ae,"result =",Me),Me},ce.readOnly?_t.set=j(ne.prototype.structName,Ee):_t.set=function(Me){if(Fe.setter&&B("debug.setter:",R._.setters[ke],"for",E(ke),Ae,"@",this.pointer,"+",ce.offset,"sz",ce.sizeof,Me),this.pointer||a("Cannot set struct property on disposed instance."),Me===null)Me=0;else for(;!_e(Me);){if(z(ce.signature)&&Me instanceof ge){Me=Me.pointer||0,Fe.setter&&B("debug.setter:",Ae,"resolved to",Me);break}a("Invalid value for pointer-type",Ae+".")}new DataView(s().buffer,this.pointer+ce.offset,ce.sizeof)[R._.setters[ke]](0,R._.sw[ke](Me),T)},Object.defineProperty(ne.prototype,Ee,_t)},Le=function R(ne,le){arguments.length===1?(le=ne,ne=le.name):le.name||(le.name=ne),ne||a("Struct name is required.");let ce=!1;Object.keys(le.members).forEach(Ae=>{let Fe=le.members[Ae];Fe.sizeof?Fe.sizeof===1?Fe.signature==="c"||Fe.signature==="C"||a("Unexpected sizeof==1 member",U(le.name,Ae),"with signature",Fe.signature):(Fe.sizeof%4!==0&&(console.warn("Invalid struct member description =",Fe,"from",le),a(ne,"member",Ae,"sizeof is not aligned. sizeof="+Fe.sizeof)),Fe.offset%4!==0&&(console.warn("Invalid struct member description =",Fe,"from",le),a(ne,"member",Ae,"offset is not aligned. offset="+Fe.offset))):a(ne,"member",Ae,"is missing sizeof."),(!ce||ce.offset<Fe.offset)&&(ce=Fe)}),ce?le.sizeof<ce.offset+ce.sizeof&&a("Invalid struct config:",ne,"max member offset ("+ce.offset+") ","extends past end of struct (sizeof="+le.sizeof+")."):a("No member property descriptions found.");let Ee=d(i.__makeDebugFlags(R.debugFlags)),ke=function Ae(Fe){this instanceof Ae?arguments.length?((Fe!==(Fe|0)||Fe<=0)&&a("Invalid pointer value for",ne,"constructor."),w(Ae,this,Fe)):w(Ae,this):a("The",ne,"constructor may only be called via 'new'.")};return Object.defineProperties(ke,{debugFlags:Ee,isA:d(Ae=>Ae instanceof ke),memberKey:he,memberKeys:$,methodInfoForKey:d(function(Ae){}),structInfo:d(le),structName:d(ne)}),ke.prototype=new ge(ne,le,d),Object.defineProperties(ke.prototype,{debugFlags:Ee,constructor:d(ke)}),Object.keys(le.members).forEach(Ae=>Re(ke,Ae,le.members[Ae])),ke};return Le.StructType=ge,Le.config=n,Le.allocCString=se,Le.debugFlags||(Le.debugFlags=i.__makeDebugFlags(i.debugFlags)),Le},globalThis.sqlite3ApiBootstrap.initializers.push(function(t){"use strict";let n=(...T)=>{throw new Error(T.join(" "))},a=t.SQLite3Error.toss,i=t.capi,s=t.wasm,g=t.util;if(globalThis.WhWasmUtilInstaller(s),delete globalThis.WhWasmUtilInstaller,s.bindingSignatures=[["sqlite3_aggregate_context","void*","sqlite3_context*","int"],["sqlite3_bind_double","int","sqlite3_stmt*","int","f64"],["sqlite3_bind_int","int","sqlite3_stmt*","int","int"],["sqlite3_bind_null",void 0,"sqlite3_stmt*","int"],["sqlite3_bind_parameter_count","int","sqlite3_stmt*"],["sqlite3_bind_parameter_index","int","sqlite3_stmt*","string"],["sqlite3_bind_parameter_name","string","sqlite3_stmt*","int"],["sqlite3_bind_pointer","int","sqlite3_stmt*","int","*","string:static","*"],["sqlite3_busy_handler","int",["sqlite3*",new s.xWrap.FuncPtrAdapter({signature:"i(pi)",contextKey:(T,q)=>T[0]}),"*"]],["sqlite3_busy_timeout","int","sqlite3*","int"],["sqlite3_changes","int","sqlite3*"],["sqlite3_clear_bindings","int","sqlite3_stmt*"],["sqlite3_collation_needed","int","sqlite3*","*","*"],["sqlite3_column_blob","*","sqlite3_stmt*","int"],["sqlite3_column_bytes","int","sqlite3_stmt*","int"],["sqlite3_column_count","int","sqlite3_stmt*"],["sqlite3_column_decltype","string","sqlite3_stmt*","int"],["sqlite3_column_double","f64","sqlite3_stmt*","int"],["sqlite3_column_int","int","sqlite3_stmt*","int"],["sqlite3_column_name","string","sqlite3_stmt*","int"],["sqlite3_column_text","string","sqlite3_stmt*","int"],["sqlite3_column_type","int","sqlite3_stmt*","int"],["sqlite3_column_value","sqlite3_value*","sqlite3_stmt*","int"],["sqlite3_commit_hook","void*",["sqlite3*",new s.xWrap.FuncPtrAdapter({name:"sqlite3_commit_hook",signature:"i(p)",contextKey:T=>T[0]}),"*"]],["sqlite3_compileoption_get","string","int"],["sqlite3_compileoption_used","int","string"],["sqlite3_complete","int","string:flexible"],["sqlite3_context_db_handle","sqlite3*","sqlite3_context*"],["sqlite3_data_count","int","sqlite3_stmt*"],["sqlite3_db_filename","string","sqlite3*","string"],["sqlite3_db_handle","sqlite3*","sqlite3_stmt*"],["sqlite3_db_name","string","sqlite3*","int"],["sqlite3_db_readonly","int","sqlite3*","string"],["sqlite3_db_status","int","sqlite3*","int","*","*","int"],["sqlite3_errcode","int","sqlite3*"],["sqlite3_errmsg","string","sqlite3*"],["sqlite3_error_offset","int","sqlite3*"],["sqlite3_errstr","string","int"],["sqlite3_exec","int",["sqlite3*","string:flexible",new s.xWrap.FuncPtrAdapter({signature:"i(pipp)",bindScope:"transient",callProxy:T=>{let q;return(N,z,H,E)=>{try{let G=s.cArgvToJs(z,H);return q||(q=s.cArgvToJs(z,E)),T(G,q)|0}catch(G){return G.resultCode||i.SQLITE_ERROR}}}}),"*","**"]],["sqlite3_expanded_sql","string","sqlite3_stmt*"],["sqlite3_extended_errcode","int","sqlite3*"],["sqlite3_extended_result_codes","int","sqlite3*","int"],["sqlite3_file_control","int","sqlite3*","string","int","*"],["sqlite3_finalize","int","sqlite3_stmt*"],["sqlite3_free",void 0,"*"],["sqlite3_get_autocommit","int","sqlite3*"],["sqlite3_get_auxdata","*","sqlite3_context*","int"],["sqlite3_initialize",void 0],["sqlite3_interrupt",void 0,"sqlite3*"],["sqlite3_is_interrupted","int","sqlite3*"],["sqlite3_keyword_count","int"],["sqlite3_keyword_name","int",["int","**","*"]],["sqlite3_keyword_check","int",["string","int"]],["sqlite3_libversion","string"],["sqlite3_libversion_number","int"],["sqlite3_limit","int",["sqlite3*","int","int"]],["sqlite3_malloc","*","int"],["sqlite3_open","int","string","*"],["sqlite3_open_v2","int","string","*","int","string"],["sqlite3_realloc","*","*","int"],["sqlite3_reset","int","sqlite3_stmt*"],["sqlite3_result_blob",void 0,"sqlite3_context*","*","int","*"],["sqlite3_result_double",void 0,"sqlite3_context*","f64"],["sqlite3_result_error",void 0,"sqlite3_context*","string","int"],["sqlite3_result_error_code",void 0,"sqlite3_context*","int"],["sqlite3_result_error_nomem",void 0,"sqlite3_context*"],["sqlite3_result_error_toobig",void 0,"sqlite3_context*"],["sqlite3_result_int",void 0,"sqlite3_context*","int"],["sqlite3_result_null",void 0,"sqlite3_context*"],["sqlite3_result_pointer",void 0,"sqlite3_context*","*","string:static","*"],["sqlite3_result_subtype",void 0,"sqlite3_value*","int"],["sqlite3_result_text",void 0,"sqlite3_context*","string","int","*"],["sqlite3_result_zeroblob",void 0,"sqlite3_context*","int"],["sqlite3_rollback_hook","void*",["sqlite3*",new s.xWrap.FuncPtrAdapter({name:"sqlite3_rollback_hook",signature:"v(p)",contextKey:T=>T[0]}),"*"]],["sqlite3_set_auxdata",void 0,["sqlite3_context*","int","*",new s.xWrap.FuncPtrAdapter({name:"xDestroyAuxData",signature:"v(*)",contextKey:(T,q)=>T[0]})]],["sqlite3_shutdown",void 0],["sqlite3_sourceid","string"],["sqlite3_sql","string","sqlite3_stmt*"],["sqlite3_status","int","int","*","*","int"],["sqlite3_step","int","sqlite3_stmt*"],["sqlite3_stmt_busy","int","sqlite3_stmt*"],["sqlite3_stmt_readonly","int","sqlite3_stmt*"],["sqlite3_stmt_status","int","sqlite3_stmt*","int","int"],["sqlite3_strglob","int","string","string"],["sqlite3_stricmp","int","string","string"],["sqlite3_strlike","int","string","string","int"],["sqlite3_strnicmp","int","string","string","int"],["sqlite3_table_column_metadata","int","sqlite3*","string","string","string","**","**","*","*","*"],["sqlite3_total_changes","int","sqlite3*"],["sqlite3_trace_v2","int",["sqlite3*","int",new s.xWrap.FuncPtrAdapter({name:"sqlite3_trace_v2::callback",signature:"i(ippp)",contextKey:(T,q)=>T[0]}),"*"]],["sqlite3_txn_state","int",["sqlite3*","string"]],["sqlite3_uri_boolean","int","sqlite3_filename","string","int"],["sqlite3_uri_key","string","sqlite3_filename","int"],["sqlite3_uri_parameter","string","sqlite3_filename","string"],["sqlite3_user_data","void*","sqlite3_context*"],["sqlite3_value_blob","*","sqlite3_value*"],["sqlite3_value_bytes","int","sqlite3_value*"],["sqlite3_value_double","f64","sqlite3_value*"],["sqlite3_value_dup","sqlite3_value*","sqlite3_value*"],["sqlite3_value_free",void 0,"sqlite3_value*"],["sqlite3_value_frombind","int","sqlite3_value*"],["sqlite3_value_int","int","sqlite3_value*"],["sqlite3_value_nochange","int","sqlite3_value*"],["sqlite3_value_numeric_type","int","sqlite3_value*"],["sqlite3_value_pointer","*","sqlite3_value*","string:static"],["sqlite3_value_subtype","int","sqlite3_value*"],["sqlite3_value_text","string","sqlite3_value*"],["sqlite3_value_type","int","sqlite3_value*"],["sqlite3_vfs_find","*","string"],["sqlite3_vfs_register","int","sqlite3_vfs*","int"],["sqlite3_vfs_unregister","int","sqlite3_vfs*"]],s.exports.sqlite3_progress_handler&&s.bindingSignatures.push(["sqlite3_progress_handler",void 0,["sqlite3*","int",new s.xWrap.FuncPtrAdapter({name:"xProgressHandler",signature:"i(p)",bindScope:"context",contextKey:(T,q)=>T[0]}),"*"]]),s.exports.sqlite3_stmt_explain&&s.bindingSignatures.push(["sqlite3_stmt_explain","int","sqlite3_stmt*","int"],["sqlite3_stmt_isexplain","int","sqlite3_stmt*"]),s.exports.sqlite3_set_authorizer&&s.bindingSignatures.push(["sqlite3_set_authorizer","int",["sqlite3*",new s.xWrap.FuncPtrAdapter({name:"sqlite3_set_authorizer::xAuth",signature:"i(pissss)",contextKey:(T,q)=>T[0],callProxy:T=>(q,N,z,H,E,G)=>{try{return z=z&&s.cstrToJs(z),H=H&&s.cstrToJs(H),E=E&&s.cstrToJs(E),G=G&&s.cstrToJs(G),T(q,N,z,H,E,G)||0}catch(p){return p.resultCode||i.SQLITE_ERROR}}}),"*"]]),s.bindingSignatures.int64=[["sqlite3_bind_int64","int",["sqlite3_stmt*","int","i64"]],["sqlite3_changes64","i64",["sqlite3*"]],["sqlite3_column_int64","i64",["sqlite3_stmt*","int"]],["sqlite3_deserialize","int","sqlite3*","string","*","i64","i64","int"],["sqlite3_last_insert_rowid","i64",["sqlite3*"]],["sqlite3_malloc64","*","i64"],["sqlite3_msize","i64","*"],["sqlite3_overload_function","int",["sqlite3*","string","int"]],["sqlite3_realloc64","*","*","i64"],["sqlite3_result_int64",void 0,"*","i64"],["sqlite3_result_zeroblob64","int","*","i64"],["sqlite3_serialize","*","sqlite3*","string","*","int"],["sqlite3_set_last_insert_rowid",void 0,["sqlite3*","i64"]],["sqlite3_status64","int","int","*","*","int"],["sqlite3_total_changes64","i64",["sqlite3*"]],["sqlite3_update_hook","*",["sqlite3*",new s.xWrap.FuncPtrAdapter({name:"sqlite3_update_hook",signature:"v(iippj)",contextKey:T=>T[0],callProxy:T=>(q,N,z,H,E)=>{T(q,N,s.cstrToJs(z),s.cstrToJs(H),E)}}),"*"]],["sqlite3_uri_int64","i64",["sqlite3_filename","string","i64"]],["sqlite3_value_int64","i64","sqlite3_value*"]],s.bigIntEnabled&&s.exports.sqlite3_declare_vtab&&s.bindingSignatures.int64.push(["sqlite3_create_module","int",["sqlite3*","string","sqlite3_module*","*"]],["sqlite3_create_module_v2","int",["sqlite3*","string","sqlite3_module*","*","*"]],["sqlite3_declare_vtab","int",["sqlite3*","string:flexible"]],["sqlite3_drop_modules","int",["sqlite3*","**"]],["sqlite3_vtab_collation","string","sqlite3_index_info*","int"],["sqlite3_vtab_distinct","int","sqlite3_index_info*"],["sqlite3_vtab_in","int","sqlite3_index_info*","int","int"],["sqlite3_vtab_in_first","int","sqlite3_value*","**"],["sqlite3_vtab_in_next","int","sqlite3_value*","**"],["sqlite3_vtab_nochange","int","sqlite3_context*"],["sqlite3_vtab_on_conflict","int","sqlite3*"],["sqlite3_vtab_rhs_value","int","sqlite3_index_info*","int","**"]),s.bigIntEnabled&&s.exports.sqlite3_preupdate_hook&&s.bindingSignatures.int64.push(["sqlite3_preupdate_blobwrite","int","sqlite3*"],["sqlite3_preupdate_count","int","sqlite3*"],["sqlite3_preupdate_depth","int","sqlite3*"],["sqlite3_preupdate_hook","*",["sqlite3*",new s.xWrap.FuncPtrAdapter({name:"sqlite3_preupdate_hook",signature:"v(ppippjj)",contextKey:T=>T[0],callProxy:T=>(q,N,z,H,E,G,p)=>{T(q,N,z,s.cstrToJs(H),s.cstrToJs(E),G,p)}}),"*"]],["sqlite3_preupdate_new","int",["sqlite3*","int","**"]],["sqlite3_preupdate_old","int",["sqlite3*","int","**"]]),s.bigIntEnabled&&s.exports.sqlite3changegroup_add&&s.exports.sqlite3session_create&&s.exports.sqlite3_preupdate_hook){let T={signature:"i(ps)",callProxy:q=>(N,z)=>{try{return q(N,s.cstrToJs(z))|0}catch(H){return H.resultCode||i.SQLITE_ERROR}}};s.bindingSignatures.int64.push(["sqlite3changegroup_add","int",["sqlite3_changegroup*","int","void*"]],["sqlite3changegroup_add_strm","int",["sqlite3_changegroup*",new s.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3changegroup_delete",void 0,["sqlite3_changegroup*"]],["sqlite3changegroup_new","int",["**"]],["sqlite3changegroup_output","int",["sqlite3_changegroup*","int*","**"]],["sqlite3changegroup_output_strm","int",["sqlite3_changegroup*",new s.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply","int",["sqlite3*","int","void*",new s.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...T}),new s.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply_strm","int",["sqlite3*",new s.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new s.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...T}),new s.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply_v2","int",["sqlite3*","int","void*",new s.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...T}),new s.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*","**","int*","int"]],["sqlite3changeset_apply_v2_strm","int",["sqlite3*",new s.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new s.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...T}),new s.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*","**","int*","int"]],["sqlite3changeset_concat","int",["int","void*","int","void*","int*","**"]],["sqlite3changeset_concat_strm","int",[new s.xWrap.FuncPtrAdapter({name:"xInputA",signature:"i(ppp)",bindScope:"transient"}),"void*",new s.xWrap.FuncPtrAdapter({name:"xInputB",signature:"i(ppp)",bindScope:"transient"}),"void*",new s.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_conflict","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_finalize","int",["sqlite3_changeset_iter*"]],["sqlite3changeset_fk_conflicts","int",["sqlite3_changeset_iter*","int*"]],["sqlite3changeset_invert","int",["int","void*","int*","**"]],["sqlite3changeset_invert_strm","int",[new s.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new s.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_new","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_next","int",["sqlite3_changeset_iter*"]],["sqlite3changeset_old","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_op","int",["sqlite3_changeset_iter*","**","int*","int*","int*"]],["sqlite3changeset_pk","int",["sqlite3_changeset_iter*","**","int*"]],["sqlite3changeset_start","int",["**","int","*"]],["sqlite3changeset_start_strm","int",["**",new s.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3changeset_start_v2","int",["**","int","*","int"]],["sqlite3changeset_start_v2_strm","int",["**",new s.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*","int"]],["sqlite3session_attach","int",["sqlite3_session*","string"]],["sqlite3session_changeset","int",["sqlite3_session*","int*","**"]],["sqlite3session_changeset_size","i64",["sqlite3_session*"]],["sqlite3session_changeset_strm","int",["sqlite3_session*",new s.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3session_config","int",["int","void*"]],["sqlite3session_create","int",["sqlite3*","string","**"]],["sqlite3session_diff","int",["sqlite3_session*","string","string","**"]],["sqlite3session_enable","int",["sqlite3_session*","int"]],["sqlite3session_indirect","int",["sqlite3_session*","int"]],["sqlite3session_isempty","int",["sqlite3_session*"]],["sqlite3session_memory_used","i64",["sqlite3_session*"]],["sqlite3session_object_config","int",["sqlite3_session*","int","void*"]],["sqlite3session_patchset","int",["sqlite3_session*","*","**"]],["sqlite3session_patchset_strm","int",["sqlite3_session*",new s.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3session_table_filter",void 0,["sqlite3_session*",new s.xWrap.FuncPtrAdapter({name:"xFilter",...T,contextKey:(q,N)=>q[0]}),"*"]])}s.bindingSignatures.wasmInternal=[["sqlite3__wasm_db_reset","int","sqlite3*"],["sqlite3__wasm_db_vfs","sqlite3_vfs*","sqlite3*","string"],["sqlite3__wasm_vfs_create_file","int","sqlite3_vfs*","string","*","int"],["sqlite3__wasm_posix_create_file","int","string","*","int"],["sqlite3__wasm_vfs_unlink","int","sqlite3_vfs*","string"],["sqlite3__wasm_qfmt_token","string:dealloc","string","int"]],t.StructBinder=globalThis.Jaccwabyt({heap:s.heap8u,alloc:s.alloc,dealloc:s.dealloc,bigIntEnabled:s.bigIntEnabled,memberPrefix:"$"}),delete globalThis.Jaccwabyt;{let T=s.xWrap.argAdapter("string");s.xWrap.argAdapter("string:flexible",E=>T(g.flexibleString(E))),s.xWrap.argAdapter("string:static",function(E){return s.isPtr(E)?E:(E=""+E,this[E]||(this[E]=s.allocCString(E)))}.bind(Object.create(null)));let q=s.xWrap.argAdapter("*"),N=function(){};s.xWrap.argAdapter("sqlite3_filename",q)("sqlite3_context*",q)("sqlite3_value*",q)("void*",q)("sqlite3_changegroup*",q)("sqlite3_changeset_iter*",q)("sqlite3_session*",q)("sqlite3_stmt*",E=>q(E instanceof(t?.oo1?.Stmt||N)?E.pointer:E))("sqlite3*",E=>q(E instanceof(t?.oo1?.DB||N)?E.pointer:E))("sqlite3_vfs*",E=>typeof E=="string"?i.sqlite3_vfs_find(E)||t.SQLite3Error.toss(i.SQLITE_NOTFOUND,"Unknown sqlite3_vfs name:",E):q(E instanceof(i.sqlite3_vfs||N)?E.pointer:E)),s.exports.sqlite3_declare_vtab&&s.xWrap.argAdapter("sqlite3_index_info*",E=>q(E instanceof(i.sqlite3_index_info||N)?E.pointer:E))("sqlite3_module*",E=>q(E instanceof(i.sqlite3_module||N)?E.pointer:E));let z=s.xWrap.resultAdapter("*");s.xWrap.resultAdapter("sqlite3*",z)("sqlite3_context*",z)("sqlite3_stmt*",z)("sqlite3_value*",z)("sqlite3_vfs*",z)("void*",z),s.exports.sqlite3_step.length===0&&(s.xWrap.doArgcCheck=!1,t.config.warn("Disabling sqlite3.wasm.xWrap.doArgcCheck due to environmental quirks."));for(let E of s.bindingSignatures)i[E[0]]=s.xWrap.apply(null,E);for(let E of s.bindingSignatures.wasmInternal)g[E[0]]=s.xWrap.apply(null,E);let H=function(E){return()=>n(E+"() is unavailable due to lack","of BigInt support in this build.")};for(let E of s.bindingSignatures.int64)i[E[0]]=s.bigIntEnabled?s.xWrap.apply(null,E):H(E[0]);if(delete s.bindingSignatures,s.exports.sqlite3__wasm_db_error){let E=s.xWrap("sqlite3__wasm_db_error","int","sqlite3*","int","string");g.sqlite3__wasm_db_error=function(G,p,m){return p instanceof t.WasmAllocError?(p=i.SQLITE_NOMEM,m=0):p instanceof Error&&(m=m||""+p,p=p.resultCode||i.SQLITE_ERROR),G?E(G,p,m):p}}else g.sqlite3__wasm_db_error=function(E,G,p){return console.warn("sqlite3__wasm_db_error() is not exported.",arguments),G}}{let T=s.xCall("sqlite3__wasm_enum_json");T||n("Maintenance required: increase sqlite3__wasm_enum_json()'s","static buffer size!"),s.ctype=JSON.parse(s.cstrToJs(T));let q=["access","authorizer","blobFinalizers","changeset","config","dataTypes","dbConfig","dbStatus","encodings","fcntl","flock","ioCap","limits","openFlags","prepareFlags","resultCodes","sqlite3Status","stmtStatus","syncFlags","trace","txnState","udfFlags","version"];s.bigIntEnabled&&q.push("serialize","session","vtab");for(let H of q)for(let E of Object.entries(s.ctype[H]))i[E[0]]=E[1];s.functionEntry(i.SQLITE_WASM_DEALLOC)||n("Internal error: cannot resolve exported function","entry SQLITE_WASM_DEALLOC (=="+i.SQLITE_WASM_DEALLOC+").");let N=Object.create(null);for(let H of["resultCodes"])for(let E of Object.entries(s.ctype[H]))N[E[1]]=E[0];i.sqlite3_js_rc_str=H=>N[H];let z=Object.assign(Object.create(null),{WasmTestStruct:!0,sqlite3_kvvfs_methods:!g.isUIThread(),sqlite3_index_info:!s.bigIntEnabled,sqlite3_index_constraint:!s.bigIntEnabled,sqlite3_index_orderby:!s.bigIntEnabled,sqlite3_index_constraint_usage:!s.bigIntEnabled});for(let H of s.ctype.structs)z[H.name]||(i[H.name]=t.StructBinder(H));if(i.sqlite3_index_info){for(let H of["sqlite3_index_constraint","sqlite3_index_orderby","sqlite3_index_constraint_usage"])i.sqlite3_index_info[H]=i[H],delete i[H];i.sqlite3_vtab_config=s.xWrap("sqlite3__wasm_vtab_config","int",["sqlite3*","int","int"])}}let y=(T,q,N)=>g.sqlite3__wasm_db_error(T,i.SQLITE_MISUSE,q+"() requires "+N+" argument"+(N===1?"":"s")+"."),B=T=>g.sqlite3__wasm_db_error(T,i.SQLITE_FORMAT,"SQLITE_UTF8 is the only supported encoding."),W=T=>s.xWrap.argAdapter("sqlite3*")(T),X=T=>s.isPtr(T)?s.cstrToJs(T):T,J=function(T,q){T=W(T);let N=this.dbMap.get(T);if(q)!N&&q>0&&this.dbMap.set(T,N=Object.create(null));else return this.dbMap.delete(T),N;return N}.bind(Object.assign(Object.create(null),{dbMap:new Map}));J.addCollation=function(T,q){let N=J(T,1);N.collation||(N.collation=new Set),N.collation.add(X(q).toLowerCase())},J._addUDF=function(T,q,N,z){q=X(q).toLowerCase();let H=z.get(q);H||z.set(q,H=new Set),H.add(N<0?-1:N)},J.addFunction=function(T,q,N){let z=J(T,1);z.udf||(z.udf=new Map),this._addUDF(T,q,N,z.udf)},s.exports.sqlite3_create_window_function&&(J.addWindowFunc=function(T,q,N){let z=J(T,1);z.wudf||(z.wudf=new Map),this._addUDF(T,q,N,z.wudf)}),J.cleanup=function(T){T=W(T);let q=[T];for(let H of["sqlite3_busy_handler","sqlite3_commit_hook","sqlite3_preupdate_hook","sqlite3_progress_handler","sqlite3_rollback_hook","sqlite3_set_authorizer","sqlite3_trace_v2","sqlite3_update_hook"]){let E=s.exports[H];if(E){q.length=E.length;try{i[H](...q)}catch(G){t.config.warn("close-time call of",H+"(",q,") threw:",G)}}}let N=J(T,0);if(!N)return;if(N.collation){for(let H of N.collation)try{i.sqlite3_create_collation_v2(T,H,i.SQLITE_UTF8,0,0,0)}catch{}delete N.collation}let z;for(z=0;z<2;++z){let H=z?N.wudf:N.udf;if(!H)continue;let E=z?i.sqlite3_create_window_function:i.sqlite3_create_function_v2;for(let G of H){let p=G[0],m=G[1],k=[T,p,0,i.SQLITE_UTF8,0,0,0,0,0];z&&k.push(0);for(let U of m)try{k[2]=U,E.apply(null,k)}catch{}m.clear()}H.clear()}delete N.udf,delete N.wudf};{let T=s.xWrap("sqlite3_close_v2","int","sqlite3*");i.sqlite3_close_v2=function(q){if(arguments.length!==1)return y(q,"sqlite3_close_v2",1);if(q)try{J.cleanup(q)}catch{}return T(q)}}if(i.sqlite3session_create){let T=s.xWrap("sqlite3session_delete",void 0,["sqlite3_session*"]);i.sqlite3session_delete=function(q){if(arguments.length!==1)return y(pDb,"sqlite3session_delete",1);q&&i.sqlite3session_table_filter(q,0,0),T(q)}}{let T=(N,z)=>"argv["+z+"]:"+N[0]+":"+s.cstrToJs(N[1]).toLowerCase(),q=s.xWrap("sqlite3_create_collation_v2","int",["sqlite3*","string","int","*",new s.xWrap.FuncPtrAdapter({name:"xCompare",signature:"i(pipip)",contextKey:T}),new s.xWrap.FuncPtrAdapter({name:"xDestroy",signature:"v(p)",contextKey:T})]);i.sqlite3_create_collation_v2=function(N,z,H,E,G,p){if(arguments.length!==6)return y(N,"sqlite3_create_collation_v2",6);if(!(H&15))H|=i.SQLITE_UTF8;else if(i.SQLITE_UTF8!==(H&15))return B(N);try{let m=q(N,z,H,E,G,p);return m===0&&G instanceof Function&&J.addCollation(N,z),m}catch(m){return g.sqlite3__wasm_db_error(N,m)}},i.sqlite3_create_collation=(N,z,H,E,G)=>arguments.length===5?i.sqlite3_create_collation_v2(N,z,H,E,G,0):y(N,"sqlite3_create_collation",5)}{let T=function(H,E){return H[0]+":"+(H[2]<0?-1:H[2])+":"+E+":"+s.cstrToJs(H[1]).toLowerCase()},q=Object.assign(Object.create(null),{xInverseAndStep:{signature:"v(pip)",contextKey:T,callProxy:H=>(E,G,p)=>{try{H(E,...i.sqlite3_values_to_js(G,p))}catch(m){i.sqlite3_result_error_js(E,m)}}},xFinalAndValue:{signature:"v(p)",contextKey:T,callProxy:H=>E=>{try{i.sqlite3_result_js(E,H(E))}catch(G){i.sqlite3_result_error_js(E,G)}}},xFunc:{signature:"v(pip)",contextKey:T,callProxy:H=>(E,G,p)=>{try{i.sqlite3_result_js(E,H(E,...i.sqlite3_values_to_js(G,p)))}catch(m){i.sqlite3_result_error_js(E,m)}}},xDestroy:{signature:"v(p)",contextKey:T,callProxy:H=>E=>{try{H(E)}catch(G){console.error("UDF xDestroy method threw:",G)}}}}),N=s.xWrap("sqlite3_create_function_v2","int",["sqlite3*","string","int","int","*",new s.xWrap.FuncPtrAdapter({name:"xFunc",...q.xFunc}),new s.xWrap.FuncPtrAdapter({name:"xStep",...q.xInverseAndStep}),new s.xWrap.FuncPtrAdapter({name:"xFinal",...q.xFinalAndValue}),new s.xWrap.FuncPtrAdapter({name:"xDestroy",...q.xDestroy})]),z=s.exports.sqlite3_create_window_function?s.xWrap("sqlite3_create_window_function","int",["sqlite3*","string","int","int","*",new s.xWrap.FuncPtrAdapter({name:"xStep",...q.xInverseAndStep}),new s.xWrap.FuncPtrAdapter({name:"xFinal",...q.xFinalAndValue}),new s.xWrap.FuncPtrAdapter({name:"xValue",...q.xFinalAndValue}),new s.xWrap.FuncPtrAdapter({name:"xInverse",...q.xInverseAndStep}),new s.xWrap.FuncPtrAdapter({name:"xDestroy",...q.xDestroy})]):void 0;i.sqlite3_create_function_v2=function H(E,G,p,m,k,U,j,h,l){if(H.length!==arguments.length)return y(E,"sqlite3_create_function_v2",H.length);if(!(m&15))m|=i.SQLITE_UTF8;else if(i.SQLITE_UTF8!==(m&15))return B(E);try{let f=N(E,G,p,m,k,U,j,h,l);return f===0&&(U instanceof Function||j instanceof Function||h instanceof Function||l instanceof Function)&&J.addFunction(E,G,p),f}catch(f){return console.error("sqlite3_create_function_v2() setup threw:",f),g.sqlite3__wasm_db_error(E,f,"Creation of UDF threw: "+f)}},i.sqlite3_create_function=function H(E,G,p,m,k,U,j,h){return H.length===arguments.length?i.sqlite3_create_function_v2(E,G,p,m,k,U,j,h,0):y(E,"sqlite3_create_function",H.length)},z?i.sqlite3_create_window_function=function H(E,G,p,m,k,U,j,h,l,f){if(H.length!==arguments.length)return y(E,"sqlite3_create_window_function",H.length);if(!(m&15))m|=i.SQLITE_UTF8;else if(i.SQLITE_UTF8!==(m&15))return B(E);try{let d=z(E,G,p,m,k,U,j,h,l,f);return d===0&&(U instanceof Function||j instanceof Function||h instanceof Function||l instanceof Function||f instanceof Function)&&J.addWindowFunc(E,G,p),d}catch(d){return console.error("sqlite3_create_window_function() setup threw:",d),g.sqlite3__wasm_db_error(E,d,"Creation of UDF threw: "+d)}}:delete i.sqlite3_create_window_function,i.sqlite3_create_function_v2.udfSetResult=i.sqlite3_create_function.udfSetResult=i.sqlite3_result_js,i.sqlite3_create_window_function&&(i.sqlite3_create_window_function.udfSetResult=i.sqlite3_result_js),i.sqlite3_create_function_v2.udfConvertArgs=i.sqlite3_create_function.udfConvertArgs=i.sqlite3_values_to_js,i.sqlite3_create_window_function&&(i.sqlite3_create_window_function.udfConvertArgs=i.sqlite3_values_to_js),i.sqlite3_create_function_v2.udfSetError=i.sqlite3_create_function.udfSetError=i.sqlite3_result_error_js,i.sqlite3_create_window_function&&(i.sqlite3_create_window_function.udfSetError=i.sqlite3_result_error_js)}{let T=(N,z)=>(typeof N=="string"?z=-1:g.isSQLableTypedArray(N)?(z=N.byteLength,N=g.typedArrayToString(N instanceof ArrayBuffer?new Uint8Array(N):N)):Array.isArray(N)&&(N=N.join(""),z=-1),[N,z]),q={basic:s.xWrap("sqlite3_prepare_v3","int",["sqlite3*","string","int","int","**","**"]),full:s.xWrap("sqlite3_prepare_v3","int",["sqlite3*","*","int","int","**","**"])};i.sqlite3_prepare_v3=function N(z,H,E,G,p,m){if(N.length!==arguments.length)return y(z,"sqlite3_prepare_v3",N.length);let[k,U]=T(H,E);switch(typeof k){case"string":return q.basic(z,k,U,G,p,null);case"number":return q.full(z,k,U,G,p,m);default:return g.sqlite3__wasm_db_error(z,i.SQLITE_MISUSE,"Invalid SQL argument type for sqlite3_prepare_v2/v3().")}},i.sqlite3_prepare_v2=function N(z,H,E,G,p){return N.length===arguments.length?i.sqlite3_prepare_v3(z,H,E,0,G,p):y(z,"sqlite3_prepare_v2",N.length)}}{let T=s.xWrap("sqlite3_bind_text","int",["sqlite3_stmt*","int","string","int","*"]),q=s.xWrap("sqlite3_bind_blob","int",["sqlite3_stmt*","int","*","int","*"]);i.sqlite3_bind_text=function N(z,H,E,G,p){if(N.length!==arguments.length)return y(i.sqlite3_db_handle(z),"sqlite3_bind_text",N.length);if(s.isPtr(E)||E===null)return T(z,H,E,G,p);E instanceof ArrayBuffer?E=new Uint8Array(E):Array.isArray(pMem)&&(E=pMem.join(""));let m,k;try{if(g.isSQLableTypedArray(E))m=s.allocFromTypedArray(E),k=E.byteLength;else if(typeof E=="string")[m,k]=s.allocCString(E);else return g.sqlite3__wasm_db_error(i.sqlite3_db_handle(z),i.SQLITE_MISUSE,"Invalid 3rd argument type for sqlite3_bind_text().");return T(z,H,m,k,i.SQLITE_WASM_DEALLOC)}catch(U){return s.dealloc(m),g.sqlite3__wasm_db_error(i.sqlite3_db_handle(z),U)}},i.sqlite3_bind_blob=function N(z,H,E,G,p){if(N.length!==arguments.length)return y(i.sqlite3_db_handle(z),"sqlite3_bind_blob",N.length);if(s.isPtr(E)||E===null)return q(z,H,E,G,p);E instanceof ArrayBuffer?E=new Uint8Array(E):Array.isArray(E)&&(E=E.join(""));let m,k;try{if(g.isBindableTypedArray(E))m=s.allocFromTypedArray(E),k=G>=0?G:E.byteLength;else if(typeof E=="string")[m,k]=s.allocCString(E);else return g.sqlite3__wasm_db_error(i.sqlite3_db_handle(z),i.SQLITE_MISUSE,"Invalid 3rd argument type for sqlite3_bind_blob().");return q(z,H,m,k,i.SQLITE_WASM_DEALLOC)}catch(U){return s.dealloc(m),g.sqlite3__wasm_db_error(i.sqlite3_db_handle(z),U)}}}i.sqlite3_config=function(T,...q){if(arguments.length<2)return i.SQLITE_MISUSE;switch(T){case i.SQLITE_CONFIG_COVERING_INDEX_SCAN:case i.SQLITE_CONFIG_MEMSTATUS:case i.SQLITE_CONFIG_SMALL_MALLOC:case i.SQLITE_CONFIG_SORTERREF_SIZE:case i.SQLITE_CONFIG_STMTJRNL_SPILL:case i.SQLITE_CONFIG_URI:return s.exports.sqlite3__wasm_config_i(T,q[0]);case i.SQLITE_CONFIG_LOOKASIDE:return s.exports.sqlite3__wasm_config_ii(T,q[0],q[1]);case i.SQLITE_CONFIG_MEMDB_MAXSIZE:return s.exports.sqlite3__wasm_config_j(T,q[0]);case i.SQLITE_CONFIG_GETMALLOC:case i.SQLITE_CONFIG_GETMUTEX:case i.SQLITE_CONFIG_GETPCACHE2:case i.SQLITE_CONFIG_GETPCACHE:case i.SQLITE_CONFIG_HEAP:case i.SQLITE_CONFIG_LOG:case i.SQLITE_CONFIG_MALLOC:case i.SQLITE_CONFIG_MMAP_SIZE:case i.SQLITE_CONFIG_MULTITHREAD:case i.SQLITE_CONFIG_MUTEX:case i.SQLITE_CONFIG_PAGECACHE:case i.SQLITE_CONFIG_PCACHE2:case i.SQLITE_CONFIG_PCACHE:case i.SQLITE_CONFIG_PCACHE_HDRSZ:case i.SQLITE_CONFIG_PMASZ:case i.SQLITE_CONFIG_SERIALIZED:case i.SQLITE_CONFIG_SINGLETHREAD:case i.SQLITE_CONFIG_SQLLOG:case i.SQLITE_CONFIG_WIN32_HEAPSIZE:default:return i.SQLITE_NOTFOUND}};{let T=new Set;i.sqlite3_auto_extension=function(q){if(q instanceof Function)q=s.installFunction("i(ppp)",q);else if(arguments.length!==1||!s.isPtr(q))return i.SQLITE_MISUSE;let N=s.exports.sqlite3_auto_extension(q);return q!==arguments[0]&&(N===0?T.add(q):s.uninstallFunction(q)),N},i.sqlite3_cancel_auto_extension=function(q){return!q||arguments.length!==1||!s.isPtr(q)?0:s.exports.sqlite3_cancel_auto_extension(q)},i.sqlite3_reset_auto_extension=function(){s.exports.sqlite3_reset_auto_extension();for(let q of T)s.uninstallFunction(q);T.clear()}}let te=i.sqlite3_vfs_find("kvvfs");if(te)if(g.isUIThread()){let T=new i.sqlite3_kvvfs_methods(s.exports.sqlite3__wasm_kvvfs_methods());delete i.sqlite3_kvvfs_methods;let q=s.exports.sqlite3__wasm_kvvfsMakeKeyOnPstack,N=s.pstack,z=E=>s.peek(E)===115?sessionStorage:localStorage,H={xRead:(E,G,p,m)=>{let k=N.pointer,U=s.scopedAllocPush();try{let j=q(E,G);if(!j)return-3;let h=s.cstrToJs(j),l=z(E).getItem(h);if(!l)return-1;let f=l.length;if(m<=0)return f;if(m===1)return s.poke(p,0),f;let d=s.scopedAllocCString(l);return m>f+1&&(m=f+1),s.heap8u().copyWithin(p,d,d+m-1),s.poke(p+m-1,0),m-1}catch(j){return console.error("kvstorageRead()",j),-2}finally{N.restore(k),s.scopedAllocPop(U)}},xWrite:(E,G,p)=>{let m=N.pointer;try{let k=q(E,G);if(!k)return 1;let U=s.cstrToJs(k);return z(E).setItem(U,s.cstrToJs(p)),0}catch(k){return console.error("kvstorageWrite()",k),i.SQLITE_IOERR}finally{N.restore(m)}},xDelete:(E,G)=>{let p=N.pointer;try{let m=q(E,G);return m?(z(E).removeItem(s.cstrToJs(m)),0):1}catch(m){return console.error("kvstorageDelete()",m),i.SQLITE_IOERR}finally{N.restore(p)}}};for(let E of Object.keys(H))T[T.memberKey(E)]=s.installFunction(T.memberSignature(E),H[E])}else i.sqlite3_vfs_unregister(te);s.xWrap.FuncPtrAdapter.warnOnUse=!0;let F=t.StructBinder,P=function T(q,N,z,H=T.installMethodArgcCheck){if(q instanceof F.StructType?!(z instanceof Function)&&!s.isPtr(z)&&n("Usage errror: expecting a Function or WASM pointer to one."):n("Usage error: target object is-not-a StructType."),arguments.length===1)return(m,k)=>T(q,m,k,H);T.argcProxy||(T.argcProxy=function(m,k,U,j){return function(...h){return U.length!==arguments.length&&n("Argument mismatch for",m.structInfo.name+"::"+k+": Native signature is:",j),U.apply(this,h)}},T.removeFuncList=function(){this.ondispose.__removeFuncList&&(this.ondispose.__removeFuncList.forEach((m,k)=>{if(typeof m=="number")try{s.uninstallFunction(m)}catch{}}),delete this.ondispose.__removeFuncList)});let E=q.memberSignature(N);E.length<2&&n("Member",N,"does not have a function pointer signature:",E);let G=q.memberKey(N),p=H&&!s.isPtr(z)?T.argcProxy(q,G,z,E):z;if(s.isPtr(p))p&&!s.functionEntry(p)&&n("Pointer",p,"is not a WASM function table entry."),q[G]=p;else{let m=s.installFunction(p,q.memberSignature(N,!0));q[G]=m,(!q.ondispose||!q.ondispose.__removeFuncList)&&(q.addOnDispose("ondispose.__removeFuncList handler",T.removeFuncList),q.ondispose.__removeFuncList=[]),q.ondispose.__removeFuncList.push(G,m)}return(m,k)=>T(q,m,k,H)};P.installMethodArgcCheck=!1;let M=function(T,q,N=P.installMethodArgcCheck){let z=new Map;for(let H of Object.keys(q)){let E=q[H],G=z.get(E);if(G){let p=T.memberKey(H);T[p]=T[T.memberKey(G)]}else P(T,H,E,N),z.set(E,H)}return T};F.StructType.prototype.installMethod=function(q,N,z=P.installMethodArgcCheck){return arguments.length<3&&q&&typeof q=="object"?M(this,...arguments):P(this,...arguments)},F.StructType.prototype.installMethods=function(T,q=P.installMethodArgcCheck){return M(this,T,q)}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){t.version={libVersion:"3.47.0",libVersionNumber:3047e3,sourceId:"2024-10-21 16:30:22 03a9703e27c44437c39363d0baf82db4ebc94538a0f28411c85dda156f82alt1",downloadVersion:347e4}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){let n=(...h)=>{throw new Error(h.join(" "))},a=(...h)=>{throw new t.SQLite3Error(...h)},i=t.capi,s=t.wasm,g=t.util,y=new WeakMap,B=new WeakMap,W=(h,l,f)=>{let d=Object.getOwnPropertyDescriptor(h,l);return d?d.value:f},X=function(h,l){return l&&(h instanceof P&&(h=h.pointer),a(l,"sqlite3 result code",l+":",h?i.sqlite3_errmsg(h):i.sqlite3_errstr(l))),arguments[0]},J=s.installFunction("i(ippp)",function(h,l,f,d){i.SQLITE_TRACE_STMT===h&&console.log("SQL TRACE #"+ ++this.counter+" via sqlite3@"+l+":",s.cstrToJs(d))}.bind({counter:0})),te=Object.create(null),F=function h(...l){if(!h._name2vfs){h._name2vfs=Object.create(null);let $=typeof importScripts=="function"?S=>a("The VFS for",S,"is only available in the main window thread."):!1;h._name2vfs[":localStorage:"]={vfs:"kvvfs",filename:$||(()=>"local")},h._name2vfs[":sessionStorage:"]={vfs:"kvvfs",filename:$||(()=>"session")}}let f=h.normalizeArgs(...l),d=f.filename,w=f.vfs,Q=f.flags;(typeof d!="string"&&typeof d!="number"||typeof Q!="string"||w&&typeof w!="string"&&typeof w!="number")&&(t.config.error("Invalid DB ctor args",f,arguments),a("Invalid arguments for DB constructor."));let ae=typeof d=="number"?s.cstrToJs(d):d,he=h._name2vfs[ae];he&&(w=he.vfs,d=ae=he.filename(ae));let fe,xe=0;Q.indexOf("c")>=0&&(xe|=i.SQLITE_OPEN_CREATE|i.SQLITE_OPEN_READWRITE),Q.indexOf("w")>=0&&(xe|=i.SQLITE_OPEN_READWRITE),xe===0&&(xe|=i.SQLITE_OPEN_READONLY),xe|=i.SQLITE_OPEN_EXRESCODE;let qe=s.pstack.pointer;try{let $=s.pstack.allocPtr(),S=i.sqlite3_open_v2(d,$,xe,w||0);fe=s.peekPtr($),X(fe,S),i.sqlite3_extended_result_codes(fe,1),Q.indexOf("t")>=0&&i.sqlite3_trace_v2(fe,i.SQLITE_TRACE_STMT,J,fe)}catch($){throw fe&&i.sqlite3_close_v2(fe),$}finally{s.pstack.restore(qe)}this.filename=ae,y.set(this,fe),B.set(this,Object.create(null));try{let $=i.sqlite3_js_db_vfs(fe)||a("Internal error: cannot get VFS for new db handle."),S=te[$];S&&(S instanceof Function?S(this,t):X(fe,i.sqlite3_exec(fe,S,0,0,0)))}catch($){throw this.close(),$}};F.setVfsPostOpenCallback=function(h,l){l instanceof Function||a("dbCtorHelper.setVfsPostOpenCallback() should not be used with a non-function argument.",arguments),te[h]=l},F.normalizeArgs=function(h=":memory:",l="c",f=null){let d={};return arguments.length===1&&arguments[0]&&typeof arguments[0]=="object"?(Object.assign(d,arguments[0]),d.flags===void 0&&(d.flags="c"),d.vfs===void 0&&(d.vfs=null),d.filename===void 0&&(d.filename=":memory:")):(d.filename=h,d.flags=l,d.vfs=f),d};let P=function(...h){F.apply(this,h)};P.dbCtorHelper=F;let M={null:1,number:2,string:3,boolean:4,blob:5};M.undefined==M.null,s.bigIntEnabled&&(M.bigint=M.number);let T=function(){M!==arguments[2]&&a(i.SQLITE_MISUSE,"Do not call the Stmt constructor directly. Use DB.prepare()."),this.db=arguments[0],y.set(this,arguments[1]),this.parameterCount=i.sqlite3_bind_parameter_count(this.pointer)},q=function(h){return h.pointer||a("DB has been closed."),h},N=function(h,l){return(l!==(l|0)||l<0||l>=h.columnCount)&&a("Column index",l,"is out of range."),h},z=function(h,l){let f=Object.create(null);switch(f.opt=Object.create(null),l.length){case 1:typeof l[0]=="string"||g.isSQLableTypedArray(l[0])||Array.isArray(l[0])?f.sql=l[0]:l[0]&&typeof l[0]=="object"&&(f.opt=l[0],f.sql=f.opt.sql);break;case 2:f.sql=l[0],f.opt=l[1];break;default:a("Invalid argument count for exec().")}f.sql=g.flexibleString(f.sql),typeof f.sql!="string"&&a("Missing SQL argument or unsupported SQL value type.");let d=f.opt;switch(d.returnValue){case"resultRows":d.resultRows||(d.resultRows=[]),f.returnVal=()=>d.resultRows;break;case"saveSql":d.saveSql||(d.saveSql=[]),f.returnVal=()=>d.saveSql;break;case void 0:case"this":f.returnVal=()=>h;break;default:a("Invalid returnValue value:",d.returnValue)}if(!d.callback&&!d.returnValue&&d.rowMode!==void 0&&(d.resultRows||(d.resultRows=[]),f.returnVal=()=>d.resultRows),d.callback||d.resultRows)switch(d.rowMode===void 0?"array":d.rowMode){case"object":f.cbArg=(w,Q)=>{Q.columnNames||(Q.columnNames=w.getColumnNames([]));let ae=w.get([]),he=Object.create(null);for(let fe in Q.columnNames)he[Q.columnNames[fe]]=ae[fe];return he};break;case"array":f.cbArg=w=>w.get([]);break;case"stmt":Array.isArray(d.resultRows)&&a("exec(): invalid rowMode for a resultRows array: must","be one of 'array', 'object',","a result column number, or column name reference."),f.cbArg=w=>w;break;default:if(g.isInt32(d.rowMode)){f.cbArg=w=>w.get(d.rowMode);break}else if(typeof d.rowMode=="string"&&d.rowMode.length>1&&d.rowMode[0]==="$"){let w=d.rowMode.substr(1);f.cbArg=Q=>{let ae=Q.get(Object.create(null))[w];return ae===void 0?a(i.SQLITE_NOTFOUND,"exec(): unknown result column:",w):ae};break}a("Invalid rowMode:",d.rowMode)}return f},H=(h,l,f,...d)=>{let w=h.prepare(l);try{let Q=w.bind(f).step()?w.get(...d):void 0;return w.reset(),Q}finally{w.finalize()}},E=(h,l,f,d)=>h.exec({sql:l,bind:f,rowMode:d,returnValue:"resultRows"});P.checkRc=(h,l)=>X(h,l),P.prototype={isOpen:function(){return!!this.pointer},affirmOpen:function(){return q(this)},close:function(){if(this.pointer){if(this.onclose&&this.onclose.before instanceof Function)try{this.onclose.before(this)}catch{}let h=this.pointer;if(Object.keys(B.get(this)).forEach((l,f)=>{if(f&&f.pointer)try{f.finalize()}catch{}}),y.delete(this),B.delete(this),i.sqlite3_close_v2(h),this.onclose&&this.onclose.after instanceof Function)try{this.onclose.after(this)}catch{}delete this.filename}},changes:function(h=!1,l=!1){let f=q(this).pointer;return h?l?i.sqlite3_total_changes64(f):i.sqlite3_total_changes(f):l?i.sqlite3_changes64(f):i.sqlite3_changes(f)},dbFilename:function(h="main"){return i.sqlite3_db_filename(q(this).pointer,h)},dbName:function(h=0){return i.sqlite3_db_name(q(this).pointer,h)},dbVfsName:function(h=0){let l,f=i.sqlite3_js_db_vfs(q(this).pointer,h);if(f){let d=new i.sqlite3_vfs(f);try{l=s.cstrToJs(d.$zName)}finally{d.dispose()}}return l},prepare:function(h){q(this);let l=s.pstack.pointer,f,d;try{f=s.pstack.alloc(8),P.checkRc(this,i.sqlite3_prepare_v2(this.pointer,h,-1,f,null)),d=s.peekPtr(f)}finally{s.pstack.restore(l)}d||a("Cannot prepare empty SQL.");let w=new T(this,d,M);return B.get(this)[d]=w,w},exec:function(){q(this);let h=z(this,arguments);if(!h.sql)return a("exec() requires an SQL string.");let l=h.opt,f=l.callback,d=Array.isArray(l.resultRows)?l.resultRows:void 0,w,Q=l.bind,ae=!!(h.cbArg||l.columnNames||d),he=s.scopedAllocPush(),fe=Array.isArray(l.saveSql)?l.saveSql:void 0;try{let xe=g.isSQLableTypedArray(h.sql),qe=xe?h.sql.byteLength:s.jstrlen(h.sql),$=s.scopedAlloc(2*s.ptrSizeof+(qe+1)),S=$+s.ptrSizeof,L=S+s.ptrSizeof,Y=L+qe;for(xe?s.heap8().set(h.sql,L):s.jstrcpy(h.sql,s.heap8(),L,qe,!1),s.poke(L+qe,0);L&&s.peek(L,"i8");){s.pokePtr([$,S],0),P.checkRc(this,i.sqlite3_prepare_v3(this.pointer,L,qe,0,$,S));let ie=s.peekPtr($);if(L=s.peekPtr(S),qe=Y-L,!!ie){if(fe&&fe.push(i.sqlite3_sql(ie).trim()),w=new T(this,ie,M),Q&&w.parameterCount&&(w.bind(Q),Q=null),ae&&w.columnCount){let A=Array.isArray(l.columnNames)?0:1;if(ae=!1,h.cbArg||d){let C=Object.create(null);for(;w.step();w._lockedByExec=!1){A++===0&&w.getColumnNames(C.columnNames=l.columnNames||[]),w._lockedByExec=!0;let V=h.cbArg(w,C);if(d&&d.push(V),f&&f.call(l,V,w)===!1)break}w._lockedByExec=!1}A===0&&w.getColumnNames(l.columnNames)}else w.step();w.reset().finalize(),w=null}}}finally{s.scopedAllocPop(he),w&&(delete w._lockedByExec,w.finalize())}return h.returnVal()},createFunction:function(l,f,d){let w=C=>C instanceof Function;switch(arguments.length){case 1:d=l,l=d.name,f=d.xFunc||0;break;case 2:w(f)||(d=f,f=d.xFunc||0);break;case 3:break;default:break}d||(d={}),typeof l!="string"&&a("Invalid arguments: missing function name.");let Q=d.xStep||0,ae=d.xFinal||0,he=d.xValue||0,fe=d.xInverse||0,xe;w(f)?(xe=!1,(w(Q)||w(ae))&&a("Ambiguous arguments: scalar or aggregate?"),Q=ae=null):w(Q)?(w(ae)||a("Missing xFinal() callback for aggregate or window UDF."),f=null):w(ae)?a("Missing xStep() callback for aggregate or window UDF."):a("Missing function-type properties."),xe===!1?(w(he)||w(fe))&&a("xValue and xInverse are not permitted for non-window UDFs."):w(he)?(w(fe)||a("xInverse must be provided if xValue is."),xe=!0):w(fe)&&a("xValue must be provided if xInverse is.");let qe=d.pApp;qe!=null&&(typeof qe!="number"||!g.isInt32(qe))&&a("Invalid value for pApp property. Must be a legal WASM pointer value.");let $=d.xDestroy||0;$&&!w($)&&a("xDestroy property must be a function.");let S=0;W(d,"deterministic")&&(S|=i.SQLITE_DETERMINISTIC),W(d,"directOnly")&&(S|=i.SQLITE_DIRECTONLY),W(d,"innocuous")&&(S|=i.SQLITE_INNOCUOUS),l=l.toLowerCase();let L=f||Q,Y=W(d,"arity"),ie=typeof Y=="number"?Y:L.length?L.length-1:0,A;return xe?A=i.sqlite3_create_window_function(this.pointer,l,ie,i.SQLITE_UTF8|S,qe||0,Q,ae,he,fe,$):A=i.sqlite3_create_function_v2(this.pointer,l,ie,i.SQLITE_UTF8|S,qe||0,f,Q,ae,$),P.checkRc(this,A),this},selectValue:function(h,l,f){return H(this,h,l,0,f)},selectValues:function(h,l,f){let d=this.prepare(h),w=[];try{for(d.bind(l);d.step();)w.push(d.get(0,f));d.reset()}finally{d.finalize()}return w},selectArray:function(h,l){return H(this,h,l,[])},selectObject:function(h,l){return H(this,h,l,{})},selectArrays:function(h,l){return E(this,h,l,"array")},selectObjects:function(h,l){return E(this,h,l,"object")},openStatementCount:function(){return this.pointer?Object.keys(B.get(this)).length:0},transaction:function(h){let l="BEGIN";arguments.length>1&&(/[^a-zA-Z]/.test(arguments[0])&&a(i.SQLITE_MISUSE,"Invalid argument for BEGIN qualifier."),l+=" "+arguments[0],h=arguments[1]),q(this).exec(l);try{let f=h(this);return this.exec("COMMIT"),f}catch(f){throw this.exec("ROLLBACK"),f}},savepoint:function(h){q(this).exec("SAVEPOINT oo1");try{let l=h(this);return this.exec("RELEASE oo1"),l}catch(l){throw this.exec("ROLLBACK to SAVEPOINT oo1; RELEASE SAVEPOINT oo1"),l}},checkRc:function(h){return X(this,h)}};let G=function(h){return h.pointer||a("Stmt has been closed."),h},p=function(h){let l=M[h==null?"null":typeof h];switch(l){case M.boolean:case M.null:case M.number:case M.string:return l;case M.bigint:if(s.bigIntEnabled)return l;default:return g.isBindableTypedArray(h)?M.blob:void 0}},m=function(h){return p(h)||a("Unsupported bind() argument type:",typeof h)},k=function(h,l){let f=typeof l=="number"?l:i.sqlite3_bind_parameter_index(h.pointer,l);return f===0||!g.isInt32(f)?a("Invalid bind() parameter name: "+l):(f<1||f>h.parameterCount)&&a("Bind index",l,"is out of range."),f},U=function(h,l){return h._lockedByExec&&a("Operation is illegal when statement is locked:",l),h},j=function h(l,f,d,w){U(G(l),"bind()"),h._||(h._tooBigInt=ae=>a("BigInt value is too big to store without precision loss:",ae),h._={string:function(ae,he,fe,xe){let[qe,$]=s.allocCString(fe,!0);return(xe?i.sqlite3_bind_blob:i.sqlite3_bind_text)(ae.pointer,he,qe,$,i.SQLITE_WASM_DEALLOC)}}),m(w),f=k(l,f);let Q=0;switch(w==null?M.null:d){case M.null:Q=i.sqlite3_bind_null(l.pointer,f);break;case M.string:Q=h._.string(l,f,w,!1);break;case M.number:{let ae;g.isInt32(w)?ae=i.sqlite3_bind_int:typeof w=="bigint"?g.bigIntFits64(w)?s.bigIntEnabled?ae=i.sqlite3_bind_int64:g.bigIntFitsDouble(w)?(w=Number(w),ae=i.sqlite3_bind_double):h._tooBigInt(w):h._tooBigInt(w):(w=Number(w),s.bigIntEnabled&&Number.isInteger(w)?ae=i.sqlite3_bind_int64:ae=i.sqlite3_bind_double),Q=ae(l.pointer,f,w);break}case M.boolean:Q=i.sqlite3_bind_int(l.pointer,f,w?1:0);break;case M.blob:{if(typeof w=="string"){Q=h._.string(l,f,w,!0);break}else w instanceof ArrayBuffer?w=new Uint8Array(w):g.isBindableTypedArray(w)||a("Binding a value as a blob requires","that it be a string, Uint8Array, Int8Array, or ArrayBuffer.");let ae=s.alloc(w.byteLength||1);s.heap8().set(w.byteLength?w:[0],ae),Q=i.sqlite3_bind_blob(l.pointer,f,ae,w.byteLength,i.SQLITE_WASM_DEALLOC);break}default:t.config.warn("Unsupported bind() argument type:",w),a("Unsupported bind() argument type: "+typeof w)}return Q&&P.checkRc(l.db.pointer,Q),l._mayGet=!1,l};T.prototype={finalize:function(){if(this.pointer){U(this,"finalize()");let h=i.sqlite3_finalize(this.pointer);return delete B.get(this.db)[this.pointer],y.delete(this),delete this._mayGet,delete this.parameterCount,delete this._lockedByExec,delete this.db,h}},clearBindings:function(){return U(G(this),"clearBindings()"),i.sqlite3_clear_bindings(this.pointer),this._mayGet=!1,this},reset:function(h){U(this,"reset()"),h&&this.clearBindings();let l=i.sqlite3_reset(G(this).pointer);return this._mayGet=!1,X(this.db,l),this},bind:function(){G(this);let h,l;switch(arguments.length){case 1:h=1,l=arguments[0];break;case 2:h=arguments[0],l=arguments[1];break;default:a("Invalid bind() arguments.")}return l===void 0?this:(this.parameterCount||a("This statement has no bindable parameters."),this._mayGet=!1,l===null?j(this,h,M.null,l):Array.isArray(l)?(arguments.length!==1&&a("When binding an array, an index argument is not permitted."),l.forEach((f,d)=>j(this,d+1,m(f),f)),this):(l instanceof ArrayBuffer&&(l=new Uint8Array(l)),typeof l=="object"&&!g.isBindableTypedArray(l)?(arguments.length!==1&&a("When binding an object, an index argument is not permitted."),Object.keys(l).forEach(f=>j(this,f,m(l[f]),l[f])),this):j(this,h,m(l),l)))},bindAsBlob:function(h,l){G(this),arguments.length===1&&(l=h,h=1);let f=m(l);return M.string!==f&&M.blob!==f&&M.null!==f&&a("Invalid value type for bindAsBlob()"),j(this,h,M.blob,l)},step:function(){U(this,"step()");let h=i.sqlite3_step(G(this).pointer);switch(h){case i.SQLITE_DONE:return this._mayGet=!1;case i.SQLITE_ROW:return this._mayGet=!0;default:this._mayGet=!1,t.config.warn("sqlite3_step() rc=",h,i.sqlite3_js_rc_str(h),"SQL =",i.sqlite3_sql(this.pointer)),P.checkRc(this.db.pointer,h)}},stepReset:function(){return this.step(),this.reset()},stepFinalize:function(){try{let h=this.step();return this.reset(),h}finally{try{this.finalize()}catch{}}},get:function(h,l){if(G(this)._mayGet||a("Stmt.step() has not (recently) returned true."),Array.isArray(h)){let f=0,d=this.columnCount;for(;f<d;)h[f]=this.get(f++);return h}else if(h&&typeof h=="object"){let f=0,d=this.columnCount;for(;f<d;)h[i.sqlite3_column_name(this.pointer,f)]=this.get(f++);return h}switch(N(this,h),l===void 0?i.sqlite3_column_type(this.pointer,h):l){case i.SQLITE_NULL:return null;case i.SQLITE_INTEGER:if(s.bigIntEnabled){let f=i.sqlite3_column_int64(this.pointer,h);return f>=Number.MIN_SAFE_INTEGER&&f<=Number.MAX_SAFE_INTEGER?Number(f).valueOf():f}else{let f=i.sqlite3_column_double(this.pointer,h);return(f>Number.MAX_SAFE_INTEGER||f<Number.MIN_SAFE_INTEGER)&&a("Integer is out of range for JS integer range: "+f),g.isInt32(f)?f|0:f}case i.SQLITE_FLOAT:return i.sqlite3_column_double(this.pointer,h);case i.SQLITE_TEXT:return i.sqlite3_column_text(this.pointer,h);case i.SQLITE_BLOB:{let f=i.sqlite3_column_bytes(this.pointer,h),d=i.sqlite3_column_blob(this.pointer,h),w=new Uint8Array(f);return f&&w.set(s.heap8u().slice(d,d+f),0),f&&this.db._blobXfer instanceof Array&&this.db._blobXfer.push(w.buffer),w}default:a("Don't know how to translate","type of result column #"+h+".")}a("Not reached.")},getInt:function(h){return this.get(h,i.SQLITE_INTEGER)},getFloat:function(h){return this.get(h,i.SQLITE_FLOAT)},getString:function(h){return this.get(h,i.SQLITE_TEXT)},getBlob:function(h){return this.get(h,i.SQLITE_BLOB)},getJSON:function(h){let l=this.get(h,i.SQLITE_STRING);return l===null?l:JSON.parse(l)},getColumnName:function(h){return i.sqlite3_column_name(N(G(this),h).pointer,h)},getColumnNames:function(h=[]){N(G(this),0);let l=this.columnCount;for(let f=0;f<l;++f)h.push(i.sqlite3_column_name(this.pointer,f));return h},getParamIndex:function(h){return G(this).parameterCount?i.sqlite3_bind_parameter_index(this.pointer,h):void 0},getParamName:function(h){return G(this).parameterCount?i.sqlite3_bind_parameter_name(this.pointer,h):void 0},isBusy:function(){return i.sqlite3_stmt_busy(G(this))!==0},isReadOnly:function(){return i.sqlite3_stmt_readonly(G(this))!==0}};{let h={enumerable:!0,get:function(){return y.get(this)},set:()=>a("The pointer property is read-only.")};Object.defineProperty(T.prototype,"pointer",h),Object.defineProperty(P.prototype,"pointer",h)}if(Object.defineProperty(T.prototype,"columnCount",{enumerable:!1,get:function(){return i.sqlite3_column_count(this.pointer)},set:()=>a("The columnCount property is read-only.")}),t.oo1={DB:P,Stmt:T},g.isUIThread()){t.oo1.JsStorageDb=function(l="session"){let f=F.normalizeArgs(...arguments);l=f.filename,l!=="session"&&l!=="local"&&a("JsStorageDb db name must be one of 'session' or 'local'."),f.vfs="kvvfs",F.call(this,f)};let h=t.oo1.JsStorageDb;h.prototype=Object.create(P.prototype),h.clearStorage=i.sqlite3_js_kvvfs_clear,h.prototype.clearStorage=function(){return h.clearStorage(q(this).filename)},h.storageSize=i.sqlite3_js_kvvfs_size,h.prototype.storageSize=function(){return h.storageSize(q(this).filename)}}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){let n=t.util;t.initWorker1API=function(){"use strict";let a=(...F)=>{throw new Error(F.join(" "))};globalThis.WorkerGlobalScope instanceof Function||a("initWorker1API() must be run from a Worker thread.");let i=this.sqlite3||a("Missing this.sqlite3 object."),s=i.oo1.DB,g=function(F){let P=y.idMap.get(F);return P||(P="db#"+ ++y.idSeq+"@"+F.pointer,y.idMap.set(F,P),P)},y={dbList:[],idSeq:0,idMap:new WeakMap,xfer:[],open:function(F){let P=new s(F);return this.dbs[g(P)]=P,this.dbList.indexOf(P)<0&&this.dbList.push(P),P},close:function(F,P){if(F){delete this.dbs[g(F)];let M=F.filename,T=n.sqlite3__wasm_db_vfs(F.pointer,0);F.close();let q=this.dbList.indexOf(F);q>=0&&this.dbList.splice(q,1),P&&M&&T&&n.sqlite3__wasm_vfs_unlink(T,M)}},post:function(F,P){P&&P.length?(globalThis.postMessage(F,Array.from(P)),P.length=0):globalThis.postMessage(F)},dbs:Object.create(null),getDb:function(F,P=!0){return this.dbs[F]||(P?a("Unknown (or closed) DB ID:",F):void 0)}},B=function(F=y.dbList[0]){return F&&F.pointer?F:a("DB is not opened.")},W=function(F,P=!0){let M=y.getDb(F.dbId,!1)||y.dbList[0];return P?B(M):M},X=function(){return y.dbList[0]&&g(y.dbList[0])},J=F=>F===""||F[0]===":",te={open:function(F){let P=Object.create(null),M=F.args||Object.create(null);M.simulateError&&a("Throwing because of simulateError flag.");let T=Object.create(null);P.vfs=M.vfs,P.filename=M.filename||"";let q=y.open(P);return T.filename=q.filename,T.persistent=!!i.capi.sqlite3_js_db_uses_vfs(q.pointer,"opfs"),T.dbId=g(q),T.vfs=q.dbVfsName(),T},close:function(F){let P=W(F,!1),M={filename:P&&P.filename};if(P){let T=F.args&&typeof F.args=="object"?!!F.args.unlink:!1;y.close(P,T)}return M},exec:function(F){let P=typeof F.args=="string"?{sql:F.args}:F.args||Object.create(null);P.rowMode==="stmt"?a("Invalid rowMode for 'exec': stmt mode","does not work in the Worker API."):P.sql||a("'exec' requires input SQL.");let M=W(F);(P.callback||Array.isArray(P.resultRows))&&(M._blobXfer=y.xfer);let T=P.callback,q=0,N=!!P.columnNames;typeof T=="string"&&(N||(P.columnNames=[]),P.callback=function(z,H){y.post({type:T,columnNames:P.columnNames,rowNumber:++q,row:z},y.xfer)});try{let z=P.countChanges?M.changes(!0,P.countChanges===64):void 0;M.exec(P),z!==void 0&&(P.changeCount=M.changes(!0,P.countChanges===64)-z),P.callback instanceof Function&&(P.callback=T,y.post({type:T,columnNames:P.columnNames,rowNumber:null,row:void 0}))}finally{delete M._blobXfer,P.callback&&(P.callback=T)}return P},"config-get":function(){let F=Object.create(null),P=i.config;return["bigIntEnabled"].forEach(function(M){Object.getOwnPropertyDescriptor(P,M)&&(F[M]=P[M])}),F.version=i.version,F.vfsList=i.capi.sqlite3_js_vfs_list(),F},export:function(F){let P=W(F),M={byteArray:i.capi.sqlite3_js_db_export(P.pointer),filename:P.filename,mimetype:"application/x-sqlite3"};return y.xfer.push(M.byteArray.buffer),M},toss:function(F){a("Testing worker exception")}};globalThis.onmessage=async function(F){F=F.data;let P,M=F.dbId,T=F.type,q=performance.now();try{te.hasOwnProperty(T)&&te[T]instanceof Function?P=await te[T](F):a("Unknown db worker message type:",F.type)}catch(N){T="error",P={operation:F.type,message:N.message,errorClass:N.name,input:F},N.stack&&(P.stack=typeof N.stack=="string"?N.stack.split(/\n\s*/):N.stack)}M||(M=P.dbId||X()),y.post({type:T,dbId:M,messageId:F.messageId,workerReceivedTime:q,workerRespondTime:performance.now(),departureTime:F.departureTime,result:P},y.xfer)},globalThis.postMessage({type:"sqlite3-api",result:"worker1-ready"})}.bind({sqlite3:t})}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){let n=t.wasm,a=t.capi,i=t.util.toss3,s=Object.create(null);t.vfs=s,a.sqlite3_vfs.prototype.registerVfs=function(g=!1){this instanceof t.capi.sqlite3_vfs||i("Expecting a sqlite3_vfs-type argument.");let y=a.sqlite3_vfs_register(this,g?1:0);return y&&i("sqlite3_vfs_register(",this,") failed with rc",y),this.pointer!==a.sqlite3_vfs_find(this.$zName)&&i("BUG: sqlite3_vfs_find(vfs.$zName) failed for just-installed VFS",this),this},s.installVfs=function(g){let y=0,B=["io","vfs"];for(let W of B){let X=g[W];X&&(++y,X.struct.installMethods(X.methods,!!X.applyArgcCheck),W==="vfs"&&(!X.struct.$zName&&typeof X.name=="string"&&X.struct.addOnDispose(X.struct.$zName=n.allocCString(X.name)),X.struct.registerVfs(!!X.asDefault)))}return y||i("Misuse: installVfs() options object requires at least","one of:",B),this}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){if(!t.wasm.exports.sqlite3_declare_vtab)return;let n=t.wasm,a=t.capi,i=t.util.toss3,s=Object.create(null);t.vtab=s;let g=a.sqlite3_index_info;g.prototype.nthConstraint=function(W,X=!1){if(W<0||W>=this.$nConstraint)return!1;let J=this.$aConstraint+g.sqlite3_index_constraint.structInfo.sizeof*W;return X?J:new g.sqlite3_index_constraint(J)},g.prototype.nthConstraintUsage=function(W,X=!1){if(W<0||W>=this.$nConstraint)return!1;let J=this.$aConstraintUsage+g.sqlite3_index_constraint_usage.structInfo.sizeof*W;return X?J:new g.sqlite3_index_constraint_usage(J)},g.prototype.nthOrderBy=function(W,X=!1){if(W<0||W>=this.$nOrderBy)return!1;let J=this.$aOrderBy+g.sqlite3_index_orderby.structInfo.sizeof*W;return X?J:new g.sqlite3_index_orderby(J)};let y=function(W,X){return function(J,te=!1){if(arguments.length===0&&(J=new X),J instanceof X)return this.set(J.pointer,J),J;n.isPtr(J)||t.SQLite3Error.toss("Invalid argument to",W+"()");let F=this.get(J);return te&&this.delete(J),F}.bind(new Map)},B=function(W,X){let J=y(W,X);return Object.assign(Object.create(null),{StructType:X,create:te=>{let F=J();return n.pokePtr(te,F.pointer),F},get:te=>J(te),unget:te=>J(te,!0),dispose:te=>{let F=J(te,!0);F&&F.dispose()}})};s.xVtab=B("xVtab",a.sqlite3_vtab),s.xCursor=B("xCursor",a.sqlite3_vtab_cursor),s.xIndexInfo=W=>new a.sqlite3_index_info(W),s.xError=function W(X,J,te){if(W.errorReporter instanceof Function)try{W.errorReporter("sqlite3_module::"+X+"(): "+J.message)}catch{}let F;return J instanceof t.WasmAllocError?F=a.SQLITE_NOMEM:arguments.length>2?F=te:J instanceof t.SQLite3Error&&(F=J.resultCode),F||a.SQLITE_ERROR},s.xError.errorReporter=console.error.bind(console),s.xRowid=(W,X)=>n.poke(W,X,"i64"),s.setupModule=function(W){let X=!1,J=this instanceof a.sqlite3_module?this:W.struct||(X=new a.sqlite3_module);try{let te=W.methods||i("Missing 'methods' object.");for(let F of Object.entries({xConnect:"xCreate",xDisconnect:"xDestroy"})){let P=F[0],M=F[1];te[P]===!0?te[P]=te[M]:te[M]===!0&&(te[M]=te[P])}if(W.catchExceptions){let F=function(T,q){return["xConnect","xCreate"].indexOf(T)>=0?function(N,z,H,E,G,p){try{return q(...arguments)||0}catch(m){return m instanceof t.WasmAllocError||(n.dealloc(n.peekPtr(p)),n.pokePtr(p,n.allocCString(m.message))),s.xError(T,m)}}:function(...N){try{return q(...N)||0}catch(z){return s.xError(T,z)}}},P=["xCreate","xConnect","xBestIndex","xDisconnect","xDestroy","xOpen","xClose","xFilter","xNext","xEof","xColumn","xRowid","xUpdate","xBegin","xSync","xCommit","xRollback","xFindFunction","xRename","xSavepoint","xRelease","xRollbackTo","xShadowName"],M=Object.create(null);for(let T of P){let q=te[T];if(q instanceof Function)T==="xConnect"&&te.xCreate===q?M[T]=te.xCreate:T==="xCreate"&&te.xConnect===q?M[T]=te.xConnect:M[T]=F(T,q);else continue}J.installMethods(M,!1)}else J.installMethods(te,!!W.applyArgcCheck);if(J.$iVersion===0){let F;typeof W.iVersion=="number"?F=W.iVersion:J.$xShadowName?F=3:J.$xSavePoint||J.$xRelease||J.$xRollbackTo?F=2:F=1,J.$iVersion=F}}catch(te){throw X&&X.dispose(),te}return J},a.sqlite3_module.prototype.setupModule=function(W){return s.setupModule.call(this,W)}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){let n=function a(i){if(!globalThis.SharedArrayBuffer||!globalThis.Atomics)return Promise.reject(new Error("Cannot install OPFS: Missing SharedArrayBuffer and/or Atomics. The server must emit the COOP/COEP response headers to enable those. See https://sqlite.org/wasm/doc/trunk/persistence.md#coop-coep"));if(typeof WorkerGlobalScope>"u")return Promise.reject(new Error("The OPFS sqlite3_vfs cannot run in the main thread because it requires Atomics.wait()."));if(!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle||!globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle||!navigator?.storage?.getDirectory)return Promise.reject(new Error("Missing required OPFS APIs."));(!i||typeof i!="object")&&(i=Object.create(null));let s=new URL(globalThis.location.href).searchParams;return s.has("opfs-disable")?Promise.resolve(t):(i.verbose===void 0&&(i.verbose=s.has("opfs-verbose")?+s.get("opfs-verbose")||2:1),i.sanityChecks===void 0&&(i.sanityChecks=s.has("opfs-sanity-check")),i.proxyUri===void 0&&(i.proxyUri=a.defaultProxyUri),typeof i.proxyUri=="function"&&(i.proxyUri=i.proxyUri()),new Promise(function(y,B){let W=[t.config.error,t.config.warn,t.config.log],X=(A,...C)=>{i.verbose>A&&W[A]("OPFS syncer:",...C)},J=(...A)=>X(2,...A),te=(...A)=>X(1,...A),F=(...A)=>X(0,...A),P=t.util.toss,M=t.capi,T=t.util,q=t.wasm,N=M.sqlite3_vfs,z=M.sqlite3_file,H=M.sqlite3_io_methods,E=Object.create(null),G=()=>globalThis.FileSystemHandle&&globalThis.FileSystemDirectoryHandle&&globalThis.FileSystemFileHandle&&globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle&&navigator?.storage?.getDirectory;E.metrics={dump:function(){let A,C=0,V=0,ee=0;for(A in d.opIds){let se=w[A];C+=se.count,V+=se.time,ee+=se.wait,se.avgTime=se.count&&se.time?se.time/se.count:0,se.avgWait=se.count&&se.wait?se.wait/se.count:0}t.config.log(globalThis.location.href,"metrics for",globalThis.location.href,":",w,`
Total of`,C,"op(s) for",V,"ms (incl. "+ee+" ms of waiting on the async side)"),t.config.log("Serialization metrics:",w.s11n),h.postMessage({type:"opfs-async-metrics"})},reset:function(){let A,C=ee=>ee.count=ee.time=ee.wait=0;for(A in d.opIds)C(w[A]=Object.create(null));let V=w.s11n=Object.create(null);V=V.serialize=Object.create(null),V.count=V.time=0,V=w.s11n.deserialize=Object.create(null),V.count=V.time=0}};let p=new H,m=new N().addOnDispose(()=>p.dispose()),k,U=A=>(k=!0,m.dispose(),B(A)),j=()=>(k=!1,y(t)),h=new Worker(new URL("sqlite3-opfs-async-proxy.js","file:./sqlite-viewer-core/vscode/build/assets/"),{type:"module"});setTimeout(()=>{k===void 0&&U(new Error("Timeout while waiting for OPFS async proxy worker."))},4e3),h._originalOnError=h.onerror,h.onerror=function(A){F("Error initializing OPFS asyncer:",A),U(new Error("Loading OPFS async Worker failed for unknown reasons."))};let l=M.sqlite3_vfs_find(null),f=l?new N(l):null;p.$iVersion=1,m.$iVersion=2,m.$szOsFile=M.sqlite3_file.structInfo.sizeof,m.$mxPathname=1024,m.$zName=q.allocCString("opfs"),m.$xDlOpen=m.$xDlError=m.$xDlSym=m.$xDlClose=null,m.addOnDispose("$zName",m.$zName,"cleanup default VFS wrapper",()=>f?f.dispose():null);let d=Object.create(null);d.verbose=i.verbose,d.littleEndian=(()=>{let A=new ArrayBuffer(2);return new DataView(A).setInt16(0,256,!0),new Int16Array(A)[0]===256})(),d.asyncIdleWaitTime=150,d.asyncS11nExceptions=1,d.fileBufferSize=1024*64,d.sabS11nOffset=d.fileBufferSize,d.sabS11nSize=m.$mxPathname*2,d.sabIO=new SharedArrayBuffer(d.fileBufferSize+d.sabS11nSize),d.opIds=Object.create(null);let w=Object.create(null);{let A=0;d.opIds.whichOp=A++,d.opIds.rc=A++,d.opIds.xAccess=A++,d.opIds.xClose=A++,d.opIds.xDelete=A++,d.opIds.xDeleteNoWait=A++,d.opIds.xFileSize=A++,d.opIds.xLock=A++,d.opIds.xOpen=A++,d.opIds.xRead=A++,d.opIds.xSleep=A++,d.opIds.xSync=A++,d.opIds.xTruncate=A++,d.opIds.xUnlock=A++,d.opIds.xWrite=A++,d.opIds.mkdir=A++,d.opIds["opfs-async-metrics"]=A++,d.opIds["opfs-async-shutdown"]=A++,d.opIds.retry=A++,d.sabOP=new SharedArrayBuffer(A*4),E.metrics.reset()}d.sq3Codes=Object.create(null),["SQLITE_ACCESS_EXISTS","SQLITE_ACCESS_READWRITE","SQLITE_BUSY","SQLITE_CANTOPEN","SQLITE_ERROR","SQLITE_IOERR","SQLITE_IOERR_ACCESS","SQLITE_IOERR_CLOSE","SQLITE_IOERR_DELETE","SQLITE_IOERR_FSYNC","SQLITE_IOERR_LOCK","SQLITE_IOERR_READ","SQLITE_IOERR_SHORT_READ","SQLITE_IOERR_TRUNCATE","SQLITE_IOERR_UNLOCK","SQLITE_IOERR_WRITE","SQLITE_LOCK_EXCLUSIVE","SQLITE_LOCK_NONE","SQLITE_LOCK_PENDING","SQLITE_LOCK_RESERVED","SQLITE_LOCK_SHARED","SQLITE_LOCKED","SQLITE_MISUSE","SQLITE_NOTFOUND","SQLITE_OPEN_CREATE","SQLITE_OPEN_DELETEONCLOSE","SQLITE_OPEN_MAIN_DB","SQLITE_OPEN_READONLY"].forEach(A=>{(d.sq3Codes[A]=M[A])===void 0&&P("Maintenance required: not found:",A)}),d.opfsFlags=Object.assign(Object.create(null),{OPFS_UNLOCK_ASAP:1,OPFS_UNLINK_BEFORE_OPEN:2,defaultUnlockAsap:!1});let Q=(A,...C)=>{let V=d.opIds[A]||P("Invalid op ID:",A);d.s11n.serialize(...C),Atomics.store(d.sabOPView,d.opIds.rc,-1),Atomics.store(d.sabOPView,d.opIds.whichOp,V),Atomics.notify(d.sabOPView,d.opIds.whichOp);let ee=performance.now();for(;Atomics.wait(d.sabOPView,d.opIds.rc,-1)!=="not-equal";);let se=Atomics.load(d.sabOPView,d.opIds.rc);if(w[A].wait+=performance.now()-ee,se&&d.asyncS11nExceptions){let de=d.s11n.deserialize();de&&F(A+"() async error:",...de)}return se};E.debug={asyncShutdown:()=>{te("Shutting down OPFS async listener. The OPFS VFS will no longer work."),Q("opfs-async-shutdown")},asyncRestart:()=>{te("Attempting to restart OPFS VFS async listener. Might work, might not."),h.postMessage({type:"opfs-async-restart"})}};let ae=()=>{if(d.s11n)return d.s11n;let A=new TextDecoder,C=new TextEncoder("utf-8"),V=new Uint8Array(d.sabIO,d.sabS11nOffset,d.sabS11nSize),ee=new DataView(d.sabIO,d.sabS11nOffset,d.sabS11nSize);d.s11n=Object.create(null);let se=Object.create(null);se.number={id:1,size:8,getter:"getFloat64",setter:"setFloat64"},se.bigint={id:2,size:8,getter:"getBigInt64",setter:"setBigInt64"},se.boolean={id:3,size:4,getter:"getInt32",setter:"setInt32"},se.string={id:4};let de=_e=>se[typeof _e]||P("Maintenance required: this value type cannot be serialized.",_e),ge=_e=>{switch(_e){case se.number.id:return se.number;case se.bigint.id:return se.bigint;case se.boolean.id:return se.boolean;case se.string.id:return se.string;default:P("Invalid type ID:",_e)}};return d.s11n.deserialize=function(_e=!1){++w.s11n.deserialize.count;let Re=performance.now(),Le=V[0],R=Le?[]:null;if(Le){let ne=[],le=1,ce,Ee,ke;for(ce=0;ce<Le;++ce,++le)ne.push(ge(V[le]));for(ce=0;ce<Le;++ce){let Ae=ne[ce];Ae.getter?(ke=ee[Ae.getter](le,d.littleEndian),le+=Ae.size):(Ee=ee.getInt32(le,d.littleEndian),le+=4,ke=A.decode(V.slice(le,le+Ee)),le+=Ee),R.push(ke)}}return _e&&(V[0]=0),w.s11n.deserialize.time+=performance.now()-Re,R},d.s11n.serialize=function(..._e){let Re=performance.now();if(++w.s11n.serialize.count,_e.length){let Le=[],R=0,ne=1;for(V[0]=_e.length&255;R<_e.length;++R,++ne)Le.push(de(_e[R])),V[ne]=Le[R].id;for(R=0;R<_e.length;++R){let le=Le[R];if(le.setter)ee[le.setter](ne,_e[R],d.littleEndian),ne+=le.size;else{let ce=C.encode(_e[R]);ee.setInt32(ne,ce.byteLength,d.littleEndian),ne+=4,V.set(ce,ne),ne+=ce.byteLength}}}else V[0]=0;w.s11n.serialize.time+=performance.now()-Re},d.s11n},he=function A(C=16){A._chars||(A._chars="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ012346789",A._n=A._chars.length);let V=[],ee=0;for(;ee<C;++ee){let se=Math.random()*(A._n*64)%A._n|0;V[ee]=A._chars[se]}return V.join("")},fe=Object.create(null),xe=Object.create(null);xe.op=void 0,xe.start=void 0;let qe=A=>{xe.start=performance.now(),xe.op=A,++w[A].count},$=()=>w[xe.op].time+=performance.now()-xe.start,S={xCheckReservedLock:function(A,C){return q.poke(C,0,"i32"),0},xClose:function(A){qe("xClose");let C=0,V=fe[A];return V&&(delete fe[A],C=Q("xClose",A),V.sq3File&&V.sq3File.dispose()),$(),C},xDeviceCharacteristics:function(A){return M.SQLITE_IOCAP_UNDELETABLE_WHEN_OPEN},xFileControl:function(A,C,V){return M.SQLITE_NOTFOUND},xFileSize:function(A,C){qe("xFileSize");let V=Q("xFileSize",A);if(V==0)try{let ee=d.s11n.deserialize()[0];q.poke(C,ee,"i64")}catch(ee){F("Unexpected error reading xFileSize() result:",ee),V=d.sq3Codes.SQLITE_IOERR}return $(),V},xLock:function(A,C){qe("xLock");let V=fe[A],ee=0;return V.lockType?V.lockType=C:(ee=Q("xLock",A,C),ee===0&&(V.lockType=C)),$(),ee},xRead:function(A,C,V,ee){qe("xRead");let se=fe[A],de;try{de=Q("xRead",A,V,Number(ee)),(de===0||M.SQLITE_IOERR_SHORT_READ===de)&&q.heap8u().set(se.sabView.subarray(0,V),C)}catch(ge){F("xRead(",arguments,") failed:",ge,se),de=M.SQLITE_IOERR_READ}return $(),de},xSync:function(A,C){qe("xSync"),++w.xSync.count;let V=Q("xSync",A,C);return $(),V},xTruncate:function(A,C){qe("xTruncate");let V=Q("xTruncate",A,Number(C));return $(),V},xUnlock:function(A,C){qe("xUnlock");let V=fe[A],ee=0;return M.SQLITE_LOCK_NONE===C&&V.lockType&&(ee=Q("xUnlock",A,C)),ee===0&&(V.lockType=C),$(),ee},xWrite:function(A,C,V,ee){qe("xWrite");let se=fe[A],de;try{se.sabView.set(q.heap8u().subarray(C,C+V)),de=Q("xWrite",A,V,Number(ee))}catch(ge){F("xWrite(",arguments,") failed:",ge,se),de=M.SQLITE_IOERR_WRITE}return $(),de}},L={xAccess:function(A,C,V,ee){qe("xAccess");let se=Q("xAccess",q.cstrToJs(C));return q.poke(ee,se?0:1,"i32"),$(),0},xCurrentTime:function(A,C){return q.poke(C,24405875e-1+new Date().getTime()/864e5,"double"),0},xCurrentTimeInt64:function(A,C){return q.poke(C,24405875e-1*864e5+new Date().getTime(),"i64"),0},xDelete:function(A,C,V){qe("xDelete");let ee=Q("xDelete",q.cstrToJs(C),V,!1);return $(),ee},xFullPathname:function(A,C,V,ee){return q.cstrncpy(ee,C,V)<V?0:M.SQLITE_CANTOPEN},xGetLastError:function(A,C,V){return te("OPFS xGetLastError() has nothing sensible to return."),0},xOpen:function(C,V,ee,se,de){qe("xOpen");let ge=0;V===0?V=he():q.isPtr(V)&&(M.sqlite3_uri_boolean(V,"opfs-unlock-asap",0)&&(ge|=d.opfsFlags.OPFS_UNLOCK_ASAP),M.sqlite3_uri_boolean(V,"delete-before-open",0)&&(ge|=d.opfsFlags.OPFS_UNLINK_BEFORE_OPEN),V=q.cstrToJs(V));let _e=Object.create(null);_e.fid=ee,_e.filename=V,_e.sab=new SharedArrayBuffer(d.fileBufferSize),_e.flags=se,_e.readOnly=!(t.SQLITE_OPEN_CREATE&se)&&!!(se&M.SQLITE_OPEN_READONLY);let Re=Q("xOpen",ee,V,se,ge);return Re||(_e.readOnly&&q.poke(de,M.SQLITE_OPEN_READONLY,"i32"),fe[ee]=_e,_e.sabView=d.sabFileBufView,_e.sq3File=new z(ee),_e.sq3File.$pMethods=p.pointer,_e.lockType=M.SQLITE_LOCK_NONE),$(),Re}};f&&(m.$xRandomness=f.$xRandomness,m.$xSleep=f.$xSleep),m.$xRandomness||(L.xRandomness=function(A,C,V){let ee=q.heap8u(),se=0;for(;se<C;++se)ee[V+se]=Math.random()*255e3&255;return se}),m.$xSleep||(L.xSleep=function(A,C){return Atomics.wait(d.sabOPView,d.opIds.xSleep,0,C),0}),E.getResolvedPath=function(A,C){let V=new URL(A,"file://irrelevant").pathname;return C?V.split("/").filter(ee=>!!ee):V},E.getDirForFilename=async function(C,V=!1){let ee=E.getResolvedPath(C,!0),se=ee.pop(),de=E.rootDirectory;for(let ge of ee)ge&&(de=await de.getDirectoryHandle(ge,{create:!!V}));return[de,se]},E.mkdir=async function(A){try{return await E.getDirForFilename(A+"/filepart",!0),!0}catch{return!1}},E.entryExists=async function(A){try{let[C,V]=await E.getDirForFilename(A);return await C.getFileHandle(V),!0}catch{return!1}},E.randomFilename=he,E.treeList=async function(){let A=async function V(ee,se){se.name=ee.name,se.dirs=[],se.files=[];for await(let de of ee.values())if(de.kind==="directory"){let ge=Object.create(null);se.dirs.push(ge),await V(de,ge)}else se.files.push(de.name)},C=Object.create(null);return await A(E.rootDirectory,C),C},E.rmfr=async function(){let A=E.rootDirectory,C={recurse:!0};for await(let V of A.values())A.removeEntry(V.name,C)},E.unlink=async function(A,C=!1,V=!1){try{let[ee,se]=await E.getDirForFilename(A,!1);return await ee.removeEntry(se,{recursive:C}),!0}catch(ee){if(V)throw new Error("unlink(",arguments[0],") failed: "+ee.message,{cause:ee});return!1}},E.traverse=async function(A){let C={recursive:!0,directory:E.rootDirectory};typeof A=="function"&&(A={callback:A}),A=Object.assign(C,A||{}),async function ee(se,de){for await(let ge of se.values()){if(A.callback(ge,se,de)===!1)return!1;if(A.recursive&&ge.kind==="directory"&&await ee(ge,de+1)===!1)break}}(A.directory,0)};let Y=async function(A,C){let[V,ee]=await E.getDirForFilename(A,!0),de=await(await V.getFileHandle(ee,{create:!0})).createSyncAccessHandle(),ge=0,_e,Re=!1,Le=!1;try{for(de.truncate(0);(_e=await C())!==void 0;)_e instanceof ArrayBuffer&&(_e=new Uint8Array(_e)),ge===0&&_e.byteLength>=15&&(T.affirmDbHeader(_e),Re=!0),de.write(_e,{at:ge}),ge+=_e.byteLength;if((ge<512||ge%512!==0)&&P("Input size",ge,"is not correct for an SQLite database."),!Re){let R=new Uint8Array(20);de.read(R,{at:0}),T.affirmDbHeader(R)}return de.write(new Uint8Array([1,1]),{at:18}),ge}catch(R){throw await de.close(),de=void 0,await V.removeEntry(ee).catch(()=>{}),R}finally{de&&await de.close()}};if(E.importDb=async function(A,C){if(C instanceof Function)return Y(A,C);C instanceof ArrayBuffer&&(C=new Uint8Array(C)),T.affirmIsDb(C);let V=C.byteLength,[ee,se]=await E.getDirForFilename(A,!0),de,ge,_e=0;try{return de=await(await ee.getFileHandle(se,{create:!0})).createSyncAccessHandle(),de.truncate(0),_e=de.write(C,{at:0}),_e!=V&&P("Expected to write "+V+" bytes but wrote "+_e+"."),de.write(new Uint8Array([1,1]),{at:18}),_e}catch(Re){throw de&&(await de.close(),de=void 0),await ee.removeEntry(se).catch(()=>{}),Re}finally{de&&await de.close()}},t.oo1){let A=function(...C){let V=t.oo1.DB.dbCtorHelper.normalizeArgs(...C);V.vfs=m.$zName,t.oo1.DB.dbCtorHelper.call(this,V)};A.prototype=Object.create(t.oo1.DB.prototype),t.oo1.OpfsDb=A,A.importDb=E.importDb,t.oo1.DB.dbCtorHelper.setVfsPostOpenCallback(m.pointer,function(C,V){V.capi.sqlite3_busy_timeout(C,1e4)})}let ie=function(){let A=q.scopedAllocPush(),C=new z;try{let V=C.pointer,ee=M.SQLITE_OPEN_CREATE|M.SQLITE_OPEN_READWRITE|M.SQLITE_OPEN_MAIN_DB,se=q.scopedAlloc(8),de="/sanity/check/file"+he(8),ge=q.scopedAllocCString(de),_e;if(d.s11n.serialize("This is \xE4 string."),_e=d.s11n.deserialize(),J("deserialize() says:",_e),_e[0]!=="This is \xE4 string."&&P("String d13n error."),L.xAccess(m.pointer,ge,0,se),_e=q.peek(se,"i32"),J("xAccess(",de,") exists ?=",_e),_e=L.xOpen(m.pointer,ge,V,ee,se),J("open rc =",_e,"state.sabOPView[xOpen] =",d.sabOPView[d.opIds.xOpen]),_e!==0){F("open failed with code",_e);return}L.xAccess(m.pointer,ge,0,se),_e=q.peek(se,"i32"),_e||P("xAccess() failed to detect file."),_e=S.xSync(C.pointer,0),_e&&P("sync failed w/ rc",_e),_e=S.xTruncate(C.pointer,1024),_e&&P("truncate failed w/ rc",_e),q.poke(se,0,"i64"),_e=S.xFileSize(C.pointer,se),_e&&P("xFileSize failed w/ rc",_e),J("xFileSize says:",q.peek(se,"i64")),_e=S.xWrite(C.pointer,ge,10,1),_e&&P("xWrite() failed!");let Re=q.scopedAlloc(16);_e=S.xRead(C.pointer,Re,6,2),q.poke(Re+6,0);let Le=q.cstrToJs(Re);J("xRead() got:",Le),Le!=="sanity"&&P("Unexpected xRead() value."),L.xSleep&&(J("xSleep()ing before close()ing..."),L.xSleep(m.pointer,2e3),J("waking up from xSleep()")),_e=S.xClose(V),J("xClose rc =",_e,"sabOPView =",d.sabOPView),J("Deleting file:",de),L.xDelete(m.pointer,ge,4660),L.xAccess(m.pointer,ge,0,se),_e=q.peek(se,"i32"),_e&&P("Expecting 0 from xAccess(",de,") after xDelete()."),te("End of OPFS sanity checks.")}finally{C.dispose(),q.scopedAllocPop(A)}};h.onmessage=function({data:A}){switch(A.type){case"opfs-unavailable":U(new Error(A.payload.join(" ")));break;case"opfs-async-loaded":h.postMessage({type:"opfs-async-init",args:d});break;case"opfs-async-inited":{if(k===!0)break;try{t.vfs.installVfs({io:{struct:p,methods:S},vfs:{struct:m,methods:L}}),d.sabOPView=new Int32Array(d.sabOP),d.sabFileBufView=new Uint8Array(d.sabIO,0,d.fileBufferSize),d.sabS11nView=new Uint8Array(d.sabIO,d.sabS11nOffset,d.sabS11nSize),ae(),i.sanityChecks&&(te("Running sanity checks because of opfs-sanity-check URL arg..."),ie()),G()?navigator.storage.getDirectory().then(C=>{h.onerror=h._originalOnError,delete h._originalOnError,t.opfs=E,E.rootDirectory=C,J("End of OPFS sqlite3_vfs setup.",m),j()}).catch(U):j()}catch(C){F(C),U(C)}break}default:{let C="Unexpected message from the OPFS async worker: "+JSON.stringify(A);F(C),U(new Error(C));break}}}}))};n.defaultProxyUri="sqlite3-opfs-async-proxy.js",globalThis.sqlite3ApiBootstrap.initializersAsync.push(async a=>{try{let i=n.defaultProxyUri;return a.scriptInfo.sqlite3Dir&&(n.defaultProxyUri=a.scriptInfo.sqlite3Dir+i),n().catch(s=>{a.config.warn("Ignoring inability to install OPFS sqlite3_vfs:",s.message)})}catch(i){return a.config.error("installOpfsVfs() exception:",i),Promise.reject(i)}})}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){"use strict";let n=t.util.toss,a=t.util.toss3,i=Object.create(null),s=t.capi,g=t.util,y=t.wasm,B=4096,W=512,X=4,J=8,te=W+X,F=W,P=te,M=B,T=s.SQLITE_OPEN_MAIN_DB|s.SQLITE_OPEN_MAIN_JOURNAL|s.SQLITE_OPEN_SUPER_JOURNAL|s.SQLITE_OPEN_WAL,q=".opaque",N=()=>Math.random().toString(36).slice(2),z=new TextDecoder,H=new TextEncoder,E=Object.assign(Object.create(null),{name:"opfs-sahpool",directory:void 0,initialCapacity:6,clearOnInit:!1,verbosity:2,forceReinitIfPreviouslyFailed:!1}),G=[t.config.error,t.config.warn,t.config.log],p=t.config.log,m=t.config.warn,k=t.config.error,U=new Map,j=$=>U.get($),h=($,S)=>{S?U.set($,S):U.delete($)},l=new Map,f=$=>l.get($),d=($,S)=>{S?l.set($,S):l.delete($)},w={xCheckReservedLock:function($,S){let L=f($);return L.log("xCheckReservedLock"),L.storeErr(),y.poke32(S,1),0},xClose:function($){let S=f($);S.storeErr();let L=S.getOFileForS3File($);if(L)try{S.log(`xClose ${L.path}`),S.mapS3FileToOFile($,!1),L.sah.flush(),L.flags&s.SQLITE_OPEN_DELETEONCLOSE&&S.deletePath(L.path)}catch(Y){return S.storeErr(Y,s.SQLITE_IOERR)}return 0},xDeviceCharacteristics:function($){return s.SQLITE_IOCAP_UNDELETABLE_WHEN_OPEN},xFileControl:function($,S,L){return s.SQLITE_NOTFOUND},xFileSize:function($,S){let L=f($);L.log("xFileSize");let ie=L.getOFileForS3File($).sah.getSize()-M;return y.poke64(S,BigInt(ie)),0},xLock:function($,S){let L=f($);L.log(`xLock ${S}`),L.storeErr();let Y=L.getOFileForS3File($);return Y.lockType=S,0},xRead:function($,S,L,Y){let ie=f($);ie.storeErr();let A=ie.getOFileForS3File($);ie.log(`xRead ${A.path} ${L} @ ${Y}`);try{let C=A.sah.read(y.heap8u().subarray(S,S+L),{at:M+Number(Y)});return C<L?(y.heap8u().fill(0,S+C,S+L),s.SQLITE_IOERR_SHORT_READ):0}catch(C){return ie.storeErr(C,s.SQLITE_IOERR)}},xSectorSize:function($){return B},xSync:function($,S){let L=f($);L.log(`xSync ${S}`),L.storeErr();let Y=L.getOFileForS3File($);try{return Y.sah.flush(),0}catch(ie){return L.storeErr(ie,s.SQLITE_IOERR)}},xTruncate:function($,S){let L=f($);L.log(`xTruncate ${S}`),L.storeErr();let Y=L.getOFileForS3File($);try{return Y.sah.truncate(M+Number(S)),0}catch(ie){return L.storeErr(ie,s.SQLITE_IOERR)}},xUnlock:function($,S){let L=f($);L.log("xUnlock");let Y=L.getOFileForS3File($);return Y.lockType=S,0},xWrite:function($,S,L,Y){let ie=f($);ie.storeErr();let A=ie.getOFileForS3File($);ie.log(`xWrite ${A.path} ${L} ${Y}`);try{let C=A.sah.write(y.heap8u().subarray(S,S+L),{at:M+Number(Y)});return L===C?0:n("Unknown write() failure.")}catch(C){return ie.storeErr(C,s.SQLITE_IOERR)}}},Q=new s.sqlite3_io_methods;Q.$iVersion=1,t.vfs.installVfs({io:{struct:Q,methods:w}});let ae={xAccess:function($,S,L,Y){let ie=j($);ie.storeErr();try{let A=ie.getPath(S);y.poke32(Y,ie.hasFilename(A)?1:0)}catch{y.poke32(Y,0)}return 0},xCurrentTime:function($,S){return y.poke(S,24405875e-1+new Date().getTime()/864e5,"double"),0},xCurrentTimeInt64:function($,S){return y.poke(S,24405875e-1*864e5+new Date().getTime(),"i64"),0},xDelete:function($,S,L){let Y=j($);Y.log(`xDelete ${y.cstrToJs(S)}`),Y.storeErr();try{return Y.deletePath(Y.getPath(S)),0}catch(ie){return Y.storeErr(ie),s.SQLITE_IOERR_DELETE}},xFullPathname:function($,S,L,Y){return y.cstrncpy(Y,S,L)<L?0:s.SQLITE_CANTOPEN},xGetLastError:function($,S,L){let Y=j($),ie=Y.popErr();if(Y.log(`xGetLastError ${S} e =`,ie),ie){let A=y.scopedAllocPush();try{let[C,V]=y.scopedAllocCString(ie.message,!0);y.cstrncpy(L,C,S),V>S&&y.poke8(L+S-1,0)}catch{return s.SQLITE_NOMEM}finally{y.scopedAllocPop(A)}}return ie?ie.sqlite3Rc||s.SQLITE_IOERR:0},xOpen:function(S,L,Y,ie,A){let C=j(S);try{C.log(`xOpen ${y.cstrToJs(L)} ${ie}`);let V=L&&y.peek8(L)?C.getPath(L):N(),ee=C.getSAHForPath(V);!ee&&ie&s.SQLITE_OPEN_CREATE&&(C.getFileCount()<C.getCapacity()?(ee=C.nextAvailableSAH(),C.setAssociatedPath(ee,V,ie)):n("SAH pool is full. Cannot create file",V)),ee||n("file not found:",V);let se={path:V,flags:ie,sah:ee};C.mapS3FileToOFile(Y,se),se.lockType=s.SQLITE_LOCK_NONE;let de=new s.sqlite3_file(Y);return de.$pMethods=Q.pointer,de.dispose(),y.poke32(A,ie),0}catch(V){return C.storeErr(V),s.SQLITE_CANTOPEN}}},he=function($){t.capi.sqlite3_vfs_find($)&&a("VFS name is already registered:",$);let S=new s.sqlite3_vfs,L=s.sqlite3_vfs_find(null),Y=L?new s.sqlite3_vfs(L):null;return S.$iVersion=2,S.$szOsFile=s.sqlite3_file.structInfo.sizeof,S.$mxPathname=W,S.addOnDispose(S.$zName=y.allocCString($),()=>h(S.pointer,0)),Y&&(S.$xRandomness=Y.$xRandomness,S.$xSleep=Y.$xSleep,Y.dispose()),!S.$xRandomness&&!ae.xRandomness&&(ae.xRandomness=function(ie,A,C){let V=y.heap8u(),ee=0;for(;ee<A;++ee)V[C+ee]=Math.random()*255e3&255;return ee}),!S.$xSleep&&!ae.xSleep&&(ae.xSleep=(ie,A)=>0),t.vfs.installVfs({vfs:{struct:S,methods:ae}}),S};class fe{vfsDir;#e;#t;#_;#i=new Map;#n=new Map;#s=new Set;#c=new Map;#r=new Uint8Array(te);#o;#a;#u;constructor(S=Object.create(null)){this.#u=S.verbosity??E.verbosity,this.vfsName=S.name||E.name,this.#a=he(this.vfsName),h(this.#a.pointer,this),this.vfsDir=S.directory||"."+this.vfsName,this.#o=new DataView(this.#r.buffer,this.#r.byteOffset),this.isReady=this.reset(!!(S.clearOnInit??E.clearOnInit)).then(()=>{if(this.$error)throw this.$error;return this.getCapacity()?Promise.resolve(void 0):this.addCapacity(S.initialCapacity||E.initialCapacity)})}#f(S,...L){this.#u>S&&G[S](this.vfsName+":",...L)}log(...S){this.#f(2,...S)}warn(...S){this.#f(1,...S)}error(...S){this.#f(0,...S)}getVfs(){return this.#a}getCapacity(){return this.#i.size}getFileCount(){return this.#n.size}getFileNames(){let S=[],L=this.#n.keys();for(let Y of L)S.push(Y);return S}async addCapacity(S){for(let L=0;L<S;++L){let Y=N(),A=await(await this.#t.getFileHandle(Y,{create:!0})).createSyncAccessHandle();this.#i.set(A,Y),this.setAssociatedPath(A,"",0)}return this.getCapacity()}async reduceCapacity(S){let L=0;for(let Y of Array.from(this.#s)){if(L===S||this.getFileCount()===this.getCapacity())break;let ie=this.#i.get(Y);Y.close(),await this.#t.removeEntry(ie),this.#i.delete(Y),this.#s.delete(Y),++L}return L}releaseAccessHandles(){for(let S of this.#i.keys())S.close();this.#i.clear(),this.#n.clear(),this.#s.clear()}async acquireAccessHandles(S){let L=[];for await(let[Y,ie]of this.#t)ie.kind==="file"&&L.push([Y,ie]);return Promise.all(L.map(async([Y,ie])=>{try{let A=await ie.createSyncAccessHandle();if(this.#i.set(A,Y),S)A.truncate(M),this.setAssociatedPath(A,"",0);else{let C=this.getAssociatedPath(A);C?this.#n.set(C,A):this.#s.add(A)}}catch(A){throw this.storeErr(A),this.releaseAccessHandles(),A}}))}getAssociatedPath(S){S.read(this.#r,{at:0});let L=this.#o.getUint32(F);if(this.#r[0]&&(L&s.SQLITE_OPEN_DELETEONCLOSE||!(L&T)))return m(`Removing file with unexpected flags ${L.toString(16)}`,this.#r),this.setAssociatedPath(S,"",0),"";let Y=new Uint32Array(J/4);S.read(Y,{at:P});let ie=this.computeDigest(this.#r);if(Y.every((A,C)=>A===ie[C])){let A=this.#r.findIndex(C=>C===0);return A===0&&S.truncate(M),A?z.decode(this.#r.subarray(0,A)):""}else return m("Disassociating file with bad digest."),this.setAssociatedPath(S,"",0),""}setAssociatedPath(S,L,Y){let ie=H.encodeInto(L,this.#r);W<=ie.written+1&&n("Path too long:",L),this.#r.fill(0,ie.written,W),this.#o.setUint32(F,Y);let A=this.computeDigest(this.#r);S.write(this.#r,{at:0}),S.write(A,{at:P}),S.flush(),L?(this.#n.set(L,S),this.#s.delete(S)):(S.truncate(M),this.#s.add(S))}computeDigest(S){let L=3735928559,Y=1103547991;for(let ie of S)L=31*L+ie*307,Y=31*Y+ie*307;return new Uint32Array([L>>>0,Y>>>0])}async reset(S){await this.isReady;let L=await navigator.storage.getDirectory(),Y,ie;for(let A of this.vfsDir.split("/"))A&&(Y=L,L=await L.getDirectoryHandle(A,{create:!0}));return this.#e=L,this.#_=Y,this.#t=await this.#e.getDirectoryHandle(q,{create:!0}),this.releaseAccessHandles(),this.acquireAccessHandles(S)}getPath(S){return y.isPtr(S)&&(S=y.cstrToJs(S)),(S instanceof URL?S:new URL(S,"file://localhost/")).pathname}deletePath(S){let L=this.#n.get(S);return L&&(this.#n.delete(S),this.setAssociatedPath(L,"",0)),!!L}storeErr(S,L){return S&&(S.sqlite3Rc=L||s.SQLITE_IOERR,this.error(S)),this.$error=S,L}popErr(){let S=this.$error;return this.$error=void 0,S}nextAvailableSAH(){let[S]=this.#s.keys();return S}getOFileForS3File(S){return this.#c.get(S)}mapS3FileToOFile(S,L){L?(this.#c.set(S,L),d(S,this)):(this.#c.delete(S),d(S,!1))}hasFilename(S){return this.#n.has(S)}getSAHForPath(S){return this.#n.get(S)}async removeVfs(){if(!this.#a.pointer||!this.#t)return!1;s.sqlite3_vfs_unregister(this.#a.pointer),this.#a.dispose(),delete i[this.vfsName];try{this.releaseAccessHandles(),await this.#e.removeEntry(q,{recursive:!0}),this.#t=void 0,await this.#_.removeEntry(this.#e.name,{recursive:!0}),this.#e=this.#_=void 0}catch(S){t.config.error(this.vfsName,"removeVfs() failed:",S)}return!0}exportFile(S){let L=this.#n.get(S)||n("File not found:",S),Y=L.getSize()-M,ie=new Uint8Array(Y>0?Y:0);if(Y>0){let A=L.read(ie,{at:M});A!=Y&&n("Expected to read "+Y+" bytes but read "+A+".")}return ie}async importDbChunked(S,L){let Y=this.#n.get(S)||this.nextAvailableSAH()||n("No available handles to import to.");Y.truncate(0);let ie=0,A,C=!1,V=!1;try{for(;(A=await L())!==void 0;)A instanceof ArrayBuffer&&(A=new Uint8Array(A)),ie===0&&A.byteLength>=15&&(g.affirmDbHeader(A),C=!0),Y.write(A,{at:M+ie}),ie+=A.byteLength;if((ie<512||ie%512!==0)&&n("Input size",ie,"is not correct for an SQLite database."),!C){let ee=new Uint8Array(20);Y.read(ee,{at:0}),g.affirmDbHeader(ee)}Y.write(new Uint8Array([1,1]),{at:M+18})}catch(ee){throw this.setAssociatedPath(Y,"",0),ee}return this.setAssociatedPath(Y,S,s.SQLITE_OPEN_MAIN_DB),ie}importDb(S,L){if(L instanceof ArrayBuffer)L=new Uint8Array(L);else if(L instanceof Function)return this.importDbChunked(S,L);let Y=this.#n.get(S)||this.nextAvailableSAH()||n("No available handles to import to."),ie=L.byteLength;(ie<512||ie%512!=0)&&n("Byte array size is invalid for an SQLite db.");let A="SQLite format 3";for(let V=0;V<A.length;++V)A.charCodeAt(V)!==L[V]&&n("Input does not contain an SQLite database header.");let C=Y.write(L,{at:M});return C!=ie?(this.setAssociatedPath(Y,"",0),n("Expected to write "+ie+" bytes but wrote "+C+".")):(Y.write(new Uint8Array([1,1]),{at:M+18}),this.setAssociatedPath(Y,S,s.SQLITE_OPEN_MAIN_DB)),C}}class xe{#e;constructor(S){this.#e=S,this.vfsName=S.vfsName}async addCapacity(S){return this.#e.addCapacity(S)}async reduceCapacity(S){return this.#e.reduceCapacity(S)}getCapacity(){return this.#e.getCapacity(this.#e)}getFileCount(){return this.#e.getFileCount()}getFileNames(){return this.#e.getFileNames()}async reserveMinimumCapacity(S){let L=this.#e.getCapacity();return L<S?this.#e.addCapacity(S-L):L}exportFile(S){return this.#e.exportFile(S)}importDb(S,L){return this.#e.importDb(S,L)}async wipeFiles(){return this.#e.reset(!0)}unlink(S){return this.#e.deletePath(S)}async removeVfs(){return this.#e.removeVfs()}}let qe=async()=>{let $=await navigator.storage.getDirectory(),S=".opfs-sahpool-sync-check-"+N(),ie=(await(await $.getFileHandle(S,{create:!0})).createSyncAccessHandle()).close();return await ie,await $.removeEntry(S),ie?.then&&n("The local OPFS API is too old for opfs-sahpool:","it has an async FileSystemSyncAccessHandle.close() method."),!0};t.installOpfsSAHPoolVfs=async function($=Object.create(null)){$=Object.assign(Object.create(null),E,$||{});let S=$.name;if($.$testThrowPhase1)throw $.$testThrowPhase1;if(i[S])try{return await i[S]}catch(L){if($.forceReinitIfPreviouslyFailed)delete i[S];else throw L}return!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle||!globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle||!navigator?.storage?.getDirectory?i[S]=Promise.reject(new Error("Missing required OPFS APIs.")):i[S]=qe().then(async function(){if($.$testThrowPhase2)throw $.$testThrowPhase2;let L=new fe($);return L.isReady.then(async()=>{let Y=new xe(L);if(t.oo1){let ie=t.oo1,A=L.getVfs(),C=function(...V){let ee=ie.DB.dbCtorHelper.normalizeArgs(...V);ee.vfs=A.$zName,ie.DB.dbCtorHelper.call(this,ee)};C.prototype=Object.create(ie.DB.prototype),Y.OpfsSAHPoolDb=C}return L.log("VFS initialized."),Y}).catch(async Y=>{throw await L.removeVfs().catch(()=>{}),Y})}).catch(L=>i[S]=Promise.reject(L))}}),typeof e<"u"){let t=Object.assign(Object.create(null),{exports:typeof x>"u"?e.asm:x,memory:e.wasmMemory},globalThis.sqlite3ApiConfig||{});globalThis.sqlite3ApiConfig=t;let n;try{n=globalThis.sqlite3ApiBootstrap()}catch(a){throw console.error("sqlite3ApiBootstrap() error:",a),a}finally{delete globalThis.sqlite3ApiBootstrap,delete globalThis.sqlite3ApiConfig}e.sqlite3=n}else console.warn("This is not running in an Emscripten module context, so","globalThis.sqlite3ApiBootstrap() is _not_ being called due to lack","of config info for the WASM environment.","It must be called manually.")}),c=D,c}})(),gu=function(){let _=xr;if(!_)throw new Error("Expecting globalThis.sqlite3InitModule to be defined by the Emscripten build.");let o=globalThis.sqlite3InitModuleState=Object.assign(Object.create(null),{moduleScript:globalThis?.document?.currentScript,isWorker:typeof WorkerGlobalScope<"u",location:globalThis.location,urlParams:globalThis?.location?.href?new URL(globalThis.location.href).searchParams:new URLSearchParams});if(o.debugModule=o.urlParams.has("sqlite3.debugModule")?(...c)=>console.warn("sqlite3.debugModule:",...c):()=>{},o.urlParams.has("sqlite3.dir"))o.sqlite3Dir=o.urlParams.get("sqlite3.dir")+"/";else if(o.moduleScript){let c=o.moduleScript.src.split("/");c.pop(),o.sqlite3Dir=c.join("/")+"/"}if(globalThis.sqlite3InitModule=function c(...r){return _(...r).then(b=>{let I=b.sqlite3;I.scriptInfo=o,c.__isUnderTest&&(I.__isUnderTest=!0);let D=I.asyncPostInit;return delete I.asyncPostInit,D()}).catch(b=>{throw console.error("Exception loading sqlite3 module:",b),b})},globalThis.sqlite3InitModule.ready=_.ready,globalThis.sqlite3InitModuleState.moduleScript){let c=globalThis.sqlite3InitModuleState,r=c.moduleScript.src.split("/");r.pop(),c.scriptDir=r.join("/")+"/"}return o.debugModule("sqlite3InitModuleState =",o),globalThis.sqlite3InitModule}();xr=gu;var pn=xr;var xu="End-Of-Stream",Te=class extends Error{constructor(){super(xu)}};var At=class{constructor(){this.maxStreamReadSize=1*1024*1024,this.endOfStream=!1,this.peekQueue=[]}async peek(o,c,r){let b=await this.read(o,c,r);return this.peekQueue.push(o.subarray(c,c+b)),b}async read(o,c,r){if(r===0)return 0;let b=this.readFromPeekBuffer(o,c,r);if(b+=await this.readRemainderFromStream(o,c+b,r-b),b===0)throw new Te;return b}readFromPeekBuffer(o,c,r){let b=r,I=0;for(;this.peekQueue.length>0&&b>0;){let D=this.peekQueue.pop();if(!D)throw new Error("peekData should be defined");let O=Math.min(D.length,b);o.set(D.subarray(0,O),c+I),I+=O,b-=O,O<D.length&&this.peekQueue.push(D.subarray(O))}return I}async readRemainderFromStream(o,c,r){let b=r,I=0;for(;b>0&&!this.endOfStream;){let D=Math.min(b,this.maxStreamReadSize),O=await this.readFromStream(o,c+I,D);if(O===0)break;I+=O,b-=O}return I}};var Tt=class extends At{constructor(o){super(),this.reader=o.getReader({mode:"byob"})}async readFromStream(o,c,r){if(this.endOfStream)throw new Te;let b=await this.reader.read(new Uint8Array(r));return b.done&&(this.endOfStream=b.done),b.value?(o.set(b.value,c),b.value.byteLength):0}async abort(){await this.reader.cancel(),this.reader.releaseLock()}};var Xe=class{constructor(o){this.position=0,this.numBuffer=new Uint8Array(8),this.fileInfo=o?.fileInfo??{},this.onClose=o?.onClose,o?.abortSignal&&o.abortSignal.addEventListener("abort",()=>{this.abort()})}async readToken(o,c=this.position){let r=new Uint8Array(o.len);if(await this.readBuffer(r,{position:c})<o.len)throw new Te;return o.get(r,0)}async peekToken(o,c=this.position){let r=new Uint8Array(o.len);if(await this.peekBuffer(r,{position:c})<o.len)throw new Te;return o.get(r,0)}async readNumber(o){if(await this.readBuffer(this.numBuffer,{length:o.len})<o.len)throw new Te;return o.get(this.numBuffer,0)}async peekNumber(o){if(await this.peekBuffer(this.numBuffer,{length:o.len})<o.len)throw new Te;return o.get(this.numBuffer,0)}async ignore(o){if(this.fileInfo.size!==void 0){let c=this.fileInfo.size-this.position;if(o>c)return this.position+=c,c}return this.position+=o,o}async close(){await this.abort(),await this.onClose?.()}normalizeOptions(o,c){if(c&&c.position!==void 0&&c.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");return c?{mayBeLess:c.mayBeLess===!0,offset:c.offset?c.offset:0,length:c.length?c.length:o.length-(c.offset?c.offset:0),position:c.position?c.position:this.position}:{mayBeLess:!1,offset:0,length:o.length,position:this.position}}abort(){return Promise.resolve()}};var yu=256e3,zt=class extends Xe{constructor(o,c){super(c),this.streamReader=o}async readBuffer(o,c){let r=this.normalizeOptions(o,c),b=r.position-this.position;if(b>0)return await this.ignore(b),this.readBuffer(o,c);if(b<0)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");if(r.length===0)return 0;let I=await this.streamReader.read(o,r.offset,r.length);if(this.position+=I,(!c||!c.mayBeLess)&&I<r.length)throw new Te;return I}async peekBuffer(o,c){let r=this.normalizeOptions(o,c),b=0;if(r.position){let I=r.position-this.position;if(I>0){let D=new Uint8Array(r.length+I);return b=await this.peekBuffer(D,{mayBeLess:r.mayBeLess}),o.set(D.subarray(I),r.offset),b-I}if(I<0)throw new Error("Cannot peek from a negative offset in a stream")}if(r.length>0){try{b=await this.streamReader.peek(o,r.offset,r.length)}catch(I){if(c?.mayBeLess&&I instanceof Te)return 0;throw I}if(!r.mayBeLess&&b<r.length)throw new Te}return b}async ignore(o){let c=Math.min(yu,o),r=new Uint8Array(c),b=0;for(;b<o;){let I=o-b,D=await this.readBuffer(r,{length:Math.min(c,I)});if(D<0)return D;b+=D}return b}abort(){return this.streamReader.abort()}};var Vt=class extends Xe{constructor(o,c){super(c),this.uint8Array=o,this.fileInfo.size=this.fileInfo.size?this.fileInfo.size:o.length}async readBuffer(o,c){if(c?.position){if(c.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");this.position=c.position}let r=await this.peekBuffer(o,c);return this.position+=r,r}async peekBuffer(o,c){let r=this.normalizeOptions(o,c),b=Math.min(this.uint8Array.length-r.position,r.length);if(!r.mayBeLess&&b<r.length)throw new Te;return o.set(this.uint8Array.subarray(r.position,r.position+b),r.offset),b}close(){return super.close()}};function br(_,o){return new zt(new Tt(_),o)}function mn(_,o){return new Vt(_,o)}var gn=$c(hn(),1);function Be(_){return new DataView(_.buffer,_.byteOffset)}var xn={len:1,get(_,o){return Be(_).getUint8(o)},put(_,o,c){return Be(_).setUint8(o,c),o+1}},Ht={len:2,get(_,o){return Be(_).getUint16(o,!0)},put(_,o,c){return Be(_).setUint16(o,c,!0),o+2}},Qt={len:2,get(_,o){return Be(_).getUint16(o)},put(_,o,c){return Be(_).setUint16(o,c),o+2}};var bn={len:4,get(_,o){return Be(_).getUint32(o,!0)},put(_,o,c){return Be(_).setUint32(o,c,!0),o+4}},yn={len:4,get(_,o){return Be(_).getUint32(o)},put(_,o,c){return Be(_).setUint32(o,c),o+4}};var qn={len:4,get(_,o){return Be(_).getInt32(o)},put(_,o,c){return Be(_).setInt32(o,c),o+4}};var wn={len:8,get(_,o){return Be(_).getBigUint64(o,!0)},put(_,o,c){return Be(_).setBigUint64(o,c,!0),o+8}};var Ue=class{constructor(o,c){this.len=o,this.encoding=c,this.textDecoder=new TextDecoder(c)}get(o,c){return this.textDecoder.decode(o.subarray(c,c+this.len))}};var tf={utf8:new globalThis.TextDecoder("utf8")};var rf=new globalThis.TextEncoder;var nf=Array.from({length:256},(_,o)=>o.toString(16).padStart(2,"0"));function qr(_){let{byteLength:o}=_;if(o===6)return _.getUint16(0)*2**32+_.getUint32(2);if(o===5)return _.getUint8(0)*2**32+_.getUint32(1);if(o===4)return _.getUint32(0);if(o===3)return _.getUint8(0)*2**16+_.getUint16(1);if(o===2)return _.getUint16(0);if(o===1)return _.getUint8(0)}function wr(_,o){let c=_.length,r=o.length;if(r===0||r>c)return-1;let b=c-r;for(let I=0;I<=b;I++){let D=!0;for(let O=0;O<r;O++)if(_[I+O]!==o[O]){D=!1;break}if(D)return I}return-1}function vn(_,o){return wr(_,o)!==-1}function En(_){return[..._].map(o=>o.charCodeAt(0))}function Sn(_,o=0){let c=Number.parseInt(new Ue(6).get(_,148).replace(/\0.*$/,"").trim(),8);if(Number.isNaN(c))return!1;let r=8*32;for(let b=o;b<o+148;b++)r+=_[b];for(let b=o+156;b<o+512;b++)r+=_[b];return c===r}var An={get:(_,o)=>_[o+3]&127|_[o+2]<<7|_[o+1]<<14|_[o]<<21,len:4};var Tn=["jpg","png","apng","gif","webp","flif","xcf","cr2","cr3","orf","arw","dng","nef","rw2","raf","tif","bmp","icns","jxr","psd","indd","zip","tar","rar","gz","bz2","7z","dmg","mp4","mid","mkv","webm","mov","avi","mpg","mp2","mp3","m4a","oga","ogg","ogv","opus","flac","wav","spx","amr","pdf","epub","elf","macho","exe","swf","rtf","wasm","woff","woff2","eot","ttf","otf","ico","flv","ps","xz","sqlite","nes","crx","xpi","cab","deb","ar","rpm","Z","lz","cfb","mxf","mts","blend","bpg","docx","pptx","xlsx","3gp","3g2","j2c","jp2","jpm","jpx","mj2","aif","qcp","odt","ods","odp","xml","mobi","heic","cur","ktx","ape","wv","dcm","ics","glb","pcap","dsf","lnk","alias","voc","ac3","m4v","m4p","m4b","f4v","f4p","f4b","f4a","mie","asf","ogm","ogx","mpc","arrow","shp","aac","mp1","it","s3m","xm","ai","skp","avif","eps","lzh","pgp","asar","stl","chm","3mf","zst","jxl","vcf","jls","pst","dwg","parquet","class","arj","cpio","ace","avro","icc","fbx","vsdx","vtt","apk"],kn=["image/jpeg","image/png","image/gif","image/webp","image/flif","image/x-xcf","image/x-canon-cr2","image/x-canon-cr3","image/tiff","image/bmp","image/vnd.ms-photo","image/vnd.adobe.photoshop","application/x-indesign","application/epub+zip","application/x-xpinstall","application/vnd.oasis.opendocument.text","application/vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.presentation","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/zip","application/x-tar","application/x-rar-compressed","application/gzip","application/x-bzip2","application/x-7z-compressed","application/x-apple-diskimage","application/x-apache-arrow","video/mp4","audio/midi","video/x-matroska","video/webm","video/quicktime","video/vnd.avi","audio/wav","audio/qcelp","audio/x-ms-asf","video/x-ms-asf","application/vnd.ms-asf","video/mpeg","video/3gpp","audio/mpeg","audio/mp4","video/ogg","audio/ogg","audio/ogg; codecs=opus","application/ogg","audio/x-flac","audio/ape","audio/wavpack","audio/amr","application/pdf","application/x-elf","application/x-mach-binary","application/x-msdownload","application/x-shockwave-flash","application/rtf","application/wasm","font/woff","font/woff2","application/vnd.ms-fontobject","font/ttf","font/otf","image/x-icon","video/x-flv","application/postscript","application/eps","application/x-xz","application/x-sqlite3","application/x-nintendo-nes-rom","application/x-google-chrome-extension","application/vnd.ms-cab-compressed","application/x-deb","application/x-unix-archive","application/x-rpm","application/x-compress","application/x-lzip","application/x-cfb","application/x-mie","application/mxf","video/mp2t","application/x-blender","image/bpg","image/j2c","image/jp2","image/jpx","image/jpm","image/mj2","audio/aiff","application/xml","application/x-mobipocket-ebook","image/heif","image/heif-sequence","image/heic","image/heic-sequence","image/icns","image/ktx","application/dicom","audio/x-musepack","text/calendar","text/vcard","text/vtt","model/gltf-binary","application/vnd.tcpdump.pcap","audio/x-dsf","application/x.ms.shortcut","application/x.apple.alias","audio/x-voc","audio/vnd.dolby.dd-raw","audio/x-m4a","image/apng","image/x-olympus-orf","image/x-sony-arw","image/x-adobe-dng","image/x-nikon-nef","image/x-panasonic-rw2","image/x-fujifilm-raf","video/x-m4v","video/3gpp2","application/x-esri-shape","audio/aac","audio/x-it","audio/x-s3m","audio/x-xm","video/MP1S","video/MP2P","application/vnd.sketchup.skp","image/avif","application/x-lzh-compressed","application/pgp-encrypted","application/x-asar","model/stl","application/vnd.ms-htmlhelp","model/3mf","image/jxl","application/zstd","image/jls","application/vnd.ms-outlook","image/vnd.dwg","application/x-parquet","application/java-vm","application/x-arj","application/x-cpio","application/x-ace-compressed","application/avro","application/vnd.iccprofile","application/x.autodesk.fbx","application/vnd.visio","application/vnd.android.package-archive"];var In=4100;async function vr(_){return new $t().fromBuffer(_)}function Qe(_,o,c){c={offset:0,...c};for(let[r,b]of o.entries())if(c.mask){if(b!==(c.mask[r]&_[r+c.offset]))return!1}else if(b!==_[r+c.offset])return!1;return!0}var $t=class{constructor(o){this.detectors=o?.customDetectors,this.tokenizerOptions={abortSignal:o?.signal},this.fromTokenizer=this.fromTokenizer.bind(this),this.fromBuffer=this.fromBuffer.bind(this),this.parse=this.parse.bind(this)}async fromTokenizer(o){let c=o.position;for(let r of this.detectors||[]){let b=await r(o);if(b)return b;if(c!==o.position)return}return this.parse(o)}async fromBuffer(o){if(!(o instanceof Uint8Array||o instanceof ArrayBuffer))throw new TypeError(`Expected the \`input\` argument to be of type \`Uint8Array\` or \`ArrayBuffer\`, got \`${typeof o}\``);let c=o instanceof Uint8Array?o:new Uint8Array(o);if(c?.length>1)return this.fromTokenizer(mn(c,this.tokenizerOptions))}async fromBlob(o){return this.fromStream(o.stream())}async fromStream(o){let c=await br(o,this.tokenizerOptions);try{return await this.fromTokenizer(c)}finally{await c.close()}}async toDetectionStream(o,c){let{sampleSize:r=In}=c,b,I,D=o.getReader({mode:"byob"});try{let{value:re,done:oe}=await D.read(new Uint8Array(r));if(I=re,!oe&&re)try{b=await this.fromBuffer(re.slice(0,r))}catch(Z){if(!(Z instanceof Te))throw Z;b=void 0}I=re}finally{D.releaseLock()}let O=new TransformStream({async start(re){re.enqueue(I)},transform(re,oe){oe.enqueue(re)}}),K=o.pipeThrough(O);return K.fileType=b,K}check(o,c){return Qe(this.buffer,o,c)}checkString(o,c){return this.check(En(o),c)}async parse(o){if(this.buffer=new Uint8Array(In),o.fileInfo.size===void 0&&(o.fileInfo.size=Number.MAX_SAFE_INTEGER),this.tokenizer=o,await o.peekBuffer(this.buffer,{length:12,mayBeLess:!0}),this.check([66,77]))return{ext:"bmp",mime:"image/bmp"};if(this.check([11,119]))return{ext:"ac3",mime:"audio/vnd.dolby.dd-raw"};if(this.check([120,1]))return{ext:"dmg",mime:"application/x-apple-diskimage"};if(this.check([77,90]))return{ext:"exe",mime:"application/x-msdownload"};if(this.check([37,33]))return await o.peekBuffer(this.buffer,{length:24,mayBeLess:!0}),this.checkString("PS-Adobe-",{offset:2})&&this.checkString(" EPSF-",{offset:14})?{ext:"eps",mime:"application/eps"}:{ext:"ps",mime:"application/postscript"};if(this.check([31,160])||this.check([31,157]))return{ext:"Z",mime:"application/x-compress"};if(this.check([199,113]))return{ext:"cpio",mime:"application/x-cpio"};if(this.check([96,234]))return{ext:"arj",mime:"application/x-arj"};if(this.check([239,187,191]))return this.tokenizer.ignore(3),this.parse(o);if(this.check([71,73,70]))return{ext:"gif",mime:"image/gif"};if(this.check([73,73,188]))return{ext:"jxr",mime:"image/vnd.ms-photo"};if(this.check([31,139,8]))return{ext:"gz",mime:"application/gzip"};if(this.check([66,90,104]))return{ext:"bz2",mime:"application/x-bzip2"};if(this.checkString("ID3")){await o.ignore(6);let c=await o.readToken(An);return o.position+c>o.fileInfo.size?{ext:"mp3",mime:"audio/mpeg"}:(await o.ignore(c),this.fromTokenizer(o))}if(this.checkString("MP+"))return{ext:"mpc",mime:"audio/x-musepack"};if((this.buffer[0]===67||this.buffer[0]===70)&&this.check([87,83],{offset:1}))return{ext:"swf",mime:"application/x-shockwave-flash"};if(this.check([255,216,255]))return this.check([247],{offset:3})?{ext:"jls",mime:"image/jls"}:{ext:"jpg",mime:"image/jpeg"};if(this.check([79,98,106,1]))return{ext:"avro",mime:"application/avro"};if(this.checkString("FLIF"))return{ext:"flif",mime:"image/flif"};if(this.checkString("8BPS"))return{ext:"psd",mime:"image/vnd.adobe.photoshop"};if(this.checkString("WEBP",{offset:8}))return{ext:"webp",mime:"image/webp"};if(this.checkString("MPCK"))return{ext:"mpc",mime:"audio/x-musepack"};if(this.checkString("FORM"))return{ext:"aif",mime:"audio/aiff"};if(this.checkString("icns",{offset:0}))return{ext:"icns",mime:"image/icns"};if(this.check([80,75,3,4])){try{for(;o.position+30<o.fileInfo.size;){await o.readBuffer(this.buffer,{length:30});let c=new DataView(this.buffer.buffer),r={compressedSize:c.getUint32(18,!0),uncompressedSize:c.getUint32(22,!0),filenameLength:c.getUint16(26,!0),extraFieldLength:c.getUint16(28,!0)};if(r.filename=await o.readToken(new Ue(r.filenameLength,"utf-8")),await o.ignore(r.extraFieldLength),/classes\d*\.dex/.test(r.filename))return{ext:"apk",mime:"application/vnd.android.package-archive"};if(r.filename==="META-INF/mozilla.rsa")return{ext:"xpi",mime:"application/x-xpinstall"};if(r.filename.endsWith(".rels")||r.filename.endsWith(".xml"))switch(r.filename.split("/")[0]){case"_rels":break;case"word":return{ext:"docx",mime:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"};case"ppt":return{ext:"pptx",mime:"application/vnd.openxmlformats-officedocument.presentationml.presentation"};case"xl":return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};case"visio":return{ext:"vsdx",mime:"application/vnd.visio"};default:break}if(r.filename.startsWith("xl/"))return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};if(r.filename.startsWith("3D/")&&r.filename.endsWith(".model"))return{ext:"3mf",mime:"model/3mf"};if(r.filename==="mimetype"&&r.compressedSize===r.uncompressedSize){let b=await o.readToken(new Ue(r.compressedSize,"utf-8"));switch(b=b.trim(),b){case"application/epub+zip":return{ext:"epub",mime:"application/epub+zip"};case"application/vnd.oasis.opendocument.text":return{ext:"odt",mime:"application/vnd.oasis.opendocument.text"};case"application/vnd.oasis.opendocument.spreadsheet":return{ext:"ods",mime:"application/vnd.oasis.opendocument.spreadsheet"};case"application/vnd.oasis.opendocument.presentation":return{ext:"odp",mime:"application/vnd.oasis.opendocument.presentation"};default:}}if(r.compressedSize===0){let b=-1;for(;b<0&&o.position<o.fileInfo.size;)await o.peekBuffer(this.buffer,{mayBeLess:!0}),b=wr(this.buffer,new Uint8Array([80,75,3,4])),await o.ignore(b>=0?b:this.buffer.length)}else await o.ignore(r.compressedSize)}}catch(c){if(!(c instanceof Te))throw c}return{ext:"zip",mime:"application/zip"}}if(this.checkString("OggS")){await o.ignore(28);let c=new Uint8Array(8);return await o.readBuffer(c),Qe(c,[79,112,117,115,72,101,97,100])?{ext:"opus",mime:"audio/ogg; codecs=opus"}:Qe(c,[128,116,104,101,111,114,97])?{ext:"ogv",mime:"video/ogg"}:Qe(c,[1,118,105,100,101,111,0])?{ext:"ogm",mime:"video/ogg"}:Qe(c,[127,70,76,65,67])?{ext:"oga",mime:"audio/ogg"}:Qe(c,[83,112,101,101,120,32,32])?{ext:"spx",mime:"audio/ogg"}:Qe(c,[1,118,111,114,98,105,115])?{ext:"ogg",mime:"audio/ogg"}:{ext:"ogx",mime:"application/ogg"}}if(this.check([80,75])&&(this.buffer[2]===3||this.buffer[2]===5||this.buffer[2]===7)&&(this.buffer[3]===4||this.buffer[3]===6||this.buffer[3]===8))return{ext:"zip",mime:"application/zip"};if(this.checkString("ftyp",{offset:4})&&this.buffer[8]&96){let c=new Ue(4,"latin1").get(this.buffer,8).replace("\0"," ").trim();switch(c){case"avif":case"avis":return{ext:"avif",mime:"image/avif"};case"mif1":return{ext:"heic",mime:"image/heif"};case"msf1":return{ext:"heic",mime:"image/heif-sequence"};case"heic":case"heix":return{ext:"heic",mime:"image/heic"};case"hevc":case"hevx":return{ext:"heic",mime:"image/heic-sequence"};case"qt":return{ext:"mov",mime:"video/quicktime"};case"M4V":case"M4VH":case"M4VP":return{ext:"m4v",mime:"video/x-m4v"};case"M4P":return{ext:"m4p",mime:"video/mp4"};case"M4B":return{ext:"m4b",mime:"audio/mp4"};case"M4A":return{ext:"m4a",mime:"audio/x-m4a"};case"F4V":return{ext:"f4v",mime:"video/mp4"};case"F4P":return{ext:"f4p",mime:"video/mp4"};case"F4A":return{ext:"f4a",mime:"audio/mp4"};case"F4B":return{ext:"f4b",mime:"audio/mp4"};case"crx":return{ext:"cr3",mime:"image/x-canon-cr3"};default:return c.startsWith("3g")?c.startsWith("3g2")?{ext:"3g2",mime:"video/3gpp2"}:{ext:"3gp",mime:"video/3gpp"}:{ext:"mp4",mime:"video/mp4"}}}if(this.checkString("MThd"))return{ext:"mid",mime:"audio/midi"};if(this.checkString("wOFF")&&(this.check([0,1,0,0],{offset:4})||this.checkString("OTTO",{offset:4})))return{ext:"woff",mime:"font/woff"};if(this.checkString("wOF2")&&(this.check([0,1,0,0],{offset:4})||this.checkString("OTTO",{offset:4})))return{ext:"woff2",mime:"font/woff2"};if(this.check([212,195,178,161])||this.check([161,178,195,212]))return{ext:"pcap",mime:"application/vnd.tcpdump.pcap"};if(this.checkString("DSD "))return{ext:"dsf",mime:"audio/x-dsf"};if(this.checkString("LZIP"))return{ext:"lz",mime:"application/x-lzip"};if(this.checkString("fLaC"))return{ext:"flac",mime:"audio/x-flac"};if(this.check([66,80,71,251]))return{ext:"bpg",mime:"image/bpg"};if(this.checkString("wvpk"))return{ext:"wv",mime:"audio/wavpack"};if(this.checkString("%PDF")){try{await o.ignore(1350);let c=10*1024*1024,r=new Uint8Array(Math.min(c,o.fileInfo.size));if(await o.readBuffer(r,{mayBeLess:!0}),vn(r,new TextEncoder().encode("AIPrivateData")))return{ext:"ai",mime:"application/postscript"}}catch(c){if(!(c instanceof Te))throw c}return{ext:"pdf",mime:"application/pdf"}}if(this.check([0,97,115,109]))return{ext:"wasm",mime:"application/wasm"};if(this.check([73,73])){let c=await this.readTiffHeader(!1);if(c)return c}if(this.check([77,77])){let c=await this.readTiffHeader(!0);if(c)return c}if(this.checkString("MAC "))return{ext:"ape",mime:"audio/ape"};if(this.check([26,69,223,163])){async function c(){let O=await o.peekNumber(xn),K=128,re=0;for(;!(O&K)&&K!==0;)++re,K>>=1;let oe=new Uint8Array(re+1);return await o.readBuffer(oe),oe}async function r(){let O=await c(),K=await c();K[0]^=128>>K.length-1;let re=Math.min(6,K.length),oe=new DataView(O.buffer),Z=new DataView(K.buffer,K.length-re,re);return{id:qr(oe),len:qr(Z)}}async function b(O){for(;O>0;){let K=await r();if(K.id===17026)return(await o.readToken(new Ue(K.len))).replaceAll(/\00.*$/g,"");await o.ignore(K.len),--O}}let I=await r();switch(await b(I.len)){case"webm":return{ext:"webm",mime:"video/webm"};case"matroska":return{ext:"mkv",mime:"video/x-matroska"};default:return}}if(this.check([82,73,70,70])){if(this.check([65,86,73],{offset:8}))return{ext:"avi",mime:"video/vnd.avi"};if(this.check([87,65,86,69],{offset:8}))return{ext:"wav",mime:"audio/wav"};if(this.check([81,76,67,77],{offset:8}))return{ext:"qcp",mime:"audio/qcelp"}}if(this.checkString("SQLi"))return{ext:"sqlite",mime:"application/x-sqlite3"};if(this.check([78,69,83,26]))return{ext:"nes",mime:"application/x-nintendo-nes-rom"};if(this.checkString("Cr24"))return{ext:"crx",mime:"application/x-google-chrome-extension"};if(this.checkString("MSCF")||this.checkString("ISc("))return{ext:"cab",mime:"application/vnd.ms-cab-compressed"};if(this.check([237,171,238,219]))return{ext:"rpm",mime:"application/x-rpm"};if(this.check([197,208,211,198]))return{ext:"eps",mime:"application/eps"};if(this.check([40,181,47,253]))return{ext:"zst",mime:"application/zstd"};if(this.check([127,69,76,70]))return{ext:"elf",mime:"application/x-elf"};if(this.check([33,66,68,78]))return{ext:"pst",mime:"application/vnd.ms-outlook"};if(this.checkString("PAR1"))return{ext:"parquet",mime:"application/x-parquet"};if(this.check([207,250,237,254]))return{ext:"macho",mime:"application/x-mach-binary"};if(this.check([79,84,84,79,0]))return{ext:"otf",mime:"font/otf"};if(this.checkString("#!AMR"))return{ext:"amr",mime:"audio/amr"};if(this.checkString("{\\rtf"))return{ext:"rtf",mime:"application/rtf"};if(this.check([70,76,86,1]))return{ext:"flv",mime:"video/x-flv"};if(this.checkString("IMPM"))return{ext:"it",mime:"audio/x-it"};if(this.checkString("-lh0-",{offset:2})||this.checkString("-lh1-",{offset:2})||this.checkString("-lh2-",{offset:2})||this.checkString("-lh3-",{offset:2})||this.checkString("-lh4-",{offset:2})||this.checkString("-lh5-",{offset:2})||this.checkString("-lh6-",{offset:2})||this.checkString("-lh7-",{offset:2})||this.checkString("-lzs-",{offset:2})||this.checkString("-lz4-",{offset:2})||this.checkString("-lz5-",{offset:2})||this.checkString("-lhd-",{offset:2}))return{ext:"lzh",mime:"application/x-lzh-compressed"};if(this.check([0,0,1,186])){if(this.check([33],{offset:4,mask:[241]}))return{ext:"mpg",mime:"video/MP1S"};if(this.check([68],{offset:4,mask:[196]}))return{ext:"mpg",mime:"video/MP2P"}}if(this.checkString("ITSF"))return{ext:"chm",mime:"application/vnd.ms-htmlhelp"};if(this.check([202,254,186,190]))return{ext:"class",mime:"application/java-vm"};if(this.check([253,55,122,88,90,0]))return{ext:"xz",mime:"application/x-xz"};if(this.checkString("<?xml "))return{ext:"xml",mime:"application/xml"};if(this.check([55,122,188,175,39,28]))return{ext:"7z",mime:"application/x-7z-compressed"};if(this.check([82,97,114,33,26,7])&&(this.buffer[6]===0||this.buffer[6]===1))return{ext:"rar",mime:"application/x-rar-compressed"};if(this.checkString("solid "))return{ext:"stl",mime:"model/stl"};if(this.checkString("AC")){let c=new Ue(4,"latin1").get(this.buffer,2);if(c.match("^d*")&&c>=1e3&&c<=1050)return{ext:"dwg",mime:"image/vnd.dwg"}}if(this.checkString("070707"))return{ext:"cpio",mime:"application/x-cpio"};if(this.checkString("BLENDER"))return{ext:"blend",mime:"application/x-blender"};if(this.checkString("!<arch>"))return await o.ignore(8),await o.readToken(new Ue(13,"ascii"))==="debian-binary"?{ext:"deb",mime:"application/x-deb"}:{ext:"ar",mime:"application/x-unix-archive"};if(this.checkString("WEBVTT")&&[`
`,"\r","	"," ","\0"].some(c=>this.checkString(c,{offset:6})))return{ext:"vtt",mime:"text/vtt"};if(this.check([137,80,78,71,13,10,26,10])){await o.ignore(8);async function c(){return{length:await o.readToken(qn),type:await o.readToken(new Ue(4,"latin1"))}}do{let r=await c();if(r.length<0)return;switch(r.type){case"IDAT":return{ext:"png",mime:"image/png"};case"acTL":return{ext:"apng",mime:"image/apng"};default:await o.ignore(r.length+4)}}while(o.position+8<o.fileInfo.size);return{ext:"png",mime:"image/png"}}if(this.check([65,82,82,79,87,49,0,0]))return{ext:"arrow",mime:"application/x-apache-arrow"};if(this.check([103,108,84,70,2,0,0,0]))return{ext:"glb",mime:"model/gltf-binary"};if(this.check([102,114,101,101],{offset:4})||this.check([109,100,97,116],{offset:4})||this.check([109,111,111,118],{offset:4})||this.check([119,105,100,101],{offset:4}))return{ext:"mov",mime:"video/quicktime"};if(this.check([73,73,82,79,8,0,0,0,24]))return{ext:"orf",mime:"image/x-olympus-orf"};if(this.checkString("gimp xcf "))return{ext:"xcf",mime:"image/x-xcf"};if(this.check([73,73,85,0,24,0,0,0,136,231,116,216]))return{ext:"rw2",mime:"image/x-panasonic-rw2"};if(this.check([48,38,178,117,142,102,207,17,166,217])){async function c(){let r=new Uint8Array(16);return await o.readBuffer(r),{id:r,size:Number(await o.readToken(wn))}}for(await o.ignore(30);o.position+24<o.fileInfo.size;){let r=await c(),b=r.size-24;if(Qe(r.id,[145,7,220,183,183,169,207,17,142,230,0,192,12,32,83,101])){let I=new Uint8Array(16);if(b-=await o.readBuffer(I),Qe(I,[64,158,105,248,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"audio/x-ms-asf"};if(Qe(I,[192,239,25,188,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"video/x-ms-asf"};break}await o.ignore(b)}return{ext:"asf",mime:"application/vnd.ms-asf"}}if(this.check([171,75,84,88,32,49,49,187,13,10,26,10]))return{ext:"ktx",mime:"image/ktx"};if((this.check([126,16,4])||this.check([126,24,4]))&&this.check([48,77,73,69],{offset:4}))return{ext:"mie",mime:"application/x-mie"};if(this.check([39,10,0,0,0,0,0,0,0,0,0,0],{offset:2}))return{ext:"shp",mime:"application/x-esri-shape"};if(this.check([255,79,255,81]))return{ext:"j2c",mime:"image/j2c"};if(this.check([0,0,0,12,106,80,32,32,13,10,135,10]))switch(await o.ignore(20),await o.readToken(new Ue(4,"ascii"))){case"jp2 ":return{ext:"jp2",mime:"image/jp2"};case"jpx ":return{ext:"jpx",mime:"image/jpx"};case"jpm ":return{ext:"jpm",mime:"image/jpm"};case"mjp2":return{ext:"mj2",mime:"image/mj2"};default:return}if(this.check([255,10])||this.check([0,0,0,12,74,88,76,32,13,10,135,10]))return{ext:"jxl",mime:"image/jxl"};if(this.check([254,255]))return this.check([0,60,0,63,0,120,0,109,0,108],{offset:2})?{ext:"xml",mime:"application/xml"}:void 0;if(this.check([0,0,1,186])||this.check([0,0,1,179]))return{ext:"mpg",mime:"video/mpeg"};if(this.check([0,1,0,0,0]))return{ext:"ttf",mime:"font/ttf"};if(this.check([0,0,1,0]))return{ext:"ico",mime:"image/x-icon"};if(this.check([0,0,2,0]))return{ext:"cur",mime:"image/x-icon"};if(this.check([208,207,17,224,161,177,26,225]))return{ext:"cfb",mime:"application/x-cfb"};if(await o.peekBuffer(this.buffer,{length:Math.min(256,o.fileInfo.size),mayBeLess:!0}),this.check([97,99,115,112],{offset:36}))return{ext:"icc",mime:"application/vnd.iccprofile"};if(this.checkString("**ACE",{offset:7})&&this.checkString("**",{offset:12}))return{ext:"ace",mime:"application/x-ace-compressed"};if(this.checkString("BEGIN:")){if(this.checkString("VCARD",{offset:6}))return{ext:"vcf",mime:"text/vcard"};if(this.checkString("VCALENDAR",{offset:6}))return{ext:"ics",mime:"text/calendar"}}if(this.checkString("FUJIFILMCCD-RAW"))return{ext:"raf",mime:"image/x-fujifilm-raf"};if(this.checkString("Extended Module:"))return{ext:"xm",mime:"audio/x-xm"};if(this.checkString("Creative Voice File"))return{ext:"voc",mime:"audio/x-voc"};if(this.check([4,0,0,0])&&this.buffer.length>=16){let c=new DataView(this.buffer.buffer).getUint32(12,!0);if(c>12&&this.buffer.length>=c+16)try{let r=new TextDecoder().decode(this.buffer.slice(16,c+16));if(JSON.parse(r).files)return{ext:"asar",mime:"application/x-asar"}}catch{}}if(this.check([6,14,43,52,2,5,1,1,13,1,2,1,1,2]))return{ext:"mxf",mime:"application/mxf"};if(this.checkString("SCRM",{offset:44}))return{ext:"s3m",mime:"audio/x-s3m"};if(this.check([71])&&this.check([71],{offset:188}))return{ext:"mts",mime:"video/mp2t"};if(this.check([71],{offset:4})&&this.check([71],{offset:196}))return{ext:"mts",mime:"video/mp2t"};if(this.check([66,79,79,75,77,79,66,73],{offset:60}))return{ext:"mobi",mime:"application/x-mobipocket-ebook"};if(this.check([68,73,67,77],{offset:128}))return{ext:"dcm",mime:"application/dicom"};if(this.check([76,0,0,0,1,20,2,0,0,0,0,0,192,0,0,0,0,0,0,70]))return{ext:"lnk",mime:"application/x.ms.shortcut"};if(this.check([98,111,111,107,0,0,0,0,109,97,114,107,0,0,0,0]))return{ext:"alias",mime:"application/x.apple.alias"};if(this.checkString("Kaydara FBX Binary  \0"))return{ext:"fbx",mime:"application/x.autodesk.fbx"};if(this.check([76,80],{offset:34})&&(this.check([0,0,1],{offset:8})||this.check([1,0,2],{offset:8})||this.check([2,0,2],{offset:8})))return{ext:"eot",mime:"application/vnd.ms-fontobject"};if(this.check([6,6,237,245,216,29,70,229,189,49,239,231,254,116,183,29]))return{ext:"indd",mime:"application/x-indesign"};if(await o.peekBuffer(this.buffer,{length:Math.min(512,o.fileInfo.size),mayBeLess:!0}),Sn(this.buffer))return{ext:"tar",mime:"application/x-tar"};if(this.check([255,254]))return this.check([60,0,63,0,120,0,109,0,108,0],{offset:2})?{ext:"xml",mime:"application/xml"}:this.check([255,14,83,0,107,0,101,0,116,0,99,0,104,0,85,0,112,0,32,0,77,0,111,0,100,0,101,0,108,0],{offset:2})?{ext:"skp",mime:"application/vnd.sketchup.skp"}:void 0;if(this.checkString("-----BEGIN PGP MESSAGE-----"))return{ext:"pgp",mime:"application/pgp-encrypted"};if(this.buffer.length>=2&&this.check([255,224],{offset:0,mask:[255,224]})){if(this.check([16],{offset:1,mask:[22]}))return this.check([8],{offset:1,mask:[8]})?{ext:"aac",mime:"audio/aac"}:{ext:"aac",mime:"audio/aac"};if(this.check([2],{offset:1,mask:[6]}))return{ext:"mp3",mime:"audio/mpeg"};if(this.check([4],{offset:1,mask:[6]}))return{ext:"mp2",mime:"audio/mpeg"};if(this.check([6],{offset:1,mask:[6]}))return{ext:"mp1",mime:"audio/mpeg"}}}async readTiffTag(o){let c=await this.tokenizer.readToken(o?Qt:Ht);switch(this.tokenizer.ignore(10),c){case 50341:return{ext:"arw",mime:"image/x-sony-arw"};case 50706:return{ext:"dng",mime:"image/x-adobe-dng"};default:}}async readTiffIFD(o){let c=await this.tokenizer.readToken(o?Qt:Ht);for(let r=0;r<c;++r){let b=await this.readTiffTag(o);if(b)return b}}async readTiffHeader(o){let c=(o?Qt:Ht).get(this.buffer,2),r=(o?yn:bn).get(this.buffer,4);if(c===42){if(r>=6){if(this.checkString("CR",{offset:8}))return{ext:"cr2",mime:"image/x-canon-cr2"};if(r>=8&&(this.check([28,0,254,0],{offset:8})||this.check([31,0,11,0],{offset:8})))return{ext:"nef",mime:"image/x-nikon-nef"}}return await this.tokenizer.ignore(r),await this.readTiffIFD(o)??{ext:"tif",mime:"image/tiff"}}if(c===43)return{ext:"tif",mime:"image/tiff"}}},Su=new Set(Tn),Au=new Set(kn);var dt="\u2016";var Fn="SELECT '__OMITTED__'";var pt=()=>new Promise(_=>setTimeout(_,0)),Er=_=>new Promise(o=>setTimeout(o,_));function pe(_,...o){return _.reduce((c,r,b)=>{let I=o[b]??"",D=(_[b+1]??"").trim(),O=r.trim();return O.endsWith('"')&&D.startsWith('"')?I=String(I).replaceAll('"','""'):O.endsWith("'")&&D.startsWith("'")&&(I=String(I).replaceAll("'","''")),c+r+I},"")}async function kt(_){return await vr(_)}async function Sr(_){let o=await _;return o.objectValues=await Promise.all(o.objectValues.map(async c=>{for(let r in c){let b=c[r];if(b instanceof Uint8Array){let I=await kt(b);c[`${r}__mime__`]=I}}return c})),o}function Tu(_){return/JSON/i.test(_)?"JSON":/DATE/i.test(_)?"DATE":/(BOOLEAN|^BIT$)/i.test(_)?"BOOLEAN":/INT/i.test(_)?"INTEGER":/(CHAR|CLOB|TEXT)/i.test(_)?"TEXT":/BLOB/i.test(_)?"BLOB":/(REAL|FLOA|DOUB)/i.test(_)?"REAL":/(NUMERIC|DECIMAL)/i.test(_)?"NUMERIC":"?"}async function On(_,{type:o,sql:c,...r},b){let I=r.tbl_name,D;D=pe`SELECT tableInfo.*, foreignKeyList."table" AS fkTable, foreignKeyList."to" AS fkName, CASE WHEN foreignKeyList."from" IS NOT NULL THEN 1 ELSE 0 END AS fk FROM pragma_table_xinfo('${I}') AS tableInfo LEFT JOIN (SELECT * FROM pragma_foreign_key_list('${I}')) AS foreignKeyList ON foreignKeyList."from"=tableInfo.name GROUP BY tableInfo.name ORDER BY tableInfo.cid`;let O,K;try{O=await _.execAsObject(D,b)}catch(ue){K=ue,O={objectValues:[],columns:[]}}let re=Math.max(...O.objectValues.map(({pk:ue})=>ue).filter(ue=>!!ue)),oe=O.objectValues.map(({cid:ue,notnull:me,name:we,type:Ie,pk:Oe,fk:Ye,fkTable:Ce,fkName:We,dflt_value:Ke,hidden:Ne})=>({cid:ue,notnull:me,name:we,type:Ie,typeAffinity:Tu(Ie),pk:Oe,numPk:re,fk:Ye,fkTable:Ce,fkName:We,dflt_value:Ke,hidden:Ne}));oe.unshift({cid:-1,notnull:0,name:"ROWID",type:"ROWID",typeAffinity:"ROWID",pk:0,numPk:0,fk:0,fkTable:0,fkName:0,dflt_value:void 0,hidden:0});let Z=o==="table"&&!/WITHOUT\s+ROWID/i.test(c)||o==="index";return{...r,error:K,sql:c,hasRowId:Z,uiName:r.name,tblName:I,rootPage:r.rootpage,type:o,sub:o,columnsMeta:oe,columnsMetaByName:Object.fromEntries(oe.map(ue=>[ue.name,ue]))}}async function ku(_,o,c,r){let b=c.objectValues.filter(re=>re.type==="table"),I=c.objectValues.filter(re=>re.type==="view"),[D,O]=await Promise.all([Promise.all(b.map(re=>On(_,re,r))),Promise.all(I.map(re=>On(_,re,r)))]);return[{filename:decodeURIComponent(o),type:"table",tables:D,subRows:D},{filename:decodeURIComponent(o),type:"view",tables:O,subRows:O}]}async function Pn(_,o,c){let r=await _.execAsObject("SELECT * FROM main.sqlite_schema ORDER BY type, tbl_name",c);return ku(_,o,r,c)}var Gt=_=>_.columnsMeta.filter(o=>o.pk).sort((o,c)=>o.pk-c.pk).map(o=>o.name),Iu=({textCutoff:_=1024,blobCutoff:o=1024}={})=>c=>pe` CASE WHEN typeof("${c.name}") = 'blob' THEN SUBSTR("${c.name}", 1, ${_}) WHEN typeof("${c.name}") = 'text' THEN SUBSTR("${c.name}", 1, ${o}) ELSE "${c.name}" END AS "${c.name}", CASE WHEN typeof("${c.name}") IN ('blob','text') THEN LENGTH("${c.name}") ELSE NULL END AS "${c.name+"__size__"}"`;function Fu(_){let o=Gt(_);return _.hasRowId?pe`ROWID AS ROWID`:o.length?`${o.map(r=>pe`"${r}"`).join(pe` || '${dt}' || `)} AS ROWID`:void 0}function it(_,{simplified:o=!1,textCutoff:c=1024,blobCutoff:r=1024,idsOnly:b=!1}={}){let I=b?[]:o?["*"]:_.columnsMeta.filter(D=>D.name!=="ROWID").map(Iu({textCutoff:c,blobCutoff:r}));switch(_.type){case"index":case"table":{let D=[Fu(_),...I].filter(O=>!!O);return pe`SELECT ${D.join(", ")} FROM "${_.tblName}"`}default:{let D=["SELECT ROW_NUMBER() OVER () AS ROWID",...I].join(", ");return pe`SELECT * FROM (${D} FROM "${_.tblName}")`}}}function st(_,o,c,r,b=!1,{simplified:I=!1,noSort:D=!1}={}){let O=[],K=[],re=I?Z=>pe`'${Z}'`:Z=>(K.push(Z),"?"),oe=Object.entries(o).filter(([,{search:Z,exact:ue,invert:me,nonNullish:we}])=>!!Z||ue||me||we);if(oe.length>0||c){let Z=[];if(oe.length>0){let ue=oe.map(([me,{search:we,exact:Ie,invert:Oe,nonNullish:Ye}])=>{let Ce=we?.replaceAll("%","\\%").replaceAll("_","\\_"),We=we!==Ce,Ke=Oe&&!we,Ne=Oe?"NOT ":"",Ze=Ke?"":"NOT ",ze=Ce==="NULL"?pe`IS ${Ne}NULL`:Ce==="''"?pe`IS ${Ne}''`:Ce&&pe`${Ne}LIKE ${re(Ie?Ce:`%${Ce}%`)}${We?" ESCAPE '\\'":""}`,Ft=ze&&pe`"${me}" ${ze}`,kr=Ye?pe`("${me}" IS ${Ze}NULL ${Ke?"OR":"AND"} "${me}" IS ${Ze}'')`:null;return[Ft,kr].filter(Ir=>!!Ir).join(" AND ")}).filter(me=>!!me);ue.length>0&&Z.push(ue.join(" AND "))}if(c&&r){let ue=c.replaceAll("%","\\%").replaceAll("_","\\_"),me=c!==ue,we=r.map(Ie=>pe`"${Ie.name}" LIKE ${re(`%${ue}%`)}${me?" ESCAPE '\\'":""}`);Z.push(pe`(${we.join(" OR ")})`)}Z.length>0&&O.push(pe`WHERE ${Z.join(" AND ")}`)}return D||(_&&_.length>0?O.push(pe`ORDER BY ${_.map(Z=>pe`"${Z.id}" ${Z.desc?"DESC":"ASC"}`).join(", ")}`):b&&O.push(pe`ORDER BY ROWID`)),[O.join(" "),K]}function Ln(_,o){return _.map((c,r)=>pe`"${c}" = '${o[r]}'`).join(" AND ")}function Ar(_,o){if(_.hasRowId||_.type==="view")return pe`WHERE ROWID = ${o}`;{let c=String(o).split(dt),r=Gt(_);return pe`WHERE (${Ln(r,c)})`}}function Dn(_){if(_.hasRowId)return pe`RETURNING ROWID`;{let o=Gt(_);return pe`RETURNING ${o.map(c=>pe`"${c}"`).join(", ")}`}}function It(_,o){if(!o.length)return"";if(_.hasRowId||_.type==="view")return o.length===1?pe`WHERE ROWID = ${o[0]}`:pe`WHERE ROWID IN (${o.join(", ")})`;{let c=o.map(b=>String(b).split(dt)),r=Gt(_);return pe`WHERE ${c.map(b=>`(${Ln(r,b)})`).join(" OR ")}`}}var Kt=class{execAsObject(o,c){return Sr(this.execAsObjectImpl(o,[],c))}execAsObjectWithParams(o,c,r){return Sr(this.execAsObjectImpl(o,c,r))}first(o,c){return this.firstWithParams(o,[],c)}run(o,c){return this.runWithParams(o,[],c)}};var Ou;async function Rn(_){return Ou??=pn({wasmBinary:await Promise.all([import("fs/promises"),import("path")]).then(([o,c])=>{let r=c.join(__dirname,"..",new URL("./sqlite3.wasm","file:./sqlite-viewer-core/vscode/build/assets/").pathname);return o.readFile(r)})})}var Jt=class{static async fromStream(o,c,r,{mappings:b={}}={}){let I=encodeURIComponent(o),D=await Rn(this.mappings||=b);if(0)try{}catch(K){}let O=[];return await c.pipeTo(new WritableStream({write(K){O.push(K)}})),this.createMem2Db(D,o,cn(O),r)}static async fromBuffer(o,c,r,{maxFileSize:b=200*2**20,mappings:I={}}={}){let D=encodeURIComponent(o),O=await Rn(this.mappings||=I);if(0)try{}catch(K){}return this.createMem2Db(O,o,c,r,{maxFileSize:b})}static{this.walMergePragmas=["PRAGMA locking_mode = EXCLUSIVE;","PRAGMA journal_mode = WAL;","PRAGMA wal_checkpoint(FULL);","PRAGMA journal_mode = OFF;"]}static createOpfsDb(o,c,r=!1){if(r){let D=new o.capi.sqlite3_vfs(o.capi.sqlite3_vfs_find("opfs")),O=o.oo1.DB.dbCtorHelper;O.setVfsPostOpenCallback(D.pointer,(K,re)=>{re.capi.sqlite3_busy_timeout(K,1e4),re.capi.sqlite3_exec(K,[...this.walMergePragmas],0,0,0)}),new o.oo1.OpfsDb(encodeURIComponent(c),"c").close(),O.setVfsPostOpenCallback(D.pointer,(K,re)=>{re.capi.sqlite3_busy_timeout(K,1e4),re.capi.sqlite3_exec(K,["PRAGMA journal_mode = DELETE;","PRAGMA cache_size = -16384;"],0,0,0)})}let b=new URL(`file://localhost/${c}`);Nn&&b.searchParams.set("immutable","1");let I=new o.oo1.OpfsDb(b.href);return this.checkDb(I),new Yt(o,I)}static createMem2Db(o,c,r,b,{maxFileSize:I=200*2**20}={}){if(!o.capi.sqlite3_vfs_find("mem2")){let re=o.capi.sqlite3_vfs_find(null),oe=re?new o.capi.sqlite3_vfs(re):null,Z=new o.capi.sqlite3_io_methods;Z.$iVersion=1;let ue=new o.capi.sqlite3_vfs().addOnDispose(()=>{Z.dispose()});ue.$iVersion=2,ue.$szOsFile=o.capi.sqlite3_file.structInfo.sizeof,ue.$mxPathname=1024,ue.$zName=o.wasm.allocCString("mem2",!1),ue.$xDlOpen=ue.$xDlError=ue.$xDlSym=ue.$xDlClose=null,oe&&(ue.$xRandomness=oe.$xRandomness,ue.$xSleep=oe.$xSleep,oe.dispose());let me=un(o,Z);o.vfs.installVfs({io:{struct:Z,methods:me.io},vfs:{struct:ue,methods:me.vfs}}),o.oo1.DB.dbCtorHelper.setVfsPostOpenCallback(ue.pointer,(we,Ie)=>{Ie.capi.sqlite3_busy_timeout(we,1e4),Ie.capi.sqlite3_exec(we,[...this.walMergePragmas,"PRAGMA synchronous = OFF","PRAGMA auto_vacuum = NONE;","PRAGMA cache_size = -16384;"],0,0,0)})}let O=encodeURIComponent(c);dn(O,r,b,{maxFileSize:I});let K=new o.oo1.DB({vfs:"mem2",filename:O});return this.checkDb(K),new Yt(o,K)}static checkDb(o){o.exec("PRAGMA foreign_keys = ON;"),o.exec("SELECT * FROM main.sqlite_schema LIMIT 0")}},Mn=(_,o)=>{if("stream"in o)return Jt.fromStream(_,o.stream,o.walData,o);if("data"in o)return Jt.fromBuffer(_,o.data,o.walData,o);throw Error(`Not implemented for: ${JSON.stringify(o,null,2)}`)},mt=performance?.now?.bind(performance)??Date.now.bind(Date),Xt=50,Nn=!0,Yt=class extends Kt{constructor(c,r){super();this.sqlite3=c;this.db=r}get type(){return"wasm"}get readOnly(){return Nn}execAsObjectImpl(c,r,b){return Pu(this.db,c,r,b)}first(c,r){return Cn(this.db,c,[],r)}firstWithParams(c,r,b){return Cn(this.db,c,r,b)}async runWithParams(c,r,b){let I=this.db,D=r.length?I.prepare(c).bind(r):I.prepare(c);try{await pt(),b?.throwIfAborted();let O=mt()+Xt,K=D.step();for(;K;)mt()>O&&(await pt(),b?.throwIfAborted(),O=mt()+Xt),K=D.step()}finally{D.finalize()}}async exportDb(){return this.sqlite3.capi.sqlite3_js_db_export(this.db.pointer,"main")}close(){this.db.close()}};async function Pu(_,o,c,r){let b=[],I=c.length?_.prepare(o).bind(c):_.prepare(o),D=I.getColumnNames();try{await pt(),r?.throwIfAborted();let O=mt()+Xt,K=I.step();for(;K;){mt()>O&&(await pt(),r?.throwIfAborted(),O=mt()+Xt);let re=I.get({});for(let oe in re){let Z=re[oe];if(Z instanceof Uint8Array){let ue=await kt(Z);re[`${oe}__mime__`]=ue,re[oe]=St(Z,[Z.buffer])}}b.push(re),K=I.step()}return{columns:D,objectValues:b}}finally{I.finalize()}}async function Cn(_,o,c,r){return await pt(),r?.throwIfAborted(),_.selectArray(o,c.length?c:void 0)?.[0]}var Zt=class{#e=new Map;get size(){return this.#e.size}get(o){let c;return this.#e.has(o)||this.#e.set(o,c=Promise.withResolvers()),(c??this.#e.get(o)).promise}set(o,c){return this.#e.has(o)?this.#e.get(o).resolve?.(c):this.#e.set(o,{promise:Promise.resolve(c)}),this}has(o){return!0}hasPending(o){return this.#e.get(o)}delete(o){return this.#e.get(o)?.reject?.(),this.#e.delete(o)}clear(){for(let o of this.#e.values())o.reject?.();this.#e.clear()}forEach(o,c){this.#e.forEach((r,b)=>o.call(c,r.promise,b,this))}*entries(){for(let[o,c]of this.#e)yield[o,c.promise]}keys(){return this.#e.keys()}*values(){for(let o of this.#e.values())yield o.promise}*[Symbol.iterator](){for(let[o,c]of this.#e)yield[o,c.promise]}get[Symbol.toStringTag](){return"EventualMap"}};var Du=32766,er=class{constructor(o){this.createDbWrapper=o;this.dbs=new Zt}async importDb(o,c){let r=await this.createDbWrapper(o,c),b=new Tr(o,r);return this.dbs.set(o,b),hr(b)}async close(o){}[Symbol.dispose](){for(let o of this.dbs.values())o.then(c=>c.close())}},Tr=class{constructor(o,c){this.filename=o;this.#t=c}#e=new Map;#t;#_=new Map;#i=!1;#n=0;get type(){return this.#t.type}get readOnly(){return this.#t.readOnly}get journalMode(){let o=pe`PRAGMA journal_mode`;return this.log(o),this.#t.first(o)}#s;#c=[];setLogger(o){if(this.#s=o,this.#c.length){for(let c of this.#c)this.#s.log(c).catch(console.warn);this.#c=[]}}log(o,c){if(c?.aborted)return;let r=o.trim()+";";this.#s?this.#s.log(r).catch(console.warn):this.#c.push(r)}getTableGroups(o){let c=this.#e.get(this.filename);return c||this.#e.set(this.filename,c=Pn(this.#t,this.filename)),c}async#r(o){let c=await this.getTableGroups(),r=["table","view","index","trigger"].indexOf(o.table),b=c[r].tables.find(I=>I.uiName===o.name);if(!b)throw Error(`Could not find schema for table: "${o.name}"`);return b}async close(o){if(this.#t?.close(),0)try{}catch{}}async getCount(o,{columnFilters:c={},globalFilter:r=""}={},b){let I=await this.#r(o),[D,O]=st([],c,r,I.columnsMeta,I.hasRowId,{noSort:!0}),[K]=st([],c,r,I.columnsMeta,I.hasRowId,{noSort:!0,simplified:!0}),re=pe`SELECT COUNT(*) FROM "${o.name}" ${D}`,oe=pe`SELECT COUNT(*) FROM "${o.name}" ${K}`;this.log(oe,b);let Z;return Z=Number(await this.#t.firstWithParams(re,O,b)),Z}async getPage(o,{offset:c=0,sorting:r=[],columnFilters:b={},globalFilter:I=""}={},D){await Er(50);let O=await this.#r(o),[K,re]=st(r,b,I,O.columnsMeta,O.hasRowId),[oe]=st(r,b,I,O.columnsMeta,O.hasRowId,{simplified:!0}),Z=pe`LIMIT ${3*100} OFFSET ${c}`,ue=pe`${it(O)} ${K} ${Z}`,me=`${it(O,{simplified:!0})} ${oe} ${Z}`;this.log(me,D);let{objectValues:we}=await this.#t.execAsObjectWithParams(ue,re,D);return{offset:c,objectValues:we}}async getIdsFromToIndex(o,c,r,{sorting:b=[],columnFilters:I={},globalFilter:D=""}={},O){let K=Math.min(c,r),oe=`LIMIT ${Math.abs(r-c)+1} OFFSET ${K}`,Z=await this.#r(o),[ue,me]=st(b,I,D,Z.columnsMeta,Z.hasRowId),[we]=st(b,I,D,Z.columnsMeta,Z.hasRowId,{simplified:!0}),Ie=`${it(Z,{idsOnly:!0})} ${ue} ${oe}`,Oe=`${it(Z,{idsOnly:!0,simplified:!0})} ${we} ${oe}`;this.log(Oe,O);let{objectValues:Ye}=await this.#t.execAsObjectWithParams(Ie,me,O),Ce=new Set;for(let We of Ye)Ce.add(We.ROWID);return Ce}async getByRowId(o,c,{textCutoff:r=1024,blobCutoff:b=1024}={},I){return(await this.getByRowIds(o,[c],{textCutoff:r,blobCutoff:b},I))?.objectValues?.[0]}async getByRowIds(o,c=[],{textCutoff:r=1024,blobCutoff:b=1024}={},I){let D=Array.from(c);if(!D.length)return{columns:[],objectValues:[]};let O=await this.#r(o),K=it(O,{textCutoff:r,blobCutoff:b}),re=it(O,{textCutoff:r,blobCutoff:b,simplified:!0}),oe=`${K} ${It(O,D)} LIMIT ${D.length}`,Z=`${re} ${It(O,D)} LIMIT ${D.length}`;this.log(Z,I);let ue=await this.#t.execAsObject(oe,I);return ue.objectValues=D.map((me,we)=>ue.objectValues.find(Oe=>Oe.ROWID==me)),ue}async getBlob(o,c,r,b){await Er(50);let I=await this.#r(o),D=pe`SELECT "${r}" FROM "${I.tblName}" ${It(I,[c])}`;this.log(D,b);let O=await this.#t.first(D,b);return O&&St({data:O,type:await kt(O),size:O.byteLength},[O.buffer])}async exportDb(o,c){let r=await this.#t.exportDb(c);return St(r,[r.buffer])}async getStorageSize(o){let c=await this.#r(o),r=pe`SELECT SUM("pgsize") AS totalSize, COUNT(*) AS numPages FROM "dbstat" WHERE name='${c.tblName}'`;this.log(r);let{objectValues:[{totalSize:b,numPages:I}]}=await this.#t.execAsObject(r);return{totalSize:b,numPages:I}}async getIndices(o){let c=await this.#r(o),r=pe`SELECT * from pragma_index_list('${c.tblName}') ORDER BY seq`;this.log(r);let{objectValues:b}=await this.#t.execAsObject(r);return b.map(I=>({seq:I.seq,name:I.name,unique:!!I.unique,origin:I.origin,partial:!!I.partial}))}async#o(){this.#i||(this.#i=!0,await this.#l(pe`BEGIN TRANSACTION`))}#a(o){if(typeof o=="string"){if(o===""||o==="NULL")return null;if(o==="''")return""}return o}async updateRow(o,c,r,b,I){let D=await this.#r(o),O=Ar(D,c),K=pe`SELECT "${r}" FROM "${o.name}" ${O}`,re=pe`UPDATE "${o.name}" SET "${r}" = ? ${O}`,oe=await this.#t.first(K,I)??null,Z=[this.#a(b)];return await this.#u(re,Z,I),{query:re,values:Z,undoValues:[oe]}}async insertRow(o,c,r){let b=await this.#r(o),I=Object.keys(c),D=Object.values(c).map(this.#a),O=I.map(we=>`"${we}"`).join(", "),K=D.map(()=>"?").join(", "),re=Dn(b),oe=pe`INSERT INTO "${o.name}" (${O}) VALUES (${K}) ${re}`,{objectValues:[Z]}=await this.#p(oe,D,r);if(!Z)throw Error("Failed to insert row");let ue=Object.values(Z).join(dt),me=pe`DELETE FROM "${o.name}" ${Ar(b,ue)}`;return{query:oe,undoQuery:me,values:D,undoValues:[]}}async deleteRows(o,c,r){let b=await this.#r(o),I=It(b,c),D=pe`DELETE FROM "${o.name}" ${I} RETURNING ${b.hasRowId?"ROWID, *":"*"}`,{columns:O,objectValues:K}=await this.#p(D,[],r),re=K.length*O.length>=Du,oe,Z;if(re)oe=Fn;else{let ue=O.map(we=>`"${we}"`).join(", "),me=K.map(()=>`(${O.map(()=>"?").join(", ")})`).join(", ");oe=pe`INSERT INTO "${o.name}" (${ue}) VALUES ${me}`,Z=K.flatMap(we=>O.map(Ie=>we[Ie]))}return{query:D,undoQuery:oe,values:[],undoValues:Z??[]}}async#u(o,c,r){await this.#o(),await this.#l(pe`SAVEPOINT "UNDOPOINT"`,r),this.#n++,await this.#d(o,c,r)}async#f(o,c,r){return await this.#o(),await this.#l(pe`SAVEPOINT "UNDOPOINT"`,r),this.#n++,this.log(o,r),await this.#t.firstWithParams(o,c,r)}async#p(o,c,r){return await this.#o(),await this.#l(pe`SAVEPOINT "UNDOPOINT"`,r),this.#n++,this.log(o,r),await this.#t.execAsObjectWithParams(o,c,r)}#l(o,c){return this.log(o,c),this.#t.run(o)}#d(o,c,r){return this.log(o,r),this.#t.runWithParams(o,c,r)}async undo(o){this.#n>0?(this.#n--,await this.#l(pe`ROLLBACK TO "UNDOPOINT"`),await this.#l(pe`RELEASE "UNDOPOINT"`),this.#n===0&&(this.#i=!1,await this.#l(pe`COMMIT`))):(await this.#o(),await this.#d(o.undoQuery??o.query,o.undoValues))}async redo(o,c){await this.#u(o.query,o.values,c)}async applyEdits(o,c){if(o.length){await this.#o();for(let r of o)await this.#d(r.query,r.values,c)}}async commit(o){this.#i&&(this.#i=!1,this.#n=0,await this.#l(pe`COMMIT`,o))}async rollback(o){this.#i&&(this.#i=!1,this.#n=0,await this.#l(pe`ROLLBACK`,o))}getFilename(){return this.filename}[Symbol.dispose](){this.#t.close()}};jt(new er(Mn),gr(Jr));
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
/*! Bundled license information:

ieee754/index.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)
*/
