var Cf=Object.create;var an=Object.defineProperty;var Mf=Object.getOwnPropertyDescriptor;var Nf=Object.getOwnPropertyNames;var Uf=Object.getPrototypeOf,jf=Object.prototype.hasOwnProperty;var or=(f,s)=>()=>(f&&(s=f(f=0)),s);var Wf=(f,s)=>()=>(s||f((s={exports:{}}).exports,s),s.exports),zf=(f,s)=>{for(var u in s)an(f,u,{get:s[u],enumerable:!0})},Vf=(f,s,u,r)=>{if(s&&typeof s=="object"||typeof s=="function")for(let w of Nf(s))!jf.call(f,w)&&w!==u&&an(f,w,{get:()=>s[w],enumerable:!(r=Mf(s,w))||r.enumerable});return f};var $f=(f,s,u)=>(u=f!=null?Cf(Uf(f)):{},Vf(s||!f||!f.__esModule?an(u,"default",{value:f,enumerable:!0}):u,f));var we=or(()=>{});var De={};zf(De,{_debugEnd:()=>ki,_debugProcess:()=>Ti,_events:()=>Vi,_eventsCount:()=>$i,_exiting:()=>li,_fatalExceptions:()=>Ei,_getActiveHandles:()=>_i,_getActiveRequests:()=>fi,_kill:()=>di,_linkedBinding:()=>oi,_maxListeners:()=>zi,_preload_modules:()=>Ui,_rawDebug:()=>ii,_startProfilerIdleNotifier:()=>Ii,_stopProfilerIdleNotifier:()=>Fi,_tickCallback:()=>Ai,abort:()=>Ri,addListener:()=>Hi,allowedNodeEnvironmentFlags:()=>bi,arch:()=>$n,argv:()=>Gn,argv0:()=>Ni,assert:()=>wi,binding:()=>Zn,chdir:()=>ri,config:()=>ci,cpuUsage:()=>kr,cwd:()=>ti,debugPort:()=>Mi,default:()=>ts,dlopen:()=>ui,domain:()=>ai,emit:()=>Xi,emitWarning:()=>Yn,env:()=>Qn,execArgv:()=>Kn,execPath:()=>Ci,exit:()=>yi,features:()=>qi,hasUncaughtExceptionCaptureCallback:()=>Si,hrtime:()=>Tr,kill:()=>gi,listeners:()=>es,memoryUsage:()=>hi,moduleLoadList:()=>si,nextTick:()=>Wn,off:()=>Gi,on:()=>At,once:()=>Qi,openStdin:()=>xi,pid:()=>Bi,platform:()=>Hn,ppid:()=>Di,prependListener:()=>Yi,prependOnceListener:()=>Zi,reallyExit:()=>pi,release:()=>ni,removeAllListeners:()=>Ji,removeListener:()=>Ki,resourceUsage:()=>mi,setSourceMapsEnabled:()=>ji,setUncaughtExceptionCaptureCallback:()=>vi,stderr:()=>Pi,stdin:()=>Li,stdout:()=>Oi,title:()=>Vn,umask:()=>ei,uptime:()=>Wi,version:()=>Jn,versions:()=>Xn});function un(f){throw new Error("Node.js process "+f+" is not supported by JSPM core outside of Node.js")}function Hf(){!Qt||!Rt||(Qt=!1,Rt.length?St=Rt.concat(St):Ar=-1,St.length&&jn())}function jn(){if(!Qt){var f=setTimeout(Hf,0);Qt=!0;for(var s=St.length;s;){for(Rt=St,St=[];++Ar<s;)Rt&&Rt[Ar].run();Ar=-1,s=St.length}Rt=null,Qt=!1,clearTimeout(f)}}function Wn(f){var s=new Array(arguments.length-1);if(arguments.length>1)for(var u=1;u<arguments.length;u++)s[u-1]=arguments[u];St.push(new zn(f,s)),St.length===1&&!Qt&&setTimeout(jn,0)}function zn(f,s){this.fun=f,this.array=s}function at(){}function oi(f){un("_linkedBinding")}function ui(f){un("dlopen")}function fi(){return[]}function _i(){return[]}function wi(f,s){if(!f)throw new Error(s||"assertion error")}function Si(){return!1}function Wi(){return Ot.now()/1e3}function Tr(f){var s=Math.floor((Date.now()-Ot.now())*.001),u=Ot.now()*.001,r=Math.floor(u)+s,w=Math.floor(u%1*1e9);return f&&(r=r-f[0],w=w-f[1],w<0&&(r--,w+=cn)),[r,w]}function At(){return ts}function es(f){return[]}var St,Qt,Rt,Ar,Vn,$n,Hn,Qn,Gn,Kn,Jn,Xn,Yn,Zn,ei,ti,ri,ni,ii,si,ai,li,ci,pi,di,kr,mi,hi,gi,yi,xi,bi,qi,Ei,vi,Ai,Ti,ki,Ii,Fi,Oi,Pi,Li,Ri,Bi,Di,Ci,Mi,Ni,Ui,ji,Ot,ln,cn,zi,Vi,$i,Hi,Qi,Gi,Ki,Ji,Xi,Yi,Zi,ts,rs=or(()=>{we();Ee();qe();St=[],Qt=!1,Ar=-1;zn.prototype.run=function(){this.fun.apply(null,this.array)};Vn="browser",$n="x64",Hn="browser",Qn={PATH:"/usr/bin",LANG:navigator.language+".UTF-8",PWD:"/",HOME:"/home",TMP:"/tmp"},Gn=["/usr/bin/node"],Kn=[],Jn="v16.8.0",Xn={},Yn=function(f,s){console.warn((s?s+": ":"")+f)},Zn=function(f){un("binding")},ei=function(f){return 0},ti=function(){return"/"},ri=function(f){},ni={name:"node",sourceUrl:"",headersUrl:"",libUrl:""};ii=at,si=[];ai={},li=!1,ci={};pi=at,di=at,kr=function(){return{}},mi=kr,hi=kr,gi=at,yi=at,xi=at,bi={};qi={inspector:!1,debug:!1,uv:!1,ipv6:!1,tls_alpn:!1,tls_sni:!1,tls_ocsp:!1,tls:!1,cached_builtins:!0},Ei=at,vi=at;Ai=at,Ti=at,ki=at,Ii=at,Fi=at,Oi=void 0,Pi=void 0,Li=void 0,Ri=at,Bi=2,Di=1,Ci="/bin/usr/node",Mi=9229,Ni="node",Ui=[],ji=at,Ot={now:typeof performance<"u"?performance.now.bind(performance):void 0,timing:typeof performance<"u"?performance.timing:void 0};Ot.now===void 0&&(ln=Date.now(),Ot.timing&&Ot.timing.navigationStart&&(ln=Ot.timing.navigationStart),Ot.now=()=>Date.now()-ln);cn=1e9;Tr.bigint=function(f){var s=Tr(f);return typeof BigInt>"u"?s[0]*cn+s[1]:BigInt(s[0]*cn)+BigInt(s[1])};zi=10,Vi={},$i=0;Hi=At,Qi=At,Gi=At,Ki=At,Ji=At,Xi=at,Yi=At,Zi=At;ts={version:Jn,versions:Xn,arch:$n,platform:Hn,release:ni,_rawDebug:ii,moduleLoadList:si,binding:Zn,_linkedBinding:oi,_events:Vi,_eventsCount:$i,_maxListeners:zi,on:At,addListener:Hi,once:Qi,off:Gi,removeListener:Ki,removeAllListeners:Ji,emit:Xi,prependListener:Yi,prependOnceListener:Zi,listeners:es,domain:ai,_exiting:li,config:ci,dlopen:ui,uptime:Wi,_getActiveRequests:fi,_getActiveHandles:_i,reallyExit:pi,_kill:di,cpuUsage:kr,resourceUsage:mi,memoryUsage:hi,kill:gi,exit:yi,openStdin:xi,allowedNodeEnvironmentFlags:bi,assert:wi,features:qi,_fatalExceptions:Ei,setUncaughtExceptionCaptureCallback:vi,hasUncaughtExceptionCaptureCallback:Si,emitWarning:Yn,nextTick:Wn,_tickCallback:Ai,_debugProcess:Ti,_debugEnd:ki,_startProfilerIdleNotifier:Ii,_stopProfilerIdleNotifier:Fi,stdout:Oi,stdin:Li,stderr:Pi,abort:Ri,umask:ei,chdir:ri,cwd:ti,env:Qn,title:Vn,argv:Gn,execArgv:Kn,pid:Bi,ppid:Di,execPath:Ci,debugPort:Mi,hrtime:Tr,argv0:Ni,_preload_modules:Ui,setSourceMapsEnabled:ji}});var qe=or(()=>{rs()});function Qf(){if(ns)return ar;ns=!0,ar.byteLength=D,ar.toByteArray=ae,ar.fromByteArray=de;for(var f=[],s=[],u=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",w=0,F=r.length;w<F;++w)f[w]=r[w],s[r.charCodeAt(w)]=w;s[45]=62,s[95]=63;function y(ce){var xe=ce.length;if(xe%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var Te=ce.indexOf("=");Te===-1&&(Te=xe);var Re=Te===xe?0:4-Te%4;return[Te,Re]}function D(ce){var xe=y(ce),Te=xe[0],Re=xe[1];return(Te+Re)*3/4-Re}function Y(ce,xe,Te){return(xe+Te)*3/4-Te}function ae(ce){var xe,Te=y(ce),Re=Te[0],Ze=Te[1],Me=new u(Y(ce,Re,Ze)),Ke=0,et=Ze>0?Re-4:Re,je;for(je=0;je<et;je+=4)xe=s[ce.charCodeAt(je)]<<18|s[ce.charCodeAt(je+1)]<<12|s[ce.charCodeAt(je+2)]<<6|s[ce.charCodeAt(je+3)],Me[Ke++]=xe>>16&255,Me[Ke++]=xe>>8&255,Me[Ke++]=xe&255;return Ze===2&&(xe=s[ce.charCodeAt(je)]<<2|s[ce.charCodeAt(je+1)]>>4,Me[Ke++]=xe&255),Ze===1&&(xe=s[ce.charCodeAt(je)]<<10|s[ce.charCodeAt(je+1)]<<4|s[ce.charCodeAt(je+2)]>>2,Me[Ke++]=xe>>8&255,Me[Ke++]=xe&255),Me}function ne(ce){return f[ce>>18&63]+f[ce>>12&63]+f[ce>>6&63]+f[ce&63]}function ee(ce,xe,Te){for(var Re,Ze=[],Me=xe;Me<Te;Me+=3)Re=(ce[Me]<<16&16711680)+(ce[Me+1]<<8&65280)+(ce[Me+2]&255),Ze.push(ne(Re));return Ze.join("")}function de(ce){for(var xe,Te=ce.length,Re=Te%3,Ze=[],Me=16383,Ke=0,et=Te-Re;Ke<et;Ke+=Me)Ze.push(ee(ce,Ke,Ke+Me>et?et:Ke+Me));return Re===1?(xe=ce[Te-1],Ze.push(f[xe>>2]+f[xe<<4&63]+"==")):Re===2&&(xe=(ce[Te-2]<<8)+ce[Te-1],Ze.push(f[xe>>10]+f[xe>>4&63]+f[xe<<2&63]+"=")),Ze.join("")}return ar}function Gf(){if(is)return Ir;is=!0;return Ir.read=function(f,s,u,r,w){var F,y,D=w*8-r-1,Y=(1<<D)-1,ae=Y>>1,ne=-7,ee=u?w-1:0,de=u?-1:1,ce=f[s+ee];for(ee+=de,F=ce&(1<<-ne)-1,ce>>=-ne,ne+=D;ne>0;F=F*256+f[s+ee],ee+=de,ne-=8);for(y=F&(1<<-ne)-1,F>>=-ne,ne+=r;ne>0;y=y*256+f[s+ee],ee+=de,ne-=8);if(F===0)F=1-ae;else{if(F===Y)return y?NaN:(ce?-1:1)*(1/0);y=y+Math.pow(2,r),F=F-ae}return(ce?-1:1)*y*Math.pow(2,F-r)},Ir.write=function(f,s,u,r,w,F){var y,D,Y,ae=F*8-w-1,ne=(1<<ae)-1,ee=ne>>1,de=w===23?Math.pow(2,-24)-Math.pow(2,-77):0,ce=r?0:F-1,xe=r?1:-1,Te=s<0||s===0&&1/s<0?1:0;for(s=Math.abs(s),isNaN(s)||s===1/0?(D=isNaN(s)?1:0,y=ne):(y=Math.floor(Math.log(s)/Math.LN2),s*(Y=Math.pow(2,-y))<1&&(y--,Y*=2),y+ee>=1?s+=de/Y:s+=de*Math.pow(2,1-ee),s*Y>=2&&(y++,Y/=2),y+ee>=ne?(D=0,y=ne):y+ee>=1?(D=(s*Y-1)*Math.pow(2,w),y=y+ee):(D=s*Math.pow(2,ee-1)*Math.pow(2,w),y=0));w>=8;f[u+ce]=D&255,ce+=xe,D/=256,w-=8);for(y=y<<w|D,ae+=w;ae>0;f[u+ce]=y&255,ce+=xe,y/=256,ae-=8);f[u+ce-xe]|=Te*128},Ir}function Kf(){if(ss)return Bt;ss=!0;let f=Qf(),s=Gf(),u=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Bt.Buffer=y,Bt.SlowBuffer=Ze,Bt.INSPECT_MAX_BYTES=50;let r=2147483647;Bt.kMaxLength=r,y.TYPED_ARRAY_SUPPORT=w(),!y.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function w(){try{let g=new Uint8Array(1),l={foo:function(){return 42}};return Object.setPrototypeOf(l,Uint8Array.prototype),Object.setPrototypeOf(g,l),g.foo()===42}catch{return!1}}Object.defineProperty(y.prototype,"parent",{enumerable:!0,get:function(){if(y.isBuffer(this))return this.buffer}}),Object.defineProperty(y.prototype,"offset",{enumerable:!0,get:function(){if(y.isBuffer(this))return this.byteOffset}});function F(g){if(g>r)throw new RangeError('The value "'+g+'" is invalid for option "size"');let l=new Uint8Array(g);return Object.setPrototypeOf(l,y.prototype),l}function y(g,l,c){if(typeof g=="number"){if(typeof l=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return ne(g)}return D(g,l,c)}y.poolSize=8192;function D(g,l,c){if(typeof g=="string")return ee(g,l);if(ArrayBuffer.isView(g))return ce(g);if(g==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof g);if(lt(g,ArrayBuffer)||g&&lt(g.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(lt(g,SharedArrayBuffer)||g&&lt(g.buffer,SharedArrayBuffer)))return xe(g,l,c);if(typeof g=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let E=g.valueOf&&g.valueOf();if(E!=null&&E!==g)return y.from(E,l,c);let R=Te(g);if(R)return R;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof g[Symbol.toPrimitive]=="function")return y.from(g[Symbol.toPrimitive]("string"),l,c);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof g)}y.from=function(g,l,c){return D(g,l,c)},Object.setPrototypeOf(y.prototype,Uint8Array.prototype),Object.setPrototypeOf(y,Uint8Array);function Y(g){if(typeof g!="number")throw new TypeError('"size" argument must be of type number');if(g<0)throw new RangeError('The value "'+g+'" is invalid for option "size"')}function ae(g,l,c){return Y(g),g<=0?F(g):l!==void 0?typeof c=="string"?F(g).fill(l,c):F(g).fill(l):F(g)}y.alloc=function(g,l,c){return ae(g,l,c)};function ne(g){return Y(g),F(g<0?0:Re(g)|0)}y.allocUnsafe=function(g){return ne(g)},y.allocUnsafeSlow=function(g){return ne(g)};function ee(g,l){if((typeof l!="string"||l==="")&&(l="utf8"),!y.isEncoding(l))throw new TypeError("Unknown encoding: "+l);let c=Me(g,l)|0,E=F(c),R=E.write(g,l);return R!==c&&(E=E.slice(0,R)),E}function de(g){let l=g.length<0?0:Re(g.length)|0,c=F(l);for(let E=0;E<l;E+=1)c[E]=g[E]&255;return c}function ce(g){if(lt(g,Uint8Array)){let l=new Uint8Array(g);return xe(l.buffer,l.byteOffset,l.byteLength)}return de(g)}function xe(g,l,c){if(l<0||g.byteLength<l)throw new RangeError('"offset" is outside of buffer bounds');if(g.byteLength<l+(c||0))throw new RangeError('"length" is outside of buffer bounds');let E;return l===void 0&&c===void 0?E=new Uint8Array(g):c===void 0?E=new Uint8Array(g,l):E=new Uint8Array(g,l,c),Object.setPrototypeOf(E,y.prototype),E}function Te(g){if(y.isBuffer(g)){let l=Re(g.length)|0,c=F(l);return c.length===0||g.copy(c,0,0,l),c}if(g.length!==void 0)return typeof g.length!="number"||yt(g.length)?F(0):de(g);if(g.type==="Buffer"&&Array.isArray(g.data))return de(g.data)}function Re(g){if(g>=r)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r.toString(16)+" bytes");return g|0}function Ze(g){return+g!=g&&(g=0),y.alloc(+g)}y.isBuffer=function(l){return l!=null&&l._isBuffer===!0&&l!==y.prototype},y.compare=function(l,c){if(lt(l,Uint8Array)&&(l=y.from(l,l.offset,l.byteLength)),lt(c,Uint8Array)&&(c=y.from(c,c.offset,c.byteLength)),!y.isBuffer(l)||!y.isBuffer(c))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(l===c)return 0;let E=l.length,R=c.length;for(let V=0,Z=Math.min(E,R);V<Z;++V)if(l[V]!==c[V]){E=l[V],R=c[V];break}return E<R?-1:R<E?1:0},y.isEncoding=function(l){switch(String(l).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},y.concat=function(l,c){if(!Array.isArray(l))throw new TypeError('"list" argument must be an Array of Buffers');if(l.length===0)return y.alloc(0);let E;if(c===void 0)for(c=0,E=0;E<l.length;++E)c+=l[E].length;let R=y.allocUnsafe(c),V=0;for(E=0;E<l.length;++E){let Z=l[E];if(lt(Z,Uint8Array))V+Z.length>R.length?(y.isBuffer(Z)||(Z=y.from(Z)),Z.copy(R,V)):Uint8Array.prototype.set.call(R,Z,V);else if(y.isBuffer(Z))Z.copy(R,V);else throw new TypeError('"list" argument must be an Array of Buffers');V+=Z.length}return R};function Me(g,l){if(y.isBuffer(g))return g.length;if(ArrayBuffer.isView(g)||lt(g,ArrayBuffer))return g.byteLength;if(typeof g!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof g);let c=g.length,E=arguments.length>2&&arguments[2]===!0;if(!E&&c===0)return 0;let R=!1;for(;;)switch(l){case"ascii":case"latin1":case"binary":return c;case"utf8":case"utf-8":return dt(g).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return c*2;case"hex":return c>>>1;case"base64":return Zr(g).length;default:if(R)return E?-1:dt(g).length;l=(""+l).toLowerCase(),R=!0}}y.byteLength=Me;function Ke(g,l,c){let E=!1;if((l===void 0||l<0)&&(l=0),l>this.length||((c===void 0||c>this.length)&&(c=this.length),c<=0)||(c>>>=0,l>>>=0,c<=l))return"";for(g||(g="utf8");;)switch(g){case"hex":return Yt(this,l,c);case"utf8":case"utf-8":return qt(this,l,c);case"ascii":return Ce(this,l,c);case"latin1":case"binary":return tt(this,l,c);case"base64":return rt(this,l,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ft(this,l,c);default:if(E)throw new TypeError("Unknown encoding: "+g);g=(g+"").toLowerCase(),E=!0}}y.prototype._isBuffer=!0;function et(g,l,c){let E=g[l];g[l]=g[c],g[c]=E}y.prototype.swap16=function(){let l=this.length;if(l%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let c=0;c<l;c+=2)et(this,c,c+1);return this},y.prototype.swap32=function(){let l=this.length;if(l%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let c=0;c<l;c+=4)et(this,c,c+3),et(this,c+1,c+2);return this},y.prototype.swap64=function(){let l=this.length;if(l%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let c=0;c<l;c+=8)et(this,c,c+7),et(this,c+1,c+6),et(this,c+2,c+5),et(this,c+3,c+4);return this},y.prototype.toString=function(){let l=this.length;return l===0?"":arguments.length===0?qt(this,0,l):Ke.apply(this,arguments)},y.prototype.toLocaleString=y.prototype.toString,y.prototype.equals=function(l){if(!y.isBuffer(l))throw new TypeError("Argument must be a Buffer");return this===l?!0:y.compare(this,l)===0},y.prototype.inspect=function(){let l="",c=Bt.INSPECT_MAX_BYTES;return l=this.toString("hex",0,c).replace(/(.{2})/g,"$1 ").trim(),this.length>c&&(l+=" ... "),"<Buffer "+l+">"},u&&(y.prototype[u]=y.prototype.inspect),y.prototype.compare=function(l,c,E,R,V){if(lt(l,Uint8Array)&&(l=y.from(l,l.offset,l.byteLength)),!y.isBuffer(l))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof l);if(c===void 0&&(c=0),E===void 0&&(E=l?l.length:0),R===void 0&&(R=0),V===void 0&&(V=this.length),c<0||E>l.length||R<0||V>this.length)throw new RangeError("out of range index");if(R>=V&&c>=E)return 0;if(R>=V)return-1;if(c>=E)return 1;if(c>>>=0,E>>>=0,R>>>=0,V>>>=0,this===l)return 0;let Z=V-R,Pe=E-c,Je=Math.min(Z,Pe),ze=this.slice(R,V),Xe=l.slice(c,E);for(let Ve=0;Ve<Je;++Ve)if(ze[Ve]!==Xe[Ve]){Z=ze[Ve],Pe=Xe[Ve];break}return Z<Pe?-1:Pe<Z?1:0};function je(g,l,c,E,R){if(g.length===0)return-1;if(typeof c=="string"?(E=c,c=0):c>2147483647?c=2147483647:c<-2147483648&&(c=-2147483648),c=+c,yt(c)&&(c=R?0:g.length-1),c<0&&(c=g.length+c),c>=g.length){if(R)return-1;c=g.length-1}else if(c<0)if(R)c=0;else return-1;if(typeof l=="string"&&(l=y.from(l,E)),y.isBuffer(l))return l.length===0?-1:ht(g,l,c,E,R);if(typeof l=="number")return l=l&255,typeof Uint8Array.prototype.indexOf=="function"?R?Uint8Array.prototype.indexOf.call(g,l,c):Uint8Array.prototype.lastIndexOf.call(g,l,c):ht(g,[l],c,E,R);throw new TypeError("val must be string, number or Buffer")}function ht(g,l,c,E,R){let V=1,Z=g.length,Pe=l.length;if(E!==void 0&&(E=String(E).toLowerCase(),E==="ucs2"||E==="ucs-2"||E==="utf16le"||E==="utf-16le")){if(g.length<2||l.length<2)return-1;V=2,Z/=2,Pe/=2,c/=2}function Je(Xe,Ve){return V===1?Xe[Ve]:Xe.readUInt16BE(Ve*V)}let ze;if(R){let Xe=-1;for(ze=c;ze<Z;ze++)if(Je(g,ze)===Je(l,Xe===-1?0:ze-Xe)){if(Xe===-1&&(Xe=ze),ze-Xe+1===Pe)return Xe*V}else Xe!==-1&&(ze-=ze-Xe),Xe=-1}else for(c+Pe>Z&&(c=Z-Pe),ze=c;ze>=0;ze--){let Xe=!0;for(let Ve=0;Ve<Pe;Ve++)if(Je(g,ze+Ve)!==Je(l,Ve)){Xe=!1;break}if(Xe)return ze}return-1}y.prototype.includes=function(l,c,E){return this.indexOf(l,c,E)!==-1},y.prototype.indexOf=function(l,c,E){return je(this,l,c,E,!0)},y.prototype.lastIndexOf=function(l,c,E){return je(this,l,c,E,!1)};function pt(g,l,c,E){c=Number(c)||0;let R=g.length-c;E?(E=Number(E),E>R&&(E=R)):E=R;let V=l.length;E>V/2&&(E=V/2);let Z;for(Z=0;Z<E;++Z){let Pe=parseInt(l.substr(Z*2,2),16);if(yt(Pe))return Z;g[c+Z]=Pe}return Z}function Wt(g,l,c,E){return It(dt(l,g.length-c),g,c,E)}function yr(g,l,c,E){return It(nr(l),g,c,E)}function xr(g,l,c,E){return It(Zr(l),g,c,E)}function An(g,l,c,E){return It(Lt(l,g.length-c),g,c,E)}y.prototype.write=function(l,c,E,R){if(c===void 0)R="utf8",E=this.length,c=0;else if(E===void 0&&typeof c=="string")R=c,E=this.length,c=0;else if(isFinite(c))c=c>>>0,isFinite(E)?(E=E>>>0,R===void 0&&(R="utf8")):(R=E,E=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let V=this.length-c;if((E===void 0||E>V)&&(E=V),l.length>0&&(E<0||c<0)||c>this.length)throw new RangeError("Attempt to write outside buffer bounds");R||(R="utf8");let Z=!1;for(;;)switch(R){case"hex":return pt(this,l,c,E);case"utf8":case"utf-8":return Wt(this,l,c,E);case"ascii":case"latin1":case"binary":return yr(this,l,c,E);case"base64":return xr(this,l,c,E);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return An(this,l,c,E);default:if(Z)throw new TypeError("Unknown encoding: "+R);R=(""+R).toLowerCase(),Z=!0}},y.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function rt(g,l,c){return l===0&&c===g.length?f.fromByteArray(g):f.fromByteArray(g.slice(l,c))}function qt(g,l,c){c=Math.min(g.length,c);let E=[],R=l;for(;R<c;){let V=g[R],Z=null,Pe=V>239?4:V>223?3:V>191?2:1;if(R+Pe<=c){let Je,ze,Xe,Ve;switch(Pe){case 1:V<128&&(Z=V);break;case 2:Je=g[R+1],(Je&192)===128&&(Ve=(V&31)<<6|Je&63,Ve>127&&(Z=Ve));break;case 3:Je=g[R+1],ze=g[R+2],(Je&192)===128&&(ze&192)===128&&(Ve=(V&15)<<12|(Je&63)<<6|ze&63,Ve>2047&&(Ve<55296||Ve>57343)&&(Z=Ve));break;case 4:Je=g[R+1],ze=g[R+2],Xe=g[R+3],(Je&192)===128&&(ze&192)===128&&(Xe&192)===128&&(Ve=(V&15)<<18|(Je&63)<<12|(ze&63)<<6|Xe&63,Ve>65535&&Ve<1114112&&(Z=Ve))}}Z===null?(Z=65533,Pe=1):Z>65535&&(Z-=65536,E.push(Z>>>10&1023|55296),Z=56320|Z&1023),E.push(Z),R+=Pe}return Kr(E)}let gt=4096;function Kr(g){let l=g.length;if(l<=gt)return String.fromCharCode.apply(String,g);let c="",E=0;for(;E<l;)c+=String.fromCharCode.apply(String,g.slice(E,E+=gt));return c}function Ce(g,l,c){let E="";c=Math.min(g.length,c);for(let R=l;R<c;++R)E+=String.fromCharCode(g[R]&127);return E}function tt(g,l,c){let E="";c=Math.min(g.length,c);for(let R=l;R<c;++R)E+=String.fromCharCode(g[R]);return E}function Yt(g,l,c){let E=g.length;(!l||l<0)&&(l=0),(!c||c<0||c>E)&&(c=E);let R="";for(let V=l;V<c;++V)R+=en[g[V]];return R}function ft(g,l,c){let E=g.slice(l,c),R="";for(let V=0;V<E.length-1;V+=2)R+=String.fromCharCode(E[V]+E[V+1]*256);return R}y.prototype.slice=function(l,c){let E=this.length;l=~~l,c=c===void 0?E:~~c,l<0?(l+=E,l<0&&(l=0)):l>E&&(l=E),c<0?(c+=E,c<0&&(c=0)):c>E&&(c=E),c<l&&(c=l);let R=this.subarray(l,c);return Object.setPrototypeOf(R,y.prototype),R};function nt(g,l,c){if(g%1!==0||g<0)throw new RangeError("offset is not uint");if(g+l>c)throw new RangeError("Trying to access beyond buffer length")}y.prototype.readUintLE=y.prototype.readUIntLE=function(l,c,E){l=l>>>0,c=c>>>0,E||nt(l,c,this.length);let R=this[l],V=1,Z=0;for(;++Z<c&&(V*=256);)R+=this[l+Z]*V;return R},y.prototype.readUintBE=y.prototype.readUIntBE=function(l,c,E){l=l>>>0,c=c>>>0,E||nt(l,c,this.length);let R=this[l+--c],V=1;for(;c>0&&(V*=256);)R+=this[l+--c]*V;return R},y.prototype.readUint8=y.prototype.readUInt8=function(l,c){return l=l>>>0,c||nt(l,1,this.length),this[l]},y.prototype.readUint16LE=y.prototype.readUInt16LE=function(l,c){return l=l>>>0,c||nt(l,2,this.length),this[l]|this[l+1]<<8},y.prototype.readUint16BE=y.prototype.readUInt16BE=function(l,c){return l=l>>>0,c||nt(l,2,this.length),this[l]<<8|this[l+1]},y.prototype.readUint32LE=y.prototype.readUInt32LE=function(l,c){return l=l>>>0,c||nt(l,4,this.length),(this[l]|this[l+1]<<8|this[l+2]<<16)+this[l+3]*16777216},y.prototype.readUint32BE=y.prototype.readUInt32BE=function(l,c){return l=l>>>0,c||nt(l,4,this.length),this[l]*16777216+(this[l+1]<<16|this[l+2]<<8|this[l+3])},y.prototype.readBigUInt64LE=mt(function(l){l=l>>>0,kt(l,"offset");let c=this[l],E=this[l+7];(c===void 0||E===void 0)&&Pt(l,this.length-8);let R=c+this[++l]*2**8+this[++l]*2**16+this[++l]*2**24,V=this[++l]+this[++l]*2**8+this[++l]*2**16+E*2**24;return BigInt(R)+(BigInt(V)<<BigInt(32))}),y.prototype.readBigUInt64BE=mt(function(l){l=l>>>0,kt(l,"offset");let c=this[l],E=this[l+7];(c===void 0||E===void 0)&&Pt(l,this.length-8);let R=c*2**24+this[++l]*2**16+this[++l]*2**8+this[++l],V=this[++l]*2**24+this[++l]*2**16+this[++l]*2**8+E;return(BigInt(R)<<BigInt(32))+BigInt(V)}),y.prototype.readIntLE=function(l,c,E){l=l>>>0,c=c>>>0,E||nt(l,c,this.length);let R=this[l],V=1,Z=0;for(;++Z<c&&(V*=256);)R+=this[l+Z]*V;return V*=128,R>=V&&(R-=Math.pow(2,8*c)),R},y.prototype.readIntBE=function(l,c,E){l=l>>>0,c=c>>>0,E||nt(l,c,this.length);let R=c,V=1,Z=this[l+--R];for(;R>0&&(V*=256);)Z+=this[l+--R]*V;return V*=128,Z>=V&&(Z-=Math.pow(2,8*c)),Z},y.prototype.readInt8=function(l,c){return l=l>>>0,c||nt(l,1,this.length),this[l]&128?(255-this[l]+1)*-1:this[l]},y.prototype.readInt16LE=function(l,c){l=l>>>0,c||nt(l,2,this.length);let E=this[l]|this[l+1]<<8;return E&32768?E|4294901760:E},y.prototype.readInt16BE=function(l,c){l=l>>>0,c||nt(l,2,this.length);let E=this[l+1]|this[l]<<8;return E&32768?E|4294901760:E},y.prototype.readInt32LE=function(l,c){return l=l>>>0,c||nt(l,4,this.length),this[l]|this[l+1]<<8|this[l+2]<<16|this[l+3]<<24},y.prototype.readInt32BE=function(l,c){return l=l>>>0,c||nt(l,4,this.length),this[l]<<24|this[l+1]<<16|this[l+2]<<8|this[l+3]},y.prototype.readBigInt64LE=mt(function(l){l=l>>>0,kt(l,"offset");let c=this[l],E=this[l+7];(c===void 0||E===void 0)&&Pt(l,this.length-8);let R=this[l+4]+this[l+5]*2**8+this[l+6]*2**16+(E<<24);return(BigInt(R)<<BigInt(32))+BigInt(c+this[++l]*2**8+this[++l]*2**16+this[++l]*2**24)}),y.prototype.readBigInt64BE=mt(function(l){l=l>>>0,kt(l,"offset");let c=this[l],E=this[l+7];(c===void 0||E===void 0)&&Pt(l,this.length-8);let R=(c<<24)+this[++l]*2**16+this[++l]*2**8+this[++l];return(BigInt(R)<<BigInt(32))+BigInt(this[++l]*2**24+this[++l]*2**16+this[++l]*2**8+E)}),y.prototype.readFloatLE=function(l,c){return l=l>>>0,c||nt(l,4,this.length),s.read(this,l,!0,23,4)},y.prototype.readFloatBE=function(l,c){return l=l>>>0,c||nt(l,4,this.length),s.read(this,l,!1,23,4)},y.prototype.readDoubleLE=function(l,c){return l=l>>>0,c||nt(l,8,this.length),s.read(this,l,!0,52,8)},y.prototype.readDoubleBE=function(l,c){return l=l>>>0,c||nt(l,8,this.length),s.read(this,l,!1,52,8)};function st(g,l,c,E,R,V){if(!y.isBuffer(g))throw new TypeError('"buffer" argument must be a Buffer instance');if(l>R||l<V)throw new RangeError('"value" argument is out of bounds');if(c+E>g.length)throw new RangeError("Index out of range")}y.prototype.writeUintLE=y.prototype.writeUIntLE=function(l,c,E,R){if(l=+l,c=c>>>0,E=E>>>0,!R){let Pe=Math.pow(2,8*E)-1;st(this,l,c,E,Pe,0)}let V=1,Z=0;for(this[c]=l&255;++Z<E&&(V*=256);)this[c+Z]=l/V&255;return c+E},y.prototype.writeUintBE=y.prototype.writeUIntBE=function(l,c,E,R){if(l=+l,c=c>>>0,E=E>>>0,!R){let Pe=Math.pow(2,8*E)-1;st(this,l,c,E,Pe,0)}let V=E-1,Z=1;for(this[c+V]=l&255;--V>=0&&(Z*=256);)this[c+V]=l/Z&255;return c+E},y.prototype.writeUint8=y.prototype.writeUInt8=function(l,c,E){return l=+l,c=c>>>0,E||st(this,l,c,1,255,0),this[c]=l&255,c+1},y.prototype.writeUint16LE=y.prototype.writeUInt16LE=function(l,c,E){return l=+l,c=c>>>0,E||st(this,l,c,2,65535,0),this[c]=l&255,this[c+1]=l>>>8,c+2},y.prototype.writeUint16BE=y.prototype.writeUInt16BE=function(l,c,E){return l=+l,c=c>>>0,E||st(this,l,c,2,65535,0),this[c]=l>>>8,this[c+1]=l&255,c+2},y.prototype.writeUint32LE=y.prototype.writeUInt32LE=function(l,c,E){return l=+l,c=c>>>0,E||st(this,l,c,4,4294967295,0),this[c+3]=l>>>24,this[c+2]=l>>>16,this[c+1]=l>>>8,this[c]=l&255,c+4},y.prototype.writeUint32BE=y.prototype.writeUInt32BE=function(l,c,E){return l=+l,c=c>>>0,E||st(this,l,c,4,4294967295,0),this[c]=l>>>24,this[c+1]=l>>>16,this[c+2]=l>>>8,this[c+3]=l&255,c+4};function Zt(g,l,c,E,R){qr(l,E,R,g,c,7);let V=Number(l&BigInt(4294967295));g[c++]=V,V=V>>8,g[c++]=V,V=V>>8,g[c++]=V,V=V>>8,g[c++]=V;let Z=Number(l>>BigInt(32)&BigInt(4294967295));return g[c++]=Z,Z=Z>>8,g[c++]=Z,Z=Z>>8,g[c++]=Z,Z=Z>>8,g[c++]=Z,c}function br(g,l,c,E,R){qr(l,E,R,g,c,7);let V=Number(l&BigInt(4294967295));g[c+7]=V,V=V>>8,g[c+6]=V,V=V>>8,g[c+5]=V,V=V>>8,g[c+4]=V;let Z=Number(l>>BigInt(32)&BigInt(4294967295));return g[c+3]=Z,Z=Z>>8,g[c+2]=Z,Z=Z>>8,g[c+1]=Z,Z=Z>>8,g[c]=Z,c+8}y.prototype.writeBigUInt64LE=mt(function(l,c=0){return Zt(this,l,c,BigInt(0),BigInt("0xffffffffffffffff"))}),y.prototype.writeBigUInt64BE=mt(function(l,c=0){return br(this,l,c,BigInt(0),BigInt("0xffffffffffffffff"))}),y.prototype.writeIntLE=function(l,c,E,R){if(l=+l,c=c>>>0,!R){let Je=Math.pow(2,8*E-1);st(this,l,c,E,Je-1,-Je)}let V=0,Z=1,Pe=0;for(this[c]=l&255;++V<E&&(Z*=256);)l<0&&Pe===0&&this[c+V-1]!==0&&(Pe=1),this[c+V]=(l/Z>>0)-Pe&255;return c+E},y.prototype.writeIntBE=function(l,c,E,R){if(l=+l,c=c>>>0,!R){let Je=Math.pow(2,8*E-1);st(this,l,c,E,Je-1,-Je)}let V=E-1,Z=1,Pe=0;for(this[c+V]=l&255;--V>=0&&(Z*=256);)l<0&&Pe===0&&this[c+V+1]!==0&&(Pe=1),this[c+V]=(l/Z>>0)-Pe&255;return c+E},y.prototype.writeInt8=function(l,c,E){return l=+l,c=c>>>0,E||st(this,l,c,1,127,-128),l<0&&(l=255+l+1),this[c]=l&255,c+1},y.prototype.writeInt16LE=function(l,c,E){return l=+l,c=c>>>0,E||st(this,l,c,2,32767,-32768),this[c]=l&255,this[c+1]=l>>>8,c+2},y.prototype.writeInt16BE=function(l,c,E){return l=+l,c=c>>>0,E||st(this,l,c,2,32767,-32768),this[c]=l>>>8,this[c+1]=l&255,c+2},y.prototype.writeInt32LE=function(l,c,E){return l=+l,c=c>>>0,E||st(this,l,c,4,2147483647,-2147483648),this[c]=l&255,this[c+1]=l>>>8,this[c+2]=l>>>16,this[c+3]=l>>>24,c+4},y.prototype.writeInt32BE=function(l,c,E){return l=+l,c=c>>>0,E||st(this,l,c,4,2147483647,-2147483648),l<0&&(l=4294967295+l+1),this[c]=l>>>24,this[c+1]=l>>>16,this[c+2]=l>>>8,this[c+3]=l&255,c+4},y.prototype.writeBigInt64LE=mt(function(l,c=0){return Zt(this,l,c,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),y.prototype.writeBigInt64BE=mt(function(l,c=0){return br(this,l,c,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function er(g,l,c,E,R,V){if(c+E>g.length)throw new RangeError("Index out of range");if(c<0)throw new RangeError("Index out of range")}function tr(g,l,c,E,R){return l=+l,c=c>>>0,R||er(g,l,c,4),s.write(g,l,c,E,23,4),c+4}y.prototype.writeFloatLE=function(l,c,E){return tr(this,l,c,!0,E)},y.prototype.writeFloatBE=function(l,c,E){return tr(this,l,c,!1,E)};function Jr(g,l,c,E,R){return l=+l,c=c>>>0,R||er(g,l,c,8),s.write(g,l,c,E,52,8),c+8}y.prototype.writeDoubleLE=function(l,c,E){return Jr(this,l,c,!0,E)},y.prototype.writeDoubleBE=function(l,c,E){return Jr(this,l,c,!1,E)},y.prototype.copy=function(l,c,E,R){if(!y.isBuffer(l))throw new TypeError("argument should be a Buffer");if(E||(E=0),!R&&R!==0&&(R=this.length),c>=l.length&&(c=l.length),c||(c=0),R>0&&R<E&&(R=E),R===E||l.length===0||this.length===0)return 0;if(c<0)throw new RangeError("targetStart out of bounds");if(E<0||E>=this.length)throw new RangeError("Index out of range");if(R<0)throw new RangeError("sourceEnd out of bounds");R>this.length&&(R=this.length),l.length-c<R-E&&(R=l.length-c+E);let V=R-E;return this===l&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(c,E,R):Uint8Array.prototype.set.call(l,this.subarray(E,R),c),V},y.prototype.fill=function(l,c,E,R){if(typeof l=="string"){if(typeof c=="string"?(R=c,c=0,E=this.length):typeof E=="string"&&(R=E,E=this.length),R!==void 0&&typeof R!="string")throw new TypeError("encoding must be a string");if(typeof R=="string"&&!y.isEncoding(R))throw new TypeError("Unknown encoding: "+R);if(l.length===1){let Z=l.charCodeAt(0);(R==="utf8"&&Z<128||R==="latin1")&&(l=Z)}}else typeof l=="number"?l=l&255:typeof l=="boolean"&&(l=Number(l));if(c<0||this.length<c||this.length<E)throw new RangeError("Out of range index");if(E<=c)return this;c=c>>>0,E=E===void 0?this.length:E>>>0,l||(l=0);let V;if(typeof l=="number")for(V=c;V<E;++V)this[V]=l;else{let Z=y.isBuffer(l)?l:y.from(l,R),Pe=Z.length;if(Pe===0)throw new TypeError('The value "'+l+'" is invalid for argument "value"');for(V=0;V<E-c;++V)this[V+c]=Z[V%Pe]}return this};let Et={};function rr(g,l,c){Et[g]=class extends c{constructor(){super(),Object.defineProperty(this,"message",{value:l.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${g}]`,this.stack,delete this.name}get code(){return g}set code(R){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:R,writable:!0})}toString(){return`${this.name} [${g}]: ${this.message}`}}}rr("ERR_BUFFER_OUT_OF_BOUNDS",function(g){return g?`${g} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),rr("ERR_INVALID_ARG_TYPE",function(g,l){return`The "${g}" argument must be of type number. Received type ${typeof l}`},TypeError),rr("ERR_OUT_OF_RANGE",function(g,l,c){let E=`The value of "${g}" is out of range.`,R=c;return Number.isInteger(c)&&Math.abs(c)>2**32?R=wr(String(c)):typeof c=="bigint"&&(R=String(c),(c>BigInt(2)**BigInt(32)||c<-(BigInt(2)**BigInt(32)))&&(R=wr(R)),R+="n"),E+=` It must be ${l}. Received ${R}`,E},RangeError);function wr(g){let l="",c=g.length,E=g[0]==="-"?1:0;for(;c>=E+4;c-=3)l=`_${g.slice(c-3,c)}${l}`;return`${g.slice(0,c)}${l}`}function Xr(g,l,c){kt(l,"offset"),(g[l]===void 0||g[l+c]===void 0)&&Pt(l,g.length-(c+1))}function qr(g,l,c,E,R,V){if(g>c||g<l){let Z=typeof l=="bigint"?"n":"",Pe;throw V>3?l===0||l===BigInt(0)?Pe=`>= 0${Z} and < 2${Z} ** ${(V+1)*8}${Z}`:Pe=`>= -(2${Z} ** ${(V+1)*8-1}${Z}) and < 2 ** ${(V+1)*8-1}${Z}`:Pe=`>= ${l}${Z} and <= ${c}${Z}`,new Et.ERR_OUT_OF_RANGE("value",Pe,g)}Xr(E,R,V)}function kt(g,l){if(typeof g!="number")throw new Et.ERR_INVALID_ARG_TYPE(l,"number",g)}function Pt(g,l,c){throw Math.floor(g)!==g?(kt(g,c),new Et.ERR_OUT_OF_RANGE(c||"offset","an integer",g)):l<0?new Et.ERR_BUFFER_OUT_OF_BOUNDS:new Et.ERR_OUT_OF_RANGE(c||"offset",`>= ${c?1:0} and <= ${l}`,g)}let Tn=/[^+/0-9A-Za-z-_]/g;function Yr(g){if(g=g.split("=")[0],g=g.trim().replace(Tn,""),g.length<2)return"";for(;g.length%4!==0;)g=g+"=";return g}function dt(g,l){l=l||1/0;let c,E=g.length,R=null,V=[];for(let Z=0;Z<E;++Z){if(c=g.charCodeAt(Z),c>55295&&c<57344){if(!R){if(c>56319){(l-=3)>-1&&V.push(239,191,189);continue}else if(Z+1===E){(l-=3)>-1&&V.push(239,191,189);continue}R=c;continue}if(c<56320){(l-=3)>-1&&V.push(239,191,189),R=c;continue}c=(R-55296<<10|c-56320)+65536}else R&&(l-=3)>-1&&V.push(239,191,189);if(R=null,c<128){if((l-=1)<0)break;V.push(c)}else if(c<2048){if((l-=2)<0)break;V.push(c>>6|192,c&63|128)}else if(c<65536){if((l-=3)<0)break;V.push(c>>12|224,c>>6&63|128,c&63|128)}else if(c<1114112){if((l-=4)<0)break;V.push(c>>18|240,c>>12&63|128,c>>6&63|128,c&63|128)}else throw new Error("Invalid code point")}return V}function nr(g){let l=[];for(let c=0;c<g.length;++c)l.push(g.charCodeAt(c)&255);return l}function Lt(g,l){let c,E,R,V=[];for(let Z=0;Z<g.length&&!((l-=2)<0);++Z)c=g.charCodeAt(Z),E=c>>8,R=c%256,V.push(R),V.push(E);return V}function Zr(g){return f.toByteArray(Yr(g))}function It(g,l,c,E){let R;for(R=0;R<E&&!(R+c>=l.length||R>=g.length);++R)l[R+c]=g[R];return R}function lt(g,l){return g instanceof l||g!=null&&g.constructor!=null&&g.constructor.name!=null&&g.constructor.name===l.name}function yt(g){return g!==g}let en=function(){let g="0123456789abcdef",l=new Array(256);for(let c=0;c<16;++c){let E=c*16;for(let R=0;R<16;++R)l[E+R]=g[c]+g[R]}return l}();function mt(g){return typeof BigInt>"u"?kn:g}function kn(){throw new Error("BigInt not supported")}return Bt}var ar,ns,Ir,is,Bt,ss,Dt,Ne,V_,$_,os=or(()=>{we();Ee();qe();ar={},ns=!1;Ir={},is=!1;Bt={},ss=!1;Dt=Kf();Dt.Buffer;Dt.SlowBuffer;Dt.INSPECT_MAX_BYTES;Dt.kMaxLength;Ne=Dt.Buffer,V_=Dt.INSPECT_MAX_BYTES,$_=Dt.kMaxLength});var Ee=or(()=>{os()});var Ss=Wf(yn=>{we();Ee();qe();yn.read=function(f,s,u,r,w){var F,y,D=w*8-r-1,Y=(1<<D)-1,ae=Y>>1,ne=-7,ee=u?w-1:0,de=u?-1:1,ce=f[s+ee];for(ee+=de,F=ce&(1<<-ne)-1,ce>>=-ne,ne+=D;ne>0;F=F*256+f[s+ee],ee+=de,ne-=8);for(y=F&(1<<-ne)-1,F>>=-ne,ne+=r;ne>0;y=y*256+f[s+ee],ee+=de,ne-=8);if(F===0)F=1-ae;else{if(F===Y)return y?NaN:(ce?-1:1)*(1/0);y=y+Math.pow(2,r),F=F-ae}return(ce?-1:1)*y*Math.pow(2,F-r)};yn.write=function(f,s,u,r,w,F){var y,D,Y,ae=F*8-w-1,ne=(1<<ae)-1,ee=ne>>1,de=w===23?Math.pow(2,-24)-Math.pow(2,-77):0,ce=r?0:F-1,xe=r?1:-1,Te=s<0||s===0&&1/s<0?1:0;for(s=Math.abs(s),isNaN(s)||s===1/0?(D=isNaN(s)?1:0,y=ne):(y=Math.floor(Math.log(s)/Math.LN2),s*(Y=Math.pow(2,-y))<1&&(y--,Y*=2),y+ee>=1?s+=de/Y:s+=de*Math.pow(2,1-ee),s*Y>=2&&(y++,Y/=2),y+ee>=ne?(D=0,y=ne):y+ee>=1?(D=(s*Y-1)*Math.pow(2,w),y=y+ee):(D=s*Math.pow(2,ee-1)*Math.pow(2,w),y=0));w>=8;f[u+ce]=D&255,ce+=xe,D/=256,w-=8);for(y=y<<w|D,ae+=w;ae>0;f[u+ce]=y&255,ce+=xe,y/=256,ae-=8);f[u+ce-xe]|=Te*128}});we();Ee();qe();we();Ee();qe();var Y_=globalThis.Worker,Z_=globalThis.MessageChannel,ep=globalThis.MessagePort,tp=globalThis.BroadcastChannel,as=globalThis;we();Ee();qe();we();Ee();qe();we();Ee();qe();var lr=Symbol("Caplink.messageChannel"),fn=Symbol("Caplink.adaptNative"),_n=Symbol("Caplink.toNative");var ps=Symbol("Caplink.proxy"),fr=Symbol("Caplink.endpoint"),ls=Symbol("Caplink.releaseProxy"),pn=Symbol("Caplink.finalizer");var Or=Symbol("Caplink.thrown"),Jf=f=>typeof f=="object"&&f!==null,ds=f=>typeof f=="object"&&f!==null||typeof f=="function",cs=f=>"Worker"in globalThis&&f instanceof globalThis.Worker||"MessagePort"in globalThis&&f instanceof globalThis.MessagePort,Xf=f=>ds(f)&&_n in f,Yf={canHandle:f=>ps in f||fr in f,serialize(f,s){let u;if(fr in f)u=f[fr](),cs(s)&&Xf(u)?u=u[_n]():s[fn]&&cs(u)&&(u=s[fn](u));else{let{port1:r,port2:w}=new(s[lr]??MessageChannel);Dr(f,r),u=w}return[u,[u]]},deserialize(f){return f.start(),o_(f)}},_r=new WeakMap,Zf={canHandle:f=>Or in f,serialize({value:f}){return[f,[]]},deserialize(f){if(f instanceof Error){if(!f.stack||!f.stack.startsWith("    at"))throw f;Object.defineProperty(f,"stack",{value:`Error: ${f.message}
${f.stack}`})}throw f}},Br=new Map([["proxy",Yf],["throw",Zf]]);function e_(f,s){for(let u of f)if(s===u||u==="*"||u instanceof RegExp&&u.test(s))return!0;return!1}function t_(f){return Jf(f)&&"type"in f&&"id"in f}var Pr=new WeakMap;async function us(f){let s=(Pr.get(f)||0)-1;Pr.set(f,s),s===0&&("dispose"in Symbol&&Symbol.dispose in f&&f[Symbol.dispose](),"asyncDispose"in Symbol&&Symbol.asyncDispose in f&&await f[Symbol.asyncDispose](),pn in f&&typeof f[pn]=="function"&&f[pn]())}var fs=new WeakSet;function Dr(f,s=globalThis,u=["*"]){if(fs.has(s))throw Error("Endpoint is already exposing another object and cannot be reused.");fs.add(s),Pr.set(f,(Pr.get(f)||0)+1),s.addEventListener("message",async function w(F){let y=f;if(!F||!F.data||!t_(F.data))return;if(!e_(u,F.origin)){console.warn(`Invalid origin '${F.origin}' for caplink proxy`);return}let{data:D}=F,{id:Y,type:ae}=D,ne;try{switch(ae){case"GET":ne=D.path.reduce((de,ce)=>de[ce],y);break;case"SET":{let ee=D.path.slice(0,-1).reduce((de,ce)=>de[ce],y);ee[D.path.slice(-1)[0]]=Ct.call(s,D.value),ne=!0}break;case"APPLY":{let ee=D.path.slice(0,-1).reduce((xe,Te)=>xe[Te],y),de=D.path.reduce((xe,Te)=>xe[Te],y),ce=D.argumentList.map(Ct,s);ne=de.apply(ee,ce)}break;case"CONSTRUCT":{let ee=D.path.reduce((xe,Te)=>xe[Te],y),de=D.argumentList.map(Ct,s),ce=new ee(...de);ne=mn(ce)}break;case"ENDPOINT":Dr(y,D.value),ne=void 0;break;case"RELEASE":ne=void 0,us(y);break;default:return}}catch(ee){ne={value:ee,[Or]:0}}try{ne=await ne}catch(ee){ne={value:ee,[Or]:0}}try{let[ee,de]=Rr.call(s,ne);ee.id=Y,(F.source??s).postMessage(ee,{transfer:de})}catch(ee){console.error(ee);let[de,ce]=Rr.call(s,{value:new TypeError("Unserializable return value"),[Or]:0});de.id=Y,(F.source??s).postMessage(de,{transfer:ce})}finally{ae==="RELEASE"&&(s.removeEventListener("message",w),s.removeEventListener("close",r),s.removeEventListener("error",r),i_(s))}});let r=()=>{us(f),s.removeEventListener("close",r),s.removeEventListener("error",r)};s.addEventListener("close",r),s.addEventListener("error",r),s.start?.()}function ms(f){return"close"in f&&typeof f.close=="function"}function r_(f){return"terminate"in f&&typeof f.terminate=="function"}function n_(f){return"dispose"in Symbol&&Symbol.dispose in f&&f[Symbol.dispose]!=null}function i_(f){ms(f)&&f.close()}function s_(f,s=!1){s?n_(f)?f[Symbol.dispose]():r_(f)&&f.terminate():ms(f)&&f.close()}function o_(f,s,u={}){return dn(f,[],s,u)}function cr(f){if(f)throw new Error("Proxy has been released and is not useable"+(typeof f=="string"?`: ${f}`:""),f instanceof Error?{cause:f}:{})}async function ur(f,s=!1,u=!1){if(_r.has(f)){let{resolvers:r,messageHandler:w}=_r.get(f);try{let F=!s&&Gt(f,{type:"RELEASE"});_r.delete(f),await F}finally{r.forEach(({reject:F})=>F(new DOMException("Cancelled due to endpoint release","AbortError"))),r.clear(),f.removeEventListener("message",w),s_(f,u)}}}async function a_([f,s]){let u=(Lr.get(f)||0)-1;Lr.set(f,u),u===0&&await ur(f,void 0,s)}var Lr=new WeakMap,hs="FinalizationRegistry"in globalThis?new FinalizationRegistry(a_):void 0;function l_(f,[s,u]){let r=(Lr.get(s)||0)+1;Lr.set(s,r),hs?.register(f,[s,u],f)}function Fr(f){hs?.unregister(f)}function dn(f,s=[],u=function(){},{owned:r=!1}={}){let w=!1,F=new Proxy(u,{get(y,D){if(D===Symbol.dispose||D===ls)return()=>{w=!0,Fr(F),ur(f,!1,r).catch(()=>{})};if(D===Symbol.asyncDispose)return async()=>{w=!0,Fr(F),await ur(f,!1,r)};if(cr(w),D==="then"){if(s.length===0)return{then:()=>F};let Y=Gt(f,{type:"GET",path:s.map(ae=>ae.toString())}).then(Ct.bind(f));return Y.then.bind(Y)}return dn(f,[...s,D])},set(y,D,Y){cr(w);let[ae,ne]=Rr.call(f,Y);return Gt(f,{type:"SET",path:[...s,D].map(ee=>ee.toString()),value:ae},ne).then(Ct.bind(f))},apply(y,D,Y){cr(w);let ae=s[s.length-1];if(ae===fr){let{port1:de,port2:ce}=new(f[lr]??MessageChannel);return Gt(f,{type:"ENDPOINT",value:ce},[ce]).catch(()=>{de.close()}),de}if(ae==="bind")return dn(f,s.slice(0,-1));ae==="call"&&(s=s.slice(0,-1),Y=Y.slice(1)),ae==="apply"&&(s=s.slice(0,-1),Y=Y[1]);let[ne,ee]=_s(Y,f);return Gt(f,{type:"APPLY",path:s.map(de=>de.toString()),argumentList:ne},ee).then(Ct.bind(f))},construct(y,D){cr(w);let[Y,ae]=_s(D,f);return Gt(f,{type:"CONSTRUCT",path:s.map(ne=>ne.toString()),argumentList:Y},ae).then(Ct.bind(f))},has(y,D){return cr(w),D===Symbol.dispose||D===ls||D===Symbol.asyncDispose||D===fr||D==="then"}});return f.addEventListener("close",async y=>{w=y.reason??"closed",Fr(F),await ur(f,!0,r)}),f.addEventListener("error",async y=>{w=y.error instanceof Error?y.error:"errored",Fr(F),await ur(f,!0,r)}),l_(F,[f,r]),F}var c_="flat"in Array.prototype?f=>f.flat():f=>Array.prototype.concat.apply([],f);function _s(f,s){let u=f.map(Rr,s);return[u.map(r=>r[0]),c_(u.map(r=>r[1]))]}var gs=new WeakMap;function pr(f,s){return gs.set(f,s),f}function mn(f){let s=f;return s[ps]=!0,s}function Rr(f){if(ds(f)){for(let[s,u]of Br)if(u.canHandle(f,this)){let[r,w]=u.serialize(f,this);return[{type:"HANDLER",name:s,value:r},w]}}return[{type:"RAW",value:f},gs.get(f)||[]]}function Ct(f){switch(f.type){case"HANDLER":return Br.get(f.name).deserialize(f.value,this);case"RAW":return f.value}}var u_=f=>s=>{let{data:u}=s;if(!u?.id)return;let r=f.get(u.id);r&&(f.delete(u.id),r.resolve(u))};function Gt(f,s,u){return new Promise((r,w)=>{let F=_r.get(f)?.resolvers;if(!F){F=new Map;let D=u_(F);_r.set(f,{resolvers:F,messageHandler:D}),f.addEventListener("message",D),f.start?.()}let y=f_();s.id=y,F.set(y,{resolve:r,reject:w}),f.postMessage(s,u)})}function f_(){return Math.random()*2**32>>>0}var p_="FinalizationRegistry"in globalThis?new FinalizationRegistry(async f=>{f.postMessage(null),f.close()}):void 0,d_=new AbortController().signal;Br.set("abortsignal",{canHandle(f){return f instanceof AbortSignal||f?.constructor?.name==="AbortSignal"},serialize(f,s){if(f.aborted)return[{aborted:!0},[]];let{port1:u,port2:r}=new(s[lr]??MessageChannel);return f.addEventListener("abort",()=>u.postMessage({reason:f.reason}),{once:!0}),u.addEventListener("message",()=>{}),p_?.register(f,u),[{aborted:!1,port:r},[r]]},deserialize({aborted:f,port:s}){if(f)return AbortSignal.abort();if(!s)return d_;let u=new AbortController;return s.addEventListener("message",r=>{r.data&&"reason"in r.data&&u.abort(r.data.reason),s.close()},{once:!0}),s.start(),u.signal}});we();Ee();qe();var m_=f=>s=>{"handleEvent"in f?f.handleEvent({data:s}):f({data:s})};function hn(f){if(!("on"in f)||!("off"in f))return f;let s=new WeakMap;return{postMessage:f.postMessage.bind(f),addEventListener:(u,r)=>{let w=m_(r);f.on(u,w),s.set(r,w)},removeEventListener:(u,r)=>{let w=s.get(r);w&&(f.off(u,w),s.delete(r))},...f.start&&{start:f.start.bind(f)}}}we();Ee();qe();we();Ee();qe();function xs(f){let s=f.reduce((w,F)=>w+F.length,0),u=new Uint8Array(s),r=0;for(let w of f)u.set(w,r),r+=w.length;return u}we();Ee();qe();var Mt=new Map,bt=new Map,bs=(f,s)=>({io:g_(f.wasm,f.capi),vfs:h_(f.wasm,f.capi,s)}),ws=2**20,Cr=2**30,qs=200*ws;function Es(f,s,u,{maxFileSize:r=200*ws}={}){let w=new ArrayBuffer(s.byteLength,{maxByteLength:Math.min(r,4*Cr)||4*Cr}),F=new Uint8Array(w);qs=r,F.set(s),Mt.set(f,{name:f,flags:0,size:s.byteLength,data:F,lockType:0}),u&&Mt.set(`${f}-wal`,{name:`${f}-wal`,flags:0,size:u.byteLength,data:u,lockType:0})}var h_=(f,s,u)=>({xOpen:(r,w,F,y,D)=>{let Y=f.cstrToJs(w);Y||=Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(36);let ae=Mt.get(Y);if(!ae)if(y&s.SQLITE_OPEN_CREATE){let ee=new ArrayBuffer(0,{maxByteLength:Math.min(qs,4*Cr)||4*Cr});ae={name:Y,flags:y,size:0,data:new Uint8Array(ee),lockType:s.SQLITE_LOCK_NONE},Mt.set(Y,ae)}else return s.SQLITE_CANTOPEN;let ne=new s.sqlite3_file(F);return ne.$pMethods=u.pointer,ne.dispose(),bt.set(F,ae),f.poke32(D,y),s.SQLITE_OK},xDelete:(r,w,F)=>{let y=f.cstrToJs(w);return Mt.delete(y),s.SQLITE_OK},xAccess:(r,w,F,y)=>{let D=f.cstrToJs(w),Y=Mt.has(D);return f.poke32(y,Y?1:0),s.SQLITE_OK},xFullPathname:(r,w,F,y)=>f.cstrncpy(y,w,F)<F?s.SQLITE_OK:s.SQLITE_CANTOPEN,xRandomness:(r,w,F)=>{let y=f.heap8u(),D=0;for(;D<w;++D)y[F+D]=Math.random()*255e3&255;return D},xSleep:(r,w)=>s.SQLITE_OK,xCurrentTime:(r,w)=>(f.poke(w,24405875e-1+new Date().getTime()/864e5,"double"),s.SQLITE_OK),xGetLastError:()=>(console.warn("OPFS xGetLastError() has nothing sensible to return."),s.SQLITE_OK)}),g_=(f,s)=>({xClose:u=>{let r=bt.get(u);return bt.delete(u),r.flags&s.SQLITE_OPEN_DELETEONCLOSE&&Mt.delete(r.name),s.SQLITE_OK},xRead:(u,r,w,F)=>{let y=bt.get(u),D=Number(F),Y=y.data.subarray(D,D+w);return f.heap8u().set(Y,r),Y.byteLength<w?(f.heap8u().fill(0,r+Y.byteLength,r+w),s.SQLITE_IOERR_SHORT_READ):s.SQLITE_OK},xWrite:(u,r,w,F)=>{let y=bt.get(u),D=Number(F);if(D+w>y.data.byteLength)if(y.data.buffer.resizable)y.data.buffer.resize(D+w);else{let ae=Math.max(D+w,2*y.data.byteLength),ne=new Uint8Array(ae);ne.set(y.data),y.data=ne}let Y=f.heap8u().subarray(r,r+w);return y.data.set(Y,D),y.size=Math.max(y.size,D+w),s.SQLITE_OK},xTruncate:(u,r)=>{let w=bt.get(u),F=Number(r);return w.size=Math.min(w.size,F),w.data.buffer.resizable&&w.data.buffer.resize(F),s.SQLITE_OK},xSync:(u,r)=>s.SQLITE_OK,xFileSize:(u,r)=>{let w=bt.get(u);return f.poke64(r,BigInt(w.size)),s.SQLITE_OK},xLock:(u,r)=>{let w=bt.get(u);return w.lockType=r,s.SQLITE_OK},xUnlock:(u,r)=>{let w=bt.get(u);return w.lockType=r,s.SQLITE_OK},xCheckReservedLock:(u,r)=>{let w=bt.get(u);return f.poke(r,w.lockType?1:0,"i32"),s.SQLITE_OK},xFileControl:(u,r,w)=>s.SQLITE_NOTFOUND,xSectorSize:u=>4096,xDeviceCharacteristics:u=>s.SQLITE_IOCAP_UNDELETABLE_WHEN_OPEN});we();Ee();qe();var gn=(()=>{var f="";return function(s={}){var u,r=s,w,F,y=new Promise((e,t)=>{w=e,F=t}),D=typeof window=="object",Y=typeof importScripts=="function",ae=typeof De=="object"&&typeof De.versions=="object"&&typeof De.versions.node=="string"&&De.type!="renderer",ne=!D&&!ae&&!Y;let ee=globalThis.sqlite3InitModuleState||Object.assign(Object.create(null),{debugModule:()=>{}});delete globalThis.sqlite3InitModuleState,ee.debugModule("globalThis.location =",globalThis.location);var de=Object.assign({},r),ce=[],xe="./this.program",Te=(e,t)=>{throw t},Re="";function Ze(e){return r.locateFile?r.locateFile(e,Re):Re+e}var Me,Ke;(D||Y)&&(Y?Re=self.location.href:typeof document<"u"&&document.currentScript&&(Re=document.currentScript.src),f&&(Re=f),Re.startsWith("blob:")?Re="":Re=Re.substr(0,Re.replace(/[?#].*/,"").lastIndexOf("/")+1),Y&&(Ke=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),Me=e=>fetch(e,{credentials:"same-origin"}).then(t=>t.ok?t.arrayBuffer():Promise.reject(new Error(t.status+" : "+t.url))));var et=r.print||console.log.bind(console),je=r.printErr||console.error.bind(console);Object.assign(r,de),de=null,r.arguments&&(ce=r.arguments),r.thisProgram&&(xe=r.thisProgram);var ht=r.wasmBinary,pt,Wt=!1,yr;function xr(e,t){e||yt(t)}var An,rt,qt,gt,Kr,Ce,tt,Yt,ft,nt,st;function Zt(){var e=pt.buffer;r.HEAP8=rt=new Int8Array(e),r.HEAP16=gt=new Int16Array(e),r.HEAPU8=qt=new Uint8Array(e),r.HEAPU16=Kr=new Uint16Array(e),r.HEAP32=Ce=new Int32Array(e),r.HEAPU32=tt=new Uint32Array(e),r.HEAPF32=Yt=new Float32Array(e),r.HEAPF64=st=new Float64Array(e),r.HEAP64=ft=new BigInt64Array(e),r.HEAPU64=nt=new BigUint64Array(e)}if(r.wasmMemory)pt=r.wasmMemory;else{var br=r.INITIAL_MEMORY||16777216;pt=new WebAssembly.Memory({initial:br/65536,maximum:32768})}Zt();var er=[],tr=[],Jr=[],Et=[],rr=!1;function wr(){if(r.preRun)for(typeof r.preRun=="function"&&(r.preRun=[r.preRun]);r.preRun.length;)kt(r.preRun.shift());ze(er)}function Xr(){rr=!0,!r.noFSInit&&!p.initialized&&p.init(),p.ignorePermissions=!1,Ft.init(),ze(tr)}function qr(){if(r.postRun)for(typeof r.postRun=="function"&&(r.postRun=[r.postRun]);r.postRun.length;)Yr(r.postRun.shift());ze(Et)}function kt(e){er.unshift(e)}function Pt(e){tr.unshift(e)}function Tn(e){}function Yr(e){Et.unshift(e)}var dt=0,nr=null,Lt=null;function Zr(e){return e}function It(e){dt++,r.monitorRunDependencies?.(dt)}function lt(e){if(dt--,r.monitorRunDependencies?.(dt),dt==0&&(nr!==null&&(clearInterval(nr),nr=null),Lt)){var t=Lt;Lt=null,t()}}function yt(e){r.onAbort?.(e),e="Aborted("+e+")",je(e),Wt=!0,e+=". Build with -sASSERTIONS for more info.";var t=new WebAssembly.RuntimeError(e);throw F(t),t}var en="data:application/octet-stream;base64,",mt=e=>e.startsWith(en),kn=e=>e.startsWith("file://");function g(){if(r.locateFile){var e="sqlite3.wasm";return mt(e)?e:Ze(e)}return new URL("sqlite3.wasm","file:./sqlite-viewer-core/vscode/build/assets/").href}var l;function c(e){if(e==l&&ht)return new Uint8Array(ht);if(Ke)return Ke(e);throw"both async and sync fetching of the wasm failed"}function E(e){return ht?Promise.resolve().then(()=>c(e)):Me(e).then(t=>new Uint8Array(t),()=>c(e))}function R(e,t,n){return E(e).then(a=>WebAssembly.instantiate(a,t)).then(n,a=>{je(`failed to asynchronously prepare wasm: ${a}`),yt(a)})}function V(e,t,n,a){return!e&&typeof WebAssembly.instantiateStreaming=="function"&&!mt(t)&&typeof fetch=="function"?fetch(t,{credentials:"same-origin"}).then(i=>{var o=WebAssembly.instantiateStreaming(i,n);return o.then(a,function(q){return je(`wasm streaming compile failed: ${q}`),je("falling back to ArrayBuffer instantiation"),R(t,n,a)})}):R(t,n,a)}function Z(){return{env:Bn,wasi_snapshot_preview1:Bn}}function Pe(){var e=Z();function t(a,i){return S=a.exports,Pt(S.__wasm_call_ctors),lt("wasm-instantiate"),S}It("wasm-instantiate");function n(a){t(a.instance)}if(r.instantiateWasm)try{return r.instantiateWasm(e,t)}catch(a){je(`Module.instantiateWasm callback failed with error: ${a}`),F(a)}return l??=g(),V(ht,l,e,n).catch(F),{}}function Je(e){this.name="ExitStatus",this.message=`Program terminated with exit(${e})`,this.status=e}var ze=e=>{for(;e.length>0;)e.shift()(r)};function Xe(e,t="i8"){switch(t.endsWith("*")&&(t="*"),t){case"i1":return rt[e];case"i8":return rt[e];case"i16":return gt[e>>1];case"i32":return Ce[e>>2];case"i64":return ft[e>>3];case"float":return Yt[e>>2];case"double":return st[e>>3];case"*":return tt[e>>2];default:yt(`invalid type for getValue: ${t}`)}}var Ve=r.noExitRuntime||!0;function R_(e,t,n="i8"){switch(n.endsWith("*")&&(n="*"),n){case"i1":rt[e]=t;break;case"i8":rt[e]=t;break;case"i16":gt[e>>1]=t;break;case"i32":Ce[e>>2]=t;break;case"i64":ft[e>>3]=BigInt(t);break;case"float":Yt[e>>2]=t;break;case"double":st[e>>3]=t;break;case"*":tt[e>>2]=t;break;default:yt(`invalid type for setValue: ${n}`)}}var B_=e=>Cn(e),D_=()=>Mn(),$e={isAbs:e=>e.charAt(0)==="/",splitPath:e=>{var t=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return t.exec(e).slice(1)},normalizeArray:(e,t)=>{for(var n=0,a=e.length-1;a>=0;a--){var i=e[a];i==="."?e.splice(a,1):i===".."?(e.splice(a,1),n++):n&&(e.splice(a,1),n--)}if(t)for(;n;n--)e.unshift("..");return e},normalize:e=>{var t=$e.isAbs(e),n=e.substr(-1)==="/";return e=$e.normalizeArray(e.split("/").filter(a=>!!a),!t).join("/"),!e&&!t&&(e="."),e&&n&&(e+="/"),(t?"/":"")+e},dirname:e=>{var t=$e.splitPath(e),n=t[0],a=t[1];return!n&&!a?".":(a&&(a=a.substr(0,a.length-1)),n+a)},basename:e=>{if(e==="/")return"/";e=$e.normalize(e),e=e.replace(/\/$/,"");var t=e.lastIndexOf("/");return t===-1?e:e.substr(t+1)},join:(...e)=>$e.normalize(e.join("/")),join2:(e,t)=>$e.normalize(e+"/"+t)},Xs=()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return e=>crypto.getRandomValues(e);yt("initRandomDevice")},In=e=>(In=Xs())(e),vt={resolve:(...e)=>{for(var t="",n=!1,a=e.length-1;a>=-1&&!n;a--){var i=a>=0?e[a]:p.cwd();if(typeof i!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!i)return"";t=i+"/"+t,n=$e.isAbs(i)}return t=$e.normalizeArray(t.split("/").filter(o=>!!o),!n).join("/"),(n?"/":"")+t||"."},relative:(e,t)=>{e=vt.resolve(e).substr(1),t=vt.resolve(t).substr(1);function n(G){for(var oe=0;oe<G.length&&G[oe]==="";oe++);for(var se=G.length-1;se>=0&&G[se]==="";se--);return oe>se?[]:G.slice(oe,se-oe+1)}for(var a=n(e.split("/")),i=n(t.split("/")),o=Math.min(a.length,i.length),q=o,A=0;A<o;A++)if(a[A]!==i[A]){q=A;break}for(var $=[],A=q;A<a.length;A++)$.push("..");return $=$.concat(i.slice(q)),$.join("/")}},Fn=typeof TextDecoder<"u"?new TextDecoder:void 0,zt=(e,t,n)=>{for(var a=t+n,i=t;e[i]&&!(i>=a);)++i;if(i-t>16&&e.buffer&&Fn)return Fn.decode(e.subarray(t,i));for(var o="";t<i;){var q=e[t++];if(!(q&128)){o+=String.fromCharCode(q);continue}var A=e[t++]&63;if((q&224)==192){o+=String.fromCharCode((q&31)<<6|A);continue}var $=e[t++]&63;if((q&240)==224?q=(q&15)<<12|A<<6|$:q=(q&7)<<18|A<<12|$<<6|e[t++]&63,q<65536)o+=String.fromCharCode(q);else{var G=q-65536;o+=String.fromCharCode(55296|G>>10,56320|G&1023)}}return o},tn=[],Er=e=>{for(var t=0,n=0;n<e.length;++n){var a=e.charCodeAt(n);a<=127?t++:a<=2047?t+=2:a>=55296&&a<=57343?(t+=4,++n):t+=3}return t},rn=(e,t,n,a)=>{if(!(a>0))return 0;for(var i=n,o=n+a-1,q=0;q<e.length;++q){var A=e.charCodeAt(q);if(A>=55296&&A<=57343){var $=e.charCodeAt(++q);A=65536+((A&1023)<<10)|$&1023}if(A<=127){if(n>=o)break;t[n++]=A}else if(A<=2047){if(n+1>=o)break;t[n++]=192|A>>6,t[n++]=128|A&63}else if(A<=65535){if(n+2>=o)break;t[n++]=224|A>>12,t[n++]=128|A>>6&63,t[n++]=128|A&63}else{if(n+3>=o)break;t[n++]=240|A>>18,t[n++]=128|A>>12&63,t[n++]=128|A>>6&63,t[n++]=128|A&63}}return t[n]=0,n-i};function On(e,t,n){var a=n>0?n:Er(e)+1,i=new Array(a),o=rn(e,i,0,i.length);return t&&(i.length=o),i}var Ys=()=>{if(!tn.length){var e=null;if(typeof window<"u"&&typeof window.prompt=="function"&&(e=window.prompt("Input: "),e!==null&&(e+=`
`)),!e)return null;tn=On(e,!0)}return tn.shift()},Ft={ttys:[],init(){},shutdown(){},register(e,t){Ft.ttys[e]={input:[],output:[],ops:t},p.registerDevice(e,Ft.stream_ops)},stream_ops:{open(e){var t=Ft.ttys[e.node.rdev];if(!t)throw new p.ErrnoError(43);e.tty=t,e.seekable=!1},close(e){e.tty.ops.fsync(e.tty)},fsync(e){e.tty.ops.fsync(e.tty)},read(e,t,n,a,i){if(!e.tty||!e.tty.ops.get_char)throw new p.ErrnoError(60);for(var o=0,q=0;q<a;q++){var A;try{A=e.tty.ops.get_char(e.tty)}catch{throw new p.ErrnoError(29)}if(A===void 0&&o===0)throw new p.ErrnoError(6);if(A==null)break;o++,t[n+q]=A}return o&&(e.node.timestamp=Date.now()),o},write(e,t,n,a,i){if(!e.tty||!e.tty.ops.put_char)throw new p.ErrnoError(60);try{for(var o=0;o<a;o++)e.tty.ops.put_char(e.tty,t[n+o])}catch{throw new p.ErrnoError(29)}return a&&(e.node.timestamp=Date.now()),o}},default_tty_ops:{get_char(e){return Ys()},put_char(e,t){t===null||t===10?(et(zt(e.output,0)),e.output=[]):t!=0&&e.output.push(t)},fsync(e){e.output&&e.output.length>0&&(et(zt(e.output,0)),e.output=[])},ioctl_tcgets(e){return{c_iflag:25856,c_oflag:5,c_cflag:191,c_lflag:35387,c_cc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},ioctl_tcsets(e,t,n){return 0},ioctl_tiocgwinsz(e){return[24,80]}},default_tty1_ops:{put_char(e,t){t===null||t===10?(je(zt(e.output,0)),e.output=[]):t!=0&&e.output.push(t)},fsync(e){e.output&&e.output.length>0&&(je(zt(e.output,0)),e.output=[])}}},Zs=(e,t)=>(qt.fill(0,e,e+t),e),Pn=(e,t)=>Math.ceil(e/t)*t,Ln=e=>{e=Pn(e,65536);var t=Dn(65536,e);return t?Zs(t,e):0},Oe={ops_table:null,mount(e){return Oe.createNode(null,"/",16895,0)},createNode(e,t,n,a){if(p.isBlkdev(n)||p.isFIFO(n))throw new p.ErrnoError(63);Oe.ops_table||={dir:{node:{getattr:Oe.node_ops.getattr,setattr:Oe.node_ops.setattr,lookup:Oe.node_ops.lookup,mknod:Oe.node_ops.mknod,rename:Oe.node_ops.rename,unlink:Oe.node_ops.unlink,rmdir:Oe.node_ops.rmdir,readdir:Oe.node_ops.readdir,symlink:Oe.node_ops.symlink},stream:{llseek:Oe.stream_ops.llseek}},file:{node:{getattr:Oe.node_ops.getattr,setattr:Oe.node_ops.setattr},stream:{llseek:Oe.stream_ops.llseek,read:Oe.stream_ops.read,write:Oe.stream_ops.write,allocate:Oe.stream_ops.allocate,mmap:Oe.stream_ops.mmap,msync:Oe.stream_ops.msync}},link:{node:{getattr:Oe.node_ops.getattr,setattr:Oe.node_ops.setattr,readlink:Oe.node_ops.readlink},stream:{}},chrdev:{node:{getattr:Oe.node_ops.getattr,setattr:Oe.node_ops.setattr},stream:p.chrdev_stream_ops}};var i=p.createNode(e,t,n,a);return p.isDir(i.mode)?(i.node_ops=Oe.ops_table.dir.node,i.stream_ops=Oe.ops_table.dir.stream,i.contents={}):p.isFile(i.mode)?(i.node_ops=Oe.ops_table.file.node,i.stream_ops=Oe.ops_table.file.stream,i.usedBytes=0,i.contents=null):p.isLink(i.mode)?(i.node_ops=Oe.ops_table.link.node,i.stream_ops=Oe.ops_table.link.stream):p.isChrdev(i.mode)&&(i.node_ops=Oe.ops_table.chrdev.node,i.stream_ops=Oe.ops_table.chrdev.stream),i.timestamp=Date.now(),e&&(e.contents[t]=i,e.timestamp=i.timestamp),i},getFileDataAsTypedArray(e){return e.contents?e.contents.subarray?e.contents.subarray(0,e.usedBytes):new Uint8Array(e.contents):new Uint8Array(0)},expandFileStorage(e,t){var n=e.contents?e.contents.length:0;if(!(n>=t)){var a=1024*1024;t=Math.max(t,n*(n<a?2:1.125)>>>0),n!=0&&(t=Math.max(t,256));var i=e.contents;e.contents=new Uint8Array(t),e.usedBytes>0&&e.contents.set(i.subarray(0,e.usedBytes),0)}},resizeFileStorage(e,t){if(e.usedBytes!=t)if(t==0)e.contents=null,e.usedBytes=0;else{var n=e.contents;e.contents=new Uint8Array(t),n&&e.contents.set(n.subarray(0,Math.min(t,e.usedBytes))),e.usedBytes=t}},node_ops:{getattr(e){var t={};return t.dev=p.isChrdev(e.mode)?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,p.isDir(e.mode)?t.size=4096:p.isFile(e.mode)?t.size=e.usedBytes:p.isLink(e.mode)?t.size=e.link.length:t.size=0,t.atime=new Date(e.timestamp),t.mtime=new Date(e.timestamp),t.ctime=new Date(e.timestamp),t.blksize=4096,t.blocks=Math.ceil(t.size/t.blksize),t},setattr(e,t){t.mode!==void 0&&(e.mode=t.mode),t.timestamp!==void 0&&(e.timestamp=t.timestamp),t.size!==void 0&&Oe.resizeFileStorage(e,t.size)},lookup(e,t){throw p.genericErrors[44]},mknod(e,t,n,a){return Oe.createNode(e,t,n,a)},rename(e,t,n){if(p.isDir(e.mode)){var a;try{a=p.lookupNode(t,n)}catch{}if(a)for(var i in a.contents)throw new p.ErrnoError(55)}delete e.parent.contents[e.name],e.parent.timestamp=Date.now(),e.name=n,t.contents[n]=e,t.timestamp=e.parent.timestamp},unlink(e,t){delete e.contents[t],e.timestamp=Date.now()},rmdir(e,t){var n=p.lookupNode(e,t);for(var a in n.contents)throw new p.ErrnoError(55);delete e.contents[t],e.timestamp=Date.now()},readdir(e){var t=[".",".."];for(var n of Object.keys(e.contents))t.push(n);return t},symlink(e,t,n){var a=Oe.createNode(e,t,41471,0);return a.link=n,a},readlink(e){if(!p.isLink(e.mode))throw new p.ErrnoError(28);return e.link}},stream_ops:{read(e,t,n,a,i){var o=e.node.contents;if(i>=e.node.usedBytes)return 0;var q=Math.min(e.node.usedBytes-i,a);if(q>8&&o.subarray)t.set(o.subarray(i,i+q),n);else for(var A=0;A<q;A++)t[n+A]=o[i+A];return q},write(e,t,n,a,i,o){if(t.buffer===rt.buffer&&(o=!1),!a)return 0;var q=e.node;if(q.timestamp=Date.now(),t.subarray&&(!q.contents||q.contents.subarray)){if(o)return q.contents=t.subarray(n,n+a),q.usedBytes=a,a;if(q.usedBytes===0&&i===0)return q.contents=t.slice(n,n+a),q.usedBytes=a,a;if(i+a<=q.usedBytes)return q.contents.set(t.subarray(n,n+a),i),a}if(Oe.expandFileStorage(q,i+a),q.contents.subarray&&t.subarray)q.contents.set(t.subarray(n,n+a),i);else for(var A=0;A<a;A++)q.contents[i+A]=t[n+A];return q.usedBytes=Math.max(q.usedBytes,i+a),a},llseek(e,t,n){var a=t;if(n===1?a+=e.position:n===2&&p.isFile(e.node.mode)&&(a+=e.node.usedBytes),a<0)throw new p.ErrnoError(28);return a},allocate(e,t,n){Oe.expandFileStorage(e.node,t+n),e.node.usedBytes=Math.max(e.node.usedBytes,t+n)},mmap(e,t,n,a,i){if(!p.isFile(e.node.mode))throw new p.ErrnoError(43);var o,q,A=e.node.contents;if(!(i&2)&&A&&A.buffer===rt.buffer)q=!1,o=A.byteOffset;else{if(q=!0,o=Ln(t),!o)throw new p.ErrnoError(48);A&&((n>0||n+t<A.length)&&(A.subarray?A=A.subarray(n,n+t):A=Array.prototype.slice.call(A,n,n+t)),rt.set(A,o))}return{ptr:o,allocated:q}},msync(e,t,n,a,i){return Oe.stream_ops.write(e,t,0,a,n,!1),0}}},eo=(e,t,n,a)=>{var i=a?"":`al ${e}`;Me(e).then(o=>{t(new Uint8Array(o)),i&&lt(i)},o=>{if(n)n();else throw`Loading data file "${e}" failed.`}),i&&It(i)},to=(e,t,n,a,i,o)=>{p.createDataFile(e,t,n,a,i,o)},ro=r.preloadPlugins||[],no=(e,t,n,a)=>{typeof Browser<"u"&&Browser.init();var i=!1;return ro.forEach(o=>{i||o.canHandle(t)&&(o.handle(e,t,n,a),i=!0)}),i},io=(e,t,n,a,i,o,q,A,$,G)=>{var oe=t?vt.resolve($e.join2(e,t)):e,se=`cp ${oe}`;function fe(C){function M(W){G?.(),A||to(e,t,W,a,i,$),o?.(),lt(se)}no(C,oe,M,()=>{q?.(),lt(se)})||M(C)}It(se),typeof n=="string"?eo(n,fe,q):fe(n)},so=e=>{var t={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},n=t[e];if(typeof n>"u")throw new Error(`Unknown file open mode: ${e}`);return n},nn=(e,t)=>{var n=0;return e&&(n|=365),t&&(n|=146),n},p={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:class{constructor(e){this.name="ErrnoError",this.errno=e}},genericErrors:{},filesystems:null,syncFSRequests:0,readFiles:{},FSStream:class{constructor(){this.shared={}}get object(){return this.node}set object(e){this.node=e}get isRead(){return(this.flags&2097155)!==1}get isWrite(){return(this.flags&2097155)!==0}get isAppend(){return this.flags&1024}get flags(){return this.shared.flags}set flags(e){this.shared.flags=e}get position(){return this.shared.position}set position(e){this.shared.position=e}},FSNode:class{constructor(e,t,n,a){e||(e=this),this.parent=e,this.mount=e.mount,this.mounted=null,this.id=p.nextInode++,this.name=t,this.mode=n,this.node_ops={},this.stream_ops={},this.rdev=a,this.readMode=365,this.writeMode=146}get read(){return(this.mode&this.readMode)===this.readMode}set read(e){e?this.mode|=this.readMode:this.mode&=~this.readMode}get write(){return(this.mode&this.writeMode)===this.writeMode}set write(e){e?this.mode|=this.writeMode:this.mode&=~this.writeMode}get isFolder(){return p.isDir(this.mode)}get isDevice(){return p.isChrdev(this.mode)}},lookupPath(e,t={}){if(e=vt.resolve(e),!e)return{path:"",node:null};var n={follow_mount:!0,recurse_count:0};if(t=Object.assign(n,t),t.recurse_count>8)throw new p.ErrnoError(32);for(var a=e.split("/").filter(se=>!!se),i=p.root,o="/",q=0;q<a.length;q++){var A=q===a.length-1;if(A&&t.parent)break;if(i=p.lookupNode(i,a[q]),o=$e.join2(o,a[q]),p.isMountpoint(i)&&(!A||A&&t.follow_mount)&&(i=i.mounted.root),!A||t.follow)for(var $=0;p.isLink(i.mode);){var G=p.readlink(o);o=vt.resolve($e.dirname(o),G);var oe=p.lookupPath(o,{recurse_count:t.recurse_count+1});if(i=oe.node,$++>40)throw new p.ErrnoError(32)}}return{path:o,node:i}},getPath(e){for(var t;;){if(p.isRoot(e)){var n=e.mount.mountpoint;return t?n[n.length-1]!=="/"?`${n}/${t}`:n+t:n}t=t?`${e.name}/${t}`:e.name,e=e.parent}},hashName(e,t){for(var n=0,a=0;a<t.length;a++)n=(n<<5)-n+t.charCodeAt(a)|0;return(e+n>>>0)%p.nameTable.length},hashAddNode(e){var t=p.hashName(e.parent.id,e.name);e.name_next=p.nameTable[t],p.nameTable[t]=e},hashRemoveNode(e){var t=p.hashName(e.parent.id,e.name);if(p.nameTable[t]===e)p.nameTable[t]=e.name_next;else for(var n=p.nameTable[t];n;){if(n.name_next===e){n.name_next=e.name_next;break}n=n.name_next}},lookupNode(e,t){var n=p.mayLookup(e);if(n)throw new p.ErrnoError(n);for(var a=p.hashName(e.id,t),i=p.nameTable[a];i;i=i.name_next){var o=i.name;if(i.parent.id===e.id&&o===t)return i}return p.lookup(e,t)},createNode(e,t,n,a){var i=new p.FSNode(e,t,n,a);return p.hashAddNode(i),i},destroyNode(e){p.hashRemoveNode(e)},isRoot(e){return e===e.parent},isMountpoint(e){return!!e.mounted},isFile(e){return(e&61440)===32768},isDir(e){return(e&61440)===16384},isLink(e){return(e&61440)===40960},isChrdev(e){return(e&61440)===8192},isBlkdev(e){return(e&61440)===24576},isFIFO(e){return(e&61440)===4096},isSocket(e){return(e&49152)===49152},flagsToPermissionString(e){var t=["r","w","rw"][e&3];return e&512&&(t+="w"),t},nodePermissions(e,t){return p.ignorePermissions?0:t.includes("r")&&!(e.mode&292)||t.includes("w")&&!(e.mode&146)||t.includes("x")&&!(e.mode&73)?2:0},mayLookup(e){if(!p.isDir(e.mode))return 54;var t=p.nodePermissions(e,"x");return t||(e.node_ops.lookup?0:2)},mayCreate(e,t){try{var n=p.lookupNode(e,t);return 20}catch{}return p.nodePermissions(e,"wx")},mayDelete(e,t,n){var a;try{a=p.lookupNode(e,t)}catch(o){return o.errno}var i=p.nodePermissions(e,"wx");if(i)return i;if(n){if(!p.isDir(a.mode))return 54;if(p.isRoot(a)||p.getPath(a)===p.cwd())return 10}else if(p.isDir(a.mode))return 31;return 0},mayOpen(e,t){return e?p.isLink(e.mode)?32:p.isDir(e.mode)&&(p.flagsToPermissionString(t)!=="r"||t&512)?31:p.nodePermissions(e,p.flagsToPermissionString(t)):44},MAX_OPEN_FDS:4096,nextfd(){for(var e=0;e<=p.MAX_OPEN_FDS;e++)if(!p.streams[e])return e;throw new p.ErrnoError(33)},getStreamChecked(e){var t=p.getStream(e);if(!t)throw new p.ErrnoError(8);return t},getStream:e=>p.streams[e],createStream(e,t=-1){return e=Object.assign(new p.FSStream,e),t==-1&&(t=p.nextfd()),e.fd=t,p.streams[t]=e,e},closeStream(e){p.streams[e]=null},dupStream(e,t=-1){var n=p.createStream(e,t);return n.stream_ops?.dup?.(n),n},chrdev_stream_ops:{open(e){var t=p.getDevice(e.node.rdev);e.stream_ops=t.stream_ops,e.stream_ops.open?.(e)},llseek(){throw new p.ErrnoError(70)}},major:e=>e>>8,minor:e=>e&255,makedev:(e,t)=>e<<8|t,registerDevice(e,t){p.devices[e]={stream_ops:t}},getDevice:e=>p.devices[e],getMounts(e){for(var t=[],n=[e];n.length;){var a=n.pop();t.push(a),n.push(...a.mounts)}return t},syncfs(e,t){typeof e=="function"&&(t=e,e=!1),p.syncFSRequests++,p.syncFSRequests>1&&je(`warning: ${p.syncFSRequests} FS.syncfs operations in flight at once, probably just doing extra work`);var n=p.getMounts(p.root.mount),a=0;function i(q){return p.syncFSRequests--,t(q)}function o(q){if(q)return o.errored?void 0:(o.errored=!0,i(q));++a>=n.length&&i(null)}n.forEach(q=>{if(!q.type.syncfs)return o(null);q.type.syncfs(q,e,o)})},mount(e,t,n){var a=n==="/",i=!n,o;if(a&&p.root)throw new p.ErrnoError(10);if(!a&&!i){var q=p.lookupPath(n,{follow_mount:!1});if(n=q.path,o=q.node,p.isMountpoint(o))throw new p.ErrnoError(10);if(!p.isDir(o.mode))throw new p.ErrnoError(54)}var A={type:e,opts:t,mountpoint:n,mounts:[]},$=e.mount(A);return $.mount=A,A.root=$,a?p.root=$:o&&(o.mounted=A,o.mount&&o.mount.mounts.push(A)),$},unmount(e){var t=p.lookupPath(e,{follow_mount:!1});if(!p.isMountpoint(t.node))throw new p.ErrnoError(28);var n=t.node,a=n.mounted,i=p.getMounts(a);Object.keys(p.nameTable).forEach(q=>{for(var A=p.nameTable[q];A;){var $=A.name_next;i.includes(A.mount)&&p.destroyNode(A),A=$}}),n.mounted=null;var o=n.mount.mounts.indexOf(a);n.mount.mounts.splice(o,1)},lookup(e,t){return e.node_ops.lookup(e,t)},mknod(e,t,n){var a=p.lookupPath(e,{parent:!0}),i=a.node,o=$e.basename(e);if(!o||o==="."||o==="..")throw new p.ErrnoError(28);var q=p.mayCreate(i,o);if(q)throw new p.ErrnoError(q);if(!i.node_ops.mknod)throw new p.ErrnoError(63);return i.node_ops.mknod(i,o,t,n)},create(e,t){return t=t!==void 0?t:438,t&=4095,t|=32768,p.mknod(e,t,0)},mkdir(e,t){return t=t!==void 0?t:511,t&=1023,t|=16384,p.mknod(e,t,0)},mkdirTree(e,t){for(var n=e.split("/"),a="",i=0;i<n.length;++i)if(n[i]){a+="/"+n[i];try{p.mkdir(a,t)}catch(o){if(o.errno!=20)throw o}}},mkdev(e,t,n){return typeof n>"u"&&(n=t,t=438),t|=8192,p.mknod(e,t,n)},symlink(e,t){if(!vt.resolve(e))throw new p.ErrnoError(44);var n=p.lookupPath(t,{parent:!0}),a=n.node;if(!a)throw new p.ErrnoError(44);var i=$e.basename(t),o=p.mayCreate(a,i);if(o)throw new p.ErrnoError(o);if(!a.node_ops.symlink)throw new p.ErrnoError(63);return a.node_ops.symlink(a,i,e)},rename(e,t){var n=$e.dirname(e),a=$e.dirname(t),i=$e.basename(e),o=$e.basename(t),q,A,$;if(q=p.lookupPath(e,{parent:!0}),A=q.node,q=p.lookupPath(t,{parent:!0}),$=q.node,!A||!$)throw new p.ErrnoError(44);if(A.mount!==$.mount)throw new p.ErrnoError(75);var G=p.lookupNode(A,i),oe=vt.relative(e,a);if(oe.charAt(0)!==".")throw new p.ErrnoError(28);if(oe=vt.relative(t,n),oe.charAt(0)!==".")throw new p.ErrnoError(55);var se;try{se=p.lookupNode($,o)}catch{}if(G!==se){var fe=p.isDir(G.mode),C=p.mayDelete(A,i,fe);if(C)throw new p.ErrnoError(C);if(C=se?p.mayDelete($,o,fe):p.mayCreate($,o),C)throw new p.ErrnoError(C);if(!A.node_ops.rename)throw new p.ErrnoError(63);if(p.isMountpoint(G)||se&&p.isMountpoint(se))throw new p.ErrnoError(10);if($!==A&&(C=p.nodePermissions(A,"w"),C))throw new p.ErrnoError(C);p.hashRemoveNode(G);try{A.node_ops.rename(G,$,o),G.parent=$}catch(M){throw M}finally{p.hashAddNode(G)}}},rmdir(e){var t=p.lookupPath(e,{parent:!0}),n=t.node,a=$e.basename(e),i=p.lookupNode(n,a),o=p.mayDelete(n,a,!0);if(o)throw new p.ErrnoError(o);if(!n.node_ops.rmdir)throw new p.ErrnoError(63);if(p.isMountpoint(i))throw new p.ErrnoError(10);n.node_ops.rmdir(n,a),p.destroyNode(i)},readdir(e){var t=p.lookupPath(e,{follow:!0}),n=t.node;if(!n.node_ops.readdir)throw new p.ErrnoError(54);return n.node_ops.readdir(n)},unlink(e){var t=p.lookupPath(e,{parent:!0}),n=t.node;if(!n)throw new p.ErrnoError(44);var a=$e.basename(e),i=p.lookupNode(n,a),o=p.mayDelete(n,a,!1);if(o)throw new p.ErrnoError(o);if(!n.node_ops.unlink)throw new p.ErrnoError(63);if(p.isMountpoint(i))throw new p.ErrnoError(10);n.node_ops.unlink(n,a),p.destroyNode(i)},readlink(e){var t=p.lookupPath(e),n=t.node;if(!n)throw new p.ErrnoError(44);if(!n.node_ops.readlink)throw new p.ErrnoError(28);return vt.resolve(p.getPath(n.parent),n.node_ops.readlink(n))},stat(e,t){var n=p.lookupPath(e,{follow:!t}),a=n.node;if(!a)throw new p.ErrnoError(44);if(!a.node_ops.getattr)throw new p.ErrnoError(63);return a.node_ops.getattr(a)},lstat(e){return p.stat(e,!0)},chmod(e,t,n){var a;if(typeof e=="string"){var i=p.lookupPath(e,{follow:!n});a=i.node}else a=e;if(!a.node_ops.setattr)throw new p.ErrnoError(63);a.node_ops.setattr(a,{mode:t&4095|a.mode&-4096,timestamp:Date.now()})},lchmod(e,t){p.chmod(e,t,!0)},fchmod(e,t){var n=p.getStreamChecked(e);p.chmod(n.node,t)},chown(e,t,n,a){var i;if(typeof e=="string"){var o=p.lookupPath(e,{follow:!a});i=o.node}else i=e;if(!i.node_ops.setattr)throw new p.ErrnoError(63);i.node_ops.setattr(i,{timestamp:Date.now()})},lchown(e,t,n){p.chown(e,t,n,!0)},fchown(e,t,n){var a=p.getStreamChecked(e);p.chown(a.node,t,n)},truncate(e,t){if(t<0)throw new p.ErrnoError(28);var n;if(typeof e=="string"){var a=p.lookupPath(e,{follow:!0});n=a.node}else n=e;if(!n.node_ops.setattr)throw new p.ErrnoError(63);if(p.isDir(n.mode))throw new p.ErrnoError(31);if(!p.isFile(n.mode))throw new p.ErrnoError(28);var i=p.nodePermissions(n,"w");if(i)throw new p.ErrnoError(i);n.node_ops.setattr(n,{size:t,timestamp:Date.now()})},ftruncate(e,t){var n=p.getStreamChecked(e);if(!(n.flags&2097155))throw new p.ErrnoError(28);p.truncate(n.node,t)},utime(e,t,n){var a=p.lookupPath(e,{follow:!0}),i=a.node;i.node_ops.setattr(i,{timestamp:Math.max(t,n)})},open(e,t,n){if(e==="")throw new p.ErrnoError(44);t=typeof t=="string"?so(t):t,t&64?(n=typeof n>"u"?438:n,n=n&4095|32768):n=0;var a;if(typeof e=="object")a=e;else{e=$e.normalize(e);try{var i=p.lookupPath(e,{follow:!(t&131072)});a=i.node}catch{}}var o=!1;if(t&64)if(a){if(t&128)throw new p.ErrnoError(20)}else a=p.mknod(e,n,0),o=!0;if(!a)throw new p.ErrnoError(44);if(p.isChrdev(a.mode)&&(t&=-513),t&65536&&!p.isDir(a.mode))throw new p.ErrnoError(54);if(!o){var q=p.mayOpen(a,t);if(q)throw new p.ErrnoError(q)}t&512&&!o&&p.truncate(a,0),t&=-131713;var A=p.createStream({node:a,path:p.getPath(a),flags:t,seekable:!0,position:0,stream_ops:a.stream_ops,ungotten:[],error:!1});return A.stream_ops.open&&A.stream_ops.open(A),r.logReadFiles&&!(t&1)&&(e in p.readFiles||(p.readFiles[e]=1)),A},close(e){if(p.isClosed(e))throw new p.ErrnoError(8);e.getdents&&(e.getdents=null);try{e.stream_ops.close&&e.stream_ops.close(e)}catch(t){throw t}finally{p.closeStream(e.fd)}e.fd=null},isClosed(e){return e.fd===null},llseek(e,t,n){if(p.isClosed(e))throw new p.ErrnoError(8);if(!e.seekable||!e.stream_ops.llseek)throw new p.ErrnoError(70);if(n!=0&&n!=1&&n!=2)throw new p.ErrnoError(28);return e.position=e.stream_ops.llseek(e,t,n),e.ungotten=[],e.position},read(e,t,n,a,i){if(a<0||i<0)throw new p.ErrnoError(28);if(p.isClosed(e))throw new p.ErrnoError(8);if((e.flags&2097155)===1)throw new p.ErrnoError(8);if(p.isDir(e.node.mode))throw new p.ErrnoError(31);if(!e.stream_ops.read)throw new p.ErrnoError(28);var o=typeof i<"u";if(!o)i=e.position;else if(!e.seekable)throw new p.ErrnoError(70);var q=e.stream_ops.read(e,t,n,a,i);return o||(e.position+=q),q},write(e,t,n,a,i,o){if(a<0||i<0)throw new p.ErrnoError(28);if(p.isClosed(e))throw new p.ErrnoError(8);if(!(e.flags&2097155))throw new p.ErrnoError(8);if(p.isDir(e.node.mode))throw new p.ErrnoError(31);if(!e.stream_ops.write)throw new p.ErrnoError(28);e.seekable&&e.flags&1024&&p.llseek(e,0,2);var q=typeof i<"u";if(!q)i=e.position;else if(!e.seekable)throw new p.ErrnoError(70);var A=e.stream_ops.write(e,t,n,a,i,o);return q||(e.position+=A),A},allocate(e,t,n){if(p.isClosed(e))throw new p.ErrnoError(8);if(t<0||n<=0)throw new p.ErrnoError(28);if(!(e.flags&2097155))throw new p.ErrnoError(8);if(!p.isFile(e.node.mode)&&!p.isDir(e.node.mode))throw new p.ErrnoError(43);if(!e.stream_ops.allocate)throw new p.ErrnoError(138);e.stream_ops.allocate(e,t,n)},mmap(e,t,n,a,i){if(a&2&&!(i&2)&&(e.flags&2097155)!==2)throw new p.ErrnoError(2);if((e.flags&2097155)===1)throw new p.ErrnoError(2);if(!e.stream_ops.mmap)throw new p.ErrnoError(43);if(!t)throw new p.ErrnoError(28);return e.stream_ops.mmap(e,t,n,a,i)},msync(e,t,n,a,i){return e.stream_ops.msync?e.stream_ops.msync(e,t,n,a,i):0},ioctl(e,t,n){if(!e.stream_ops.ioctl)throw new p.ErrnoError(59);return e.stream_ops.ioctl(e,t,n)},readFile(e,t={}){if(t.flags=t.flags||0,t.encoding=t.encoding||"binary",t.encoding!=="utf8"&&t.encoding!=="binary")throw new Error(`Invalid encoding type "${t.encoding}"`);var n,a=p.open(e,t.flags),i=p.stat(e),o=i.size,q=new Uint8Array(o);return p.read(a,q,0,o,0),t.encoding==="utf8"?n=zt(q,0):t.encoding==="binary"&&(n=q),p.close(a),n},writeFile(e,t,n={}){n.flags=n.flags||577;var a=p.open(e,n.flags,n.mode);if(typeof t=="string"){var i=new Uint8Array(Er(t)+1),o=rn(t,i,0,i.length);p.write(a,i,0,o,void 0,n.canOwn)}else if(ArrayBuffer.isView(t))p.write(a,t,0,t.byteLength,void 0,n.canOwn);else throw new Error("Unsupported data type");p.close(a)},cwd:()=>p.currentPath,chdir(e){var t=p.lookupPath(e,{follow:!0});if(t.node===null)throw new p.ErrnoError(44);if(!p.isDir(t.node.mode))throw new p.ErrnoError(54);var n=p.nodePermissions(t.node,"x");if(n)throw new p.ErrnoError(n);p.currentPath=t.path},createDefaultDirectories(){p.mkdir("/tmp"),p.mkdir("/home"),p.mkdir("/home/web_user")},createDefaultDevices(){p.mkdir("/dev"),p.registerDevice(p.makedev(1,3),{read:()=>0,write:(a,i,o,q,A)=>q}),p.mkdev("/dev/null",p.makedev(1,3)),Ft.register(p.makedev(5,0),Ft.default_tty_ops),Ft.register(p.makedev(6,0),Ft.default_tty1_ops),p.mkdev("/dev/tty",p.makedev(5,0)),p.mkdev("/dev/tty1",p.makedev(6,0));var e=new Uint8Array(1024),t=0,n=()=>(t===0&&(t=In(e).byteLength),e[--t]);p.createDevice("/dev","random",n),p.createDevice("/dev","urandom",n),p.mkdir("/dev/shm"),p.mkdir("/dev/shm/tmp")},createSpecialDirectories(){p.mkdir("/proc");var e=p.mkdir("/proc/self");p.mkdir("/proc/self/fd"),p.mount({mount(){var t=p.createNode(e,"fd",16895,73);return t.node_ops={lookup(n,a){var i=+a,o=p.getStreamChecked(i),q={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>o.path}};return q.parent=q,q}},t}},{},"/proc/self/fd")},createStandardStreams(e,t,n){e?p.createDevice("/dev","stdin",e):p.symlink("/dev/tty","/dev/stdin"),t?p.createDevice("/dev","stdout",null,t):p.symlink("/dev/tty","/dev/stdout"),n?p.createDevice("/dev","stderr",null,n):p.symlink("/dev/tty1","/dev/stderr");var a=p.open("/dev/stdin",0),i=p.open("/dev/stdout",1),o=p.open("/dev/stderr",1)},staticInit(){[44].forEach(e=>{p.genericErrors[e]=new p.ErrnoError(e),p.genericErrors[e].stack="<generic error, no stack>"}),p.nameTable=new Array(4096),p.mount(Oe,{},"/"),p.createDefaultDirectories(),p.createDefaultDevices(),p.createSpecialDirectories(),p.filesystems={MEMFS:Oe}},init(e,t,n){p.initialized=!0,e??=r.stdin,t??=r.stdout,n??=r.stderr,p.createStandardStreams(e,t,n)},quit(){p.initialized=!1;for(var e=0;e<p.streams.length;e++){var t=p.streams[e];t&&p.close(t)}},findObject(e,t){var n=p.analyzePath(e,t);return n.exists?n.object:null},analyzePath(e,t){try{var n=p.lookupPath(e,{follow:!t});e=n.path}catch{}var a={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var n=p.lookupPath(e,{parent:!0});a.parentExists=!0,a.parentPath=n.path,a.parentObject=n.node,a.name=$e.basename(e),n=p.lookupPath(e,{follow:!t}),a.exists=!0,a.path=n.path,a.object=n.node,a.name=n.node.name,a.isRoot=n.path==="/"}catch(i){a.error=i.errno}return a},createPath(e,t,n,a){e=typeof e=="string"?e:p.getPath(e);for(var i=t.split("/").reverse();i.length;){var o=i.pop();if(o){var q=$e.join2(e,o);try{p.mkdir(q)}catch{}e=q}}return q},createFile(e,t,n,a,i){var o=$e.join2(typeof e=="string"?e:p.getPath(e),t),q=nn(a,i);return p.create(o,q)},createDataFile(e,t,n,a,i,o){var q=t;e&&(e=typeof e=="string"?e:p.getPath(e),q=t?$e.join2(e,t):e);var A=nn(a,i),$=p.create(q,A);if(n){if(typeof n=="string"){for(var G=new Array(n.length),oe=0,se=n.length;oe<se;++oe)G[oe]=n.charCodeAt(oe);n=G}p.chmod($,A|146);var fe=p.open($,577);p.write(fe,n,0,n.length,0,o),p.close(fe),p.chmod($,A)}},createDevice(e,t,n,a){var i=$e.join2(typeof e=="string"?e:p.getPath(e),t),o=nn(!!n,!!a);p.createDevice.major??=64;var q=p.makedev(p.createDevice.major++,0);return p.registerDevice(q,{open(A){A.seekable=!1},close(A){a?.buffer?.length&&a(10)},read(A,$,G,oe,se){for(var fe=0,C=0;C<oe;C++){var M;try{M=n()}catch{throw new p.ErrnoError(29)}if(M===void 0&&fe===0)throw new p.ErrnoError(6);if(M==null)break;fe++,$[G+C]=M}return fe&&(A.node.timestamp=Date.now()),fe},write(A,$,G,oe,se){for(var fe=0;fe<oe;fe++)try{a($[G+fe])}catch{throw new p.ErrnoError(29)}return oe&&(A.node.timestamp=Date.now()),fe}}),p.mkdev(i,o,q)},forceLoadFile(e){if(e.isDevice||e.isFolder||e.link||e.contents)return!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");try{e.contents=Ke(e.url),e.usedBytes=e.contents.length}catch{throw new p.ErrnoError(29)}},createLazyFile(e,t,n,a,i){class o{constructor(){this.lengthKnown=!1,this.chunks=[]}get(C){if(!(C>this.length-1||C<0)){var M=C%this.chunkSize,W=C/this.chunkSize|0;return this.getter(W)[M]}}setDataGetter(C){this.getter=C}cacheLength(){var C=new XMLHttpRequest;if(C.open("HEAD",n,!1),C.send(null),!(C.status>=200&&C.status<300||C.status===304))throw new Error("Couldn't load "+n+". Status: "+C.status);var M=Number(C.getResponseHeader("Content-length")),W,L=(W=C.getResponseHeader("Accept-Ranges"))&&W==="bytes",T=(W=C.getResponseHeader("Content-Encoding"))&&W==="gzip",z=1024*1024;L||(z=M);var K=(I,ie)=>{if(I>ie)throw new Error("invalid range ("+I+", "+ie+") or no bytes requested!");if(ie>M-1)throw new Error("only "+M+" bytes available! programmer error!");var h=new XMLHttpRequest;if(h.open("GET",n,!1),M!==z&&h.setRequestHeader("Range","bytes="+I+"-"+ie),h.responseType="arraybuffer",h.overrideMimeType&&h.overrideMimeType("text/plain; charset=x-user-defined"),h.send(null),!(h.status>=200&&h.status<300||h.status===304))throw new Error("Couldn't load "+n+". Status: "+h.status);return h.response!==void 0?new Uint8Array(h.response||[]):On(h.responseText||"",!0)},X=this;X.setDataGetter(I=>{var ie=I*z,h=(I+1)*z-1;if(h=Math.min(h,M-1),typeof X.chunks[I]>"u"&&(X.chunks[I]=K(ie,h)),typeof X.chunks[I]>"u")throw new Error("doXHR failed!");return X.chunks[I]}),(T||!M)&&(z=M=1,M=this.getter(0).length,z=M,et("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=M,this._chunkSize=z,this.lengthKnown=!0}get length(){return this.lengthKnown||this.cacheLength(),this._length}get chunkSize(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}if(typeof XMLHttpRequest<"u"){if(!Y)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var q=new o,A={isDevice:!1,contents:q}}else var A={isDevice:!1,url:n};var $=p.createFile(e,t,A,a,i);A.contents?$.contents=A.contents:A.url&&($.contents=null,$.url=A.url),Object.defineProperties($,{usedBytes:{get:function(){return this.contents.length}}});var G={},oe=Object.keys($.stream_ops);oe.forEach(fe=>{var C=$.stream_ops[fe];G[fe]=(...M)=>(p.forceLoadFile($),C(...M))});function se(fe,C,M,W,L){var T=fe.node.contents;if(L>=T.length)return 0;var z=Math.min(T.length-L,W);if(T.slice)for(var K=0;K<z;K++)C[M+K]=T[L+K];else for(var K=0;K<z;K++)C[M+K]=T.get(L+K);return z}return G.read=(fe,C,M,W,L)=>(p.forceLoadFile($),se(fe,C,M,W,L)),G.mmap=(fe,C,M,W,L)=>{p.forceLoadFile($);var T=Ln(C);if(!T)throw new p.ErrnoError(48);return se(fe,rt,T,C,M),{ptr:T,allocated:!0}},$.stream_ops=G,$}},oo=(e,t)=>e?zt(qt,e,t):"",Le={DEFAULT_POLLMASK:5,calculateAt(e,t,n){if($e.isAbs(t))return t;var a;if(e===-100)a=p.cwd();else{var i=Le.getStreamFromFD(e);a=i.path}if(t.length==0){if(!n)throw new p.ErrnoError(44);return a}return $e.join2(a,t)},doStat(e,t,n){var a=e(t);Ce[n>>2]=a.dev,Ce[n+4>>2]=a.mode,tt[n+8>>2]=a.nlink,Ce[n+12>>2]=a.uid,Ce[n+16>>2]=a.gid,Ce[n+20>>2]=a.rdev,ft[n+24>>3]=BigInt(a.size),Ce[n+32>>2]=4096,Ce[n+36>>2]=a.blocks;var i=a.atime.getTime(),o=a.mtime.getTime(),q=a.ctime.getTime();return ft[n+40>>3]=BigInt(Math.floor(i/1e3)),tt[n+48>>2]=i%1e3*1e3*1e3,ft[n+56>>3]=BigInt(Math.floor(o/1e3)),tt[n+64>>2]=o%1e3*1e3*1e3,ft[n+72>>3]=BigInt(Math.floor(q/1e3)),tt[n+80>>2]=q%1e3*1e3*1e3,ft[n+88>>3]=BigInt(a.ino),0},doMsync(e,t,n,a,i){if(!p.isFile(t.node.mode))throw new p.ErrnoError(43);if(a&2)return 0;var o=qt.slice(e,e+n);p.msync(t,o,i,n,a)},getStreamFromFD(e){var t=p.getStreamChecked(e);return t},varargs:void 0,getStr(e){var t=oo(e);return t}};function ao(e,t){try{return e=Le.getStr(e),p.chmod(e,t),0}catch(n){if(typeof p>"u"||n.name!=="ErrnoError")throw n;return-n.errno}}function lo(e,t,n,a){try{if(t=Le.getStr(t),t=Le.calculateAt(e,t),n&-8)return-28;var i=p.lookupPath(t,{follow:!0}),o=i.node;if(!o)return-44;var q="";return n&4&&(q+="r"),n&2&&(q+="w"),n&1&&(q+="x"),q&&p.nodePermissions(o,q)?-2:0}catch(A){if(typeof p>"u"||A.name!=="ErrnoError")throw A;return-A.errno}}function co(e,t){try{return p.fchmod(e,t),0}catch(n){if(typeof p>"u"||n.name!=="ErrnoError")throw n;return-n.errno}}function uo(e,t,n){try{return p.fchown(e,t,n),0}catch(a){if(typeof p>"u"||a.name!=="ErrnoError")throw a;return-a.errno}}function vr(){var e=Ce[+Le.varargs>>2];return Le.varargs+=4,e}var Vt=vr;function fo(e,t,n){Le.varargs=n;try{var a=Le.getStreamFromFD(e);switch(t){case 0:{var i=vr();if(i<0)return-28;for(;p.streams[i];)i++;var o;return o=p.dupStream(a,i),o.fd}case 1:case 2:return 0;case 3:return a.flags;case 4:{var i=vr();return a.flags|=i,0}case 12:{var i=Vt(),q=0;return gt[i+q>>1]=2,0}case 13:case 14:return 0}return-28}catch(A){if(typeof p>"u"||A.name!=="ErrnoError")throw A;return-A.errno}}function _o(e,t){try{var n=Le.getStreamFromFD(e);return Le.doStat(p.stat,n.path,t)}catch(a){if(typeof p>"u"||a.name!=="ErrnoError")throw a;return-a.errno}}var po=9007199254740992,mo=-9007199254740992,ir=e=>e<mo||e>po?NaN:Number(e);function ho(e,t){t=ir(t);try{return isNaN(t)?61:(p.ftruncate(e,t),0)}catch(n){if(typeof p>"u"||n.name!=="ErrnoError")throw n;return-n.errno}}var $t=(e,t,n)=>rn(e,qt,t,n);function go(e,t){try{if(t===0)return-28;var n=p.cwd(),a=Er(n)+1;return t<a?-68:($t(n,e,t),a)}catch(i){if(typeof p>"u"||i.name!=="ErrnoError")throw i;return-i.errno}}function yo(e,t,n){Le.varargs=n;try{var a=Le.getStreamFromFD(e);switch(t){case 21509:return a.tty?0:-59;case 21505:{if(!a.tty)return-59;if(a.tty.ops.ioctl_tcgets){var i=a.tty.ops.ioctl_tcgets(a),o=Vt();Ce[o>>2]=i.c_iflag||0,Ce[o+4>>2]=i.c_oflag||0,Ce[o+8>>2]=i.c_cflag||0,Ce[o+12>>2]=i.c_lflag||0;for(var q=0;q<32;q++)rt[o+q+17]=i.c_cc[q]||0;return 0}return 0}case 21510:case 21511:case 21512:return a.tty?0:-59;case 21506:case 21507:case 21508:{if(!a.tty)return-59;if(a.tty.ops.ioctl_tcsets){for(var o=Vt(),A=Ce[o>>2],$=Ce[o+4>>2],G=Ce[o+8>>2],oe=Ce[o+12>>2],se=[],q=0;q<32;q++)se.push(rt[o+q+17]);return a.tty.ops.ioctl_tcsets(a.tty,t,{c_iflag:A,c_oflag:$,c_cflag:G,c_lflag:oe,c_cc:se})}return 0}case 21519:{if(!a.tty)return-59;var o=Vt();return Ce[o>>2]=0,0}case 21520:return a.tty?-28:-59;case 21531:{var o=Vt();return p.ioctl(a,t,o)}case 21523:{if(!a.tty)return-59;if(a.tty.ops.ioctl_tiocgwinsz){var fe=a.tty.ops.ioctl_tiocgwinsz(a.tty),o=Vt();gt[o>>1]=fe[0],gt[o+2>>1]=fe[1]}return 0}case 21524:return a.tty?0:-59;case 21515:return a.tty?0:-59;default:return-28}}catch(C){if(typeof p>"u"||C.name!=="ErrnoError")throw C;return-C.errno}}function xo(e,t){try{return e=Le.getStr(e),Le.doStat(p.lstat,e,t)}catch(n){if(typeof p>"u"||n.name!=="ErrnoError")throw n;return-n.errno}}function bo(e,t,n){try{return t=Le.getStr(t),t=Le.calculateAt(e,t),t=$e.normalize(t),t[t.length-1]==="/"&&(t=t.substr(0,t.length-1)),p.mkdir(t,n,0),0}catch(a){if(typeof p>"u"||a.name!=="ErrnoError")throw a;return-a.errno}}function wo(e,t,n,a){try{t=Le.getStr(t);var i=a&256,o=a&4096;return a=a&-6401,t=Le.calculateAt(e,t,o),Le.doStat(i?p.lstat:p.stat,t,n)}catch(q){if(typeof p>"u"||q.name!=="ErrnoError")throw q;return-q.errno}}function qo(e,t,n,a){Le.varargs=a;try{t=Le.getStr(t),t=Le.calculateAt(e,t);var i=a?vr():0;return p.open(t,n,i).fd}catch(o){if(typeof p>"u"||o.name!=="ErrnoError")throw o;return-o.errno}}function Eo(e,t,n,a){try{if(t=Le.getStr(t),t=Le.calculateAt(e,t),a<=0)return-28;var i=p.readlink(t),o=Math.min(a,Er(i)),q=rt[n+o];return $t(i,n,a+1),rt[n+o]=q,o}catch(A){if(typeof p>"u"||A.name!=="ErrnoError")throw A;return-A.errno}}function vo(e){try{return e=Le.getStr(e),p.rmdir(e),0}catch(t){if(typeof p>"u"||t.name!=="ErrnoError")throw t;return-t.errno}}function So(e,t){try{return e=Le.getStr(e),Le.doStat(p.stat,e,t)}catch(n){if(typeof p>"u"||n.name!=="ErrnoError")throw n;return-n.errno}}function Ao(e,t,n){try{return t=Le.getStr(t),t=Le.calculateAt(e,t),n===0?p.unlink(t):n===512?p.rmdir(t):yt("Invalid flags passed to unlinkat"),0}catch(a){if(typeof p>"u"||a.name!=="ErrnoError")throw a;return-a.errno}}var Rn=e=>tt[e>>2]+Ce[e+4>>2]*4294967296;function To(e,t,n,a){try{t=Le.getStr(t),t=Le.calculateAt(e,t,!0);var i=Date.now(),o,q;if(!n)o=i,q=i;else{var A=Rn(n),$=Ce[n+8>>2];$==1073741823?o=i:$==1073741822?o=-1:o=A*1e3+$/1e6,n+=16,A=Rn(n),$=Ce[n+8>>2],$==1073741823?q=i:$==1073741822?q=-1:q=A*1e3+$/1e6}return(q!=-1||o!=-1)&&p.utime(t,o,q),0}catch(G){if(typeof p>"u"||G.name!=="ErrnoError")throw G;return-G.errno}}var ko=1,Io=()=>ko,Fo=e=>e%4===0&&(e%100!==0||e%400===0),Oo=[0,31,60,91,121,152,182,213,244,274,305,335],Po=[0,31,59,90,120,151,181,212,243,273,304,334],Lo=e=>{var t=Fo(e.getFullYear()),n=t?Oo:Po,a=n[e.getMonth()]+e.getDate()-1;return a};function Ro(e,t){e=ir(e);var n=new Date(e*1e3);Ce[t>>2]=n.getSeconds(),Ce[t+4>>2]=n.getMinutes(),Ce[t+8>>2]=n.getHours(),Ce[t+12>>2]=n.getDate(),Ce[t+16>>2]=n.getMonth(),Ce[t+20>>2]=n.getFullYear()-1900,Ce[t+24>>2]=n.getDay();var a=Lo(n)|0;Ce[t+28>>2]=a,Ce[t+36>>2]=-(n.getTimezoneOffset()*60);var i=new Date(n.getFullYear(),0,1),o=new Date(n.getFullYear(),6,1).getTimezoneOffset(),q=i.getTimezoneOffset(),A=(o!=q&&n.getTimezoneOffset()==Math.min(q,o))|0;Ce[t+32>>2]=A}function Bo(e,t,n,a,i,o,q){i=ir(i);try{if(isNaN(i))return 61;var A=Le.getStreamFromFD(a),$=p.mmap(A,e,i,t,n),G=$.ptr;return Ce[o>>2]=$.allocated,tt[q>>2]=G,0}catch(oe){if(typeof p>"u"||oe.name!=="ErrnoError")throw oe;return-oe.errno}}function Do(e,t,n,a,i,o){o=ir(o);try{var q=Le.getStreamFromFD(i);n&2&&Le.doMsync(e,q,t,a,o)}catch(A){if(typeof p>"u"||A.name!=="ErrnoError")throw A;return-A.errno}}var Co=(e,t,n,a)=>{var i=new Date().getFullYear(),o=new Date(i,0,1),q=new Date(i,6,1),A=o.getTimezoneOffset(),$=q.getTimezoneOffset(),G=Math.max(A,$);tt[e>>2]=G*60,Ce[t>>2]=+(A!=$);var oe=C=>{var M=C>=0?"-":"+",W=Math.abs(C),L=String(Math.floor(W/60)).padStart(2,"0"),T=String(W%60).padStart(2,"0");return`UTC${M}${L}${T}`},se=oe(A),fe=oe($);$<A?($t(se,n,17),$t(fe,a,17)):($t(se,a,17),$t(fe,n,17))},Mo=()=>Date.now(),No=()=>performance.now(),Uo=()=>2147483648,jo=e=>{var t=pt.buffer,n=(e-t.byteLength+65535)/65536;try{return pt.grow(n),Zt(),1}catch{}},Wo=e=>{var t=qt.length;e>>>=0;var n=Uo();if(e>n)return!1;for(var a=1;a<=4;a*=2){var i=t*(1+.2/a);i=Math.min(i,e+100663296);var o=Math.min(n,Pn(Math.max(e,i),65536)),q=jo(o);if(q)return!0}return!1},sn={},zo=()=>xe||"./this.program",sr=()=>{if(!sr.strings){var e=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:e,_:zo()};for(var n in sn)sn[n]===void 0?delete t[n]:t[n]=sn[n];var a=[];for(var n in t)a.push(`${n}=${t[n]}`);sr.strings=a}return sr.strings},Vo=(e,t)=>{for(var n=0;n<e.length;++n)rt[t++]=e.charCodeAt(n);rt[t]=0},$o=(e,t)=>{var n=0;return sr().forEach((a,i)=>{var o=t+n;tt[e+i*4>>2]=o,Vo(a,o),n+=a.length+1}),0},Ho=(e,t)=>{var n=sr();tt[e>>2]=n.length;var a=0;return n.forEach(i=>a+=i.length+1),tt[t>>2]=a,0};function Qo(e){try{var t=Le.getStreamFromFD(e);return p.close(t),0}catch(n){if(typeof p>"u"||n.name!=="ErrnoError")throw n;return n.errno}}function Go(e,t){try{var n=0,a=0,i=0,o=Le.getStreamFromFD(e),q=o.tty?2:p.isDir(o.mode)?3:p.isLink(o.mode)?7:4;return rt[t]=q,gt[t+2>>1]=i,ft[t+8>>3]=BigInt(n),ft[t+16>>3]=BigInt(a),0}catch(A){if(typeof p>"u"||A.name!=="ErrnoError")throw A;return A.errno}}var Ko=(e,t,n,a)=>{for(var i=0,o=0;o<n;o++){var q=tt[t>>2],A=tt[t+4>>2];t+=8;var $=p.read(e,rt,q,A,a);if($<0)return-1;if(i+=$,$<A)break;typeof a<"u"&&(a+=$)}return i};function Jo(e,t,n,a){try{var i=Le.getStreamFromFD(e),o=Ko(i,t,n);return tt[a>>2]=o,0}catch(q){if(typeof p>"u"||q.name!=="ErrnoError")throw q;return q.errno}}function Xo(e,t,n,a){t=ir(t);try{if(isNaN(t))return 61;var i=Le.getStreamFromFD(e);return p.llseek(i,t,n),ft[a>>3]=BigInt(i.position),i.getdents&&t===0&&n===0&&(i.getdents=null),0}catch(o){if(typeof p>"u"||o.name!=="ErrnoError")throw o;return o.errno}}function Yo(e){try{var t=Le.getStreamFromFD(e);return t.stream_ops?.fsync?t.stream_ops.fsync(t):0}catch(n){if(typeof p>"u"||n.name!=="ErrnoError")throw n;return n.errno}}var Zo=(e,t,n,a)=>{for(var i=0,o=0;o<n;o++){var q=tt[t>>2],A=tt[t+4>>2];t+=8;var $=p.write(e,rt,q,A,a);if($<0)return-1;if(i+=$,$<A)break;typeof a<"u"&&(a+=$)}return i};function ea(e,t,n,a){try{var i=Le.getStreamFromFD(e),o=Zo(i,t,n);return tt[a>>2]=o,0}catch(q){if(typeof p>"u"||q.name!=="ErrnoError")throw q;return q.errno}}p.createPreloadedFile=io,p.staticInit();var Bn={__syscall_chmod:ao,__syscall_faccessat:lo,__syscall_fchmod:co,__syscall_fchown32:uo,__syscall_fcntl64:fo,__syscall_fstat64:_o,__syscall_ftruncate64:ho,__syscall_getcwd:go,__syscall_ioctl:yo,__syscall_lstat64:xo,__syscall_mkdirat:bo,__syscall_newfstatat:wo,__syscall_openat:qo,__syscall_readlinkat:Eo,__syscall_rmdir:vo,__syscall_stat64:So,__syscall_unlinkat:Ao,__syscall_utimensat:To,_emscripten_get_now_is_monotonic:Io,_localtime_js:Ro,_mmap_js:Bo,_munmap_js:Do,_tzset_js:Co,emscripten_date_now:Mo,emscripten_get_now:No,emscripten_resize_heap:Wo,environ_get:$o,environ_sizes_get:Ho,fd_close:Qo,fd_fdstat_get:Go,fd_read:Jo,fd_seek:Xo,fd_sync:Yo,fd_write:ea,memory:pt},S=Pe(),ta=()=>(ta=S.__wasm_call_ctors)(),ra=r._sqlite3_status64=(e,t,n,a)=>(ra=r._sqlite3_status64=S.sqlite3_status64)(e,t,n,a),na=r._sqlite3_status=(e,t,n,a)=>(na=r._sqlite3_status=S.sqlite3_status)(e,t,n,a),ia=r._sqlite3_db_status=(e,t,n,a,i)=>(ia=r._sqlite3_db_status=S.sqlite3_db_status)(e,t,n,a,i),sa=r._sqlite3_msize=e=>(sa=r._sqlite3_msize=S.sqlite3_msize)(e),oa=r._sqlite3_vfs_find=e=>(oa=r._sqlite3_vfs_find=S.sqlite3_vfs_find)(e),aa=r._sqlite3_initialize=()=>(aa=r._sqlite3_initialize=S.sqlite3_initialize)(),la=r._sqlite3_malloc=e=>(la=r._sqlite3_malloc=S.sqlite3_malloc)(e),ca=r._sqlite3_free=e=>(ca=r._sqlite3_free=S.sqlite3_free)(e),ua=r._sqlite3_vfs_register=(e,t)=>(ua=r._sqlite3_vfs_register=S.sqlite3_vfs_register)(e,t),fa=r._sqlite3_vfs_unregister=e=>(fa=r._sqlite3_vfs_unregister=S.sqlite3_vfs_unregister)(e),_a=r._sqlite3_malloc64=e=>(_a=r._sqlite3_malloc64=S.sqlite3_malloc64)(e),pa=r._sqlite3_realloc=(e,t)=>(pa=r._sqlite3_realloc=S.sqlite3_realloc)(e,t),da=r._sqlite3_realloc64=(e,t)=>(da=r._sqlite3_realloc64=S.sqlite3_realloc64)(e,t),ma=r._sqlite3_value_text=e=>(ma=r._sqlite3_value_text=S.sqlite3_value_text)(e),ha=r._sqlite3_randomness=(e,t)=>(ha=r._sqlite3_randomness=S.sqlite3_randomness)(e,t),ga=r._sqlite3_stricmp=(e,t)=>(ga=r._sqlite3_stricmp=S.sqlite3_stricmp)(e,t),ya=r._sqlite3_strnicmp=(e,t,n)=>(ya=r._sqlite3_strnicmp=S.sqlite3_strnicmp)(e,t,n),xa=r._sqlite3_uri_parameter=(e,t)=>(xa=r._sqlite3_uri_parameter=S.sqlite3_uri_parameter)(e,t),ba=r._sqlite3_uri_boolean=(e,t,n)=>(ba=r._sqlite3_uri_boolean=S.sqlite3_uri_boolean)(e,t,n),wa=r._sqlite3_serialize=(e,t,n,a)=>(wa=r._sqlite3_serialize=S.sqlite3_serialize)(e,t,n,a),qa=r._sqlite3_prepare_v2=(e,t,n,a,i)=>(qa=r._sqlite3_prepare_v2=S.sqlite3_prepare_v2)(e,t,n,a,i),Ea=r._sqlite3_step=e=>(Ea=r._sqlite3_step=S.sqlite3_step)(e),va=r._sqlite3_column_int64=(e,t)=>(va=r._sqlite3_column_int64=S.sqlite3_column_int64)(e,t),Sa=r._sqlite3_reset=e=>(Sa=r._sqlite3_reset=S.sqlite3_reset)(e),Aa=r._sqlite3_exec=(e,t,n,a,i)=>(Aa=r._sqlite3_exec=S.sqlite3_exec)(e,t,n,a,i),Ta=r._sqlite3_column_int=(e,t)=>(Ta=r._sqlite3_column_int=S.sqlite3_column_int)(e,t),ka=r._sqlite3_finalize=e=>(ka=r._sqlite3_finalize=S.sqlite3_finalize)(e),Ia=r._sqlite3_file_control=(e,t,n,a)=>(Ia=r._sqlite3_file_control=S.sqlite3_file_control)(e,t,n,a),Fa=r._sqlite3_column_name=(e,t)=>(Fa=r._sqlite3_column_name=S.sqlite3_column_name)(e,t),Oa=r._sqlite3_column_text=(e,t)=>(Oa=r._sqlite3_column_text=S.sqlite3_column_text)(e,t),Pa=r._sqlite3_column_type=(e,t)=>(Pa=r._sqlite3_column_type=S.sqlite3_column_type)(e,t),La=r._sqlite3_errmsg=e=>(La=r._sqlite3_errmsg=S.sqlite3_errmsg)(e),Ra=r._sqlite3_deserialize=(e,t,n,a,i,o)=>(Ra=r._sqlite3_deserialize=S.sqlite3_deserialize)(e,t,n,a,i,o),Ba=r._sqlite3_clear_bindings=e=>(Ba=r._sqlite3_clear_bindings=S.sqlite3_clear_bindings)(e),Da=r._sqlite3_value_blob=e=>(Da=r._sqlite3_value_blob=S.sqlite3_value_blob)(e),Ca=r._sqlite3_value_bytes=e=>(Ca=r._sqlite3_value_bytes=S.sqlite3_value_bytes)(e),Ma=r._sqlite3_value_double=e=>(Ma=r._sqlite3_value_double=S.sqlite3_value_double)(e),Na=r._sqlite3_value_int=e=>(Na=r._sqlite3_value_int=S.sqlite3_value_int)(e),Ua=r._sqlite3_value_int64=e=>(Ua=r._sqlite3_value_int64=S.sqlite3_value_int64)(e),ja=r._sqlite3_value_subtype=e=>(ja=r._sqlite3_value_subtype=S.sqlite3_value_subtype)(e),Wa=r._sqlite3_value_pointer=(e,t)=>(Wa=r._sqlite3_value_pointer=S.sqlite3_value_pointer)(e,t),za=r._sqlite3_value_type=e=>(za=r._sqlite3_value_type=S.sqlite3_value_type)(e),Va=r._sqlite3_value_nochange=e=>(Va=r._sqlite3_value_nochange=S.sqlite3_value_nochange)(e),$a=r._sqlite3_value_frombind=e=>($a=r._sqlite3_value_frombind=S.sqlite3_value_frombind)(e),Ha=r._sqlite3_value_dup=e=>(Ha=r._sqlite3_value_dup=S.sqlite3_value_dup)(e),Qa=r._sqlite3_value_free=e=>(Qa=r._sqlite3_value_free=S.sqlite3_value_free)(e),Ga=r._sqlite3_result_blob=(e,t,n,a)=>(Ga=r._sqlite3_result_blob=S.sqlite3_result_blob)(e,t,n,a),Ka=r._sqlite3_result_error_toobig=e=>(Ka=r._sqlite3_result_error_toobig=S.sqlite3_result_error_toobig)(e),Ja=r._sqlite3_result_error_nomem=e=>(Ja=r._sqlite3_result_error_nomem=S.sqlite3_result_error_nomem)(e),Xa=r._sqlite3_result_double=(e,t)=>(Xa=r._sqlite3_result_double=S.sqlite3_result_double)(e,t),Ya=r._sqlite3_result_error=(e,t,n)=>(Ya=r._sqlite3_result_error=S.sqlite3_result_error)(e,t,n),Za=r._sqlite3_result_int=(e,t)=>(Za=r._sqlite3_result_int=S.sqlite3_result_int)(e,t),el=r._sqlite3_result_int64=(e,t)=>(el=r._sqlite3_result_int64=S.sqlite3_result_int64)(e,t),tl=r._sqlite3_result_null=e=>(tl=r._sqlite3_result_null=S.sqlite3_result_null)(e),rl=r._sqlite3_result_pointer=(e,t,n,a)=>(rl=r._sqlite3_result_pointer=S.sqlite3_result_pointer)(e,t,n,a),nl=r._sqlite3_result_subtype=(e,t)=>(nl=r._sqlite3_result_subtype=S.sqlite3_result_subtype)(e,t),il=r._sqlite3_result_text=(e,t,n,a)=>(il=r._sqlite3_result_text=S.sqlite3_result_text)(e,t,n,a),sl=r._sqlite3_result_zeroblob=(e,t)=>(sl=r._sqlite3_result_zeroblob=S.sqlite3_result_zeroblob)(e,t),ol=r._sqlite3_result_zeroblob64=(e,t)=>(ol=r._sqlite3_result_zeroblob64=S.sqlite3_result_zeroblob64)(e,t),al=r._sqlite3_result_error_code=(e,t)=>(al=r._sqlite3_result_error_code=S.sqlite3_result_error_code)(e,t),ll=r._sqlite3_user_data=e=>(ll=r._sqlite3_user_data=S.sqlite3_user_data)(e),cl=r._sqlite3_context_db_handle=e=>(cl=r._sqlite3_context_db_handle=S.sqlite3_context_db_handle)(e),ul=r._sqlite3_vtab_nochange=e=>(ul=r._sqlite3_vtab_nochange=S.sqlite3_vtab_nochange)(e),fl=r._sqlite3_vtab_in_first=(e,t)=>(fl=r._sqlite3_vtab_in_first=S.sqlite3_vtab_in_first)(e,t),_l=r._sqlite3_vtab_in_next=(e,t)=>(_l=r._sqlite3_vtab_in_next=S.sqlite3_vtab_in_next)(e,t),pl=r._sqlite3_aggregate_context=(e,t)=>(pl=r._sqlite3_aggregate_context=S.sqlite3_aggregate_context)(e,t),dl=r._sqlite3_get_auxdata=(e,t)=>(dl=r._sqlite3_get_auxdata=S.sqlite3_get_auxdata)(e,t),ml=r._sqlite3_set_auxdata=(e,t,n,a)=>(ml=r._sqlite3_set_auxdata=S.sqlite3_set_auxdata)(e,t,n,a),hl=r._sqlite3_column_count=e=>(hl=r._sqlite3_column_count=S.sqlite3_column_count)(e),gl=r._sqlite3_data_count=e=>(gl=r._sqlite3_data_count=S.sqlite3_data_count)(e),yl=r._sqlite3_column_blob=(e,t)=>(yl=r._sqlite3_column_blob=S.sqlite3_column_blob)(e,t),xl=r._sqlite3_column_bytes=(e,t)=>(xl=r._sqlite3_column_bytes=S.sqlite3_column_bytes)(e,t),bl=r._sqlite3_column_double=(e,t)=>(bl=r._sqlite3_column_double=S.sqlite3_column_double)(e,t),wl=r._sqlite3_column_value=(e,t)=>(wl=r._sqlite3_column_value=S.sqlite3_column_value)(e,t),ql=r._sqlite3_column_decltype=(e,t)=>(ql=r._sqlite3_column_decltype=S.sqlite3_column_decltype)(e,t),El=r._sqlite3_bind_blob=(e,t,n,a,i)=>(El=r._sqlite3_bind_blob=S.sqlite3_bind_blob)(e,t,n,a,i),vl=r._sqlite3_bind_double=(e,t,n)=>(vl=r._sqlite3_bind_double=S.sqlite3_bind_double)(e,t,n),Sl=r._sqlite3_bind_int=(e,t,n)=>(Sl=r._sqlite3_bind_int=S.sqlite3_bind_int)(e,t,n),Al=r._sqlite3_bind_int64=(e,t,n)=>(Al=r._sqlite3_bind_int64=S.sqlite3_bind_int64)(e,t,n),Tl=r._sqlite3_bind_null=(e,t)=>(Tl=r._sqlite3_bind_null=S.sqlite3_bind_null)(e,t),kl=r._sqlite3_bind_pointer=(e,t,n,a,i)=>(kl=r._sqlite3_bind_pointer=S.sqlite3_bind_pointer)(e,t,n,a,i),Il=r._sqlite3_bind_text=(e,t,n,a,i)=>(Il=r._sqlite3_bind_text=S.sqlite3_bind_text)(e,t,n,a,i),Fl=r._sqlite3_bind_parameter_count=e=>(Fl=r._sqlite3_bind_parameter_count=S.sqlite3_bind_parameter_count)(e),Ol=r._sqlite3_bind_parameter_name=(e,t)=>(Ol=r._sqlite3_bind_parameter_name=S.sqlite3_bind_parameter_name)(e,t),Pl=r._sqlite3_bind_parameter_index=(e,t)=>(Pl=r._sqlite3_bind_parameter_index=S.sqlite3_bind_parameter_index)(e,t),Ll=r._sqlite3_db_handle=e=>(Ll=r._sqlite3_db_handle=S.sqlite3_db_handle)(e),Rl=r._sqlite3_stmt_readonly=e=>(Rl=r._sqlite3_stmt_readonly=S.sqlite3_stmt_readonly)(e),Bl=r._sqlite3_stmt_isexplain=e=>(Bl=r._sqlite3_stmt_isexplain=S.sqlite3_stmt_isexplain)(e),Dl=r._sqlite3_stmt_explain=(e,t)=>(Dl=r._sqlite3_stmt_explain=S.sqlite3_stmt_explain)(e,t),Cl=r._sqlite3_stmt_busy=e=>(Cl=r._sqlite3_stmt_busy=S.sqlite3_stmt_busy)(e),Ml=r._sqlite3_stmt_status=(e,t,n)=>(Ml=r._sqlite3_stmt_status=S.sqlite3_stmt_status)(e,t,n),Nl=r._sqlite3_sql=e=>(Nl=r._sqlite3_sql=S.sqlite3_sql)(e),Ul=r._sqlite3_expanded_sql=e=>(Ul=r._sqlite3_expanded_sql=S.sqlite3_expanded_sql)(e),jl=r._sqlite3_preupdate_old=(e,t,n)=>(jl=r._sqlite3_preupdate_old=S.sqlite3_preupdate_old)(e,t,n),Wl=r._sqlite3_preupdate_count=e=>(Wl=r._sqlite3_preupdate_count=S.sqlite3_preupdate_count)(e),zl=r._sqlite3_preupdate_depth=e=>(zl=r._sqlite3_preupdate_depth=S.sqlite3_preupdate_depth)(e),Vl=r._sqlite3_preupdate_blobwrite=e=>(Vl=r._sqlite3_preupdate_blobwrite=S.sqlite3_preupdate_blobwrite)(e),$l=r._sqlite3_preupdate_new=(e,t,n)=>($l=r._sqlite3_preupdate_new=S.sqlite3_preupdate_new)(e,t,n),Hl=r._sqlite3_value_numeric_type=e=>(Hl=r._sqlite3_value_numeric_type=S.sqlite3_value_numeric_type)(e),Ql=r._sqlite3_set_authorizer=(e,t,n)=>(Ql=r._sqlite3_set_authorizer=S.sqlite3_set_authorizer)(e,t,n),Gl=r._sqlite3_strglob=(e,t)=>(Gl=r._sqlite3_strglob=S.sqlite3_strglob)(e,t),Kl=r._sqlite3_strlike=(e,t,n)=>(Kl=r._sqlite3_strlike=S.sqlite3_strlike)(e,t,n),Jl=r._sqlite3_auto_extension=e=>(Jl=r._sqlite3_auto_extension=S.sqlite3_auto_extension)(e),Xl=r._sqlite3_cancel_auto_extension=e=>(Xl=r._sqlite3_cancel_auto_extension=S.sqlite3_cancel_auto_extension)(e),Yl=r._sqlite3_reset_auto_extension=()=>(Yl=r._sqlite3_reset_auto_extension=S.sqlite3_reset_auto_extension)(),Zl=r._sqlite3_prepare_v3=(e,t,n,a,i,o)=>(Zl=r._sqlite3_prepare_v3=S.sqlite3_prepare_v3)(e,t,n,a,i,o),ec=r._sqlite3_create_module=(e,t,n,a)=>(ec=r._sqlite3_create_module=S.sqlite3_create_module)(e,t,n,a),tc=r._sqlite3_create_module_v2=(e,t,n,a,i)=>(tc=r._sqlite3_create_module_v2=S.sqlite3_create_module_v2)(e,t,n,a,i),rc=r._sqlite3_drop_modules=(e,t)=>(rc=r._sqlite3_drop_modules=S.sqlite3_drop_modules)(e,t),nc=r._sqlite3_declare_vtab=(e,t)=>(nc=r._sqlite3_declare_vtab=S.sqlite3_declare_vtab)(e,t),ic=r._sqlite3_vtab_on_conflict=e=>(ic=r._sqlite3_vtab_on_conflict=S.sqlite3_vtab_on_conflict)(e),sc=r._sqlite3_vtab_collation=(e,t)=>(sc=r._sqlite3_vtab_collation=S.sqlite3_vtab_collation)(e,t),oc=r._sqlite3_vtab_in=(e,t,n)=>(oc=r._sqlite3_vtab_in=S.sqlite3_vtab_in)(e,t,n),ac=r._sqlite3_vtab_rhs_value=(e,t,n)=>(ac=r._sqlite3_vtab_rhs_value=S.sqlite3_vtab_rhs_value)(e,t,n),lc=r._sqlite3_vtab_distinct=e=>(lc=r._sqlite3_vtab_distinct=S.sqlite3_vtab_distinct)(e),cc=r._sqlite3_keyword_name=(e,t,n)=>(cc=r._sqlite3_keyword_name=S.sqlite3_keyword_name)(e,t,n),uc=r._sqlite3_keyword_count=()=>(uc=r._sqlite3_keyword_count=S.sqlite3_keyword_count)(),fc=r._sqlite3_keyword_check=(e,t)=>(fc=r._sqlite3_keyword_check=S.sqlite3_keyword_check)(e,t),_c=r._sqlite3_complete=e=>(_c=r._sqlite3_complete=S.sqlite3_complete)(e),pc=r._sqlite3_libversion=()=>(pc=r._sqlite3_libversion=S.sqlite3_libversion)(),dc=r._sqlite3_libversion_number=()=>(dc=r._sqlite3_libversion_number=S.sqlite3_libversion_number)(),mc=r._sqlite3_shutdown=()=>(mc=r._sqlite3_shutdown=S.sqlite3_shutdown)(),hc=r._sqlite3_last_insert_rowid=e=>(hc=r._sqlite3_last_insert_rowid=S.sqlite3_last_insert_rowid)(e),gc=r._sqlite3_set_last_insert_rowid=(e,t)=>(gc=r._sqlite3_set_last_insert_rowid=S.sqlite3_set_last_insert_rowid)(e,t),yc=r._sqlite3_changes64=e=>(yc=r._sqlite3_changes64=S.sqlite3_changes64)(e),xc=r._sqlite3_changes=e=>(xc=r._sqlite3_changes=S.sqlite3_changes)(e),bc=r._sqlite3_total_changes64=e=>(bc=r._sqlite3_total_changes64=S.sqlite3_total_changes64)(e),wc=r._sqlite3_total_changes=e=>(wc=r._sqlite3_total_changes=S.sqlite3_total_changes)(e),qc=r._sqlite3_txn_state=(e,t)=>(qc=r._sqlite3_txn_state=S.sqlite3_txn_state)(e,t),Ec=r._sqlite3_close_v2=e=>(Ec=r._sqlite3_close_v2=S.sqlite3_close_v2)(e),vc=r._sqlite3_busy_handler=(e,t,n)=>(vc=r._sqlite3_busy_handler=S.sqlite3_busy_handler)(e,t,n),Sc=r._sqlite3_progress_handler=(e,t,n,a)=>(Sc=r._sqlite3_progress_handler=S.sqlite3_progress_handler)(e,t,n,a),Ac=r._sqlite3_busy_timeout=(e,t)=>(Ac=r._sqlite3_busy_timeout=S.sqlite3_busy_timeout)(e,t),Tc=r._sqlite3_interrupt=e=>(Tc=r._sqlite3_interrupt=S.sqlite3_interrupt)(e),kc=r._sqlite3_is_interrupted=e=>(kc=r._sqlite3_is_interrupted=S.sqlite3_is_interrupted)(e),Ic=r._sqlite3_create_function=(e,t,n,a,i,o,q,A)=>(Ic=r._sqlite3_create_function=S.sqlite3_create_function)(e,t,n,a,i,o,q,A),Fc=r._sqlite3_create_function_v2=(e,t,n,a,i,o,q,A,$)=>(Fc=r._sqlite3_create_function_v2=S.sqlite3_create_function_v2)(e,t,n,a,i,o,q,A,$),Oc=r._sqlite3_create_window_function=(e,t,n,a,i,o,q,A,$,G)=>(Oc=r._sqlite3_create_window_function=S.sqlite3_create_window_function)(e,t,n,a,i,o,q,A,$,G),Pc=r._sqlite3_overload_function=(e,t,n)=>(Pc=r._sqlite3_overload_function=S.sqlite3_overload_function)(e,t,n),Lc=r._sqlite3_trace_v2=(e,t,n,a)=>(Lc=r._sqlite3_trace_v2=S.sqlite3_trace_v2)(e,t,n,a),Rc=r._sqlite3_commit_hook=(e,t,n)=>(Rc=r._sqlite3_commit_hook=S.sqlite3_commit_hook)(e,t,n),Bc=r._sqlite3_update_hook=(e,t,n)=>(Bc=r._sqlite3_update_hook=S.sqlite3_update_hook)(e,t,n),Dc=r._sqlite3_rollback_hook=(e,t,n)=>(Dc=r._sqlite3_rollback_hook=S.sqlite3_rollback_hook)(e,t,n),Cc=r._sqlite3_preupdate_hook=(e,t,n)=>(Cc=r._sqlite3_preupdate_hook=S.sqlite3_preupdate_hook)(e,t,n),Mc=r._sqlite3_error_offset=e=>(Mc=r._sqlite3_error_offset=S.sqlite3_error_offset)(e),Nc=r._sqlite3_errcode=e=>(Nc=r._sqlite3_errcode=S.sqlite3_errcode)(e),Uc=r._sqlite3_extended_errcode=e=>(Uc=r._sqlite3_extended_errcode=S.sqlite3_extended_errcode)(e),jc=r._sqlite3_errstr=e=>(jc=r._sqlite3_errstr=S.sqlite3_errstr)(e),Wc=r._sqlite3_limit=(e,t,n)=>(Wc=r._sqlite3_limit=S.sqlite3_limit)(e,t,n),zc=r._sqlite3_open=(e,t)=>(zc=r._sqlite3_open=S.sqlite3_open)(e,t),Vc=r._sqlite3_open_v2=(e,t,n,a)=>(Vc=r._sqlite3_open_v2=S.sqlite3_open_v2)(e,t,n,a),$c=r._sqlite3_create_collation=(e,t,n,a,i)=>($c=r._sqlite3_create_collation=S.sqlite3_create_collation)(e,t,n,a,i),Hc=r._sqlite3_create_collation_v2=(e,t,n,a,i,o)=>(Hc=r._sqlite3_create_collation_v2=S.sqlite3_create_collation_v2)(e,t,n,a,i,o),Qc=r._sqlite3_collation_needed=(e,t,n)=>(Qc=r._sqlite3_collation_needed=S.sqlite3_collation_needed)(e,t,n),Gc=r._sqlite3_get_autocommit=e=>(Gc=r._sqlite3_get_autocommit=S.sqlite3_get_autocommit)(e),Kc=r._sqlite3_table_column_metadata=(e,t,n,a,i,o,q,A,$)=>(Kc=r._sqlite3_table_column_metadata=S.sqlite3_table_column_metadata)(e,t,n,a,i,o,q,A,$),Jc=r._sqlite3_extended_result_codes=(e,t)=>(Jc=r._sqlite3_extended_result_codes=S.sqlite3_extended_result_codes)(e,t),Xc=r._sqlite3_uri_key=(e,t)=>(Xc=r._sqlite3_uri_key=S.sqlite3_uri_key)(e,t),Yc=r._sqlite3_uri_int64=(e,t,n)=>(Yc=r._sqlite3_uri_int64=S.sqlite3_uri_int64)(e,t,n),Zc=r._sqlite3_db_name=(e,t)=>(Zc=r._sqlite3_db_name=S.sqlite3_db_name)(e,t),eu=r._sqlite3_db_filename=(e,t)=>(eu=r._sqlite3_db_filename=S.sqlite3_db_filename)(e,t),tu=r._sqlite3_db_readonly=(e,t)=>(tu=r._sqlite3_db_readonly=S.sqlite3_db_readonly)(e,t),ru=r._sqlite3_compileoption_used=e=>(ru=r._sqlite3_compileoption_used=S.sqlite3_compileoption_used)(e),nu=r._sqlite3_compileoption_get=e=>(nu=r._sqlite3_compileoption_get=S.sqlite3_compileoption_get)(e),iu=r._sqlite3session_diff=(e,t,n,a)=>(iu=r._sqlite3session_diff=S.sqlite3session_diff)(e,t,n,a),su=r._sqlite3session_attach=(e,t)=>(su=r._sqlite3session_attach=S.sqlite3session_attach)(e,t),ou=r._sqlite3session_create=(e,t,n)=>(ou=r._sqlite3session_create=S.sqlite3session_create)(e,t,n),au=r._sqlite3session_delete=e=>(au=r._sqlite3session_delete=S.sqlite3session_delete)(e),lu=r._sqlite3session_table_filter=(e,t,n)=>(lu=r._sqlite3session_table_filter=S.sqlite3session_table_filter)(e,t,n),cu=r._sqlite3session_changeset=(e,t,n)=>(cu=r._sqlite3session_changeset=S.sqlite3session_changeset)(e,t,n),uu=r._sqlite3session_changeset_strm=(e,t,n)=>(uu=r._sqlite3session_changeset_strm=S.sqlite3session_changeset_strm)(e,t,n),fu=r._sqlite3session_patchset_strm=(e,t,n)=>(fu=r._sqlite3session_patchset_strm=S.sqlite3session_patchset_strm)(e,t,n),_u=r._sqlite3session_patchset=(e,t,n)=>(_u=r._sqlite3session_patchset=S.sqlite3session_patchset)(e,t,n),pu=r._sqlite3session_enable=(e,t)=>(pu=r._sqlite3session_enable=S.sqlite3session_enable)(e,t),du=r._sqlite3session_indirect=(e,t)=>(du=r._sqlite3session_indirect=S.sqlite3session_indirect)(e,t),mu=r._sqlite3session_isempty=e=>(mu=r._sqlite3session_isempty=S.sqlite3session_isempty)(e),hu=r._sqlite3session_memory_used=e=>(hu=r._sqlite3session_memory_used=S.sqlite3session_memory_used)(e),gu=r._sqlite3session_object_config=(e,t,n)=>(gu=r._sqlite3session_object_config=S.sqlite3session_object_config)(e,t,n),yu=r._sqlite3session_changeset_size=e=>(yu=r._sqlite3session_changeset_size=S.sqlite3session_changeset_size)(e),xu=r._sqlite3changeset_start=(e,t,n)=>(xu=r._sqlite3changeset_start=S.sqlite3changeset_start)(e,t,n),bu=r._sqlite3changeset_start_v2=(e,t,n,a)=>(bu=r._sqlite3changeset_start_v2=S.sqlite3changeset_start_v2)(e,t,n,a),wu=r._sqlite3changeset_start_strm=(e,t,n)=>(wu=r._sqlite3changeset_start_strm=S.sqlite3changeset_start_strm)(e,t,n),qu=r._sqlite3changeset_start_v2_strm=(e,t,n,a)=>(qu=r._sqlite3changeset_start_v2_strm=S.sqlite3changeset_start_v2_strm)(e,t,n,a),Eu=r._sqlite3changeset_next=e=>(Eu=r._sqlite3changeset_next=S.sqlite3changeset_next)(e),vu=r._sqlite3changeset_op=(e,t,n,a,i)=>(vu=r._sqlite3changeset_op=S.sqlite3changeset_op)(e,t,n,a,i),Su=r._sqlite3changeset_pk=(e,t,n)=>(Su=r._sqlite3changeset_pk=S.sqlite3changeset_pk)(e,t,n),Au=r._sqlite3changeset_old=(e,t,n)=>(Au=r._sqlite3changeset_old=S.sqlite3changeset_old)(e,t,n),Tu=r._sqlite3changeset_new=(e,t,n)=>(Tu=r._sqlite3changeset_new=S.sqlite3changeset_new)(e,t,n),ku=r._sqlite3changeset_conflict=(e,t,n)=>(ku=r._sqlite3changeset_conflict=S.sqlite3changeset_conflict)(e,t,n),Iu=r._sqlite3changeset_fk_conflicts=(e,t)=>(Iu=r._sqlite3changeset_fk_conflicts=S.sqlite3changeset_fk_conflicts)(e,t),Fu=r._sqlite3changeset_finalize=e=>(Fu=r._sqlite3changeset_finalize=S.sqlite3changeset_finalize)(e),Ou=r._sqlite3changeset_invert=(e,t,n,a)=>(Ou=r._sqlite3changeset_invert=S.sqlite3changeset_invert)(e,t,n,a),Pu=r._sqlite3changeset_invert_strm=(e,t,n,a)=>(Pu=r._sqlite3changeset_invert_strm=S.sqlite3changeset_invert_strm)(e,t,n,a),Lu=r._sqlite3changeset_apply_v2=(e,t,n,a,i,o,q,A,$)=>(Lu=r._sqlite3changeset_apply_v2=S.sqlite3changeset_apply_v2)(e,t,n,a,i,o,q,A,$),Ru=r._sqlite3changeset_apply=(e,t,n,a,i,o)=>(Ru=r._sqlite3changeset_apply=S.sqlite3changeset_apply)(e,t,n,a,i,o),Bu=r._sqlite3changeset_apply_v2_strm=(e,t,n,a,i,o,q,A,$)=>(Bu=r._sqlite3changeset_apply_v2_strm=S.sqlite3changeset_apply_v2_strm)(e,t,n,a,i,o,q,A,$),Du=r._sqlite3changeset_apply_strm=(e,t,n,a,i,o)=>(Du=r._sqlite3changeset_apply_strm=S.sqlite3changeset_apply_strm)(e,t,n,a,i,o),Cu=r._sqlite3changegroup_new=e=>(Cu=r._sqlite3changegroup_new=S.sqlite3changegroup_new)(e),Mu=r._sqlite3changegroup_add=(e,t,n)=>(Mu=r._sqlite3changegroup_add=S.sqlite3changegroup_add)(e,t,n),Nu=r._sqlite3changegroup_output=(e,t,n)=>(Nu=r._sqlite3changegroup_output=S.sqlite3changegroup_output)(e,t,n),Uu=r._sqlite3changegroup_add_strm=(e,t,n)=>(Uu=r._sqlite3changegroup_add_strm=S.sqlite3changegroup_add_strm)(e,t,n),ju=r._sqlite3changegroup_output_strm=(e,t,n)=>(ju=r._sqlite3changegroup_output_strm=S.sqlite3changegroup_output_strm)(e,t,n),Wu=r._sqlite3changegroup_delete=e=>(Wu=r._sqlite3changegroup_delete=S.sqlite3changegroup_delete)(e),zu=r._sqlite3changeset_concat=(e,t,n,a,i,o)=>(zu=r._sqlite3changeset_concat=S.sqlite3changeset_concat)(e,t,n,a,i,o),Vu=r._sqlite3changeset_concat_strm=(e,t,n,a,i,o)=>(Vu=r._sqlite3changeset_concat_strm=S.sqlite3changeset_concat_strm)(e,t,n,a,i,o),$u=r._sqlite3session_config=(e,t)=>($u=r._sqlite3session_config=S.sqlite3session_config)(e,t),Hu=r._sqlite3_sourceid=()=>(Hu=r._sqlite3_sourceid=S.sqlite3_sourceid)(),Qu=r._sqlite3__wasm_pstack_ptr=()=>(Qu=r._sqlite3__wasm_pstack_ptr=S.sqlite3__wasm_pstack_ptr)(),Gu=r._sqlite3__wasm_pstack_restore=e=>(Gu=r._sqlite3__wasm_pstack_restore=S.sqlite3__wasm_pstack_restore)(e),Ku=r._sqlite3__wasm_pstack_alloc=e=>(Ku=r._sqlite3__wasm_pstack_alloc=S.sqlite3__wasm_pstack_alloc)(e),Ju=r._sqlite3__wasm_pstack_remaining=()=>(Ju=r._sqlite3__wasm_pstack_remaining=S.sqlite3__wasm_pstack_remaining)(),Xu=r._sqlite3__wasm_pstack_quota=()=>(Xu=r._sqlite3__wasm_pstack_quota=S.sqlite3__wasm_pstack_quota)(),Yu=r._sqlite3__wasm_db_error=(e,t,n)=>(Yu=r._sqlite3__wasm_db_error=S.sqlite3__wasm_db_error)(e,t,n),Zu=r._sqlite3__wasm_test_struct=e=>(Zu=r._sqlite3__wasm_test_struct=S.sqlite3__wasm_test_struct)(e),ef=r._sqlite3__wasm_enum_json=()=>(ef=r._sqlite3__wasm_enum_json=S.sqlite3__wasm_enum_json)(),tf=r._sqlite3__wasm_vfs_unlink=(e,t)=>(tf=r._sqlite3__wasm_vfs_unlink=S.sqlite3__wasm_vfs_unlink)(e,t),rf=r._sqlite3__wasm_db_vfs=(e,t)=>(rf=r._sqlite3__wasm_db_vfs=S.sqlite3__wasm_db_vfs)(e,t),nf=r._sqlite3__wasm_db_reset=e=>(nf=r._sqlite3__wasm_db_reset=S.sqlite3__wasm_db_reset)(e),sf=r._sqlite3__wasm_db_export_chunked=(e,t)=>(sf=r._sqlite3__wasm_db_export_chunked=S.sqlite3__wasm_db_export_chunked)(e,t),of=r._sqlite3__wasm_db_serialize=(e,t,n,a,i)=>(of=r._sqlite3__wasm_db_serialize=S.sqlite3__wasm_db_serialize)(e,t,n,a,i),af=r._sqlite3__wasm_vfs_create_file=(e,t,n,a)=>(af=r._sqlite3__wasm_vfs_create_file=S.sqlite3__wasm_vfs_create_file)(e,t,n,a),lf=r._sqlite3__wasm_posix_create_file=(e,t,n)=>(lf=r._sqlite3__wasm_posix_create_file=S.sqlite3__wasm_posix_create_file)(e,t,n),cf=r._sqlite3__wasm_kvvfsMakeKeyOnPstack=(e,t)=>(cf=r._sqlite3__wasm_kvvfsMakeKeyOnPstack=S.sqlite3__wasm_kvvfsMakeKeyOnPstack)(e,t),uf=r._sqlite3__wasm_kvvfs_methods=()=>(uf=r._sqlite3__wasm_kvvfs_methods=S.sqlite3__wasm_kvvfs_methods)(),ff=r._sqlite3__wasm_vtab_config=(e,t,n)=>(ff=r._sqlite3__wasm_vtab_config=S.sqlite3__wasm_vtab_config)(e,t,n),_f=r._sqlite3__wasm_db_config_ip=(e,t,n,a)=>(_f=r._sqlite3__wasm_db_config_ip=S.sqlite3__wasm_db_config_ip)(e,t,n,a),pf=r._sqlite3__wasm_db_config_pii=(e,t,n,a,i)=>(pf=r._sqlite3__wasm_db_config_pii=S.sqlite3__wasm_db_config_pii)(e,t,n,a,i),df=r._sqlite3__wasm_db_config_s=(e,t,n)=>(df=r._sqlite3__wasm_db_config_s=S.sqlite3__wasm_db_config_s)(e,t,n),mf=r._sqlite3__wasm_config_i=(e,t)=>(mf=r._sqlite3__wasm_config_i=S.sqlite3__wasm_config_i)(e,t),hf=r._sqlite3__wasm_config_ii=(e,t,n)=>(hf=r._sqlite3__wasm_config_ii=S.sqlite3__wasm_config_ii)(e,t,n),gf=r._sqlite3__wasm_config_j=(e,t)=>(gf=r._sqlite3__wasm_config_j=S.sqlite3__wasm_config_j)(e,t),yf=r._sqlite3__wasm_qfmt_token=(e,t)=>(yf=r._sqlite3__wasm_qfmt_token=S.sqlite3__wasm_qfmt_token)(e,t),xf=r._sqlite3__wasm_init_wasmfs=e=>(xf=r._sqlite3__wasm_init_wasmfs=S.sqlite3__wasm_init_wasmfs)(e),bf=r._sqlite3__wasm_test_intptr=e=>(bf=r._sqlite3__wasm_test_intptr=S.sqlite3__wasm_test_intptr)(e),wf=r._sqlite3__wasm_test_voidptr=e=>(wf=r._sqlite3__wasm_test_voidptr=S.sqlite3__wasm_test_voidptr)(e),qf=r._sqlite3__wasm_test_int64_max=()=>(qf=r._sqlite3__wasm_test_int64_max=S.sqlite3__wasm_test_int64_max)(),Ef=r._sqlite3__wasm_test_int64_min=()=>(Ef=r._sqlite3__wasm_test_int64_min=S.sqlite3__wasm_test_int64_min)(),vf=r._sqlite3__wasm_test_int64_times2=e=>(vf=r._sqlite3__wasm_test_int64_times2=S.sqlite3__wasm_test_int64_times2)(e),Sf=r._sqlite3__wasm_test_int64_minmax=(e,t)=>(Sf=r._sqlite3__wasm_test_int64_minmax=S.sqlite3__wasm_test_int64_minmax)(e,t),Af=r._sqlite3__wasm_test_int64ptr=e=>(Af=r._sqlite3__wasm_test_int64ptr=S.sqlite3__wasm_test_int64ptr)(e),Tf=r._sqlite3__wasm_test_stack_overflow=e=>(Tf=r._sqlite3__wasm_test_stack_overflow=S.sqlite3__wasm_test_stack_overflow)(e),kf=r._sqlite3__wasm_test_str_hello=e=>(kf=r._sqlite3__wasm_test_str_hello=S.sqlite3__wasm_test_str_hello)(e),If=r._sqlite3__wasm_SQLTester_strglob=(e,t)=>(If=r._sqlite3__wasm_SQLTester_strglob=S.sqlite3__wasm_SQLTester_strglob)(e,t),Ff=r._malloc=e=>(Ff=r._malloc=S.malloc)(e),Of=r._free=e=>(Of=r._free=S.free)(e),Pf=r._realloc=(e,t)=>(Pf=r._realloc=S.realloc)(e,t),Dn=(e,t)=>(Dn=S.emscripten_builtin_memalign)(e,t),Cn=e=>(Cn=S._emscripten_stack_restore)(e),Lf=e=>(Lf=S._emscripten_stack_alloc)(e),Mn=()=>(Mn=S.emscripten_stack_get_current)();r.wasmMemory=pt;var Sr;Lt=function e(){Sr||Nn(),Sr||(Lt=e)};function Nn(){if(dt>0||(wr(),dt>0))return;function e(){Sr||(Sr=!0,r.calledRun=!0,!Wt&&(Xr(),w(r),r.onRuntimeInitialized?.(),qr()))}r.setStatus?(r.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>r.setStatus(""),1),e()},1)):e()}if(r.preInit)for(typeof r.preInit=="function"&&(r.preInit=[r.preInit]);r.preInit.length>0;)r.preInit.pop()();return Nn(),r.postRun||(r.postRun=[]),r.postRun.push(function(e){"use strict";"use strict";if(globalThis.sqlite3ApiBootstrap=function t(n=globalThis.sqlite3ApiConfig||t.defaultConfig){if(t.sqlite3)return(t.sqlite3.config||console).warn("sqlite3ApiBootstrap() called multiple times.","Config and external initializers are ignored on calls after the first."),t.sqlite3;let a=Object.assign(Object.create(null),{exports:void 0,memory:void 0,bigIntEnabled:typeof e<"u"&&e.HEAPU64?!0:!!globalThis.BigInt64Array,debug:console.debug.bind(console),warn:console.warn.bind(console),error:console.error.bind(console),log:console.log.bind(console),wasmfsOpfsDir:"/opfs",useStdAlloc:!1},n||{});Object.assign(a,{allocExportName:a.useStdAlloc?"malloc":"sqlite3_malloc",deallocExportName:a.useStdAlloc?"free":"sqlite3_free",reallocExportName:a.useStdAlloc?"realloc":"sqlite3_realloc"},a),["exports","memory","wasmfsOpfsDir"].forEach(_=>{typeof a[_]=="function"&&(a[_]=a[_]())}),delete globalThis.sqlite3ApiConfig,delete t.defaultConfig;let i=Object.create(null),o=Object.create(null),q=_=>i.sqlite3_js_rc_str&&i.sqlite3_js_rc_str(_)||"Unknown result code #"+_,A=_=>typeof _=="number"&&_===(_|0);class $ extends Error{constructor(...d){let m;if(d.length)if(A(d[0]))if(m=d[0],d.length===1)super(q(d[0]));else{let k=q(m);typeof d[1]=="object"?super(k,d[1]):(d[0]=k+":",super(d.join(" ")))}else d.length===2&&typeof d[1]=="object"?super(...d):super(d.join(" "));this.resultCode=m||i.SQLITE_ERROR,this.name="SQLite3Error"}}$.toss=(..._)=>{throw new $(..._)};let G=$.toss;a.wasmfsOpfsDir&&!/^\/[^/]+$/.test(a.wasmfsOpfsDir)&&G("config.wasmfsOpfsDir must be falsy or in the form '/dir-name'.");let oe=_=>typeof _!="bigint"&&_===(_|0)&&_<=2147483647&&_>=-2147483648,se=function _(d){return _._max||(_._max=BigInt("0x7fffffffffffffff"),_._min=~_._max),d>=_._min&&d<=_._max},fe=_=>_>=-0x7fffffffn-1n&&_<=0x7fffffffn,C=function _(d){return _._min||(_._min=Number.MIN_SAFE_INTEGER,_._max=Number.MAX_SAFE_INTEGER),d>=_._min&&d<=_._max},M=_=>_&&_.constructor&&oe(_.constructor.BYTES_PER_ELEMENT)?_:!1,W=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,L=_=>_.buffer instanceof W,T=(_,d,m)=>L(_)?_.slice(d,m):_.subarray(d,m),z=_=>_&&(_ instanceof Uint8Array||_ instanceof Int8Array||_ instanceof ArrayBuffer),K=_=>_&&(_ instanceof Uint8Array||_ instanceof Int8Array||_ instanceof ArrayBuffer),X=_=>z(_)||G("Value is not of a supported TypedArray type."),I=new TextDecoder("utf-8"),ie=function(_,d,m){return I.decode(T(_,d,m))},h=function(_){return K(_)?ie(_ instanceof ArrayBuffer?new Uint8Array(_):_):Array.isArray(_)?_.join(""):(o.isPtr(_)&&(_=o.cstrToJs(_)),_)};class x extends Error{constructor(...d){d.length===2&&typeof d[1]=="object"?super(...d):d.length?super(d.join(" ")):super("Allocation failed."),this.resultCode=i.SQLITE_NOMEM,this.name="WasmAllocError"}}x.toss=(..._)=>{throw new x(..._)},Object.assign(i,{sqlite3_bind_blob:void 0,sqlite3_bind_text:void 0,sqlite3_create_function_v2:(_,d,m,k,te,he,ke,ve,Fe)=>{},sqlite3_create_function:(_,d,m,k,te,he,ke,ve)=>{},sqlite3_create_window_function:(_,d,m,k,te,he,ke,ve,Fe,Be)=>{},sqlite3_prepare_v3:(_,d,m,k,te,he)=>{},sqlite3_prepare_v2:(_,d,m,k,te)=>{},sqlite3_exec:(_,d,m,k,te)=>{},sqlite3_randomness:(_,d)=>{}});let B={affirmBindableTypedArray:X,flexibleString:h,bigIntFits32:fe,bigIntFits64:se,bigIntFitsDouble:C,isBindableTypedArray:z,isInt32:oe,isSQLableTypedArray:K,isTypedArray:M,typedArrayToString:ie,isUIThread:()=>globalThis.window===globalThis&&!!globalThis.document,isSharedTypedArray:L,toss:function(..._){throw new Error(_.join(" "))},toss3:G,typedArrayPart:T,affirmDbHeader:function(_){_ instanceof ArrayBuffer&&(_=new Uint8Array(_));let d="SQLite format 3";d.length>_.byteLength&&G("Input does not contain an SQLite3 database header.");for(let m=0;m<d.length;++m)d.charCodeAt(m)!==_[m]&&G("Input does not contain an SQLite3 database header.")},affirmIsDb:function(_){_ instanceof ArrayBuffer&&(_=new Uint8Array(_));let d=_.byteLength;(d<512||d%512!==0)&&G("Byte array size",d,"is invalid for an SQLite3 db."),B.affirmDbHeader(_)}};Object.assign(o,{ptrSizeof:a.wasmPtrSizeof||4,ptrIR:a.wasmPtrIR||"i32",bigIntEnabled:!!a.bigIntEnabled,exports:a.exports||G("Missing API config.exports (WASM module exports)."),memory:a.memory||a.exports.memory||G("API config object requires a WebAssembly.Memory object","in either config.exports.memory (exported)","or config.memory (imported)."),alloc:void 0,realloc:void 0,dealloc:void 0}),o.allocFromTypedArray=function(_){_ instanceof ArrayBuffer&&(_=new Uint8Array(_)),X(_);let d=o.alloc(_.byteLength||1);return o.heapForSize(_.constructor).set(_.byteLength?_:[0],d),d};{let _=a.allocExportName,d=a.deallocExportName,m=a.reallocExportName;for(let k of[_,d,m])o.exports[k]instanceof Function||G("Missing required exports[",k,"] function.");o.alloc=function k(te){return k.impl(te)||x.toss("Failed to allocate",te," bytes.")},o.alloc.impl=o.exports[_],o.realloc=function k(te,he){let ke=k.impl(te,he);return he?ke||x.toss("Failed to reallocate",he," bytes."):0},o.realloc.impl=o.exports[m],o.dealloc=o.exports[d]}o.compileOptionUsed=function _(d){if(arguments.length){if(Array.isArray(d)){let m={};return d.forEach(k=>{m[k]=i.sqlite3_compileoption_used(k)}),m}else if(typeof d=="object")return Object.keys(d).forEach(m=>{d[m]=i.sqlite3_compileoption_used(m)}),d}else{if(_._result)return _._result;_._opt||(_._rx=/^([^=]+)=(.+)/,_._rxInt=/^-?\d+$/,_._opt=function(ke,ve){let Fe=_._rx.exec(ke);ve[0]=Fe?Fe[1]:ke,ve[1]=Fe?_._rxInt.test(Fe[2])?+Fe[2]:Fe[2]:!0});let m={},k=[0,0],te=0,he;for(;he=i.sqlite3_compileoption_get(te++);)_._opt(he,k),m[k[0]]=k[1];return _._result=m}return typeof d=="string"?!!i.sqlite3_compileoption_used(d):!1},o.pstack=Object.assign(Object.create(null),{restore:o.exports.sqlite3__wasm_pstack_restore,alloc:function(_){return typeof _=="string"&&!(_=o.sizeofIR(_))&&x.toss("Invalid value for pstack.alloc(",arguments[0],")"),o.exports.sqlite3__wasm_pstack_alloc(_)||x.toss("Could not allocate",_,"bytes from the pstack.")},allocChunks:function(_,d){typeof d=="string"&&!(d=o.sizeofIR(d))&&x.toss("Invalid size value for allocChunks(",arguments[1],")");let m=o.pstack.alloc(_*d),k=[],te=0,he=0;for(;te<_;++te,he+=d)k.push(m+he);return k},allocPtr:(_=1,d=!0)=>_===1?o.pstack.alloc(d?8:o.ptrSizeof):o.pstack.allocChunks(_,d?8:o.ptrSizeof),call:function(_){let d=o.pstack.pointer;try{return _(b)}finally{o.pstack.restore(d)}}}),Object.defineProperties(o.pstack,{pointer:{configurable:!1,iterable:!0,writeable:!1,get:o.exports.sqlite3__wasm_pstack_ptr},quota:{configurable:!1,iterable:!0,writeable:!1,get:o.exports.sqlite3__wasm_pstack_quota},remaining:{configurable:!1,iterable:!0,writeable:!1,get:o.exports.sqlite3__wasm_pstack_remaining}}),i.sqlite3_randomness=(..._)=>{if(_.length===1&&B.isTypedArray(_[0])&&_[0].BYTES_PER_ELEMENT===1){let d=_[0];if(d.byteLength===0)return o.exports.sqlite3_randomness(0,0),d;let m=o.pstack.pointer;try{let k=d.byteLength,te=0,he=o.exports.sqlite3_randomness,ke=o.heap8u(),ve=k<512?k:512,Fe=o.pstack.alloc(ve);do{let Be=k>ve?ve:k;he(Be,Fe),d.set(T(ke,Fe,Fe+Be),te),k-=Be,te+=Be}while(k>0)}catch(k){console.error("Highly unexpected (and ignored!) exception in sqlite3_randomness():",k)}finally{o.pstack.restore(m)}return d}o.exports.sqlite3_randomness(..._)};let H;if(i.sqlite3_wasmfs_opfs_dir=function(){if(H!==void 0)return H;let _=a.wasmfsOpfsDir;if(!_||!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle)return H="";try{return _&&o.xCallWrapped("sqlite3__wasm_init_wasmfs","i32",["string"],_)===0?H=_:H=""}catch{return H=""}},i.sqlite3_wasmfs_filename_is_persistent=function(_){let d=i.sqlite3_wasmfs_opfs_dir();return d&&_?_.startsWith(d+"/"):!1},i.sqlite3_js_db_uses_vfs=function(_,d,m=0){try{let k=i.sqlite3_vfs_find(d);return k?_?k===i.sqlite3_js_db_vfs(_,m)?k:!1:k===i.sqlite3_vfs_find(0)?k:!1:!1}catch{return!1}},i.sqlite3_js_vfs_list=function(){let _=[],d=i.sqlite3_vfs_find(0);for(;d;){let m=new i.sqlite3_vfs(d);_.push(o.cstrToJs(m.$zName)),d=m.$pNext,m.dispose()}return _},i.sqlite3_js_db_export=function(_,d=0){_=o.xWrap.testConvertArg("sqlite3*",_),_||G("Invalid sqlite3* argument."),o.bigIntEnabled||G("BigInt64 support is not enabled.");let m=o.scopedAllocPush(),k;try{let te=o.scopedAlloc(8+o.ptrSizeof),he=te+8,ke=d?o.isPtr(d)?d:o.scopedAllocCString(""+d):0,ve=o.exports.sqlite3__wasm_db_serialize(_,ke,he,te,0);ve&&G("Database serialization failed with code",b.capi.sqlite3_js_rc_str(ve)),k=o.peekPtr(he);let Fe=o.peek(te,"i64");return ve=Fe?o.heap8u().slice(k,k+Number(Fe)):new Uint8Array,ve}finally{k&&o.exports.sqlite3_free(k),o.scopedAllocPop(m)}},i.sqlite3_js_db_vfs=(_,d=0)=>B.sqlite3__wasm_db_vfs(_,d),i.sqlite3_js_aggregate_context=(_,d)=>i.sqlite3_aggregate_context(_,d)||(d?x.toss("Cannot allocate",d,"bytes for sqlite3_aggregate_context()"):0),i.sqlite3_js_posix_create_file=function(_,d,m){let k;d&&o.isPtr(d)?k=d:d instanceof ArrayBuffer||d instanceof Uint8Array?(k=o.allocFromTypedArray(d),(arguments.length<3||!B.isInt32(m)||m<0)&&(m=d.byteLength)):$.toss("Invalid 2nd argument for sqlite3_js_posix_create_file().");try{(!B.isInt32(m)||m<0)&&$.toss("Invalid 3rd argument for sqlite3_js_posix_create_file().");let te=B.sqlite3__wasm_posix_create_file(_,k,m);te&&$.toss("Creation of file failed with sqlite3 result code",i.sqlite3_js_rc_str(te))}finally{o.dealloc(k)}},i.sqlite3_js_vfs_create_file=function(_,d,m,k){a.warn("sqlite3_js_vfs_create_file() is deprecated and","should be avoided because it can lead to C-level crashes.","See its documentation for alternative options.");let te;m?(o.isPtr(m)?te=m:m instanceof ArrayBuffer&&(m=new Uint8Array(m)),m instanceof Uint8Array?(te=o.allocFromTypedArray(m),(arguments.length<4||!B.isInt32(k)||k<0)&&(k=m.byteLength)):$.toss("Invalid 3rd argument type for sqlite3_js_vfs_create_file().")):te=0,(!B.isInt32(k)||k<0)&&(o.dealloc(te),$.toss("Invalid 4th argument for sqlite3_js_vfs_create_file()."));try{let he=B.sqlite3__wasm_vfs_create_file(_,d,te,k);he&&$.toss("Creation of file failed with sqlite3 result code",i.sqlite3_js_rc_str(he))}finally{o.dealloc(te)}},i.sqlite3_js_sql_to_string=_=>{if(typeof _=="string")return _;let d=h(v);return d===v?void 0:d},B.isUIThread()){let _=function(d){let m=Object.create(null);return m.prefix="kvvfs-"+d,m.stores=[],(d==="session"||d==="")&&m.stores.push(globalThis.sessionStorage),(d==="local"||d==="")&&m.stores.push(globalThis.localStorage),m};i.sqlite3_js_kvvfs_clear=function(d=""){let m=0,k=_(d);return k.stores.forEach(te=>{let he=[],ke;for(ke=0;ke<te.length;++ke){let ve=te.key(ke);ve.startsWith(k.prefix)&&he.push(ve)}he.forEach(ve=>te.removeItem(ve)),m+=he.length}),m},i.sqlite3_js_kvvfs_size=function(d=""){let m=0,k=_(d);return k.stores.forEach(te=>{let he;for(he=0;he<te.length;++he){let ke=te.key(he);ke.startsWith(k.prefix)&&(m+=ke.length,m+=te.getItem(ke).length)}}),m*2}}i.sqlite3_db_config=function(_,d,...m){switch(this.s||(this.s=o.xWrap("sqlite3__wasm_db_config_s","int",["sqlite3*","int","string:static"]),this.pii=o.xWrap("sqlite3__wasm_db_config_pii","int",["sqlite3*","int","*","int","int"]),this.ip=o.xWrap("sqlite3__wasm_db_config_ip","int",["sqlite3*","int","int","*"])),d){case i.SQLITE_DBCONFIG_ENABLE_FKEY:case i.SQLITE_DBCONFIG_ENABLE_TRIGGER:case i.SQLITE_DBCONFIG_ENABLE_FTS3_TOKENIZER:case i.SQLITE_DBCONFIG_ENABLE_LOAD_EXTENSION:case i.SQLITE_DBCONFIG_NO_CKPT_ON_CLOSE:case i.SQLITE_DBCONFIG_ENABLE_QPSG:case i.SQLITE_DBCONFIG_TRIGGER_EQP:case i.SQLITE_DBCONFIG_RESET_DATABASE:case i.SQLITE_DBCONFIG_DEFENSIVE:case i.SQLITE_DBCONFIG_WRITABLE_SCHEMA:case i.SQLITE_DBCONFIG_LEGACY_ALTER_TABLE:case i.SQLITE_DBCONFIG_DQS_DML:case i.SQLITE_DBCONFIG_DQS_DDL:case i.SQLITE_DBCONFIG_ENABLE_VIEW:case i.SQLITE_DBCONFIG_LEGACY_FILE_FORMAT:case i.SQLITE_DBCONFIG_TRUSTED_SCHEMA:case i.SQLITE_DBCONFIG_STMT_SCANSTATUS:case i.SQLITE_DBCONFIG_REVERSE_SCANORDER:return this.ip(_,d,m[0],m[1]||0);case i.SQLITE_DBCONFIG_LOOKASIDE:return this.pii(_,d,m[0],m[1],m[2]);case i.SQLITE_DBCONFIG_MAINDBNAME:return this.s(_,d,m[0]);default:return i.SQLITE_MISUSE}}.bind(Object.create(null)),i.sqlite3_value_to_js=function(_,d=!0){let m,k=i.sqlite3_value_type(_);switch(k){case i.SQLITE_INTEGER:o.bigIntEnabled?(m=i.sqlite3_value_int64(_),B.bigIntFitsDouble(m)&&(m=Number(m))):m=i.sqlite3_value_double(_);break;case i.SQLITE_FLOAT:m=i.sqlite3_value_double(_);break;case i.SQLITE_TEXT:m=i.sqlite3_value_text(_);break;case i.SQLITE_BLOB:{let te=i.sqlite3_value_bytes(_),he=i.sqlite3_value_blob(_);te&&!he&&b.WasmAllocError.toss("Cannot allocate memory for blob argument of",te,"byte(s)"),m=te?o.heap8u().slice(he,he+Number(te)):null;break}case i.SQLITE_NULL:m=null;break;default:d&&G(i.SQLITE_MISMATCH,"Unhandled sqlite3_value_type():",k),m=void 0}return m},i.sqlite3_values_to_js=function(_,d,m=!0){let k,te=[];for(k=0;k<_;++k)te.push(i.sqlite3_value_to_js(o.peekPtr(d+o.ptrSizeof*k),m));return te},i.sqlite3_result_error_js=function(_,d){d instanceof x?i.sqlite3_result_error_nomem(_):i.sqlite3_result_error(_,""+d,-1)},i.sqlite3_result_js=function(_,d){if(d instanceof Error){i.sqlite3_result_error_js(_,d);return}try{switch(typeof d){case"undefined":break;case"boolean":i.sqlite3_result_int(_,d?1:0);break;case"bigint":B.bigIntFits32(d)?i.sqlite3_result_int(_,Number(d)):B.bigIntFitsDouble(d)?i.sqlite3_result_double(_,Number(d)):o.bigIntEnabled?B.bigIntFits64(d)?i.sqlite3_result_int64(_,d):G("BigInt value",d.toString(),"is too BigInt for int64."):G("BigInt value",d.toString(),"is too BigInt.");break;case"number":{let m;B.isInt32(d)?m=i.sqlite3_result_int:o.bigIntEnabled&&Number.isInteger(d)&&B.bigIntFits64(BigInt(d))?m=i.sqlite3_result_int64:m=i.sqlite3_result_double,m(_,d);break}case"string":{let[m,k]=o.allocCString(d,!0);i.sqlite3_result_text(_,m,k,i.SQLITE_WASM_DEALLOC);break}case"object":if(d===null){i.sqlite3_result_null(_);break}else if(B.isBindableTypedArray(d)){let m=o.allocFromTypedArray(d);i.sqlite3_result_blob(_,m,d.byteLength,i.SQLITE_WASM_DEALLOC);break}default:G("Don't not how to handle this UDF result value:",typeof d,d)}}catch(m){i.sqlite3_result_error_js(_,m)}},i.sqlite3_column_js=function(_,d,m=!0){let k=i.sqlite3_column_value(_,d);return k===0?void 0:i.sqlite3_value_to_js(k,m)};let Q=function(_,d,m){m=i[m],this.ptr?o.pokePtr(this.ptr,0):this.ptr=o.allocPtr();let k=m(_,d,this.ptr);if(k)return $.toss(k,arguments[2]+"() failed with code "+k);let te=o.peekPtr(this.ptr);return te?i.sqlite3_value_to_js(te,!0):void 0}.bind(Object.create(null));i.sqlite3_preupdate_new_js=(_,d)=>Q(_,d,"sqlite3_preupdate_new"),i.sqlite3_preupdate_old_js=(_,d)=>Q(_,d,"sqlite3_preupdate_old"),i.sqlite3changeset_new_js=(_,d)=>Q(_,d,"sqlite3changeset_new"),i.sqlite3changeset_old_js=(_,d)=>Q(_,d,"sqlite3changeset_old");let b={WasmAllocError:x,SQLite3Error:$,capi:i,util:B,wasm:o,config:a,version:Object.create(null),client:void 0,asyncPostInit:async function _(){if(_.isReady instanceof Promise)return _.isReady;let d=t.initializersAsync;delete t.initializersAsync;let m=async()=>(b.__isUnderTest||(delete b.util,delete b.StructBinder),b),k=he=>{throw a.error("an async sqlite3 initializer failed:",he),he};if(!d||!d.length)return _.isReady=m().catch(k);d=d.map(he=>he instanceof Function?async ke=>he(b):he),d.push(m);let te=Promise.resolve(b);for(;d.length;)te=te.then(d.shift());return _.isReady=te.catch(k)},scriptInfo:void 0};try{t.initializers.forEach(_=>{_(b)})}catch(_){throw console.error("sqlite3 bootstrap initializer threw:",_),_}return delete t.initializers,t.sqlite3=b,b},globalThis.sqlite3ApiBootstrap.initializers=[],globalThis.sqlite3ApiBootstrap.initializersAsync=[],globalThis.sqlite3ApiBootstrap.defaultConfig=Object.create(null),globalThis.sqlite3ApiBootstrap.sqlite3=void 0,globalThis.WhWasmUtilInstaller=function(t){"use strict";t.bigIntEnabled===void 0&&(t.bigIntEnabled=!!globalThis.BigInt64Array);let n=(...h)=>{throw new Error(h.join(" "))};t.exports||Object.defineProperty(t,"exports",{enumerable:!0,configurable:!0,get:()=>t.instance&&t.instance.exports});let a=t.pointerIR||"i32",i=t.ptrSizeof=a==="i32"?4:a==="i64"?8:n("Unhandled ptrSizeof:",a),o=Object.create(null);o.heapSize=0,o.memory=null,o.freeFuncIndexes=[],o.scopedAlloc=[],o.utf8Decoder=new TextDecoder,o.utf8Encoder=new TextEncoder("utf-8"),t.sizeofIR=h=>{switch(h){case"i8":return 1;case"i16":return 2;case"i32":case"f32":case"float":return 4;case"i64":case"f64":case"double":return 8;case"*":return i;default:return(""+h).endsWith("*")?i:void 0}};let q=function(){if(!o.memory)o.memory=t.memory instanceof WebAssembly.Memory?t.memory:t.exports.memory;else if(o.heapSize===o.memory.buffer.byteLength)return o;let h=o.memory.buffer;return o.HEAP8=new Int8Array(h),o.HEAP8U=new Uint8Array(h),o.HEAP16=new Int16Array(h),o.HEAP16U=new Uint16Array(h),o.HEAP32=new Int32Array(h),o.HEAP32U=new Uint32Array(h),t.bigIntEnabled&&(o.HEAP64=new BigInt64Array(h),o.HEAP64U=new BigUint64Array(h)),o.HEAP32F=new Float32Array(h),o.HEAP64F=new Float64Array(h),o.heapSize=h.byteLength,o};t.heap8=()=>q().HEAP8,t.heap8u=()=>q().HEAP8U,t.heap16=()=>q().HEAP16,t.heap16u=()=>q().HEAP16U,t.heap32=()=>q().HEAP32,t.heap32u=()=>q().HEAP32U,t.heapForSize=function(h,x=!0){let B,H=o.memory&&o.heapSize===o.memory.buffer.byteLength?o:q();switch(h){case Int8Array:return H.HEAP8;case Uint8Array:return H.HEAP8U;case Int16Array:return H.HEAP16;case Uint16Array:return H.HEAP16U;case Int32Array:return H.HEAP32;case Uint32Array:return H.HEAP32U;case 8:return x?H.HEAP8U:H.HEAP8;case 16:return x?H.HEAP16U:H.HEAP16;case 32:return x?H.HEAP32U:H.HEAP32;case 64:if(H.HEAP64)return x?H.HEAP64U:H.HEAP64;break;default:if(t.bigIntEnabled){if(h===globalThis.BigUint64Array)return H.HEAP64U;if(h===globalThis.BigInt64Array)return H.HEAP64;break}}n("Invalid heapForSize() size: expecting 8, 16, 32,","or (if BigInt is enabled) 64.")},t.functionTable=function(){return t.exports.__indirect_function_table},t.functionEntry=function(h){let x=t.functionTable();return h<x.length?x.get(h):void 0},t.jsFuncToWasm=function h(x,B){if(h._||(h._={sigTypes:Object.assign(Object.create(null),{i:"i32",p:"i32",P:"i32",s:"i32",j:"i64",f:"f32",d:"f64"}),typeCodes:Object.assign(Object.create(null),{f64:124,f32:125,i64:126,i32:127}),uleb128Encode:function(b,_,d){d<128?b[_](d):b[_](d%128|128,d>>7)},rxJSig:/^(\w)\((\w*)\)$/,sigParams:function(b){let _=h._.rxJSig.exec(b);return _?_[2]:b.substr(1)},letterType:b=>h._.sigTypes[b]||n("Invalid signature letter:",b),pushSigType:(b,_)=>b.push(h._.typeCodes[h._.letterType(_)])}),typeof x=="string"){let b=B;B=x,x=b}let H=h._.sigParams(B),Q=[1,96];h._.uleb128Encode(Q,"push",H.length);for(let b of H)h._.pushSigType(Q,b);return B[0]==="v"?Q.push(0):(Q.push(1),h._.pushSigType(Q,B[0])),h._.uleb128Encode(Q,"unshift",Q.length),Q.unshift(0,97,115,109,1,0,0,0,1),Q.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array(Q)),{e:{f:x}}).exports.f};let A=function(x,B,H){if(H&&!o.scopedAlloc.length&&n("No scopedAllocPush() scope is active."),typeof x=="string"){let d=B;B=x,x=d}(typeof B!="string"||!(x instanceof Function))&&n("Invalid arguments: expecting (function,signature) or (signature,function).");let Q=t.functionTable(),b=Q.length,_;for(;o.freeFuncIndexes.length&&(_=o.freeFuncIndexes.pop(),Q.get(_));){_=null;continue}_||(_=b,Q.grow(1));try{return Q.set(_,x),H&&o.scopedAlloc[o.scopedAlloc.length-1].push(_),_}catch(d){if(!(d instanceof TypeError))throw _===b&&o.freeFuncIndexes.push(b),d}try{let d=t.jsFuncToWasm(x,B);Q.set(_,d),H&&o.scopedAlloc[o.scopedAlloc.length-1].push(_)}catch(d){throw _===b&&o.freeFuncIndexes.push(b),d}return _};t.installFunction=(h,x)=>A(h,x,!1),t.scopedInstallFunction=(h,x)=>A(h,x,!0),t.uninstallFunction=function(h){if(!h&&h!==0)return;let x=o.freeFuncIndexes,B=t.functionTable();x.push(h);let H=B.get(h);return B.set(h,null),H},t.peek=function(x,B="i8"){B.endsWith("*")&&(B=a);let H=o.memory&&o.heapSize===o.memory.buffer.byteLength?o:q(),Q=Array.isArray(x)?[]:void 0,b;do{switch(Q&&(x=arguments[0].shift()),B){case"i1":case"i8":b=H.HEAP8[x>>0];break;case"i16":b=H.HEAP16[x>>1];break;case"i32":b=H.HEAP32[x>>2];break;case"float":case"f32":b=H.HEAP32F[x>>2];break;case"double":case"f64":b=Number(H.HEAP64F[x>>3]);break;case"i64":if(t.bigIntEnabled){b=BigInt(H.HEAP64[x>>3]);break}default:n("Invalid type for peek():",B)}Q&&Q.push(b)}while(Q&&arguments[0].length);return Q||b},t.poke=function(h,x,B="i8"){B.endsWith("*")&&(B=a);let H=o.memory&&o.heapSize===o.memory.buffer.byteLength?o:q();for(let Q of Array.isArray(h)?h:[h])switch(B){case"i1":case"i8":H.HEAP8[Q>>0]=x;continue;case"i16":H.HEAP16[Q>>1]=x;continue;case"i32":H.HEAP32[Q>>2]=x;continue;case"float":case"f32":H.HEAP32F[Q>>2]=x;continue;case"double":case"f64":H.HEAP64F[Q>>3]=x;continue;case"i64":if(H.HEAP64){H.HEAP64[Q>>3]=BigInt(x);continue}default:n("Invalid type for poke(): "+B)}return this},t.peekPtr=(...h)=>t.peek(h.length===1?h[0]:h,a),t.pokePtr=(h,x=0)=>t.poke(h,x,a),t.peek8=(...h)=>t.peek(h.length===1?h[0]:h,"i8"),t.poke8=(h,x)=>t.poke(h,x,"i8"),t.peek16=(...h)=>t.peek(h.length===1?h[0]:h,"i16"),t.poke16=(h,x)=>t.poke(h,x,"i16"),t.peek32=(...h)=>t.peek(h.length===1?h[0]:h,"i32"),t.poke32=(h,x)=>t.poke(h,x,"i32"),t.peek64=(...h)=>t.peek(h.length===1?h[0]:h,"i64"),t.poke64=(h,x)=>t.poke(h,x,"i64"),t.peek32f=(...h)=>t.peek(h.length===1?h[0]:h,"f32"),t.poke32f=(h,x)=>t.poke(h,x,"f32"),t.peek64f=(...h)=>t.peek(h.length===1?h[0]:h,"f64"),t.poke64f=(h,x)=>t.poke(h,x,"f64"),t.getMemValue=t.peek,t.getPtrValue=t.peekPtr,t.setMemValue=t.poke,t.setPtrValue=t.pokePtr,t.isPtr32=h=>typeof h=="number"&&h===(h|0)&&h>=0,t.isPtr=t.isPtr32,t.cstrlen=function(h){if(!h||!t.isPtr(h))return null;let x=q().HEAP8U,B=h;for(;x[B]!==0;++B);return B-h};let $=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,G=function(h,x,B){return o.utf8Decoder.decode(h.buffer instanceof $?h.slice(x,B):h.subarray(x,B))};t.cstrToJs=function(h){let x=t.cstrlen(h);return x?G(q().HEAP8U,h,h+x):x===null?x:""},t.jstrlen=function(h){if(typeof h!="string")return null;let x=h.length,B=0;for(let H=0;H<x;++H){let Q=h.charCodeAt(H);Q>=55296&&Q<=57343&&(Q=65536+((Q&1023)<<10)|h.charCodeAt(++H)&1023),Q<=127?++B:Q<=2047?B+=2:Q<=65535?B+=3:B+=4}return B},t.jstrcpy=function(h,x,B=0,H=-1,Q=!0){if((!x||!(x instanceof Int8Array)&&!(x instanceof Uint8Array))&&n("jstrcpy() target must be an Int8Array or Uint8Array."),H<0&&(H=x.length-B),!(H>0)||!(B>=0))return 0;let b=0,_=h.length,d=B,m=B+H-(Q?1:0);for(;b<_&&B<m;++b){let k=h.charCodeAt(b);if(k>=55296&&k<=57343&&(k=65536+((k&1023)<<10)|h.charCodeAt(++b)&1023),k<=127){if(B>=m)break;x[B++]=k}else if(k<=2047){if(B+1>=m)break;x[B++]=192|k>>6,x[B++]=128|k&63}else if(k<=65535){if(B+2>=m)break;x[B++]=224|k>>12,x[B++]=128|k>>6&63,x[B++]=128|k&63}else{if(B+3>=m)break;x[B++]=240|k>>18,x[B++]=128|k>>12&63,x[B++]=128|k>>6&63,x[B++]=128|k&63}}return Q&&(x[B++]=0),B-d},t.cstrncpy=function(h,x,B){if((!h||!x)&&n("cstrncpy() does not accept NULL strings."),B<0)B=t.cstrlen(strPtr)+1;else if(!(B>0))return 0;let H=t.heap8u(),Q=0,b;for(;Q<B&&(b=H[x+Q]);++Q)H[h+Q]=b;return Q<B&&(H[h+Q++]=0),Q},t.jstrToUintArray=(h,x=!1)=>o.utf8Encoder.encode(x?h+"\0":h);let oe=(h,x)=>{(!(h.alloc instanceof Function)||!(h.dealloc instanceof Function))&&n("Object is missing alloc() and/or dealloc() function(s)","required by",x+"().")},se=function(h,x,B,H){if(oe(t,H),typeof h!="string")return null;{let Q=o.utf8Encoder.encode(h),b=B(Q.length+1),_=q().HEAP8U;return _.set(Q,b),_[b+Q.length]=0,x?[b,Q.length]:b}};t.allocCString=(h,x=!1)=>se(h,x,t.alloc,"allocCString()"),t.scopedAllocPush=function(){oe(t,"scopedAllocPush");let h=[];return o.scopedAlloc.push(h),h},t.scopedAllocPop=function(h){oe(t,"scopedAllocPop");let x=arguments.length?o.scopedAlloc.indexOf(h):o.scopedAlloc.length-1;x<0&&n("Invalid state object for scopedAllocPop()."),arguments.length===0&&(h=o.scopedAlloc[x]),o.scopedAlloc.splice(x,1);for(let B;B=h.pop();)t.functionEntry(B)?t.uninstallFunction(B):t.dealloc(B)},t.scopedAlloc=function(h){o.scopedAlloc.length||n("No scopedAllocPush() scope is active.");let x=t.alloc(h);return o.scopedAlloc[o.scopedAlloc.length-1].push(x),x},Object.defineProperty(t.scopedAlloc,"level",{configurable:!1,enumerable:!1,get:()=>o.scopedAlloc.length,set:()=>n("The 'active' property is read-only.")}),t.scopedAllocCString=(h,x=!1)=>se(h,x,t.scopedAlloc,"scopedAllocCString()");let fe=function(h,x){let B=t[h?"scopedAlloc":"alloc"]((x.length+1)*t.ptrSizeof),H=0;return x.forEach(Q=>{t.pokePtr(B+t.ptrSizeof*H++,t[h?"scopedAllocCString":"allocCString"](""+Q))}),t.pokePtr(B+t.ptrSizeof*H,0),B};t.scopedAllocMainArgv=h=>fe(!0,h),t.allocMainArgv=h=>fe(!1,h),t.cArgvToJs=(h,x)=>{let B=[];for(let H=0;H<h;++H){let Q=t.peekPtr(x+t.ptrSizeof*H);B.push(Q?t.cstrToJs(Q):null)}return B},t.scopedAllocCall=function(h){t.scopedAllocPush();try{return h()}finally{t.scopedAllocPop()}};let C=function(h,x,B){oe(t,B);let H=x?"i64":a,Q=t[B](h*(x?8:i));if(t.poke(Q,0,H),h===1)return Q;let b=[Q];for(let _=1;_<h;++_)Q+=x?8:i,b[_]=Q,t.poke(Q,0,H);return b};t.allocPtr=(h=1,x=!0)=>C(h,x,"alloc"),t.scopedAllocPtr=(h=1,x=!0)=>C(h,x,"scopedAlloc"),t.xGet=function(h){return t.exports[h]||n("Cannot find exported symbol:",h)};let M=(h,x)=>n(h+"() requires",x,"argument(s).");t.xCall=function(h,...x){let B=h instanceof Function?h:t.xGet(h);return B instanceof Function||n("Exported symbol",h,"is not a function."),B.length!==x.length&&M(B===h?B.name:h,B.length),arguments.length===2&&Array.isArray(arguments[1])?B.apply(null,arguments[1]):B.apply(null,x)},o.xWrap=Object.create(null),o.xWrap.convert=Object.create(null),o.xWrap.convert.arg=new Map,o.xWrap.convert.result=new Map;let W=o.xWrap.convert.arg,L=o.xWrap.convert.result;t.bigIntEnabled&&W.set("i64",h=>BigInt(h));let T=a==="i32"?h=>h|0:h=>BigInt(h)|BigInt(0);W.set("i32",T).set("i16",h=>(h|0)&65535).set("i8",h=>(h|0)&255).set("f32",h=>Number(h).valueOf()).set("float",W.get("f32")).set("f64",W.get("f32")).set("double",W.get("f64")).set("int",W.get("i32")).set("null",h=>h).set(null,W.get("null")).set("**",T).set("*",T),L.set("*",T).set("pointer",T).set("number",h=>Number(h)).set("void",h=>{}).set("null",h=>h).set(null,L.get("null"));{let h=["i8","i16","i32","int","f32","float","f64","double"];t.bigIntEnabled&&h.push("i64");let x=W.get(a);for(let B of h)W.set(B+"*",x),L.set(B+"*",x),L.set(B,W.get(B)||n("Missing arg converter:",B))}let z=function(h){return typeof h=="string"?t.scopedAllocCString(h):h?T(h):null};W.set("string",z).set("utf8",z).set("pointer",z),L.set("string",h=>t.cstrToJs(h)).set("utf8",L.get("string")).set("string:dealloc",h=>{try{return h?t.cstrToJs(h):null}finally{t.dealloc(h)}}).set("utf8:dealloc",L.get("string:dealloc")).set("json",h=>JSON.parse(t.cstrToJs(h))).set("json:dealloc",h=>{try{return h?JSON.parse(t.cstrToJs(h)):null}finally{t.dealloc(h)}});let K=class{constructor(h){this.name=h.name||"unnamed adapter"}convertArg(h,x,B){n("AbstractArgAdapter must be subclassed.")}};W.FuncPtrAdapter=class Tt extends K{constructor(x){super(x),W.FuncPtrAdapter.warnOnUse&&console.warn("xArg.FuncPtrAdapter is an internal-only API","and is not intended to be invoked from","client-level code. Invoked with:",x),this.name=x.name||"unnamed",this.signature=x.signature,x.contextKey instanceof Function&&(this.contextKey=x.contextKey,x.bindScope||(x.bindScope="context")),this.bindScope=x.bindScope||n("FuncPtrAdapter options requires a bindScope (explicit or implied)."),Tt.bindScopes.indexOf(x.bindScope)<0&&n("Invalid options.bindScope ("+x.bindMod+") for FuncPtrAdapter. Expecting one of: ("+Tt.bindScopes.join(", ")+")"),this.isTransient=this.bindScope==="transient",this.isContext=this.bindScope==="context",this.isPermanent=this.bindScope==="permanent",this.singleton=this.bindScope==="singleton"?[]:void 0,this.callProxy=x.callProxy instanceof Function?x.callProxy:void 0}contextKey(x,B){return this}contextMap(x){let B=this.__cmap||(this.__cmap=new Map),H=B.get(x);return H===void 0&&B.set(x,H=[]),H}convertArg(x,B,H){let Q=this.singleton;if(!Q&&this.isContext&&(Q=this.contextMap(this.contextKey(B,H))),Q&&Q[0]===x)return Q[1];if(x instanceof Function){this.callProxy&&(x=this.callProxy(x));let b=A(x,this.signature,this.isTransient);if(Tt.debugFuncInstall&&Tt.debugOut("FuncPtrAdapter installed",this,this.contextKey(B,H),"@"+b,x),Q){if(Q[1]){Tt.debugFuncInstall&&Tt.debugOut("FuncPtrAdapter uninstalling",this,this.contextKey(B,H),"@"+Q[1],x);try{o.scopedAlloc[o.scopedAlloc.length-1].push(Q[1])}catch{}}Q[0]=x,Q[1]=b}return b}else if(t.isPtr(x)||x===null||x===void 0){if(Q&&Q[1]&&Q[1]!==x){Tt.debugFuncInstall&&Tt.debugOut("FuncPtrAdapter uninstalling",this,this.contextKey(B,H),"@"+Q[1],x);try{o.scopedAlloc[o.scopedAlloc.length-1].push(Q[1])}catch{}Q[0]=Q[1]=x|0}return x||0}else throw new TypeError("Invalid FuncPtrAdapter argument type. Expecting a function pointer or a "+(this.name?this.name+" ":"")+"function matching signature "+this.signature+".")}},W.FuncPtrAdapter.warnOnUse=!1,W.FuncPtrAdapter.debugFuncInstall=!1,W.FuncPtrAdapter.debugOut=console.debug.bind(console),W.FuncPtrAdapter.bindScopes=["transient","context","singleton","permanent"];let X=h=>W.get(h)||n("Argument adapter not found:",h),I=h=>L.get(h)||n("Result adapter not found:",h);o.xWrap.convertArg=(h,...x)=>X(h)(...x),o.xWrap.convertArgNoCheck=(h,...x)=>W.get(h)(...x),o.xWrap.convertResult=(h,x)=>h===null?x:h?I(h)(x):void 0,o.xWrap.convertResultNoCheck=(h,x)=>h===null?x:h?L.get(h)(x):void 0,t.xWrap=function(h,x,...B){arguments.length===3&&Array.isArray(arguments[2])&&(B=arguments[2]),t.isPtr(h)&&(h=t.functionEntry(h)||n("Function pointer not found in WASM function table."));let H=h instanceof Function,Q=H?h:t.xGet(h);if(H&&(h=Q.name||"unnamed function"),B.length!==Q.length&&M(h,Q.length),x===null&&Q.length===0)return Q;x!=null&&I(x);for(let _ of B)_ instanceof K?W.set(_,(...d)=>_.convertArg(...d)):X(_);let b=o.xWrap;return Q.length===0?(..._)=>_.length?M(h,Q.length):b.convertResult(x,Q.call(null)):function(..._){_.length!==Q.length&&M(h,Q.length);let d=t.scopedAllocPush();try{let m=0;for(;m<_.length;++m)_[m]=b.convertArgNoCheck(B[m],_[m],_,m);return b.convertResultNoCheck(x,Q.apply(null,_))}finally{t.scopedAllocPop(d)}}};let ie=function(h,x,B,H,Q,b){if(typeof B=="string"){if(x===1)return b.get(B);if(x===2){if(H)H instanceof Function||n(Q,"requires a function argument.");else return delete b.get(B),h;return b.set(B,H),h}}n("Invalid arguments to",Q)};return t.xWrap.resultAdapter=function h(x,B){return ie(h,arguments.length,x,B,"resultAdapter()",L)},t.xWrap.argAdapter=function h(x,B){return ie(h,arguments.length,x,B,"argAdapter()",W)},t.xWrap.FuncPtrAdapter=W.FuncPtrAdapter,t.xCallWrapped=function(h,x,B,...H){return Array.isArray(arguments[3])&&(H=arguments[3]),t.xWrap(h,x,B||[]).apply(null,H||[])},t.xWrap.testConvertArg=o.xWrap.convertArg,t.xWrap.testConvertResult=o.xWrap.convertResult,t},globalThis.WhWasmUtilInstaller.yawl=function(t){let n=()=>fetch(t.uri,{credentials:"same-origin"}),a=this,i=function(q){if(t.wasmUtilTarget){let A=(...G)=>{throw new Error(G.join(" "))},$=t.wasmUtilTarget;if($.module=q.module,$.instance=q.instance,$.instance.exports.memory||($.memory=t.imports&&t.imports.env&&t.imports.env.memory||A("Missing 'memory' object!")),!$.alloc&&q.instance.exports.malloc){let G=q.instance.exports;$.alloc=function(oe){return G.malloc(oe)||A("Allocation of",oe,"bytes failed.")},$.dealloc=function(oe){G.free(oe)}}a($)}return t.onload&&t.onload(q,t),q};return WebAssembly.instantiateStreaming?function(){return WebAssembly.instantiateStreaming(n(),t.imports||{}).then(i)}:function(){return n().then(A=>A.arrayBuffer()).then(A=>WebAssembly.instantiate(A,t.imports||{})).then(i)}}.bind(globalThis.WhWasmUtilInstaller),globalThis.Jaccwabyt=function t(n){let a=(...U)=>{throw new Error(U.join(" "))};!(n.heap instanceof WebAssembly.Memory)&&!(n.heap instanceof Function)&&a("config.heap must be WebAssembly.Memory instance or a function."),["alloc","dealloc"].forEach(function(U){n[U]instanceof Function||a("Config option '"+U+"' must be a function.")});let i=t,o=n.heap instanceof Function?n.heap:()=>new Uint8Array(n.heap.buffer),q=n.alloc,A=n.dealloc,$=n.log||console.log.bind(console),G=n.memberPrefix||"",oe=n.memberSuffix||"",se=n.bigIntEnabled===void 0?!!globalThis.BigInt64Array:!!n.bigIntEnabled,fe=globalThis.BigInt,C=globalThis.BigInt64Array,M=n.ptrSizeof||4,W=n.ptrIR||"i32";i.debugFlags||(i.__makeDebugFlags=function(U=null){U&&U.__flags&&(U=U.__flags);let _e=function ge(ye){return arguments.length===0?ge.__flags:(ye<0?(delete ge.__flags.getter,delete ge.__flags.setter,delete ge.__flags.alloc,delete ge.__flags.dealloc):(ge.__flags.getter=(1&ye)!==0,ge.__flags.setter=(2&ye)!==0,ge.__flags.alloc=(4&ye)!==0,ge.__flags.dealloc=(8&ye)!==0),ge._flags)};return Object.defineProperty(_e,"__flags",{iterable:!1,writable:!1,value:Object.create(U)}),U||_e(0),_e},i.debugFlags=i.__makeDebugFlags());let L=function(){let U=new ArrayBuffer(2);return new DataView(U).setInt16(0,256,!0),new Int16Array(U)[0]===256}(),T=U=>U[1]==="(",z=U=>U==="p"||U==="P",K=U=>U==="P",X=U=>T(U)?"p":U[0],I=function(U){switch(X(U)){case"c":case"C":return"i8";case"i":return"i32";case"p":case"P":case"s":return W;case"j":return"i64";case"f":return"float";case"d":return"double"}a("Unhandled signature IR:",U)},ie=C?()=>!0:()=>a("BigInt64Array is not available."),h=function(U){switch(X(U)){case"p":case"P":case"s":{switch(M){case 4:return"getInt32";case 8:return ie()&&"getBigInt64"}break}case"i":return"getInt32";case"c":return"getInt8";case"C":return"getUint8";case"j":return ie()&&"getBigInt64";case"f":return"getFloat32";case"d":return"getFloat64"}a("Unhandled DataView getter for signature:",U)},x=function(U){switch(X(U)){case"p":case"P":case"s":{switch(M){case 4:return"setInt32";case 8:return ie()&&"setBigInt64"}break}case"i":return"setInt32";case"c":return"setInt8";case"C":return"setUint8";case"j":return ie()&&"setBigInt64";case"f":return"setFloat32";case"d":return"setFloat64"}a("Unhandled DataView setter for signature:",U)},B=function(U){switch(X(U)){case"i":case"f":case"c":case"C":case"d":return Number;case"j":return ie()&&fe;case"p":case"P":case"s":switch(M){case 4:return Number;case 8:return ie()&&fe}break}a("Unhandled DataView set wrapper for signature:",U)},H=(U,_e)=>U+"::"+_e,Q=function(U,_e){return()=>a(H(U,_e),"is read-only.")},b=new WeakMap,_="(pointer-is-external)",d=function(U,_e,ge){if(ge||(ge=b.get(_e)),ge){if(b.delete(_e),Array.isArray(_e.ondispose)){let ye;for(;ye=_e.ondispose.shift();)try{ye instanceof Function?ye.call(_e):ye instanceof Ie?ye.dispose():typeof ye=="number"&&A(ye)}catch(We){console.warn("ondispose() for",U.structName,"@",ge,"threw. NOT propagating it.",We)}}else if(_e.ondispose instanceof Function)try{_e.ondispose()}catch(ye){console.warn("ondispose() for",U.structName,"@",ge,"threw. NOT propagating it.",ye)}delete _e.ondispose,U.debugFlags.__flags.dealloc&&$("debug.dealloc:",_e[_]?"EXTERNAL":"",U.structName,"instance:",U.structInfo.sizeof,"bytes @"+ge),_e[_]||A(ge)}},m=U=>({configurable:!1,writable:!1,iterable:!1,value:U}),k=function(U,_e,ge){let ye=!ge;ge?Object.defineProperty(_e,_,m(ge)):(ge=q(U.structInfo.sizeof),ge||a("Allocation of",U.structName,"structure failed."));try{U.debugFlags.__flags.alloc&&$("debug.alloc:",ye?"":"EXTERNAL",U.structName,"instance:",U.structInfo.sizeof,"bytes @"+ge),ye&&o().fill(0,ge,ge+U.structInfo.sizeof),b.set(_e,ge)}catch(We){throw d(U,_e,ge),We}},te=function(){let U=this.pointer;return U?new Uint8Array(o().slice(U,U+this.structInfo.sizeof)):null},ke=m(U=>G+U+oe),ve=function(U,_e,ge=!0){let ye=U.members[_e];if(!ye&&(G||oe)){for(let We of Object.values(U.members))if(We.key===_e){ye=We;break}!ye&&ge&&a(H(U.name,_e),"is not a mapped struct member.")}return ye},Fe=function U(_e,ge,ye=!1){U._||(U._=Qe=>Qe.replace(/[^vipPsjrdcC]/g,"").replace(/[pPscC]/g,"i"));let We=ve(_e.structInfo,ge,!0);return ye?U._(We.signature):We.signature},Be={configurable:!1,enumerable:!1,get:function(){return b.get(this)},set:()=>a("Cannot assign the 'pointer' property of a struct.")},re=m(function(){let U=[];for(let _e of Object.keys(this.structInfo.members))U.push(this.memberKey(_e));return U}),O=new TextDecoder("utf-8"),N=new TextEncoder,le=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,pe=function(U,_e,ge){return O.decode(U.buffer instanceof le?U.slice(_e,ge):U.subarray(_e,ge))},P=function(U,_e,ge=!1){let ye=ve(U.structInfo,_e,ge);return ye&&ye.signature.length===1&&ye.signature[0]==="s"?ye:!1},j=function(U){U.signature!=="s"&&a("Invalid member type signature for C-string value:",JSON.stringify(U))},J=function(_e,ge){let ye=ve(_e.structInfo,ge,!0);j(ye);let We=_e[ye.key];if(!We)return null;let Qe=We,He=o();for(;He[Qe]!==0;++Qe);return We===Qe?"":pe(He,We,Qe)},ue=function(U,..._e){U.ondispose?Array.isArray(U.ondispose)||(U.ondispose=[U.ondispose]):U.ondispose=[],U.ondispose.push(..._e)},me=function(U){let _e=N.encode(U),ge=q(_e.length+1);ge||a("Allocation error while duplicating string:",U);let ye=o();return ye.set(_e,ge),ye[ge+_e.length]=0,ge},Se=function(U,_e,ge){let ye=ve(U.structInfo,_e,!0);j(ye);let We=me(ge);return U[ye.key]=We,ue(U,We),U},Ie=function(_e,ge){arguments[2]!==m&&a("Do not call the StructType constructor","from client-level code."),Object.defineProperties(this,{structName:m(_e),structInfo:m(ge)})};Ie.prototype=Object.create(null,{dispose:m(function(){d(this.constructor,this)}),lookupMember:m(function(U,_e=!0){return ve(this.structInfo,U,_e)}),memberToJsString:m(function(U){return J(this,U)}),memberIsString:m(function(U,_e=!0){return P(this,U,_e)}),memberKey:ke,memberKeys:re,memberSignature:m(function(U,_e=!1){return Fe(this,U,_e)}),memoryDump:m(te),pointer:Be,setMemberCString:m(function(U,_e){return Se(this,U,_e)})}),Object.assign(Ie.prototype,{addOnDispose:function(...U){return ue(this,...U),this}}),Object.defineProperties(Ie,{allocCString:m(me),isA:m(U=>U instanceof Ie),hasExternalPointer:m(U=>U instanceof Ie&&!!U[_]),memberKey:ke});let be=U=>Number.isFinite(U)||U instanceof(fe||Number),ot=function U(_e,ge,ye){if(!U._){U._={getters:{},setters:{},sw:{}};let ct=["i","c","C","p","P","s","f","d","v()"];se&&ct.push("j"),ct.forEach(function(xt){U._.getters[xt]=h(xt),U._.setters[xt]=x(xt),U._.sw[xt]=B(xt)});let Rf=/^[ipPsjfdcC]$/,Bf=/^[vipPsjfdcC]\([ipPsjfdcC]*\)$/;U.sigCheck=function(xt,Df,Un,on){Object.prototype.hasOwnProperty.call(xt,Un)&&a(xt.structName,"already has a property named",Un+"."),Rf.test(on)||Bf.test(on)||a("Malformed signature for",H(xt.structName,Df)+":",on)}}let We=_e.memberKey(ge);U.sigCheck(_e.prototype,ge,We,ye.signature),ye.key=We,ye.name=ge;let Qe=X(ye.signature),He=H(_e.prototype.structName,We),Ye=_e.prototype.debugFlags.__flags,Ht=Object.create(null);Ht.configurable=!1,Ht.enumerable=!1,Ht.get=function(){Ye.getter&&$("debug.getter:",U._.getters[Qe],"for",I(Qe),He,"@",this.pointer,"+",ye.offset,"sz",ye.sizeof);let ct=new DataView(o().buffer,this.pointer+ye.offset,ye.sizeof)[U._.getters[Qe]](0,L);return Ye.getter&&$("debug.getter:",He,"result =",ct),ct},ye.readOnly?Ht.set=Q(_e.prototype.structName,We):Ht.set=function(ct){if(Ye.setter&&$("debug.setter:",U._.setters[Qe],"for",I(Qe),He,"@",this.pointer,"+",ye.offset,"sz",ye.sizeof,ct),this.pointer||a("Cannot set struct property on disposed instance."),ct===null)ct=0;else for(;!be(ct);){if(K(ye.signature)&&ct instanceof Ie){ct=ct.pointer||0,Ye.setter&&$("debug.setter:",He,"resolved to",ct);break}a("Invalid value for pointer-type",He+".")}new DataView(o().buffer,this.pointer+ye.offset,ye.sizeof)[U._.setters[Qe]](0,U._.sw[Qe](ct),L)},Object.defineProperty(_e.prototype,We,Ht)},it=function U(_e,ge){arguments.length===1?(ge=_e,_e=ge.name):ge.name||(ge.name=_e),_e||a("Struct name is required.");let ye=!1;Object.keys(ge.members).forEach(He=>{let Ye=ge.members[He];Ye.sizeof?Ye.sizeof===1?Ye.signature==="c"||Ye.signature==="C"||a("Unexpected sizeof==1 member",H(ge.name,He),"with signature",Ye.signature):(Ye.sizeof%4!==0&&(console.warn("Invalid struct member description =",Ye,"from",ge),a(_e,"member",He,"sizeof is not aligned. sizeof="+Ye.sizeof)),Ye.offset%4!==0&&(console.warn("Invalid struct member description =",Ye,"from",ge),a(_e,"member",He,"offset is not aligned. offset="+Ye.offset))):a(_e,"member",He,"is missing sizeof."),(!ye||ye.offset<Ye.offset)&&(ye=Ye)}),ye?ge.sizeof<ye.offset+ye.sizeof&&a("Invalid struct config:",_e,"max member offset ("+ye.offset+") ","extends past end of struct (sizeof="+ge.sizeof+")."):a("No member property descriptions found.");let We=m(i.__makeDebugFlags(U.debugFlags)),Qe=function He(Ye){this instanceof He?arguments.length?((Ye!==(Ye|0)||Ye<=0)&&a("Invalid pointer value for",_e,"constructor."),k(He,this,Ye)):k(He,this):a("The",_e,"constructor may only be called via 'new'.")};return Object.defineProperties(Qe,{debugFlags:We,isA:m(He=>He instanceof Qe),memberKey:ke,memberKeys:re,methodInfoForKey:m(function(He){}),structInfo:m(ge),structName:m(_e)}),Qe.prototype=new Ie(_e,ge,m),Object.defineProperties(Qe.prototype,{debugFlags:We,constructor:m(Qe)}),Object.keys(ge.members).forEach(He=>ot(Qe,He,ge.members[He])),Qe};return it.StructType=Ie,it.config=n,it.allocCString=me,it.debugFlags||(it.debugFlags=i.__makeDebugFlags(i.debugFlags)),it},globalThis.sqlite3ApiBootstrap.initializers.push(function(t){"use strict";let n=(...L)=>{throw new Error(L.join(" "))},a=t.SQLite3Error.toss,i=t.capi,o=t.wasm,q=t.util;if(globalThis.WhWasmUtilInstaller(o),delete globalThis.WhWasmUtilInstaller,o.bindingSignatures=[["sqlite3_aggregate_context","void*","sqlite3_context*","int"],["sqlite3_bind_double","int","sqlite3_stmt*","int","f64"],["sqlite3_bind_int","int","sqlite3_stmt*","int","int"],["sqlite3_bind_null",void 0,"sqlite3_stmt*","int"],["sqlite3_bind_parameter_count","int","sqlite3_stmt*"],["sqlite3_bind_parameter_index","int","sqlite3_stmt*","string"],["sqlite3_bind_parameter_name","string","sqlite3_stmt*","int"],["sqlite3_bind_pointer","int","sqlite3_stmt*","int","*","string:static","*"],["sqlite3_busy_handler","int",["sqlite3*",new o.xWrap.FuncPtrAdapter({signature:"i(pi)",contextKey:(L,T)=>L[0]}),"*"]],["sqlite3_busy_timeout","int","sqlite3*","int"],["sqlite3_changes","int","sqlite3*"],["sqlite3_clear_bindings","int","sqlite3_stmt*"],["sqlite3_collation_needed","int","sqlite3*","*","*"],["sqlite3_column_blob","*","sqlite3_stmt*","int"],["sqlite3_column_bytes","int","sqlite3_stmt*","int"],["sqlite3_column_count","int","sqlite3_stmt*"],["sqlite3_column_decltype","string","sqlite3_stmt*","int"],["sqlite3_column_double","f64","sqlite3_stmt*","int"],["sqlite3_column_int","int","sqlite3_stmt*","int"],["sqlite3_column_name","string","sqlite3_stmt*","int"],["sqlite3_column_text","string","sqlite3_stmt*","int"],["sqlite3_column_type","int","sqlite3_stmt*","int"],["sqlite3_column_value","sqlite3_value*","sqlite3_stmt*","int"],["sqlite3_commit_hook","void*",["sqlite3*",new o.xWrap.FuncPtrAdapter({name:"sqlite3_commit_hook",signature:"i(p)",contextKey:L=>L[0]}),"*"]],["sqlite3_compileoption_get","string","int"],["sqlite3_compileoption_used","int","string"],["sqlite3_complete","int","string:flexible"],["sqlite3_context_db_handle","sqlite3*","sqlite3_context*"],["sqlite3_data_count","int","sqlite3_stmt*"],["sqlite3_db_filename","string","sqlite3*","string"],["sqlite3_db_handle","sqlite3*","sqlite3_stmt*"],["sqlite3_db_name","string","sqlite3*","int"],["sqlite3_db_readonly","int","sqlite3*","string"],["sqlite3_db_status","int","sqlite3*","int","*","*","int"],["sqlite3_errcode","int","sqlite3*"],["sqlite3_errmsg","string","sqlite3*"],["sqlite3_error_offset","int","sqlite3*"],["sqlite3_errstr","string","int"],["sqlite3_exec","int",["sqlite3*","string:flexible",new o.xWrap.FuncPtrAdapter({signature:"i(pipp)",bindScope:"transient",callProxy:L=>{let T;return(z,K,X,I)=>{try{let ie=o.cArgvToJs(K,X);return T||(T=o.cArgvToJs(K,I)),L(ie,T)|0}catch(ie){return ie.resultCode||i.SQLITE_ERROR}}}}),"*","**"]],["sqlite3_expanded_sql","string","sqlite3_stmt*"],["sqlite3_extended_errcode","int","sqlite3*"],["sqlite3_extended_result_codes","int","sqlite3*","int"],["sqlite3_file_control","int","sqlite3*","string","int","*"],["sqlite3_finalize","int","sqlite3_stmt*"],["sqlite3_free",void 0,"*"],["sqlite3_get_autocommit","int","sqlite3*"],["sqlite3_get_auxdata","*","sqlite3_context*","int"],["sqlite3_initialize",void 0],["sqlite3_interrupt",void 0,"sqlite3*"],["sqlite3_is_interrupted","int","sqlite3*"],["sqlite3_keyword_count","int"],["sqlite3_keyword_name","int",["int","**","*"]],["sqlite3_keyword_check","int",["string","int"]],["sqlite3_libversion","string"],["sqlite3_libversion_number","int"],["sqlite3_limit","int",["sqlite3*","int","int"]],["sqlite3_malloc","*","int"],["sqlite3_open","int","string","*"],["sqlite3_open_v2","int","string","*","int","string"],["sqlite3_realloc","*","*","int"],["sqlite3_reset","int","sqlite3_stmt*"],["sqlite3_result_blob",void 0,"sqlite3_context*","*","int","*"],["sqlite3_result_double",void 0,"sqlite3_context*","f64"],["sqlite3_result_error",void 0,"sqlite3_context*","string","int"],["sqlite3_result_error_code",void 0,"sqlite3_context*","int"],["sqlite3_result_error_nomem",void 0,"sqlite3_context*"],["sqlite3_result_error_toobig",void 0,"sqlite3_context*"],["sqlite3_result_int",void 0,"sqlite3_context*","int"],["sqlite3_result_null",void 0,"sqlite3_context*"],["sqlite3_result_pointer",void 0,"sqlite3_context*","*","string:static","*"],["sqlite3_result_subtype",void 0,"sqlite3_value*","int"],["sqlite3_result_text",void 0,"sqlite3_context*","string","int","*"],["sqlite3_result_zeroblob",void 0,"sqlite3_context*","int"],["sqlite3_rollback_hook","void*",["sqlite3*",new o.xWrap.FuncPtrAdapter({name:"sqlite3_rollback_hook",signature:"v(p)",contextKey:L=>L[0]}),"*"]],["sqlite3_set_auxdata",void 0,["sqlite3_context*","int","*",new o.xWrap.FuncPtrAdapter({name:"xDestroyAuxData",signature:"v(*)",contextKey:(L,T)=>L[0]})]],["sqlite3_shutdown",void 0],["sqlite3_sourceid","string"],["sqlite3_sql","string","sqlite3_stmt*"],["sqlite3_status","int","int","*","*","int"],["sqlite3_step","int","sqlite3_stmt*"],["sqlite3_stmt_busy","int","sqlite3_stmt*"],["sqlite3_stmt_readonly","int","sqlite3_stmt*"],["sqlite3_stmt_status","int","sqlite3_stmt*","int","int"],["sqlite3_strglob","int","string","string"],["sqlite3_stricmp","int","string","string"],["sqlite3_strlike","int","string","string","int"],["sqlite3_strnicmp","int","string","string","int"],["sqlite3_table_column_metadata","int","sqlite3*","string","string","string","**","**","*","*","*"],["sqlite3_total_changes","int","sqlite3*"],["sqlite3_trace_v2","int",["sqlite3*","int",new o.xWrap.FuncPtrAdapter({name:"sqlite3_trace_v2::callback",signature:"i(ippp)",contextKey:(L,T)=>L[0]}),"*"]],["sqlite3_txn_state","int",["sqlite3*","string"]],["sqlite3_uri_boolean","int","sqlite3_filename","string","int"],["sqlite3_uri_key","string","sqlite3_filename","int"],["sqlite3_uri_parameter","string","sqlite3_filename","string"],["sqlite3_user_data","void*","sqlite3_context*"],["sqlite3_value_blob","*","sqlite3_value*"],["sqlite3_value_bytes","int","sqlite3_value*"],["sqlite3_value_double","f64","sqlite3_value*"],["sqlite3_value_dup","sqlite3_value*","sqlite3_value*"],["sqlite3_value_free",void 0,"sqlite3_value*"],["sqlite3_value_frombind","int","sqlite3_value*"],["sqlite3_value_int","int","sqlite3_value*"],["sqlite3_value_nochange","int","sqlite3_value*"],["sqlite3_value_numeric_type","int","sqlite3_value*"],["sqlite3_value_pointer","*","sqlite3_value*","string:static"],["sqlite3_value_subtype","int","sqlite3_value*"],["sqlite3_value_text","string","sqlite3_value*"],["sqlite3_value_type","int","sqlite3_value*"],["sqlite3_vfs_find","*","string"],["sqlite3_vfs_register","int","sqlite3_vfs*","int"],["sqlite3_vfs_unregister","int","sqlite3_vfs*"]],o.exports.sqlite3_progress_handler&&o.bindingSignatures.push(["sqlite3_progress_handler",void 0,["sqlite3*","int",new o.xWrap.FuncPtrAdapter({name:"xProgressHandler",signature:"i(p)",bindScope:"context",contextKey:(L,T)=>L[0]}),"*"]]),o.exports.sqlite3_stmt_explain&&o.bindingSignatures.push(["sqlite3_stmt_explain","int","sqlite3_stmt*","int"],["sqlite3_stmt_isexplain","int","sqlite3_stmt*"]),o.exports.sqlite3_set_authorizer&&o.bindingSignatures.push(["sqlite3_set_authorizer","int",["sqlite3*",new o.xWrap.FuncPtrAdapter({name:"sqlite3_set_authorizer::xAuth",signature:"i(pissss)",contextKey:(L,T)=>L[0],callProxy:L=>(T,z,K,X,I,ie)=>{try{return K=K&&o.cstrToJs(K),X=X&&o.cstrToJs(X),I=I&&o.cstrToJs(I),ie=ie&&o.cstrToJs(ie),L(T,z,K,X,I,ie)||0}catch(h){return h.resultCode||i.SQLITE_ERROR}}}),"*"]]),o.bindingSignatures.int64=[["sqlite3_bind_int64","int",["sqlite3_stmt*","int","i64"]],["sqlite3_changes64","i64",["sqlite3*"]],["sqlite3_column_int64","i64",["sqlite3_stmt*","int"]],["sqlite3_deserialize","int","sqlite3*","string","*","i64","i64","int"],["sqlite3_last_insert_rowid","i64",["sqlite3*"]],["sqlite3_malloc64","*","i64"],["sqlite3_msize","i64","*"],["sqlite3_overload_function","int",["sqlite3*","string","int"]],["sqlite3_realloc64","*","*","i64"],["sqlite3_result_int64",void 0,"*","i64"],["sqlite3_result_zeroblob64","int","*","i64"],["sqlite3_serialize","*","sqlite3*","string","*","int"],["sqlite3_set_last_insert_rowid",void 0,["sqlite3*","i64"]],["sqlite3_status64","int","int","*","*","int"],["sqlite3_total_changes64","i64",["sqlite3*"]],["sqlite3_update_hook","*",["sqlite3*",new o.xWrap.FuncPtrAdapter({name:"sqlite3_update_hook",signature:"v(iippj)",contextKey:L=>L[0],callProxy:L=>(T,z,K,X,I)=>{L(T,z,o.cstrToJs(K),o.cstrToJs(X),I)}}),"*"]],["sqlite3_uri_int64","i64",["sqlite3_filename","string","i64"]],["sqlite3_value_int64","i64","sqlite3_value*"]],o.bigIntEnabled&&o.exports.sqlite3_declare_vtab&&o.bindingSignatures.int64.push(["sqlite3_create_module","int",["sqlite3*","string","sqlite3_module*","*"]],["sqlite3_create_module_v2","int",["sqlite3*","string","sqlite3_module*","*","*"]],["sqlite3_declare_vtab","int",["sqlite3*","string:flexible"]],["sqlite3_drop_modules","int",["sqlite3*","**"]],["sqlite3_vtab_collation","string","sqlite3_index_info*","int"],["sqlite3_vtab_distinct","int","sqlite3_index_info*"],["sqlite3_vtab_in","int","sqlite3_index_info*","int","int"],["sqlite3_vtab_in_first","int","sqlite3_value*","**"],["sqlite3_vtab_in_next","int","sqlite3_value*","**"],["sqlite3_vtab_nochange","int","sqlite3_context*"],["sqlite3_vtab_on_conflict","int","sqlite3*"],["sqlite3_vtab_rhs_value","int","sqlite3_index_info*","int","**"]),o.bigIntEnabled&&o.exports.sqlite3_preupdate_hook&&o.bindingSignatures.int64.push(["sqlite3_preupdate_blobwrite","int","sqlite3*"],["sqlite3_preupdate_count","int","sqlite3*"],["sqlite3_preupdate_depth","int","sqlite3*"],["sqlite3_preupdate_hook","*",["sqlite3*",new o.xWrap.FuncPtrAdapter({name:"sqlite3_preupdate_hook",signature:"v(ppippjj)",contextKey:L=>L[0],callProxy:L=>(T,z,K,X,I,ie,h)=>{L(T,z,K,o.cstrToJs(X),o.cstrToJs(I),ie,h)}}),"*"]],["sqlite3_preupdate_new","int",["sqlite3*","int","**"]],["sqlite3_preupdate_old","int",["sqlite3*","int","**"]]),o.bigIntEnabled&&o.exports.sqlite3changegroup_add&&o.exports.sqlite3session_create&&o.exports.sqlite3_preupdate_hook){let L={signature:"i(ps)",callProxy:T=>(z,K)=>{try{return T(z,o.cstrToJs(K))|0}catch(X){return X.resultCode||i.SQLITE_ERROR}}};o.bindingSignatures.int64.push(["sqlite3changegroup_add","int",["sqlite3_changegroup*","int","void*"]],["sqlite3changegroup_add_strm","int",["sqlite3_changegroup*",new o.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3changegroup_delete",void 0,["sqlite3_changegroup*"]],["sqlite3changegroup_new","int",["**"]],["sqlite3changegroup_output","int",["sqlite3_changegroup*","int*","**"]],["sqlite3changegroup_output_strm","int",["sqlite3_changegroup*",new o.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply","int",["sqlite3*","int","void*",new o.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...L}),new o.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply_strm","int",["sqlite3*",new o.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new o.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...L}),new o.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply_v2","int",["sqlite3*","int","void*",new o.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...L}),new o.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*","**","int*","int"]],["sqlite3changeset_apply_v2_strm","int",["sqlite3*",new o.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new o.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...L}),new o.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*","**","int*","int"]],["sqlite3changeset_concat","int",["int","void*","int","void*","int*","**"]],["sqlite3changeset_concat_strm","int",[new o.xWrap.FuncPtrAdapter({name:"xInputA",signature:"i(ppp)",bindScope:"transient"}),"void*",new o.xWrap.FuncPtrAdapter({name:"xInputB",signature:"i(ppp)",bindScope:"transient"}),"void*",new o.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_conflict","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_finalize","int",["sqlite3_changeset_iter*"]],["sqlite3changeset_fk_conflicts","int",["sqlite3_changeset_iter*","int*"]],["sqlite3changeset_invert","int",["int","void*","int*","**"]],["sqlite3changeset_invert_strm","int",[new o.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new o.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_new","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_next","int",["sqlite3_changeset_iter*"]],["sqlite3changeset_old","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_op","int",["sqlite3_changeset_iter*","**","int*","int*","int*"]],["sqlite3changeset_pk","int",["sqlite3_changeset_iter*","**","int*"]],["sqlite3changeset_start","int",["**","int","*"]],["sqlite3changeset_start_strm","int",["**",new o.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3changeset_start_v2","int",["**","int","*","int"]],["sqlite3changeset_start_v2_strm","int",["**",new o.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*","int"]],["sqlite3session_attach","int",["sqlite3_session*","string"]],["sqlite3session_changeset","int",["sqlite3_session*","int*","**"]],["sqlite3session_changeset_size","i64",["sqlite3_session*"]],["sqlite3session_changeset_strm","int",["sqlite3_session*",new o.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3session_config","int",["int","void*"]],["sqlite3session_create","int",["sqlite3*","string","**"]],["sqlite3session_diff","int",["sqlite3_session*","string","string","**"]],["sqlite3session_enable","int",["sqlite3_session*","int"]],["sqlite3session_indirect","int",["sqlite3_session*","int"]],["sqlite3session_isempty","int",["sqlite3_session*"]],["sqlite3session_memory_used","i64",["sqlite3_session*"]],["sqlite3session_object_config","int",["sqlite3_session*","int","void*"]],["sqlite3session_patchset","int",["sqlite3_session*","*","**"]],["sqlite3session_patchset_strm","int",["sqlite3_session*",new o.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3session_table_filter",void 0,["sqlite3_session*",new o.xWrap.FuncPtrAdapter({name:"xFilter",...L,contextKey:(T,z)=>T[0]}),"*"]])}o.bindingSignatures.wasmInternal=[["sqlite3__wasm_db_reset","int","sqlite3*"],["sqlite3__wasm_db_vfs","sqlite3_vfs*","sqlite3*","string"],["sqlite3__wasm_vfs_create_file","int","sqlite3_vfs*","string","*","int"],["sqlite3__wasm_posix_create_file","int","string","*","int"],["sqlite3__wasm_vfs_unlink","int","sqlite3_vfs*","string"],["sqlite3__wasm_qfmt_token","string:dealloc","string","int"]],t.StructBinder=globalThis.Jaccwabyt({heap:o.heap8u,alloc:o.alloc,dealloc:o.dealloc,bigIntEnabled:o.bigIntEnabled,memberPrefix:"$"}),delete globalThis.Jaccwabyt;{let L=o.xWrap.argAdapter("string");o.xWrap.argAdapter("string:flexible",I=>L(q.flexibleString(I))),o.xWrap.argAdapter("string:static",function(I){return o.isPtr(I)?I:(I=""+I,this[I]||(this[I]=o.allocCString(I)))}.bind(Object.create(null)));let T=o.xWrap.argAdapter("*"),z=function(){};o.xWrap.argAdapter("sqlite3_filename",T)("sqlite3_context*",T)("sqlite3_value*",T)("void*",T)("sqlite3_changegroup*",T)("sqlite3_changeset_iter*",T)("sqlite3_session*",T)("sqlite3_stmt*",I=>T(I instanceof(t?.oo1?.Stmt||z)?I.pointer:I))("sqlite3*",I=>T(I instanceof(t?.oo1?.DB||z)?I.pointer:I))("sqlite3_vfs*",I=>typeof I=="string"?i.sqlite3_vfs_find(I)||t.SQLite3Error.toss(i.SQLITE_NOTFOUND,"Unknown sqlite3_vfs name:",I):T(I instanceof(i.sqlite3_vfs||z)?I.pointer:I)),o.exports.sqlite3_declare_vtab&&o.xWrap.argAdapter("sqlite3_index_info*",I=>T(I instanceof(i.sqlite3_index_info||z)?I.pointer:I))("sqlite3_module*",I=>T(I instanceof(i.sqlite3_module||z)?I.pointer:I));let K=o.xWrap.resultAdapter("*");o.xWrap.resultAdapter("sqlite3*",K)("sqlite3_context*",K)("sqlite3_stmt*",K)("sqlite3_value*",K)("sqlite3_vfs*",K)("void*",K),o.exports.sqlite3_step.length===0&&(o.xWrap.doArgcCheck=!1,t.config.warn("Disabling sqlite3.wasm.xWrap.doArgcCheck due to environmental quirks."));for(let I of o.bindingSignatures)i[I[0]]=o.xWrap.apply(null,I);for(let I of o.bindingSignatures.wasmInternal)q[I[0]]=o.xWrap.apply(null,I);let X=function(I){return()=>n(I+"() is unavailable due to lack","of BigInt support in this build.")};for(let I of o.bindingSignatures.int64)i[I[0]]=o.bigIntEnabled?o.xWrap.apply(null,I):X(I[0]);if(delete o.bindingSignatures,o.exports.sqlite3__wasm_db_error){let I=o.xWrap("sqlite3__wasm_db_error","int","sqlite3*","int","string");q.sqlite3__wasm_db_error=function(ie,h,x){return h instanceof t.WasmAllocError?(h=i.SQLITE_NOMEM,x=0):h instanceof Error&&(x=x||""+h,h=h.resultCode||i.SQLITE_ERROR),ie?I(ie,h,x):h}}else q.sqlite3__wasm_db_error=function(I,ie,h){return console.warn("sqlite3__wasm_db_error() is not exported.",arguments),ie}}{let L=o.xCall("sqlite3__wasm_enum_json");L||n("Maintenance required: increase sqlite3__wasm_enum_json()'s","static buffer size!"),o.ctype=JSON.parse(o.cstrToJs(L));let T=["access","authorizer","blobFinalizers","changeset","config","dataTypes","dbConfig","dbStatus","encodings","fcntl","flock","ioCap","limits","openFlags","prepareFlags","resultCodes","sqlite3Status","stmtStatus","syncFlags","trace","txnState","udfFlags","version"];o.bigIntEnabled&&T.push("serialize","session","vtab");for(let X of T)for(let I of Object.entries(o.ctype[X]))i[I[0]]=I[1];o.functionEntry(i.SQLITE_WASM_DEALLOC)||n("Internal error: cannot resolve exported function","entry SQLITE_WASM_DEALLOC (=="+i.SQLITE_WASM_DEALLOC+").");let z=Object.create(null);for(let X of["resultCodes"])for(let I of Object.entries(o.ctype[X]))z[I[1]]=I[0];i.sqlite3_js_rc_str=X=>z[X];let K=Object.assign(Object.create(null),{WasmTestStruct:!0,sqlite3_kvvfs_methods:!q.isUIThread(),sqlite3_index_info:!o.bigIntEnabled,sqlite3_index_constraint:!o.bigIntEnabled,sqlite3_index_orderby:!o.bigIntEnabled,sqlite3_index_constraint_usage:!o.bigIntEnabled});for(let X of o.ctype.structs)K[X.name]||(i[X.name]=t.StructBinder(X));if(i.sqlite3_index_info){for(let X of["sqlite3_index_constraint","sqlite3_index_orderby","sqlite3_index_constraint_usage"])i.sqlite3_index_info[X]=i[X],delete i[X];i.sqlite3_vtab_config=o.xWrap("sqlite3__wasm_vtab_config","int",["sqlite3*","int","int"])}}let A=(L,T,z)=>q.sqlite3__wasm_db_error(L,i.SQLITE_MISUSE,T+"() requires "+z+" argument"+(z===1?"":"s")+"."),$=L=>q.sqlite3__wasm_db_error(L,i.SQLITE_FORMAT,"SQLITE_UTF8 is the only supported encoding."),G=L=>o.xWrap.argAdapter("sqlite3*")(L),oe=L=>o.isPtr(L)?o.cstrToJs(L):L,se=function(L,T){L=G(L);let z=this.dbMap.get(L);if(T)!z&&T>0&&this.dbMap.set(L,z=Object.create(null));else return this.dbMap.delete(L),z;return z}.bind(Object.assign(Object.create(null),{dbMap:new Map}));se.addCollation=function(L,T){let z=se(L,1);z.collation||(z.collation=new Set),z.collation.add(oe(T).toLowerCase())},se._addUDF=function(L,T,z,K){T=oe(T).toLowerCase();let X=K.get(T);X||K.set(T,X=new Set),X.add(z<0?-1:z)},se.addFunction=function(L,T,z){let K=se(L,1);K.udf||(K.udf=new Map),this._addUDF(L,T,z,K.udf)},o.exports.sqlite3_create_window_function&&(se.addWindowFunc=function(L,T,z){let K=se(L,1);K.wudf||(K.wudf=new Map),this._addUDF(L,T,z,K.wudf)}),se.cleanup=function(L){L=G(L);let T=[L];for(let X of["sqlite3_busy_handler","sqlite3_commit_hook","sqlite3_preupdate_hook","sqlite3_progress_handler","sqlite3_rollback_hook","sqlite3_set_authorizer","sqlite3_trace_v2","sqlite3_update_hook"]){let I=o.exports[X];if(I){T.length=I.length;try{i[X](...T)}catch(ie){t.config.warn("close-time call of",X+"(",T,") threw:",ie)}}}let z=se(L,0);if(!z)return;if(z.collation){for(let X of z.collation)try{i.sqlite3_create_collation_v2(L,X,i.SQLITE_UTF8,0,0,0)}catch{}delete z.collation}let K;for(K=0;K<2;++K){let X=K?z.wudf:z.udf;if(!X)continue;let I=K?i.sqlite3_create_window_function:i.sqlite3_create_function_v2;for(let ie of X){let h=ie[0],x=ie[1],B=[L,h,0,i.SQLITE_UTF8,0,0,0,0,0];K&&B.push(0);for(let H of x)try{B[2]=H,I.apply(null,B)}catch{}x.clear()}X.clear()}delete z.udf,delete z.wudf};{let L=o.xWrap("sqlite3_close_v2","int","sqlite3*");i.sqlite3_close_v2=function(T){if(arguments.length!==1)return A(T,"sqlite3_close_v2",1);if(T)try{se.cleanup(T)}catch{}return L(T)}}if(i.sqlite3session_create){let L=o.xWrap("sqlite3session_delete",void 0,["sqlite3_session*"]);i.sqlite3session_delete=function(T){if(arguments.length!==1)return A(pDb,"sqlite3session_delete",1);T&&i.sqlite3session_table_filter(T,0,0),L(T)}}{let L=(z,K)=>"argv["+K+"]:"+z[0]+":"+o.cstrToJs(z[1]).toLowerCase(),T=o.xWrap("sqlite3_create_collation_v2","int",["sqlite3*","string","int","*",new o.xWrap.FuncPtrAdapter({name:"xCompare",signature:"i(pipip)",contextKey:L}),new o.xWrap.FuncPtrAdapter({name:"xDestroy",signature:"v(p)",contextKey:L})]);i.sqlite3_create_collation_v2=function(z,K,X,I,ie,h){if(arguments.length!==6)return A(z,"sqlite3_create_collation_v2",6);if(!(X&15))X|=i.SQLITE_UTF8;else if(i.SQLITE_UTF8!==(X&15))return $(z);try{let x=T(z,K,X,I,ie,h);return x===0&&ie instanceof Function&&se.addCollation(z,K),x}catch(x){return q.sqlite3__wasm_db_error(z,x)}},i.sqlite3_create_collation=(z,K,X,I,ie)=>arguments.length===5?i.sqlite3_create_collation_v2(z,K,X,I,ie,0):A(z,"sqlite3_create_collation",5)}{let L=function(X,I){return X[0]+":"+(X[2]<0?-1:X[2])+":"+I+":"+o.cstrToJs(X[1]).toLowerCase()},T=Object.assign(Object.create(null),{xInverseAndStep:{signature:"v(pip)",contextKey:L,callProxy:X=>(I,ie,h)=>{try{X(I,...i.sqlite3_values_to_js(ie,h))}catch(x){i.sqlite3_result_error_js(I,x)}}},xFinalAndValue:{signature:"v(p)",contextKey:L,callProxy:X=>I=>{try{i.sqlite3_result_js(I,X(I))}catch(ie){i.sqlite3_result_error_js(I,ie)}}},xFunc:{signature:"v(pip)",contextKey:L,callProxy:X=>(I,ie,h)=>{try{i.sqlite3_result_js(I,X(I,...i.sqlite3_values_to_js(ie,h)))}catch(x){i.sqlite3_result_error_js(I,x)}}},xDestroy:{signature:"v(p)",contextKey:L,callProxy:X=>I=>{try{X(I)}catch(ie){console.error("UDF xDestroy method threw:",ie)}}}}),z=o.xWrap("sqlite3_create_function_v2","int",["sqlite3*","string","int","int","*",new o.xWrap.FuncPtrAdapter({name:"xFunc",...T.xFunc}),new o.xWrap.FuncPtrAdapter({name:"xStep",...T.xInverseAndStep}),new o.xWrap.FuncPtrAdapter({name:"xFinal",...T.xFinalAndValue}),new o.xWrap.FuncPtrAdapter({name:"xDestroy",...T.xDestroy})]),K=o.exports.sqlite3_create_window_function?o.xWrap("sqlite3_create_window_function","int",["sqlite3*","string","int","int","*",new o.xWrap.FuncPtrAdapter({name:"xStep",...T.xInverseAndStep}),new o.xWrap.FuncPtrAdapter({name:"xFinal",...T.xFinalAndValue}),new o.xWrap.FuncPtrAdapter({name:"xValue",...T.xFinalAndValue}),new o.xWrap.FuncPtrAdapter({name:"xInverse",...T.xInverseAndStep}),new o.xWrap.FuncPtrAdapter({name:"xDestroy",...T.xDestroy})]):void 0;i.sqlite3_create_function_v2=function X(I,ie,h,x,B,H,Q,b,_){if(X.length!==arguments.length)return A(I,"sqlite3_create_function_v2",X.length);if(!(x&15))x|=i.SQLITE_UTF8;else if(i.SQLITE_UTF8!==(x&15))return $(I);try{let d=z(I,ie,h,x,B,H,Q,b,_);return d===0&&(H instanceof Function||Q instanceof Function||b instanceof Function||_ instanceof Function)&&se.addFunction(I,ie,h),d}catch(d){return console.error("sqlite3_create_function_v2() setup threw:",d),q.sqlite3__wasm_db_error(I,d,"Creation of UDF threw: "+d)}},i.sqlite3_create_function=function X(I,ie,h,x,B,H,Q,b){return X.length===arguments.length?i.sqlite3_create_function_v2(I,ie,h,x,B,H,Q,b,0):A(I,"sqlite3_create_function",X.length)},K?i.sqlite3_create_window_function=function X(I,ie,h,x,B,H,Q,b,_,d){if(X.length!==arguments.length)return A(I,"sqlite3_create_window_function",X.length);if(!(x&15))x|=i.SQLITE_UTF8;else if(i.SQLITE_UTF8!==(x&15))return $(I);try{let m=K(I,ie,h,x,B,H,Q,b,_,d);return m===0&&(H instanceof Function||Q instanceof Function||b instanceof Function||_ instanceof Function||d instanceof Function)&&se.addWindowFunc(I,ie,h),m}catch(m){return console.error("sqlite3_create_window_function() setup threw:",m),q.sqlite3__wasm_db_error(I,m,"Creation of UDF threw: "+m)}}:delete i.sqlite3_create_window_function,i.sqlite3_create_function_v2.udfSetResult=i.sqlite3_create_function.udfSetResult=i.sqlite3_result_js,i.sqlite3_create_window_function&&(i.sqlite3_create_window_function.udfSetResult=i.sqlite3_result_js),i.sqlite3_create_function_v2.udfConvertArgs=i.sqlite3_create_function.udfConvertArgs=i.sqlite3_values_to_js,i.sqlite3_create_window_function&&(i.sqlite3_create_window_function.udfConvertArgs=i.sqlite3_values_to_js),i.sqlite3_create_function_v2.udfSetError=i.sqlite3_create_function.udfSetError=i.sqlite3_result_error_js,i.sqlite3_create_window_function&&(i.sqlite3_create_window_function.udfSetError=i.sqlite3_result_error_js)}{let L=(z,K)=>(typeof z=="string"?K=-1:q.isSQLableTypedArray(z)?(K=z.byteLength,z=q.typedArrayToString(z instanceof ArrayBuffer?new Uint8Array(z):z)):Array.isArray(z)&&(z=z.join(""),K=-1),[z,K]),T={basic:o.xWrap("sqlite3_prepare_v3","int",["sqlite3*","string","int","int","**","**"]),full:o.xWrap("sqlite3_prepare_v3","int",["sqlite3*","*","int","int","**","**"])};i.sqlite3_prepare_v3=function z(K,X,I,ie,h,x){if(z.length!==arguments.length)return A(K,"sqlite3_prepare_v3",z.length);let[B,H]=L(X,I);switch(typeof B){case"string":return T.basic(K,B,H,ie,h,null);case"number":return T.full(K,B,H,ie,h,x);default:return q.sqlite3__wasm_db_error(K,i.SQLITE_MISUSE,"Invalid SQL argument type for sqlite3_prepare_v2/v3().")}},i.sqlite3_prepare_v2=function z(K,X,I,ie,h){return z.length===arguments.length?i.sqlite3_prepare_v3(K,X,I,0,ie,h):A(K,"sqlite3_prepare_v2",z.length)}}{let L=o.xWrap("sqlite3_bind_text","int",["sqlite3_stmt*","int","string","int","*"]),T=o.xWrap("sqlite3_bind_blob","int",["sqlite3_stmt*","int","*","int","*"]);i.sqlite3_bind_text=function z(K,X,I,ie,h){if(z.length!==arguments.length)return A(i.sqlite3_db_handle(K),"sqlite3_bind_text",z.length);if(o.isPtr(I)||I===null)return L(K,X,I,ie,h);I instanceof ArrayBuffer?I=new Uint8Array(I):Array.isArray(pMem)&&(I=pMem.join(""));let x,B;try{if(q.isSQLableTypedArray(I))x=o.allocFromTypedArray(I),B=I.byteLength;else if(typeof I=="string")[x,B]=o.allocCString(I);else return q.sqlite3__wasm_db_error(i.sqlite3_db_handle(K),i.SQLITE_MISUSE,"Invalid 3rd argument type for sqlite3_bind_text().");return L(K,X,x,B,i.SQLITE_WASM_DEALLOC)}catch(H){return o.dealloc(x),q.sqlite3__wasm_db_error(i.sqlite3_db_handle(K),H)}},i.sqlite3_bind_blob=function z(K,X,I,ie,h){if(z.length!==arguments.length)return A(i.sqlite3_db_handle(K),"sqlite3_bind_blob",z.length);if(o.isPtr(I)||I===null)return T(K,X,I,ie,h);I instanceof ArrayBuffer?I=new Uint8Array(I):Array.isArray(I)&&(I=I.join(""));let x,B;try{if(q.isBindableTypedArray(I))x=o.allocFromTypedArray(I),B=ie>=0?ie:I.byteLength;else if(typeof I=="string")[x,B]=o.allocCString(I);else return q.sqlite3__wasm_db_error(i.sqlite3_db_handle(K),i.SQLITE_MISUSE,"Invalid 3rd argument type for sqlite3_bind_blob().");return T(K,X,x,B,i.SQLITE_WASM_DEALLOC)}catch(H){return o.dealloc(x),q.sqlite3__wasm_db_error(i.sqlite3_db_handle(K),H)}}}i.sqlite3_config=function(L,...T){if(arguments.length<2)return i.SQLITE_MISUSE;switch(L){case i.SQLITE_CONFIG_COVERING_INDEX_SCAN:case i.SQLITE_CONFIG_MEMSTATUS:case i.SQLITE_CONFIG_SMALL_MALLOC:case i.SQLITE_CONFIG_SORTERREF_SIZE:case i.SQLITE_CONFIG_STMTJRNL_SPILL:case i.SQLITE_CONFIG_URI:return o.exports.sqlite3__wasm_config_i(L,T[0]);case i.SQLITE_CONFIG_LOOKASIDE:return o.exports.sqlite3__wasm_config_ii(L,T[0],T[1]);case i.SQLITE_CONFIG_MEMDB_MAXSIZE:return o.exports.sqlite3__wasm_config_j(L,T[0]);case i.SQLITE_CONFIG_GETMALLOC:case i.SQLITE_CONFIG_GETMUTEX:case i.SQLITE_CONFIG_GETPCACHE2:case i.SQLITE_CONFIG_GETPCACHE:case i.SQLITE_CONFIG_HEAP:case i.SQLITE_CONFIG_LOG:case i.SQLITE_CONFIG_MALLOC:case i.SQLITE_CONFIG_MMAP_SIZE:case i.SQLITE_CONFIG_MULTITHREAD:case i.SQLITE_CONFIG_MUTEX:case i.SQLITE_CONFIG_PAGECACHE:case i.SQLITE_CONFIG_PCACHE2:case i.SQLITE_CONFIG_PCACHE:case i.SQLITE_CONFIG_PCACHE_HDRSZ:case i.SQLITE_CONFIG_PMASZ:case i.SQLITE_CONFIG_SERIALIZED:case i.SQLITE_CONFIG_SINGLETHREAD:case i.SQLITE_CONFIG_SQLLOG:case i.SQLITE_CONFIG_WIN32_HEAPSIZE:default:return i.SQLITE_NOTFOUND}};{let L=new Set;i.sqlite3_auto_extension=function(T){if(T instanceof Function)T=o.installFunction("i(ppp)",T);else if(arguments.length!==1||!o.isPtr(T))return i.SQLITE_MISUSE;let z=o.exports.sqlite3_auto_extension(T);return T!==arguments[0]&&(z===0?L.add(T):o.uninstallFunction(T)),z},i.sqlite3_cancel_auto_extension=function(T){return!T||arguments.length!==1||!o.isPtr(T)?0:o.exports.sqlite3_cancel_auto_extension(T)},i.sqlite3_reset_auto_extension=function(){o.exports.sqlite3_reset_auto_extension();for(let T of L)o.uninstallFunction(T);L.clear()}}let fe=i.sqlite3_vfs_find("kvvfs");if(fe)if(q.isUIThread()){let L=new i.sqlite3_kvvfs_methods(o.exports.sqlite3__wasm_kvvfs_methods());delete i.sqlite3_kvvfs_methods;let T=o.exports.sqlite3__wasm_kvvfsMakeKeyOnPstack,z=o.pstack,K=I=>o.peek(I)===115?sessionStorage:localStorage,X={xRead:(I,ie,h,x)=>{let B=z.pointer,H=o.scopedAllocPush();try{let Q=T(I,ie);if(!Q)return-3;let b=o.cstrToJs(Q),_=K(I).getItem(b);if(!_)return-1;let d=_.length;if(x<=0)return d;if(x===1)return o.poke(h,0),d;let m=o.scopedAllocCString(_);return x>d+1&&(x=d+1),o.heap8u().copyWithin(h,m,m+x-1),o.poke(h+x-1,0),x-1}catch(Q){return console.error("kvstorageRead()",Q),-2}finally{z.restore(B),o.scopedAllocPop(H)}},xWrite:(I,ie,h)=>{let x=z.pointer;try{let B=T(I,ie);if(!B)return 1;let H=o.cstrToJs(B);return K(I).setItem(H,o.cstrToJs(h)),0}catch(B){return console.error("kvstorageWrite()",B),i.SQLITE_IOERR}finally{z.restore(x)}},xDelete:(I,ie)=>{let h=z.pointer;try{let x=T(I,ie);return x?(K(I).removeItem(o.cstrToJs(x)),0):1}catch(x){return console.error("kvstorageDelete()",x),i.SQLITE_IOERR}finally{z.restore(h)}}};for(let I of Object.keys(X))L[L.memberKey(I)]=o.installFunction(L.memberSignature(I),X[I])}else i.sqlite3_vfs_unregister(fe);o.xWrap.FuncPtrAdapter.warnOnUse=!0;let C=t.StructBinder,M=function L(T,z,K,X=L.installMethodArgcCheck){if(T instanceof C.StructType?!(K instanceof Function)&&!o.isPtr(K)&&n("Usage errror: expecting a Function or WASM pointer to one."):n("Usage error: target object is-not-a StructType."),arguments.length===1)return(x,B)=>L(T,x,B,X);L.argcProxy||(L.argcProxy=function(x,B,H,Q){return function(...b){return H.length!==arguments.length&&n("Argument mismatch for",x.structInfo.name+"::"+B+": Native signature is:",Q),H.apply(this,b)}},L.removeFuncList=function(){this.ondispose.__removeFuncList&&(this.ondispose.__removeFuncList.forEach((x,B)=>{if(typeof x=="number")try{o.uninstallFunction(x)}catch{}}),delete this.ondispose.__removeFuncList)});let I=T.memberSignature(z);I.length<2&&n("Member",z,"does not have a function pointer signature:",I);let ie=T.memberKey(z),h=X&&!o.isPtr(K)?L.argcProxy(T,ie,K,I):K;if(o.isPtr(h))h&&!o.functionEntry(h)&&n("Pointer",h,"is not a WASM function table entry."),T[ie]=h;else{let x=o.installFunction(h,T.memberSignature(z,!0));T[ie]=x,(!T.ondispose||!T.ondispose.__removeFuncList)&&(T.addOnDispose("ondispose.__removeFuncList handler",L.removeFuncList),T.ondispose.__removeFuncList=[]),T.ondispose.__removeFuncList.push(ie,x)}return(x,B)=>L(T,x,B,X)};M.installMethodArgcCheck=!1;let W=function(L,T,z=M.installMethodArgcCheck){let K=new Map;for(let X of Object.keys(T)){let I=T[X],ie=K.get(I);if(ie){let h=L.memberKey(X);L[h]=L[L.memberKey(ie)]}else M(L,X,I,z),K.set(I,X)}return L};C.StructType.prototype.installMethod=function(T,z,K=M.installMethodArgcCheck){return arguments.length<3&&T&&typeof T=="object"?W(this,...arguments):M(this,...arguments)},C.StructType.prototype.installMethods=function(L,T=M.installMethodArgcCheck){return W(this,L,T)}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){t.version={libVersion:"3.47.0",libVersionNumber:3047e3,sourceId:"2024-10-21 16:30:22 03a9703e27c44437c39363d0baf82db4ebc94538a0f28411c85dda156f82alt1",downloadVersion:347e4}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){let n=(...b)=>{throw new Error(b.join(" "))},a=(...b)=>{throw new t.SQLite3Error(...b)},i=t.capi,o=t.wasm,q=t.util,A=new WeakMap,$=new WeakMap,G=(b,_,d)=>{let m=Object.getOwnPropertyDescriptor(b,_);return m?m.value:d},oe=function(b,_){return _&&(b instanceof M&&(b=b.pointer),a(_,"sqlite3 result code",_+":",b?i.sqlite3_errmsg(b):i.sqlite3_errstr(_))),arguments[0]},se=o.installFunction("i(ippp)",function(b,_,d,m){i.SQLITE_TRACE_STMT===b&&console.log("SQL TRACE #"+ ++this.counter+" via sqlite3@"+_+":",o.cstrToJs(m))}.bind({counter:0})),fe=Object.create(null),C=function b(..._){if(!b._name2vfs){b._name2vfs=Object.create(null);let re=typeof importScripts=="function"?O=>a("The VFS for",O,"is only available in the main window thread."):!1;b._name2vfs[":localStorage:"]={vfs:"kvvfs",filename:re||(()=>"local")},b._name2vfs[":sessionStorage:"]={vfs:"kvvfs",filename:re||(()=>"session")}}let d=b.normalizeArgs(..._),m=d.filename,k=d.vfs,te=d.flags;(typeof m!="string"&&typeof m!="number"||typeof te!="string"||k&&typeof k!="string"&&typeof k!="number")&&(t.config.error("Invalid DB ctor args",d,arguments),a("Invalid arguments for DB constructor."));let he=typeof m=="number"?o.cstrToJs(m):m,ke=b._name2vfs[he];ke&&(k=ke.vfs,m=he=ke.filename(he));let ve,Fe=0;te.indexOf("c")>=0&&(Fe|=i.SQLITE_OPEN_CREATE|i.SQLITE_OPEN_READWRITE),te.indexOf("w")>=0&&(Fe|=i.SQLITE_OPEN_READWRITE),Fe===0&&(Fe|=i.SQLITE_OPEN_READONLY),Fe|=i.SQLITE_OPEN_EXRESCODE;let Be=o.pstack.pointer;try{let re=o.pstack.allocPtr(),O=i.sqlite3_open_v2(m,re,Fe,k||0);ve=o.peekPtr(re),oe(ve,O),i.sqlite3_extended_result_codes(ve,1),te.indexOf("t")>=0&&i.sqlite3_trace_v2(ve,i.SQLITE_TRACE_STMT,se,ve)}catch(re){throw ve&&i.sqlite3_close_v2(ve),re}finally{o.pstack.restore(Be)}this.filename=he,A.set(this,ve),$.set(this,Object.create(null));try{let re=i.sqlite3_js_db_vfs(ve)||a("Internal error: cannot get VFS for new db handle."),O=fe[re];O&&(O instanceof Function?O(this,t):oe(ve,i.sqlite3_exec(ve,O,0,0,0)))}catch(re){throw this.close(),re}};C.setVfsPostOpenCallback=function(b,_){_ instanceof Function||a("dbCtorHelper.setVfsPostOpenCallback() should not be used with a non-function argument.",arguments),fe[b]=_},C.normalizeArgs=function(b=":memory:",_="c",d=null){let m={};return arguments.length===1&&arguments[0]&&typeof arguments[0]=="object"?(Object.assign(m,arguments[0]),m.flags===void 0&&(m.flags="c"),m.vfs===void 0&&(m.vfs=null),m.filename===void 0&&(m.filename=":memory:")):(m.filename=b,m.flags=_,m.vfs=d),m};let M=function(...b){C.apply(this,b)};M.dbCtorHelper=C;let W={null:1,number:2,string:3,boolean:4,blob:5};W.undefined==W.null,o.bigIntEnabled&&(W.bigint=W.number);let L=function(){W!==arguments[2]&&a(i.SQLITE_MISUSE,"Do not call the Stmt constructor directly. Use DB.prepare()."),this.db=arguments[0],A.set(this,arguments[1]),this.parameterCount=i.sqlite3_bind_parameter_count(this.pointer)},T=function(b){return b.pointer||a("DB has been closed."),b},z=function(b,_){return(_!==(_|0)||_<0||_>=b.columnCount)&&a("Column index",_,"is out of range."),b},K=function(b,_){let d=Object.create(null);switch(d.opt=Object.create(null),_.length){case 1:typeof _[0]=="string"||q.isSQLableTypedArray(_[0])||Array.isArray(_[0])?d.sql=_[0]:_[0]&&typeof _[0]=="object"&&(d.opt=_[0],d.sql=d.opt.sql);break;case 2:d.sql=_[0],d.opt=_[1];break;default:a("Invalid argument count for exec().")}d.sql=q.flexibleString(d.sql),typeof d.sql!="string"&&a("Missing SQL argument or unsupported SQL value type.");let m=d.opt;switch(m.returnValue){case"resultRows":m.resultRows||(m.resultRows=[]),d.returnVal=()=>m.resultRows;break;case"saveSql":m.saveSql||(m.saveSql=[]),d.returnVal=()=>m.saveSql;break;case void 0:case"this":d.returnVal=()=>b;break;default:a("Invalid returnValue value:",m.returnValue)}if(!m.callback&&!m.returnValue&&m.rowMode!==void 0&&(m.resultRows||(m.resultRows=[]),d.returnVal=()=>m.resultRows),m.callback||m.resultRows)switch(m.rowMode===void 0?"array":m.rowMode){case"object":d.cbArg=(k,te)=>{te.columnNames||(te.columnNames=k.getColumnNames([]));let he=k.get([]),ke=Object.create(null);for(let ve in te.columnNames)ke[te.columnNames[ve]]=he[ve];return ke};break;case"array":d.cbArg=k=>k.get([]);break;case"stmt":Array.isArray(m.resultRows)&&a("exec(): invalid rowMode for a resultRows array: must","be one of 'array', 'object',","a result column number, or column name reference."),d.cbArg=k=>k;break;default:if(q.isInt32(m.rowMode)){d.cbArg=k=>k.get(m.rowMode);break}else if(typeof m.rowMode=="string"&&m.rowMode.length>1&&m.rowMode[0]==="$"){let k=m.rowMode.substr(1);d.cbArg=te=>{let he=te.get(Object.create(null))[k];return he===void 0?a(i.SQLITE_NOTFOUND,"exec(): unknown result column:",k):he};break}a("Invalid rowMode:",m.rowMode)}return d},X=(b,_,d,...m)=>{let k=b.prepare(_);try{let te=k.bind(d).step()?k.get(...m):void 0;return k.reset(),te}finally{k.finalize()}},I=(b,_,d,m)=>b.exec({sql:_,bind:d,rowMode:m,returnValue:"resultRows"});M.checkRc=(b,_)=>oe(b,_),M.prototype={isOpen:function(){return!!this.pointer},affirmOpen:function(){return T(this)},close:function(){if(this.pointer){if(this.onclose&&this.onclose.before instanceof Function)try{this.onclose.before(this)}catch{}let b=this.pointer;if(Object.keys($.get(this)).forEach((_,d)=>{if(d&&d.pointer)try{d.finalize()}catch{}}),A.delete(this),$.delete(this),i.sqlite3_close_v2(b),this.onclose&&this.onclose.after instanceof Function)try{this.onclose.after(this)}catch{}delete this.filename}},changes:function(b=!1,_=!1){let d=T(this).pointer;return b?_?i.sqlite3_total_changes64(d):i.sqlite3_total_changes(d):_?i.sqlite3_changes64(d):i.sqlite3_changes(d)},dbFilename:function(b="main"){return i.sqlite3_db_filename(T(this).pointer,b)},dbName:function(b=0){return i.sqlite3_db_name(T(this).pointer,b)},dbVfsName:function(b=0){let _,d=i.sqlite3_js_db_vfs(T(this).pointer,b);if(d){let m=new i.sqlite3_vfs(d);try{_=o.cstrToJs(m.$zName)}finally{m.dispose()}}return _},prepare:function(b){T(this);let _=o.pstack.pointer,d,m;try{d=o.pstack.alloc(8),M.checkRc(this,i.sqlite3_prepare_v2(this.pointer,b,-1,d,null)),m=o.peekPtr(d)}finally{o.pstack.restore(_)}m||a("Cannot prepare empty SQL.");let k=new L(this,m,W);return $.get(this)[m]=k,k},exec:function(){T(this);let b=K(this,arguments);if(!b.sql)return a("exec() requires an SQL string.");let _=b.opt,d=_.callback,m=Array.isArray(_.resultRows)?_.resultRows:void 0,k,te=_.bind,he=!!(b.cbArg||_.columnNames||m),ke=o.scopedAllocPush(),ve=Array.isArray(_.saveSql)?_.saveSql:void 0;try{let Fe=q.isSQLableTypedArray(b.sql),Be=Fe?b.sql.byteLength:o.jstrlen(b.sql),re=o.scopedAlloc(2*o.ptrSizeof+(Be+1)),O=re+o.ptrSizeof,N=O+o.ptrSizeof,le=N+Be;for(Fe?o.heap8().set(b.sql,N):o.jstrcpy(b.sql,o.heap8(),N,Be,!1),o.poke(N+Be,0);N&&o.peek(N,"i8");){o.pokePtr([re,O],0),M.checkRc(this,i.sqlite3_prepare_v3(this.pointer,N,Be,0,re,O));let pe=o.peekPtr(re);if(N=o.peekPtr(O),Be=le-N,!!pe){if(ve&&ve.push(i.sqlite3_sql(pe).trim()),k=new L(this,pe,W),te&&k.parameterCount&&(k.bind(te),te=null),he&&k.columnCount){let P=Array.isArray(_.columnNames)?0:1;if(he=!1,b.cbArg||m){let j=Object.create(null);for(;k.step();k._lockedByExec=!1){P++===0&&k.getColumnNames(j.columnNames=_.columnNames||[]),k._lockedByExec=!0;let J=b.cbArg(k,j);if(m&&m.push(J),d&&d.call(_,J,k)===!1)break}k._lockedByExec=!1}P===0&&k.getColumnNames(_.columnNames)}else k.step();k.reset().finalize(),k=null}}}finally{o.scopedAllocPop(ke),k&&(delete k._lockedByExec,k.finalize())}return b.returnVal()},createFunction:function(_,d,m){let k=j=>j instanceof Function;switch(arguments.length){case 1:m=_,_=m.name,d=m.xFunc||0;break;case 2:k(d)||(m=d,d=m.xFunc||0);break;case 3:break;default:break}m||(m={}),typeof _!="string"&&a("Invalid arguments: missing function name.");let te=m.xStep||0,he=m.xFinal||0,ke=m.xValue||0,ve=m.xInverse||0,Fe;k(d)?(Fe=!1,(k(te)||k(he))&&a("Ambiguous arguments: scalar or aggregate?"),te=he=null):k(te)?(k(he)||a("Missing xFinal() callback for aggregate or window UDF."),d=null):k(he)?a("Missing xStep() callback for aggregate or window UDF."):a("Missing function-type properties."),Fe===!1?(k(ke)||k(ve))&&a("xValue and xInverse are not permitted for non-window UDFs."):k(ke)?(k(ve)||a("xInverse must be provided if xValue is."),Fe=!0):k(ve)&&a("xValue must be provided if xInverse is.");let Be=m.pApp;Be!=null&&(typeof Be!="number"||!q.isInt32(Be))&&a("Invalid value for pApp property. Must be a legal WASM pointer value.");let re=m.xDestroy||0;re&&!k(re)&&a("xDestroy property must be a function.");let O=0;G(m,"deterministic")&&(O|=i.SQLITE_DETERMINISTIC),G(m,"directOnly")&&(O|=i.SQLITE_DIRECTONLY),G(m,"innocuous")&&(O|=i.SQLITE_INNOCUOUS),_=_.toLowerCase();let N=d||te,le=G(m,"arity"),pe=typeof le=="number"?le:N.length?N.length-1:0,P;return Fe?P=i.sqlite3_create_window_function(this.pointer,_,pe,i.SQLITE_UTF8|O,Be||0,te,he,ke,ve,re):P=i.sqlite3_create_function_v2(this.pointer,_,pe,i.SQLITE_UTF8|O,Be||0,d,te,he,re),M.checkRc(this,P),this},selectValue:function(b,_,d){return X(this,b,_,0,d)},selectValues:function(b,_,d){let m=this.prepare(b),k=[];try{for(m.bind(_);m.step();)k.push(m.get(0,d));m.reset()}finally{m.finalize()}return k},selectArray:function(b,_){return X(this,b,_,[])},selectObject:function(b,_){return X(this,b,_,{})},selectArrays:function(b,_){return I(this,b,_,"array")},selectObjects:function(b,_){return I(this,b,_,"object")},openStatementCount:function(){return this.pointer?Object.keys($.get(this)).length:0},transaction:function(b){let _="BEGIN";arguments.length>1&&(/[^a-zA-Z]/.test(arguments[0])&&a(i.SQLITE_MISUSE,"Invalid argument for BEGIN qualifier."),_+=" "+arguments[0],b=arguments[1]),T(this).exec(_);try{let d=b(this);return this.exec("COMMIT"),d}catch(d){throw this.exec("ROLLBACK"),d}},savepoint:function(b){T(this).exec("SAVEPOINT oo1");try{let _=b(this);return this.exec("RELEASE oo1"),_}catch(_){throw this.exec("ROLLBACK to SAVEPOINT oo1; RELEASE SAVEPOINT oo1"),_}},checkRc:function(b){return oe(this,b)}};let ie=function(b){return b.pointer||a("Stmt has been closed."),b},h=function(b){let _=W[b==null?"null":typeof b];switch(_){case W.boolean:case W.null:case W.number:case W.string:return _;case W.bigint:if(o.bigIntEnabled)return _;default:return q.isBindableTypedArray(b)?W.blob:void 0}},x=function(b){return h(b)||a("Unsupported bind() argument type:",typeof b)},B=function(b,_){let d=typeof _=="number"?_:i.sqlite3_bind_parameter_index(b.pointer,_);return d===0||!q.isInt32(d)?a("Invalid bind() parameter name: "+_):(d<1||d>b.parameterCount)&&a("Bind index",_,"is out of range."),d},H=function(b,_){return b._lockedByExec&&a("Operation is illegal when statement is locked:",_),b},Q=function b(_,d,m,k){H(ie(_),"bind()"),b._||(b._tooBigInt=he=>a("BigInt value is too big to store without precision loss:",he),b._={string:function(he,ke,ve,Fe){let[Be,re]=o.allocCString(ve,!0);return(Fe?i.sqlite3_bind_blob:i.sqlite3_bind_text)(he.pointer,ke,Be,re,i.SQLITE_WASM_DEALLOC)}}),x(k),d=B(_,d);let te=0;switch(k==null?W.null:m){case W.null:te=i.sqlite3_bind_null(_.pointer,d);break;case W.string:te=b._.string(_,d,k,!1);break;case W.number:{let he;q.isInt32(k)?he=i.sqlite3_bind_int:typeof k=="bigint"?q.bigIntFits64(k)?o.bigIntEnabled?he=i.sqlite3_bind_int64:q.bigIntFitsDouble(k)?(k=Number(k),he=i.sqlite3_bind_double):b._tooBigInt(k):b._tooBigInt(k):(k=Number(k),o.bigIntEnabled&&Number.isInteger(k)?he=i.sqlite3_bind_int64:he=i.sqlite3_bind_double),te=he(_.pointer,d,k);break}case W.boolean:te=i.sqlite3_bind_int(_.pointer,d,k?1:0);break;case W.blob:{if(typeof k=="string"){te=b._.string(_,d,k,!0);break}else k instanceof ArrayBuffer?k=new Uint8Array(k):q.isBindableTypedArray(k)||a("Binding a value as a blob requires","that it be a string, Uint8Array, Int8Array, or ArrayBuffer.");let he=o.alloc(k.byteLength||1);o.heap8().set(k.byteLength?k:[0],he),te=i.sqlite3_bind_blob(_.pointer,d,he,k.byteLength,i.SQLITE_WASM_DEALLOC);break}default:t.config.warn("Unsupported bind() argument type:",k),a("Unsupported bind() argument type: "+typeof k)}return te&&M.checkRc(_.db.pointer,te),_._mayGet=!1,_};L.prototype={finalize:function(){if(this.pointer){H(this,"finalize()");let b=i.sqlite3_finalize(this.pointer);return delete $.get(this.db)[this.pointer],A.delete(this),delete this._mayGet,delete this.parameterCount,delete this._lockedByExec,delete this.db,b}},clearBindings:function(){return H(ie(this),"clearBindings()"),i.sqlite3_clear_bindings(this.pointer),this._mayGet=!1,this},reset:function(b){H(this,"reset()"),b&&this.clearBindings();let _=i.sqlite3_reset(ie(this).pointer);return this._mayGet=!1,oe(this.db,_),this},bind:function(){ie(this);let b,_;switch(arguments.length){case 1:b=1,_=arguments[0];break;case 2:b=arguments[0],_=arguments[1];break;default:a("Invalid bind() arguments.")}return _===void 0?this:(this.parameterCount||a("This statement has no bindable parameters."),this._mayGet=!1,_===null?Q(this,b,W.null,_):Array.isArray(_)?(arguments.length!==1&&a("When binding an array, an index argument is not permitted."),_.forEach((d,m)=>Q(this,m+1,x(d),d)),this):(_ instanceof ArrayBuffer&&(_=new Uint8Array(_)),typeof _=="object"&&!q.isBindableTypedArray(_)?(arguments.length!==1&&a("When binding an object, an index argument is not permitted."),Object.keys(_).forEach(d=>Q(this,d,x(_[d]),_[d])),this):Q(this,b,x(_),_)))},bindAsBlob:function(b,_){ie(this),arguments.length===1&&(_=b,b=1);let d=x(_);return W.string!==d&&W.blob!==d&&W.null!==d&&a("Invalid value type for bindAsBlob()"),Q(this,b,W.blob,_)},step:function(){H(this,"step()");let b=i.sqlite3_step(ie(this).pointer);switch(b){case i.SQLITE_DONE:return this._mayGet=!1;case i.SQLITE_ROW:return this._mayGet=!0;default:this._mayGet=!1,t.config.warn("sqlite3_step() rc=",b,i.sqlite3_js_rc_str(b),"SQL =",i.sqlite3_sql(this.pointer)),M.checkRc(this.db.pointer,b)}},stepReset:function(){return this.step(),this.reset()},stepFinalize:function(){try{let b=this.step();return this.reset(),b}finally{try{this.finalize()}catch{}}},get:function(b,_){if(ie(this)._mayGet||a("Stmt.step() has not (recently) returned true."),Array.isArray(b)){let d=0,m=this.columnCount;for(;d<m;)b[d]=this.get(d++);return b}else if(b&&typeof b=="object"){let d=0,m=this.columnCount;for(;d<m;)b[i.sqlite3_column_name(this.pointer,d)]=this.get(d++);return b}switch(z(this,b),_===void 0?i.sqlite3_column_type(this.pointer,b):_){case i.SQLITE_NULL:return null;case i.SQLITE_INTEGER:if(o.bigIntEnabled){let d=i.sqlite3_column_int64(this.pointer,b);return d>=Number.MIN_SAFE_INTEGER&&d<=Number.MAX_SAFE_INTEGER?Number(d).valueOf():d}else{let d=i.sqlite3_column_double(this.pointer,b);return(d>Number.MAX_SAFE_INTEGER||d<Number.MIN_SAFE_INTEGER)&&a("Integer is out of range for JS integer range: "+d),q.isInt32(d)?d|0:d}case i.SQLITE_FLOAT:return i.sqlite3_column_double(this.pointer,b);case i.SQLITE_TEXT:return i.sqlite3_column_text(this.pointer,b);case i.SQLITE_BLOB:{let d=i.sqlite3_column_bytes(this.pointer,b),m=i.sqlite3_column_blob(this.pointer,b),k=new Uint8Array(d);return d&&k.set(o.heap8u().slice(m,m+d),0),d&&this.db._blobXfer instanceof Array&&this.db._blobXfer.push(k.buffer),k}default:a("Don't know how to translate","type of result column #"+b+".")}a("Not reached.")},getInt:function(b){return this.get(b,i.SQLITE_INTEGER)},getFloat:function(b){return this.get(b,i.SQLITE_FLOAT)},getString:function(b){return this.get(b,i.SQLITE_TEXT)},getBlob:function(b){return this.get(b,i.SQLITE_BLOB)},getJSON:function(b){let _=this.get(b,i.SQLITE_STRING);return _===null?_:JSON.parse(_)},getColumnName:function(b){return i.sqlite3_column_name(z(ie(this),b).pointer,b)},getColumnNames:function(b=[]){z(ie(this),0);let _=this.columnCount;for(let d=0;d<_;++d)b.push(i.sqlite3_column_name(this.pointer,d));return b},getParamIndex:function(b){return ie(this).parameterCount?i.sqlite3_bind_parameter_index(this.pointer,b):void 0},getParamName:function(b){return ie(this).parameterCount?i.sqlite3_bind_parameter_name(this.pointer,b):void 0},isBusy:function(){return i.sqlite3_stmt_busy(ie(this))!==0},isReadOnly:function(){return i.sqlite3_stmt_readonly(ie(this))!==0}};{let b={enumerable:!0,get:function(){return A.get(this)},set:()=>a("The pointer property is read-only.")};Object.defineProperty(L.prototype,"pointer",b),Object.defineProperty(M.prototype,"pointer",b)}if(Object.defineProperty(L.prototype,"columnCount",{enumerable:!1,get:function(){return i.sqlite3_column_count(this.pointer)},set:()=>a("The columnCount property is read-only.")}),t.oo1={DB:M,Stmt:L},q.isUIThread()){t.oo1.JsStorageDb=function(_="session"){let d=C.normalizeArgs(...arguments);_=d.filename,_!=="session"&&_!=="local"&&a("JsStorageDb db name must be one of 'session' or 'local'."),d.vfs="kvvfs",C.call(this,d)};let b=t.oo1.JsStorageDb;b.prototype=Object.create(M.prototype),b.clearStorage=i.sqlite3_js_kvvfs_clear,b.prototype.clearStorage=function(){return b.clearStorage(T(this).filename)},b.storageSize=i.sqlite3_js_kvvfs_size,b.prototype.storageSize=function(){return b.storageSize(T(this).filename)}}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){let n=t.util;t.initWorker1API=function(){"use strict";let a=(...C)=>{throw new Error(C.join(" "))};globalThis.WorkerGlobalScope instanceof Function||a("initWorker1API() must be run from a Worker thread.");let i=this.sqlite3||a("Missing this.sqlite3 object."),o=i.oo1.DB,q=function(C){let M=A.idMap.get(C);return M||(M="db#"+ ++A.idSeq+"@"+C.pointer,A.idMap.set(C,M),M)},A={dbList:[],idSeq:0,idMap:new WeakMap,xfer:[],open:function(C){let M=new o(C);return this.dbs[q(M)]=M,this.dbList.indexOf(M)<0&&this.dbList.push(M),M},close:function(C,M){if(C){delete this.dbs[q(C)];let W=C.filename,L=n.sqlite3__wasm_db_vfs(C.pointer,0);C.close();let T=this.dbList.indexOf(C);T>=0&&this.dbList.splice(T,1),M&&W&&L&&n.sqlite3__wasm_vfs_unlink(L,W)}},post:function(C,M){M&&M.length?(globalThis.postMessage(C,Array.from(M)),M.length=0):globalThis.postMessage(C)},dbs:Object.create(null),getDb:function(C,M=!0){return this.dbs[C]||(M?a("Unknown (or closed) DB ID:",C):void 0)}},$=function(C=A.dbList[0]){return C&&C.pointer?C:a("DB is not opened.")},G=function(C,M=!0){let W=A.getDb(C.dbId,!1)||A.dbList[0];return M?$(W):W},oe=function(){return A.dbList[0]&&q(A.dbList[0])},se=C=>C===""||C[0]===":",fe={open:function(C){let M=Object.create(null),W=C.args||Object.create(null);W.simulateError&&a("Throwing because of simulateError flag.");let L=Object.create(null);M.vfs=W.vfs,M.filename=W.filename||"";let T=A.open(M);return L.filename=T.filename,L.persistent=!!i.capi.sqlite3_js_db_uses_vfs(T.pointer,"opfs"),L.dbId=q(T),L.vfs=T.dbVfsName(),L},close:function(C){let M=G(C,!1),W={filename:M&&M.filename};if(M){let L=C.args&&typeof C.args=="object"?!!C.args.unlink:!1;A.close(M,L)}return W},exec:function(C){let M=typeof C.args=="string"?{sql:C.args}:C.args||Object.create(null);M.rowMode==="stmt"?a("Invalid rowMode for 'exec': stmt mode","does not work in the Worker API."):M.sql||a("'exec' requires input SQL.");let W=G(C);(M.callback||Array.isArray(M.resultRows))&&(W._blobXfer=A.xfer);let L=M.callback,T=0,z=!!M.columnNames;typeof L=="string"&&(z||(M.columnNames=[]),M.callback=function(K,X){A.post({type:L,columnNames:M.columnNames,rowNumber:++T,row:K},A.xfer)});try{let K=M.countChanges?W.changes(!0,M.countChanges===64):void 0;W.exec(M),K!==void 0&&(M.changeCount=W.changes(!0,M.countChanges===64)-K),M.callback instanceof Function&&(M.callback=L,A.post({type:L,columnNames:M.columnNames,rowNumber:null,row:void 0}))}finally{delete W._blobXfer,M.callback&&(M.callback=L)}return M},"config-get":function(){let C=Object.create(null),M=i.config;return["bigIntEnabled"].forEach(function(W){Object.getOwnPropertyDescriptor(M,W)&&(C[W]=M[W])}),C.version=i.version,C.vfsList=i.capi.sqlite3_js_vfs_list(),C},export:function(C){let M=G(C),W={byteArray:i.capi.sqlite3_js_db_export(M.pointer),filename:M.filename,mimetype:"application/x-sqlite3"};return A.xfer.push(W.byteArray.buffer),W},toss:function(C){a("Testing worker exception")}};globalThis.onmessage=async function(C){C=C.data;let M,W=C.dbId,L=C.type,T=performance.now();try{fe.hasOwnProperty(L)&&fe[L]instanceof Function?M=await fe[L](C):a("Unknown db worker message type:",C.type)}catch(z){L="error",M={operation:C.type,message:z.message,errorClass:z.name,input:C},z.stack&&(M.stack=typeof z.stack=="string"?z.stack.split(/\n\s*/):z.stack)}W||(W=M.dbId||oe()),A.post({type:L,dbId:W,messageId:C.messageId,workerReceivedTime:T,workerRespondTime:performance.now(),departureTime:C.departureTime,result:M},A.xfer)},globalThis.postMessage({type:"sqlite3-api",result:"worker1-ready"})}.bind({sqlite3:t})}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){let n=t.wasm,a=t.capi,i=t.util.toss3,o=Object.create(null);t.vfs=o,a.sqlite3_vfs.prototype.registerVfs=function(q=!1){this instanceof t.capi.sqlite3_vfs||i("Expecting a sqlite3_vfs-type argument.");let A=a.sqlite3_vfs_register(this,q?1:0);return A&&i("sqlite3_vfs_register(",this,") failed with rc",A),this.pointer!==a.sqlite3_vfs_find(this.$zName)&&i("BUG: sqlite3_vfs_find(vfs.$zName) failed for just-installed VFS",this),this},o.installVfs=function(q){let A=0,$=["io","vfs"];for(let G of $){let oe=q[G];oe&&(++A,oe.struct.installMethods(oe.methods,!!oe.applyArgcCheck),G==="vfs"&&(!oe.struct.$zName&&typeof oe.name=="string"&&oe.struct.addOnDispose(oe.struct.$zName=n.allocCString(oe.name)),oe.struct.registerVfs(!!oe.asDefault)))}return A||i("Misuse: installVfs() options object requires at least","one of:",$),this}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){if(!t.wasm.exports.sqlite3_declare_vtab)return;let n=t.wasm,a=t.capi,i=t.util.toss3,o=Object.create(null);t.vtab=o;let q=a.sqlite3_index_info;q.prototype.nthConstraint=function(G,oe=!1){if(G<0||G>=this.$nConstraint)return!1;let se=this.$aConstraint+q.sqlite3_index_constraint.structInfo.sizeof*G;return oe?se:new q.sqlite3_index_constraint(se)},q.prototype.nthConstraintUsage=function(G,oe=!1){if(G<0||G>=this.$nConstraint)return!1;let se=this.$aConstraintUsage+q.sqlite3_index_constraint_usage.structInfo.sizeof*G;return oe?se:new q.sqlite3_index_constraint_usage(se)},q.prototype.nthOrderBy=function(G,oe=!1){if(G<0||G>=this.$nOrderBy)return!1;let se=this.$aOrderBy+q.sqlite3_index_orderby.structInfo.sizeof*G;return oe?se:new q.sqlite3_index_orderby(se)};let A=function(G,oe){return function(se,fe=!1){if(arguments.length===0&&(se=new oe),se instanceof oe)return this.set(se.pointer,se),se;n.isPtr(se)||t.SQLite3Error.toss("Invalid argument to",G+"()");let C=this.get(se);return fe&&this.delete(se),C}.bind(new Map)},$=function(G,oe){let se=A(G,oe);return Object.assign(Object.create(null),{StructType:oe,create:fe=>{let C=se();return n.pokePtr(fe,C.pointer),C},get:fe=>se(fe),unget:fe=>se(fe,!0),dispose:fe=>{let C=se(fe,!0);C&&C.dispose()}})};o.xVtab=$("xVtab",a.sqlite3_vtab),o.xCursor=$("xCursor",a.sqlite3_vtab_cursor),o.xIndexInfo=G=>new a.sqlite3_index_info(G),o.xError=function G(oe,se,fe){if(G.errorReporter instanceof Function)try{G.errorReporter("sqlite3_module::"+oe+"(): "+se.message)}catch{}let C;return se instanceof t.WasmAllocError?C=a.SQLITE_NOMEM:arguments.length>2?C=fe:se instanceof t.SQLite3Error&&(C=se.resultCode),C||a.SQLITE_ERROR},o.xError.errorReporter=console.error.bind(console),o.xRowid=(G,oe)=>n.poke(G,oe,"i64"),o.setupModule=function(G){let oe=!1,se=this instanceof a.sqlite3_module?this:G.struct||(oe=new a.sqlite3_module);try{let fe=G.methods||i("Missing 'methods' object.");for(let C of Object.entries({xConnect:"xCreate",xDisconnect:"xDestroy"})){let M=C[0],W=C[1];fe[M]===!0?fe[M]=fe[W]:fe[W]===!0&&(fe[W]=fe[M])}if(G.catchExceptions){let C=function(L,T){return["xConnect","xCreate"].indexOf(L)>=0?function(z,K,X,I,ie,h){try{return T(...arguments)||0}catch(x){return x instanceof t.WasmAllocError||(n.dealloc(n.peekPtr(h)),n.pokePtr(h,n.allocCString(x.message))),o.xError(L,x)}}:function(...z){try{return T(...z)||0}catch(K){return o.xError(L,K)}}},M=["xCreate","xConnect","xBestIndex","xDisconnect","xDestroy","xOpen","xClose","xFilter","xNext","xEof","xColumn","xRowid","xUpdate","xBegin","xSync","xCommit","xRollback","xFindFunction","xRename","xSavepoint","xRelease","xRollbackTo","xShadowName"],W=Object.create(null);for(let L of M){let T=fe[L];if(T instanceof Function)L==="xConnect"&&fe.xCreate===T?W[L]=fe.xCreate:L==="xCreate"&&fe.xConnect===T?W[L]=fe.xConnect:W[L]=C(L,T);else continue}se.installMethods(W,!1)}else se.installMethods(fe,!!G.applyArgcCheck);if(se.$iVersion===0){let C;typeof G.iVersion=="number"?C=G.iVersion:se.$xShadowName?C=3:se.$xSavePoint||se.$xRelease||se.$xRollbackTo?C=2:C=1,se.$iVersion=C}}catch(fe){throw oe&&oe.dispose(),fe}return se},a.sqlite3_module.prototype.setupModule=function(G){return o.setupModule.call(this,G)}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){let n=function a(i){if(!globalThis.SharedArrayBuffer||!globalThis.Atomics)return Promise.reject(new Error("Cannot install OPFS: Missing SharedArrayBuffer and/or Atomics. The server must emit the COOP/COEP response headers to enable those. See https://sqlite.org/wasm/doc/trunk/persistence.md#coop-coep"));if(typeof WorkerGlobalScope>"u")return Promise.reject(new Error("The OPFS sqlite3_vfs cannot run in the main thread because it requires Atomics.wait()."));if(!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle||!globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle||!navigator?.storage?.getDirectory)return Promise.reject(new Error("Missing required OPFS APIs."));(!i||typeof i!="object")&&(i=Object.create(null));let o=new URL(globalThis.location.href).searchParams;return o.has("opfs-disable")?Promise.resolve(t):(i.verbose===void 0&&(i.verbose=o.has("opfs-verbose")?+o.get("opfs-verbose")||2:1),i.sanityChecks===void 0&&(i.sanityChecks=o.has("opfs-sanity-check")),i.proxyUri===void 0&&(i.proxyUri=a.defaultProxyUri),typeof i.proxyUri=="function"&&(i.proxyUri=i.proxyUri()),new Promise(function(A,$){let G=[t.config.error,t.config.warn,t.config.log],oe=(P,...j)=>{i.verbose>P&&G[P]("OPFS syncer:",...j)},se=(...P)=>oe(2,...P),fe=(...P)=>oe(1,...P),C=(...P)=>oe(0,...P),M=t.util.toss,W=t.capi,L=t.util,T=t.wasm,z=W.sqlite3_vfs,K=W.sqlite3_file,X=W.sqlite3_io_methods,I=Object.create(null),ie=()=>globalThis.FileSystemHandle&&globalThis.FileSystemDirectoryHandle&&globalThis.FileSystemFileHandle&&globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle&&navigator?.storage?.getDirectory;I.metrics={dump:function(){let P,j=0,J=0,ue=0;for(P in m.opIds){let me=k[P];j+=me.count,J+=me.time,ue+=me.wait,me.avgTime=me.count&&me.time?me.time/me.count:0,me.avgWait=me.count&&me.wait?me.wait/me.count:0}t.config.log(globalThis.location.href,"metrics for",globalThis.location.href,":",k,`
Total of`,j,"op(s) for",J,"ms (incl. "+ue+" ms of waiting on the async side)"),t.config.log("Serialization metrics:",k.s11n),b.postMessage({type:"opfs-async-metrics"})},reset:function(){let P,j=ue=>ue.count=ue.time=ue.wait=0;for(P in m.opIds)j(k[P]=Object.create(null));let J=k.s11n=Object.create(null);J=J.serialize=Object.create(null),J.count=J.time=0,J=k.s11n.deserialize=Object.create(null),J.count=J.time=0}};let h=new X,x=new z().addOnDispose(()=>h.dispose()),B,H=P=>(B=!0,x.dispose(),$(P)),Q=()=>(B=!1,A(t)),b=new Worker(new URL("sqlite3-opfs-async-proxy.js","file:./sqlite-viewer-core/vscode/build/assets/"),{type:"module"});setTimeout(()=>{B===void 0&&H(new Error("Timeout while waiting for OPFS async proxy worker."))},4e3),b._originalOnError=b.onerror,b.onerror=function(P){C("Error initializing OPFS asyncer:",P),H(new Error("Loading OPFS async Worker failed for unknown reasons."))};let _=W.sqlite3_vfs_find(null),d=_?new z(_):null;h.$iVersion=1,x.$iVersion=2,x.$szOsFile=W.sqlite3_file.structInfo.sizeof,x.$mxPathname=1024,x.$zName=T.allocCString("opfs"),x.$xDlOpen=x.$xDlError=x.$xDlSym=x.$xDlClose=null,x.addOnDispose("$zName",x.$zName,"cleanup default VFS wrapper",()=>d?d.dispose():null);let m=Object.create(null);m.verbose=i.verbose,m.littleEndian=(()=>{let P=new ArrayBuffer(2);return new DataView(P).setInt16(0,256,!0),new Int16Array(P)[0]===256})(),m.asyncIdleWaitTime=150,m.asyncS11nExceptions=1,m.fileBufferSize=1024*64,m.sabS11nOffset=m.fileBufferSize,m.sabS11nSize=x.$mxPathname*2,m.sabIO=new SharedArrayBuffer(m.fileBufferSize+m.sabS11nSize),m.opIds=Object.create(null);let k=Object.create(null);{let P=0;m.opIds.whichOp=P++,m.opIds.rc=P++,m.opIds.xAccess=P++,m.opIds.xClose=P++,m.opIds.xDelete=P++,m.opIds.xDeleteNoWait=P++,m.opIds.xFileSize=P++,m.opIds.xLock=P++,m.opIds.xOpen=P++,m.opIds.xRead=P++,m.opIds.xSleep=P++,m.opIds.xSync=P++,m.opIds.xTruncate=P++,m.opIds.xUnlock=P++,m.opIds.xWrite=P++,m.opIds.mkdir=P++,m.opIds["opfs-async-metrics"]=P++,m.opIds["opfs-async-shutdown"]=P++,m.opIds.retry=P++,m.sabOP=new SharedArrayBuffer(P*4),I.metrics.reset()}m.sq3Codes=Object.create(null),["SQLITE_ACCESS_EXISTS","SQLITE_ACCESS_READWRITE","SQLITE_BUSY","SQLITE_CANTOPEN","SQLITE_ERROR","SQLITE_IOERR","SQLITE_IOERR_ACCESS","SQLITE_IOERR_CLOSE","SQLITE_IOERR_DELETE","SQLITE_IOERR_FSYNC","SQLITE_IOERR_LOCK","SQLITE_IOERR_READ","SQLITE_IOERR_SHORT_READ","SQLITE_IOERR_TRUNCATE","SQLITE_IOERR_UNLOCK","SQLITE_IOERR_WRITE","SQLITE_LOCK_EXCLUSIVE","SQLITE_LOCK_NONE","SQLITE_LOCK_PENDING","SQLITE_LOCK_RESERVED","SQLITE_LOCK_SHARED","SQLITE_LOCKED","SQLITE_MISUSE","SQLITE_NOTFOUND","SQLITE_OPEN_CREATE","SQLITE_OPEN_DELETEONCLOSE","SQLITE_OPEN_MAIN_DB","SQLITE_OPEN_READONLY"].forEach(P=>{(m.sq3Codes[P]=W[P])===void 0&&M("Maintenance required: not found:",P)}),m.opfsFlags=Object.assign(Object.create(null),{OPFS_UNLOCK_ASAP:1,OPFS_UNLINK_BEFORE_OPEN:2,defaultUnlockAsap:!1});let te=(P,...j)=>{let J=m.opIds[P]||M("Invalid op ID:",P);m.s11n.serialize(...j),Atomics.store(m.sabOPView,m.opIds.rc,-1),Atomics.store(m.sabOPView,m.opIds.whichOp,J),Atomics.notify(m.sabOPView,m.opIds.whichOp);let ue=performance.now();for(;Atomics.wait(m.sabOPView,m.opIds.rc,-1)!=="not-equal";);let me=Atomics.load(m.sabOPView,m.opIds.rc);if(k[P].wait+=performance.now()-ue,me&&m.asyncS11nExceptions){let Se=m.s11n.deserialize();Se&&C(P+"() async error:",...Se)}return me};I.debug={asyncShutdown:()=>{fe("Shutting down OPFS async listener. The OPFS VFS will no longer work."),te("opfs-async-shutdown")},asyncRestart:()=>{fe("Attempting to restart OPFS VFS async listener. Might work, might not."),b.postMessage({type:"opfs-async-restart"})}};let he=()=>{if(m.s11n)return m.s11n;let P=new TextDecoder,j=new TextEncoder("utf-8"),J=new Uint8Array(m.sabIO,m.sabS11nOffset,m.sabS11nSize),ue=new DataView(m.sabIO,m.sabS11nOffset,m.sabS11nSize);m.s11n=Object.create(null);let me=Object.create(null);me.number={id:1,size:8,getter:"getFloat64",setter:"setFloat64"},me.bigint={id:2,size:8,getter:"getBigInt64",setter:"setBigInt64"},me.boolean={id:3,size:4,getter:"getInt32",setter:"setInt32"},me.string={id:4};let Se=be=>me[typeof be]||M("Maintenance required: this value type cannot be serialized.",be),Ie=be=>{switch(be){case me.number.id:return me.number;case me.bigint.id:return me.bigint;case me.boolean.id:return me.boolean;case me.string.id:return me.string;default:M("Invalid type ID:",be)}};return m.s11n.deserialize=function(be=!1){++k.s11n.deserialize.count;let ot=performance.now(),it=J[0],U=it?[]:null;if(it){let _e=[],ge=1,ye,We,Qe;for(ye=0;ye<it;++ye,++ge)_e.push(Ie(J[ge]));for(ye=0;ye<it;++ye){let He=_e[ye];He.getter?(Qe=ue[He.getter](ge,m.littleEndian),ge+=He.size):(We=ue.getInt32(ge,m.littleEndian),ge+=4,Qe=P.decode(J.slice(ge,ge+We)),ge+=We),U.push(Qe)}}return be&&(J[0]=0),k.s11n.deserialize.time+=performance.now()-ot,U},m.s11n.serialize=function(...be){let ot=performance.now();if(++k.s11n.serialize.count,be.length){let it=[],U=0,_e=1;for(J[0]=be.length&255;U<be.length;++U,++_e)it.push(Se(be[U])),J[_e]=it[U].id;for(U=0;U<be.length;++U){let ge=it[U];if(ge.setter)ue[ge.setter](_e,be[U],m.littleEndian),_e+=ge.size;else{let ye=j.encode(be[U]);ue.setInt32(_e,ye.byteLength,m.littleEndian),_e+=4,J.set(ye,_e),_e+=ye.byteLength}}}else J[0]=0;k.s11n.serialize.time+=performance.now()-ot},m.s11n},ke=function P(j=16){P._chars||(P._chars="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ012346789",P._n=P._chars.length);let J=[],ue=0;for(;ue<j;++ue){let me=Math.random()*(P._n*64)%P._n|0;J[ue]=P._chars[me]}return J.join("")},ve=Object.create(null),Fe=Object.create(null);Fe.op=void 0,Fe.start=void 0;let Be=P=>{Fe.start=performance.now(),Fe.op=P,++k[P].count},re=()=>k[Fe.op].time+=performance.now()-Fe.start,O={xCheckReservedLock:function(P,j){return T.poke(j,0,"i32"),0},xClose:function(P){Be("xClose");let j=0,J=ve[P];return J&&(delete ve[P],j=te("xClose",P),J.sq3File&&J.sq3File.dispose()),re(),j},xDeviceCharacteristics:function(P){return W.SQLITE_IOCAP_UNDELETABLE_WHEN_OPEN},xFileControl:function(P,j,J){return W.SQLITE_NOTFOUND},xFileSize:function(P,j){Be("xFileSize");let J=te("xFileSize",P);if(J==0)try{let ue=m.s11n.deserialize()[0];T.poke(j,ue,"i64")}catch(ue){C("Unexpected error reading xFileSize() result:",ue),J=m.sq3Codes.SQLITE_IOERR}return re(),J},xLock:function(P,j){Be("xLock");let J=ve[P],ue=0;return J.lockType?J.lockType=j:(ue=te("xLock",P,j),ue===0&&(J.lockType=j)),re(),ue},xRead:function(P,j,J,ue){Be("xRead");let me=ve[P],Se;try{Se=te("xRead",P,J,Number(ue)),(Se===0||W.SQLITE_IOERR_SHORT_READ===Se)&&T.heap8u().set(me.sabView.subarray(0,J),j)}catch(Ie){C("xRead(",arguments,") failed:",Ie,me),Se=W.SQLITE_IOERR_READ}return re(),Se},xSync:function(P,j){Be("xSync"),++k.xSync.count;let J=te("xSync",P,j);return re(),J},xTruncate:function(P,j){Be("xTruncate");let J=te("xTruncate",P,Number(j));return re(),J},xUnlock:function(P,j){Be("xUnlock");let J=ve[P],ue=0;return W.SQLITE_LOCK_NONE===j&&J.lockType&&(ue=te("xUnlock",P,j)),ue===0&&(J.lockType=j),re(),ue},xWrite:function(P,j,J,ue){Be("xWrite");let me=ve[P],Se;try{me.sabView.set(T.heap8u().subarray(j,j+J)),Se=te("xWrite",P,J,Number(ue))}catch(Ie){C("xWrite(",arguments,") failed:",Ie,me),Se=W.SQLITE_IOERR_WRITE}return re(),Se}},N={xAccess:function(P,j,J,ue){Be("xAccess");let me=te("xAccess",T.cstrToJs(j));return T.poke(ue,me?0:1,"i32"),re(),0},xCurrentTime:function(P,j){return T.poke(j,24405875e-1+new Date().getTime()/864e5,"double"),0},xCurrentTimeInt64:function(P,j){return T.poke(j,24405875e-1*864e5+new Date().getTime(),"i64"),0},xDelete:function(P,j,J){Be("xDelete");let ue=te("xDelete",T.cstrToJs(j),J,!1);return re(),ue},xFullPathname:function(P,j,J,ue){return T.cstrncpy(ue,j,J)<J?0:W.SQLITE_CANTOPEN},xGetLastError:function(P,j,J){return fe("OPFS xGetLastError() has nothing sensible to return."),0},xOpen:function(j,J,ue,me,Se){Be("xOpen");let Ie=0;J===0?J=ke():T.isPtr(J)&&(W.sqlite3_uri_boolean(J,"opfs-unlock-asap",0)&&(Ie|=m.opfsFlags.OPFS_UNLOCK_ASAP),W.sqlite3_uri_boolean(J,"delete-before-open",0)&&(Ie|=m.opfsFlags.OPFS_UNLINK_BEFORE_OPEN),J=T.cstrToJs(J));let be=Object.create(null);be.fid=ue,be.filename=J,be.sab=new SharedArrayBuffer(m.fileBufferSize),be.flags=me,be.readOnly=!(t.SQLITE_OPEN_CREATE&me)&&!!(me&W.SQLITE_OPEN_READONLY);let ot=te("xOpen",ue,J,me,Ie);return ot||(be.readOnly&&T.poke(Se,W.SQLITE_OPEN_READONLY,"i32"),ve[ue]=be,be.sabView=m.sabFileBufView,be.sq3File=new K(ue),be.sq3File.$pMethods=h.pointer,be.lockType=W.SQLITE_LOCK_NONE),re(),ot}};d&&(x.$xRandomness=d.$xRandomness,x.$xSleep=d.$xSleep),x.$xRandomness||(N.xRandomness=function(P,j,J){let ue=T.heap8u(),me=0;for(;me<j;++me)ue[J+me]=Math.random()*255e3&255;return me}),x.$xSleep||(N.xSleep=function(P,j){return Atomics.wait(m.sabOPView,m.opIds.xSleep,0,j),0}),I.getResolvedPath=function(P,j){let J=new URL(P,"file://irrelevant").pathname;return j?J.split("/").filter(ue=>!!ue):J},I.getDirForFilename=async function(j,J=!1){let ue=I.getResolvedPath(j,!0),me=ue.pop(),Se=I.rootDirectory;for(let Ie of ue)Ie&&(Se=await Se.getDirectoryHandle(Ie,{create:!!J}));return[Se,me]},I.mkdir=async function(P){try{return await I.getDirForFilename(P+"/filepart",!0),!0}catch{return!1}},I.entryExists=async function(P){try{let[j,J]=await I.getDirForFilename(P);return await j.getFileHandle(J),!0}catch{return!1}},I.randomFilename=ke,I.treeList=async function(){let P=async function J(ue,me){me.name=ue.name,me.dirs=[],me.files=[];for await(let Se of ue.values())if(Se.kind==="directory"){let Ie=Object.create(null);me.dirs.push(Ie),await J(Se,Ie)}else me.files.push(Se.name)},j=Object.create(null);return await P(I.rootDirectory,j),j},I.rmfr=async function(){let P=I.rootDirectory,j={recurse:!0};for await(let J of P.values())P.removeEntry(J.name,j)},I.unlink=async function(P,j=!1,J=!1){try{let[ue,me]=await I.getDirForFilename(P,!1);return await ue.removeEntry(me,{recursive:j}),!0}catch(ue){if(J)throw new Error("unlink(",arguments[0],") failed: "+ue.message,{cause:ue});return!1}},I.traverse=async function(P){let j={recursive:!0,directory:I.rootDirectory};typeof P=="function"&&(P={callback:P}),P=Object.assign(j,P||{}),async function ue(me,Se){for await(let Ie of me.values()){if(P.callback(Ie,me,Se)===!1)return!1;if(P.recursive&&Ie.kind==="directory"&&await ue(Ie,Se+1)===!1)break}}(P.directory,0)};let le=async function(P,j){let[J,ue]=await I.getDirForFilename(P,!0),Se=await(await J.getFileHandle(ue,{create:!0})).createSyncAccessHandle(),Ie=0,be,ot=!1,it=!1;try{for(Se.truncate(0);(be=await j())!==void 0;)be instanceof ArrayBuffer&&(be=new Uint8Array(be)),Ie===0&&be.byteLength>=15&&(L.affirmDbHeader(be),ot=!0),Se.write(be,{at:Ie}),Ie+=be.byteLength;if((Ie<512||Ie%512!==0)&&M("Input size",Ie,"is not correct for an SQLite database."),!ot){let U=new Uint8Array(20);Se.read(U,{at:0}),L.affirmDbHeader(U)}return Se.write(new Uint8Array([1,1]),{at:18}),Ie}catch(U){throw await Se.close(),Se=void 0,await J.removeEntry(ue).catch(()=>{}),U}finally{Se&&await Se.close()}};if(I.importDb=async function(P,j){if(j instanceof Function)return le(P,j);j instanceof ArrayBuffer&&(j=new Uint8Array(j)),L.affirmIsDb(j);let J=j.byteLength,[ue,me]=await I.getDirForFilename(P,!0),Se,Ie,be=0;try{return Se=await(await ue.getFileHandle(me,{create:!0})).createSyncAccessHandle(),Se.truncate(0),be=Se.write(j,{at:0}),be!=J&&M("Expected to write "+J+" bytes but wrote "+be+"."),Se.write(new Uint8Array([1,1]),{at:18}),be}catch(ot){throw Se&&(await Se.close(),Se=void 0),await ue.removeEntry(me).catch(()=>{}),ot}finally{Se&&await Se.close()}},t.oo1){let P=function(...j){let J=t.oo1.DB.dbCtorHelper.normalizeArgs(...j);J.vfs=x.$zName,t.oo1.DB.dbCtorHelper.call(this,J)};P.prototype=Object.create(t.oo1.DB.prototype),t.oo1.OpfsDb=P,P.importDb=I.importDb,t.oo1.DB.dbCtorHelper.setVfsPostOpenCallback(x.pointer,function(j,J){J.capi.sqlite3_busy_timeout(j,1e4)})}let pe=function(){let P=T.scopedAllocPush(),j=new K;try{let J=j.pointer,ue=W.SQLITE_OPEN_CREATE|W.SQLITE_OPEN_READWRITE|W.SQLITE_OPEN_MAIN_DB,me=T.scopedAlloc(8),Se="/sanity/check/file"+ke(8),Ie=T.scopedAllocCString(Se),be;if(m.s11n.serialize("This is \xE4 string."),be=m.s11n.deserialize(),se("deserialize() says:",be),be[0]!=="This is \xE4 string."&&M("String d13n error."),N.xAccess(x.pointer,Ie,0,me),be=T.peek(me,"i32"),se("xAccess(",Se,") exists ?=",be),be=N.xOpen(x.pointer,Ie,J,ue,me),se("open rc =",be,"state.sabOPView[xOpen] =",m.sabOPView[m.opIds.xOpen]),be!==0){C("open failed with code",be);return}N.xAccess(x.pointer,Ie,0,me),be=T.peek(me,"i32"),be||M("xAccess() failed to detect file."),be=O.xSync(j.pointer,0),be&&M("sync failed w/ rc",be),be=O.xTruncate(j.pointer,1024),be&&M("truncate failed w/ rc",be),T.poke(me,0,"i64"),be=O.xFileSize(j.pointer,me),be&&M("xFileSize failed w/ rc",be),se("xFileSize says:",T.peek(me,"i64")),be=O.xWrite(j.pointer,Ie,10,1),be&&M("xWrite() failed!");let ot=T.scopedAlloc(16);be=O.xRead(j.pointer,ot,6,2),T.poke(ot+6,0);let it=T.cstrToJs(ot);se("xRead() got:",it),it!=="sanity"&&M("Unexpected xRead() value."),N.xSleep&&(se("xSleep()ing before close()ing..."),N.xSleep(x.pointer,2e3),se("waking up from xSleep()")),be=O.xClose(J),se("xClose rc =",be,"sabOPView =",m.sabOPView),se("Deleting file:",Se),N.xDelete(x.pointer,Ie,4660),N.xAccess(x.pointer,Ie,0,me),be=T.peek(me,"i32"),be&&M("Expecting 0 from xAccess(",Se,") after xDelete()."),fe("End of OPFS sanity checks.")}finally{j.dispose(),T.scopedAllocPop(P)}};b.onmessage=function({data:P}){switch(P.type){case"opfs-unavailable":H(new Error(P.payload.join(" ")));break;case"opfs-async-loaded":b.postMessage({type:"opfs-async-init",args:m});break;case"opfs-async-inited":{if(B===!0)break;try{t.vfs.installVfs({io:{struct:h,methods:O},vfs:{struct:x,methods:N}}),m.sabOPView=new Int32Array(m.sabOP),m.sabFileBufView=new Uint8Array(m.sabIO,0,m.fileBufferSize),m.sabS11nView=new Uint8Array(m.sabIO,m.sabS11nOffset,m.sabS11nSize),he(),i.sanityChecks&&(fe("Running sanity checks because of opfs-sanity-check URL arg..."),pe()),ie()?navigator.storage.getDirectory().then(j=>{b.onerror=b._originalOnError,delete b._originalOnError,t.opfs=I,I.rootDirectory=j,se("End of OPFS sqlite3_vfs setup.",x),Q()}).catch(H):Q()}catch(j){C(j),H(j)}break}default:{let j="Unexpected message from the OPFS async worker: "+JSON.stringify(P);C(j),H(new Error(j));break}}}}))};n.defaultProxyUri="sqlite3-opfs-async-proxy.js",globalThis.sqlite3ApiBootstrap.initializersAsync.push(async a=>{try{let i=n.defaultProxyUri;return a.scriptInfo.sqlite3Dir&&(n.defaultProxyUri=a.scriptInfo.sqlite3Dir+i),n().catch(o=>{a.config.warn("Ignoring inability to install OPFS sqlite3_vfs:",o.message)})}catch(i){return a.config.error("installOpfsVfs() exception:",i),Promise.reject(i)}})}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){"use strict";let n=t.util.toss,a=t.util.toss3,i=Object.create(null),o=t.capi,q=t.util,A=t.wasm,$=4096,G=512,oe=4,se=8,fe=G+oe,C=G,M=fe,W=$,L=o.SQLITE_OPEN_MAIN_DB|o.SQLITE_OPEN_MAIN_JOURNAL|o.SQLITE_OPEN_SUPER_JOURNAL|o.SQLITE_OPEN_WAL,T=".opaque",z=()=>Math.random().toString(36).slice(2),K=new TextDecoder,X=new TextEncoder,I=Object.assign(Object.create(null),{name:"opfs-sahpool",directory:void 0,initialCapacity:6,clearOnInit:!1,verbosity:2,forceReinitIfPreviouslyFailed:!1}),ie=[t.config.error,t.config.warn,t.config.log],h=t.config.log,x=t.config.warn,B=t.config.error,H=new Map,Q=re=>H.get(re),b=(re,O)=>{O?H.set(re,O):H.delete(re)},_=new Map,d=re=>_.get(re),m=(re,O)=>{O?_.set(re,O):_.delete(re)},k={xCheckReservedLock:function(re,O){let N=d(re);return N.log("xCheckReservedLock"),N.storeErr(),A.poke32(O,1),0},xClose:function(re){let O=d(re);O.storeErr();let N=O.getOFileForS3File(re);if(N)try{O.log(`xClose ${N.path}`),O.mapS3FileToOFile(re,!1),N.sah.flush(),N.flags&o.SQLITE_OPEN_DELETEONCLOSE&&O.deletePath(N.path)}catch(le){return O.storeErr(le,o.SQLITE_IOERR)}return 0},xDeviceCharacteristics:function(re){return o.SQLITE_IOCAP_UNDELETABLE_WHEN_OPEN},xFileControl:function(re,O,N){return o.SQLITE_NOTFOUND},xFileSize:function(re,O){let N=d(re);N.log("xFileSize");let pe=N.getOFileForS3File(re).sah.getSize()-W;return A.poke64(O,BigInt(pe)),0},xLock:function(re,O){let N=d(re);N.log(`xLock ${O}`),N.storeErr();let le=N.getOFileForS3File(re);return le.lockType=O,0},xRead:function(re,O,N,le){let pe=d(re);pe.storeErr();let P=pe.getOFileForS3File(re);pe.log(`xRead ${P.path} ${N} @ ${le}`);try{let j=P.sah.read(A.heap8u().subarray(O,O+N),{at:W+Number(le)});return j<N?(A.heap8u().fill(0,O+j,O+N),o.SQLITE_IOERR_SHORT_READ):0}catch(j){return pe.storeErr(j,o.SQLITE_IOERR)}},xSectorSize:function(re){return $},xSync:function(re,O){let N=d(re);N.log(`xSync ${O}`),N.storeErr();let le=N.getOFileForS3File(re);try{return le.sah.flush(),0}catch(pe){return N.storeErr(pe,o.SQLITE_IOERR)}},xTruncate:function(re,O){let N=d(re);N.log(`xTruncate ${O}`),N.storeErr();let le=N.getOFileForS3File(re);try{return le.sah.truncate(W+Number(O)),0}catch(pe){return N.storeErr(pe,o.SQLITE_IOERR)}},xUnlock:function(re,O){let N=d(re);N.log("xUnlock");let le=N.getOFileForS3File(re);return le.lockType=O,0},xWrite:function(re,O,N,le){let pe=d(re);pe.storeErr();let P=pe.getOFileForS3File(re);pe.log(`xWrite ${P.path} ${N} ${le}`);try{let j=P.sah.write(A.heap8u().subarray(O,O+N),{at:W+Number(le)});return N===j?0:n("Unknown write() failure.")}catch(j){return pe.storeErr(j,o.SQLITE_IOERR)}}},te=new o.sqlite3_io_methods;te.$iVersion=1,t.vfs.installVfs({io:{struct:te,methods:k}});let he={xAccess:function(re,O,N,le){let pe=Q(re);pe.storeErr();try{let P=pe.getPath(O);A.poke32(le,pe.hasFilename(P)?1:0)}catch{A.poke32(le,0)}return 0},xCurrentTime:function(re,O){return A.poke(O,24405875e-1+new Date().getTime()/864e5,"double"),0},xCurrentTimeInt64:function(re,O){return A.poke(O,24405875e-1*864e5+new Date().getTime(),"i64"),0},xDelete:function(re,O,N){let le=Q(re);le.log(`xDelete ${A.cstrToJs(O)}`),le.storeErr();try{return le.deletePath(le.getPath(O)),0}catch(pe){return le.storeErr(pe),o.SQLITE_IOERR_DELETE}},xFullPathname:function(re,O,N,le){return A.cstrncpy(le,O,N)<N?0:o.SQLITE_CANTOPEN},xGetLastError:function(re,O,N){let le=Q(re),pe=le.popErr();if(le.log(`xGetLastError ${O} e =`,pe),pe){let P=A.scopedAllocPush();try{let[j,J]=A.scopedAllocCString(pe.message,!0);A.cstrncpy(N,j,O),J>O&&A.poke8(N+O-1,0)}catch{return o.SQLITE_NOMEM}finally{A.scopedAllocPop(P)}}return pe?pe.sqlite3Rc||o.SQLITE_IOERR:0},xOpen:function(O,N,le,pe,P){let j=Q(O);try{j.log(`xOpen ${A.cstrToJs(N)} ${pe}`);let J=N&&A.peek8(N)?j.getPath(N):z(),ue=j.getSAHForPath(J);!ue&&pe&o.SQLITE_OPEN_CREATE&&(j.getFileCount()<j.getCapacity()?(ue=j.nextAvailableSAH(),j.setAssociatedPath(ue,J,pe)):n("SAH pool is full. Cannot create file",J)),ue||n("file not found:",J);let me={path:J,flags:pe,sah:ue};j.mapS3FileToOFile(le,me),me.lockType=o.SQLITE_LOCK_NONE;let Se=new o.sqlite3_file(le);return Se.$pMethods=te.pointer,Se.dispose(),A.poke32(P,pe),0}catch(J){return j.storeErr(J),o.SQLITE_CANTOPEN}}},ke=function(re){t.capi.sqlite3_vfs_find(re)&&a("VFS name is already registered:",re);let O=new o.sqlite3_vfs,N=o.sqlite3_vfs_find(null),le=N?new o.sqlite3_vfs(N):null;return O.$iVersion=2,O.$szOsFile=o.sqlite3_file.structInfo.sizeof,O.$mxPathname=G,O.addOnDispose(O.$zName=A.allocCString(re),()=>b(O.pointer,0)),le&&(O.$xRandomness=le.$xRandomness,O.$xSleep=le.$xSleep,le.dispose()),!O.$xRandomness&&!he.xRandomness&&(he.xRandomness=function(pe,P,j){let J=A.heap8u(),ue=0;for(;ue<P;++ue)J[j+ue]=Math.random()*255e3&255;return ue}),!O.$xSleep&&!he.xSleep&&(he.xSleep=(pe,P)=>0),t.vfs.installVfs({vfs:{struct:O,methods:he}}),O};class ve{vfsDir;#e;#t;#f;#i=new Map;#n=new Map;#s=new Set;#c=new Map;#r=new Uint8Array(fe);#o;#a;#u;constructor(O=Object.create(null)){this.#u=O.verbosity??I.verbosity,this.vfsName=O.name||I.name,this.#a=ke(this.vfsName),b(this.#a.pointer,this),this.vfsDir=O.directory||"."+this.vfsName,this.#o=new DataView(this.#r.buffer,this.#r.byteOffset),this.isReady=this.reset(!!(O.clearOnInit??I.clearOnInit)).then(()=>{if(this.$error)throw this.$error;return this.getCapacity()?Promise.resolve(void 0):this.addCapacity(O.initialCapacity||I.initialCapacity)})}#_(O,...N){this.#u>O&&ie[O](this.vfsName+":",...N)}log(...O){this.#_(2,...O)}warn(...O){this.#_(1,...O)}error(...O){this.#_(0,...O)}getVfs(){return this.#a}getCapacity(){return this.#i.size}getFileCount(){return this.#n.size}getFileNames(){let O=[],N=this.#n.keys();for(let le of N)O.push(le);return O}async addCapacity(O){for(let N=0;N<O;++N){let le=z(),P=await(await this.#t.getFileHandle(le,{create:!0})).createSyncAccessHandle();this.#i.set(P,le),this.setAssociatedPath(P,"",0)}return this.getCapacity()}async reduceCapacity(O){let N=0;for(let le of Array.from(this.#s)){if(N===O||this.getFileCount()===this.getCapacity())break;let pe=this.#i.get(le);le.close(),await this.#t.removeEntry(pe),this.#i.delete(le),this.#s.delete(le),++N}return N}releaseAccessHandles(){for(let O of this.#i.keys())O.close();this.#i.clear(),this.#n.clear(),this.#s.clear()}async acquireAccessHandles(O){let N=[];for await(let[le,pe]of this.#t)pe.kind==="file"&&N.push([le,pe]);return Promise.all(N.map(async([le,pe])=>{try{let P=await pe.createSyncAccessHandle();if(this.#i.set(P,le),O)P.truncate(W),this.setAssociatedPath(P,"",0);else{let j=this.getAssociatedPath(P);j?this.#n.set(j,P):this.#s.add(P)}}catch(P){throw this.storeErr(P),this.releaseAccessHandles(),P}}))}getAssociatedPath(O){O.read(this.#r,{at:0});let N=this.#o.getUint32(C);if(this.#r[0]&&(N&o.SQLITE_OPEN_DELETEONCLOSE||!(N&L)))return x(`Removing file with unexpected flags ${N.toString(16)}`,this.#r),this.setAssociatedPath(O,"",0),"";let le=new Uint32Array(se/4);O.read(le,{at:M});let pe=this.computeDigest(this.#r);if(le.every((P,j)=>P===pe[j])){let P=this.#r.findIndex(j=>j===0);return P===0&&O.truncate(W),P?K.decode(this.#r.subarray(0,P)):""}else return x("Disassociating file with bad digest."),this.setAssociatedPath(O,"",0),""}setAssociatedPath(O,N,le){let pe=X.encodeInto(N,this.#r);G<=pe.written+1&&n("Path too long:",N),this.#r.fill(0,pe.written,G),this.#o.setUint32(C,le);let P=this.computeDigest(this.#r);O.write(this.#r,{at:0}),O.write(P,{at:M}),O.flush(),N?(this.#n.set(N,O),this.#s.delete(O)):(O.truncate(W),this.#s.add(O))}computeDigest(O){let N=3735928559,le=1103547991;for(let pe of O)N=31*N+pe*307,le=31*le+pe*307;return new Uint32Array([N>>>0,le>>>0])}async reset(O){await this.isReady;let N=await navigator.storage.getDirectory(),le,pe;for(let P of this.vfsDir.split("/"))P&&(le=N,N=await N.getDirectoryHandle(P,{create:!0}));return this.#e=N,this.#f=le,this.#t=await this.#e.getDirectoryHandle(T,{create:!0}),this.releaseAccessHandles(),this.acquireAccessHandles(O)}getPath(O){return A.isPtr(O)&&(O=A.cstrToJs(O)),(O instanceof URL?O:new URL(O,"file://localhost/")).pathname}deletePath(O){let N=this.#n.get(O);return N&&(this.#n.delete(O),this.setAssociatedPath(N,"",0)),!!N}storeErr(O,N){return O&&(O.sqlite3Rc=N||o.SQLITE_IOERR,this.error(O)),this.$error=O,N}popErr(){let O=this.$error;return this.$error=void 0,O}nextAvailableSAH(){let[O]=this.#s.keys();return O}getOFileForS3File(O){return this.#c.get(O)}mapS3FileToOFile(O,N){N?(this.#c.set(O,N),m(O,this)):(this.#c.delete(O),m(O,!1))}hasFilename(O){return this.#n.has(O)}getSAHForPath(O){return this.#n.get(O)}async removeVfs(){if(!this.#a.pointer||!this.#t)return!1;o.sqlite3_vfs_unregister(this.#a.pointer),this.#a.dispose(),delete i[this.vfsName];try{this.releaseAccessHandles(),await this.#e.removeEntry(T,{recursive:!0}),this.#t=void 0,await this.#f.removeEntry(this.#e.name,{recursive:!0}),this.#e=this.#f=void 0}catch(O){t.config.error(this.vfsName,"removeVfs() failed:",O)}return!0}exportFile(O){let N=this.#n.get(O)||n("File not found:",O),le=N.getSize()-W,pe=new Uint8Array(le>0?le:0);if(le>0){let P=N.read(pe,{at:W});P!=le&&n("Expected to read "+le+" bytes but read "+P+".")}return pe}async importDbChunked(O,N){let le=this.#n.get(O)||this.nextAvailableSAH()||n("No available handles to import to.");le.truncate(0);let pe=0,P,j=!1,J=!1;try{for(;(P=await N())!==void 0;)P instanceof ArrayBuffer&&(P=new Uint8Array(P)),pe===0&&P.byteLength>=15&&(q.affirmDbHeader(P),j=!0),le.write(P,{at:W+pe}),pe+=P.byteLength;if((pe<512||pe%512!==0)&&n("Input size",pe,"is not correct for an SQLite database."),!j){let ue=new Uint8Array(20);le.read(ue,{at:0}),q.affirmDbHeader(ue)}le.write(new Uint8Array([1,1]),{at:W+18})}catch(ue){throw this.setAssociatedPath(le,"",0),ue}return this.setAssociatedPath(le,O,o.SQLITE_OPEN_MAIN_DB),pe}importDb(O,N){if(N instanceof ArrayBuffer)N=new Uint8Array(N);else if(N instanceof Function)return this.importDbChunked(O,N);let le=this.#n.get(O)||this.nextAvailableSAH()||n("No available handles to import to."),pe=N.byteLength;(pe<512||pe%512!=0)&&n("Byte array size is invalid for an SQLite db.");let P="SQLite format 3";for(let J=0;J<P.length;++J)P.charCodeAt(J)!==N[J]&&n("Input does not contain an SQLite database header.");let j=le.write(N,{at:W});return j!=pe?(this.setAssociatedPath(le,"",0),n("Expected to write "+pe+" bytes but wrote "+j+".")):(le.write(new Uint8Array([1,1]),{at:W+18}),this.setAssociatedPath(le,O,o.SQLITE_OPEN_MAIN_DB)),j}}class Fe{#e;constructor(O){this.#e=O,this.vfsName=O.vfsName}async addCapacity(O){return this.#e.addCapacity(O)}async reduceCapacity(O){return this.#e.reduceCapacity(O)}getCapacity(){return this.#e.getCapacity(this.#e)}getFileCount(){return this.#e.getFileCount()}getFileNames(){return this.#e.getFileNames()}async reserveMinimumCapacity(O){let N=this.#e.getCapacity();return N<O?this.#e.addCapacity(O-N):N}exportFile(O){return this.#e.exportFile(O)}importDb(O,N){return this.#e.importDb(O,N)}async wipeFiles(){return this.#e.reset(!0)}unlink(O){return this.#e.deletePath(O)}async removeVfs(){return this.#e.removeVfs()}}let Be=async()=>{let re=await navigator.storage.getDirectory(),O=".opfs-sahpool-sync-check-"+z(),pe=(await(await re.getFileHandle(O,{create:!0})).createSyncAccessHandle()).close();return await pe,await re.removeEntry(O),pe?.then&&n("The local OPFS API is too old for opfs-sahpool:","it has an async FileSystemSyncAccessHandle.close() method."),!0};t.installOpfsSAHPoolVfs=async function(re=Object.create(null)){re=Object.assign(Object.create(null),I,re||{});let O=re.name;if(re.$testThrowPhase1)throw re.$testThrowPhase1;if(i[O])try{return await i[O]}catch(N){if(re.forceReinitIfPreviouslyFailed)delete i[O];else throw N}return!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle||!globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle||!navigator?.storage?.getDirectory?i[O]=Promise.reject(new Error("Missing required OPFS APIs.")):i[O]=Be().then(async function(){if(re.$testThrowPhase2)throw re.$testThrowPhase2;let N=new ve(re);return N.isReady.then(async()=>{let le=new Fe(N);if(t.oo1){let pe=t.oo1,P=N.getVfs(),j=function(...J){let ue=pe.DB.dbCtorHelper.normalizeArgs(...J);ue.vfs=P.$zName,pe.DB.dbCtorHelper.call(this,ue)};j.prototype=Object.create(pe.DB.prototype),le.OpfsSAHPoolDb=j}return N.log("VFS initialized."),le}).catch(async le=>{throw await N.removeVfs().catch(()=>{}),le})}).catch(N=>i[O]=Promise.reject(N))}}),typeof e<"u"){let t=Object.assign(Object.create(null),{exports:typeof S>"u"?e.asm:S,memory:e.wasmMemory},globalThis.sqlite3ApiConfig||{});globalThis.sqlite3ApiConfig=t;let n;try{n=globalThis.sqlite3ApiBootstrap()}catch(a){throw console.error("sqlite3ApiBootstrap() error:",a),a}finally{delete globalThis.sqlite3ApiBootstrap,delete globalThis.sqlite3ApiConfig}e.sqlite3=n}else console.warn("This is not running in an Emscripten module context, so","globalThis.sqlite3ApiBootstrap() is _not_ being called due to lack","of config info for the WASM environment.","It must be called manually.")}),u=y,u}})(),x_=function(){let f=gn;if(!f)throw new Error("Expecting globalThis.sqlite3InitModule to be defined by the Emscripten build.");let s=globalThis.sqlite3InitModuleState=Object.assign(Object.create(null),{moduleScript:globalThis?.document?.currentScript,isWorker:typeof WorkerGlobalScope<"u",location:globalThis.location,urlParams:globalThis?.location?.href?new URL(globalThis.location.href).searchParams:new URLSearchParams});if(s.debugModule=s.urlParams.has("sqlite3.debugModule")?(...u)=>console.warn("sqlite3.debugModule:",...u):()=>{},s.urlParams.has("sqlite3.dir"))s.sqlite3Dir=s.urlParams.get("sqlite3.dir")+"/";else if(s.moduleScript){let u=s.moduleScript.src.split("/");u.pop(),s.sqlite3Dir=u.join("/")+"/"}if(globalThis.sqlite3InitModule=function u(...r){return f(...r).then(w=>{let F=w.sqlite3;F.scriptInfo=s,u.__isUnderTest&&(F.__isUnderTest=!0);let y=F.asyncPostInit;return delete F.asyncPostInit,y()}).catch(w=>{throw console.error("Exception loading sqlite3 module:",w),w})},globalThis.sqlite3InitModule.ready=f.ready,globalThis.sqlite3InitModuleState.moduleScript){let u=globalThis.sqlite3InitModuleState,r=u.moduleScript.src.split("/");r.pop(),u.scriptDir=r.join("/")+"/"}return s.debugModule("sqlite3InitModuleState =",s),globalThis.sqlite3InitModule}();gn=x_;var vs=gn;we();Ee();qe();we();Ee();qe();we();Ee();qe();we();Ee();qe();var As=$f(Ss(),1);function ut(f){return new DataView(f.buffer,f.byteOffset)}var Ts={len:1,get(f,s){return ut(f).getUint8(s)},put(f,s,u){return ut(f).setUint8(s,u),s+1}},Mr={len:2,get(f,s){return ut(f).getUint16(s,!0)},put(f,s,u){return ut(f).setUint16(s,u,!0),s+2}},Nr={len:2,get(f,s){return ut(f).getUint16(s)},put(f,s,u){return ut(f).setUint16(s,u),s+2}};var ks={len:4,get(f,s){return ut(f).getUint32(s,!0)},put(f,s,u){return ut(f).setUint32(s,u,!0),s+4}},Is={len:4,get(f,s){return ut(f).getUint32(s)},put(f,s,u){return ut(f).setUint32(s,u),s+4}};var Fs={len:4,get(f,s){return ut(f).getInt32(s)},put(f,s,u){return ut(f).setInt32(s,u),s+4}};var Os={len:8,get(f,s){return ut(f).getBigUint64(s,!0)},put(f,s,u){return ut(f).setBigUint64(s,u,!0),s+8}};var _t=class{constructor(s,u){this.len=s,this.encoding=u,this.textDecoder=new TextDecoder(u)}get(s,u){return this.textDecoder.decode(s.subarray(u,u+this.len))}};we();Ee();qe();we();Ee();qe();we();Ee();qe();var w_="End-Of-Stream",Ge=class extends Error{constructor(){super(w_)}};we();Ee();qe();we();Ee();qe();we();Ee();qe();var dr=class{constructor(){this.maxStreamReadSize=1*1024*1024,this.endOfStream=!1,this.peekQueue=[]}async peek(s,u,r){let w=await this.read(s,u,r);return this.peekQueue.push(s.subarray(u,u+w)),w}async read(s,u,r){if(r===0)return 0;let w=this.readFromPeekBuffer(s,u,r);if(w+=await this.readRemainderFromStream(s,u+w,r-w),w===0)throw new Ge;return w}readFromPeekBuffer(s,u,r){let w=r,F=0;for(;this.peekQueue.length>0&&w>0;){let y=this.peekQueue.pop();if(!y)throw new Error("peekData should be defined");let D=Math.min(y.length,w);s.set(y.subarray(0,D),u+F),F+=D,w-=D,D<y.length&&this.peekQueue.push(y.subarray(D))}return F}async readRemainderFromStream(s,u,r){let w=r,F=0;for(;w>0&&!this.endOfStream;){let y=Math.min(w,this.maxStreamReadSize),D=await this.readFromStream(s,u+F,y);if(D===0)break;F+=D,w-=D}return F}};we();Ee();qe();var mr=class extends dr{constructor(s){super(),this.reader=s.getReader({mode:"byob"})}async readFromStream(s,u,r){if(this.endOfStream)throw new Ge;let w=await this.reader.read(new Uint8Array(r));return w.done&&(this.endOfStream=w.done),w.value?(s.set(w.value,u),w.value.byteLength):0}async abort(){await this.reader.cancel(),this.reader.releaseLock()}};we();Ee();qe();we();Ee();qe();var Nt=class{constructor(s){this.position=0,this.numBuffer=new Uint8Array(8),this.fileInfo=s?.fileInfo??{},this.onClose=s?.onClose,s?.abortSignal&&s.abortSignal.addEventListener("abort",()=>{this.abort()})}async readToken(s,u=this.position){let r=new Uint8Array(s.len);if(await this.readBuffer(r,{position:u})<s.len)throw new Ge;return s.get(r,0)}async peekToken(s,u=this.position){let r=new Uint8Array(s.len);if(await this.peekBuffer(r,{position:u})<s.len)throw new Ge;return s.get(r,0)}async readNumber(s){if(await this.readBuffer(this.numBuffer,{length:s.len})<s.len)throw new Ge;return s.get(this.numBuffer,0)}async peekNumber(s){if(await this.peekBuffer(this.numBuffer,{length:s.len})<s.len)throw new Ge;return s.get(this.numBuffer,0)}async ignore(s){if(this.fileInfo.size!==void 0){let u=this.fileInfo.size-this.position;if(s>u)return this.position+=u,u}return this.position+=s,s}async close(){await this.abort(),await this.onClose?.()}normalizeOptions(s,u){if(u&&u.position!==void 0&&u.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");return u?{mayBeLess:u.mayBeLess===!0,offset:u.offset?u.offset:0,length:u.length?u.length:s.length-(u.offset?u.offset:0),position:u.position?u.position:this.position}:{mayBeLess:!1,offset:0,length:s.length,position:this.position}}abort(){return Promise.resolve()}};var E_=256e3,Ur=class extends Nt{constructor(s,u){super(u),this.streamReader=s}async readBuffer(s,u){let r=this.normalizeOptions(s,u),w=r.position-this.position;if(w>0)return await this.ignore(w),this.readBuffer(s,u);if(w<0)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");if(r.length===0)return 0;let F=await this.streamReader.read(s,r.offset,r.length);if(this.position+=F,(!u||!u.mayBeLess)&&F<r.length)throw new Ge;return F}async peekBuffer(s,u){let r=this.normalizeOptions(s,u),w=0;if(r.position){let F=r.position-this.position;if(F>0){let y=new Uint8Array(r.length+F);return w=await this.peekBuffer(y,{mayBeLess:r.mayBeLess}),s.set(y.subarray(F),r.offset),w-F}if(F<0)throw new Error("Cannot peek from a negative offset in a stream")}if(r.length>0){try{w=await this.streamReader.peek(s,r.offset,r.length)}catch(F){if(u?.mayBeLess&&F instanceof Ge)return 0;throw F}if(!r.mayBeLess&&w<r.length)throw new Ge}return w}async ignore(s){let u=Math.min(E_,s),r=new Uint8Array(u),w=0;for(;w<s;){let F=s-w,y=await this.readBuffer(r,{length:Math.min(u,F)});if(y<0)return y;w+=y}return w}abort(){return this.streamReader.abort()}};we();Ee();qe();var jr=class extends Nt{constructor(s,u){super(u),this.uint8Array=s,this.fileInfo.size=this.fileInfo.size?this.fileInfo.size:s.length}async readBuffer(s,u){if(u?.position){if(u.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");this.position=u.position}let r=await this.peekBuffer(s,u);return this.position+=r,r}async peekBuffer(s,u){let r=this.normalizeOptions(s,u),w=Math.min(this.uint8Array.length-r.position,r.length);if(!r.mayBeLess&&w<r.length)throw new Ge;return s.set(this.uint8Array.subarray(r.position,r.position+w),r.offset),w}close(){return super.close()}};function Ps(f,s){return new Ur(new mr(f),s)}function Ls(f,s){return new jr(f,s)}we();Ee();qe();var sm={utf8:new globalThis.TextDecoder("utf8")};var om=new globalThis.TextEncoder;var am=Array.from({length:256},(f,s)=>s.toString(16).padStart(2,"0"));function xn(f){let{byteLength:s}=f;if(s===6)return f.getUint16(0)*2**32+f.getUint32(2);if(s===5)return f.getUint8(0)*2**32+f.getUint32(1);if(s===4)return f.getUint32(0);if(s===3)return f.getUint8(0)*2**16+f.getUint16(1);if(s===2)return f.getUint16(0);if(s===1)return f.getUint8(0)}function bn(f,s){let u=f.length,r=s.length;if(r===0||r>u)return-1;let w=u-r;for(let F=0;F<=w;F++){let y=!0;for(let D=0;D<r;D++)if(f[F+D]!==s[D]){y=!1;break}if(y)return F}return-1}function Rs(f,s){return bn(f,s)!==-1}we();Ee();qe();function Bs(f){return[...f].map(s=>s.charCodeAt(0))}function Ds(f,s=0){let u=Number.parseInt(new _t(6).get(f,148).replace(/\0.*$/,"").trim(),8);if(Number.isNaN(u))return!1;let r=8*32;for(let w=s;w<s+148;w++)r+=f[w];for(let w=s+156;w<s+512;w++)r+=f[w];return u===r}var Cs={get:(f,s)=>f[s+3]&127|f[s+2]<<7|f[s+1]<<14|f[s]<<21,len:4};we();Ee();qe();var Ms=["jpg","png","apng","gif","webp","flif","xcf","cr2","cr3","orf","arw","dng","nef","rw2","raf","tif","bmp","icns","jxr","psd","indd","zip","tar","rar","gz","bz2","7z","dmg","mp4","mid","mkv","webm","mov","avi","mpg","mp2","mp3","m4a","oga","ogg","ogv","opus","flac","wav","spx","amr","pdf","epub","elf","macho","exe","swf","rtf","wasm","woff","woff2","eot","ttf","otf","ico","flv","ps","xz","sqlite","nes","crx","xpi","cab","deb","ar","rpm","Z","lz","cfb","mxf","mts","blend","bpg","docx","pptx","xlsx","3gp","3g2","j2c","jp2","jpm","jpx","mj2","aif","qcp","odt","ods","odp","xml","mobi","heic","cur","ktx","ape","wv","dcm","ics","glb","pcap","dsf","lnk","alias","voc","ac3","m4v","m4p","m4b","f4v","f4p","f4b","f4a","mie","asf","ogm","ogx","mpc","arrow","shp","aac","mp1","it","s3m","xm","ai","skp","avif","eps","lzh","pgp","asar","stl","chm","3mf","zst","jxl","vcf","jls","pst","dwg","parquet","class","arj","cpio","ace","avro","icc","fbx","vsdx","vtt","apk"],Ns=["image/jpeg","image/png","image/gif","image/webp","image/flif","image/x-xcf","image/x-canon-cr2","image/x-canon-cr3","image/tiff","image/bmp","image/vnd.ms-photo","image/vnd.adobe.photoshop","application/x-indesign","application/epub+zip","application/x-xpinstall","application/vnd.oasis.opendocument.text","application/vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.presentation","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/zip","application/x-tar","application/x-rar-compressed","application/gzip","application/x-bzip2","application/x-7z-compressed","application/x-apple-diskimage","application/x-apache-arrow","video/mp4","audio/midi","video/x-matroska","video/webm","video/quicktime","video/vnd.avi","audio/wav","audio/qcelp","audio/x-ms-asf","video/x-ms-asf","application/vnd.ms-asf","video/mpeg","video/3gpp","audio/mpeg","audio/mp4","video/ogg","audio/ogg","audio/ogg; codecs=opus","application/ogg","audio/x-flac","audio/ape","audio/wavpack","audio/amr","application/pdf","application/x-elf","application/x-mach-binary","application/x-msdownload","application/x-shockwave-flash","application/rtf","application/wasm","font/woff","font/woff2","application/vnd.ms-fontobject","font/ttf","font/otf","image/x-icon","video/x-flv","application/postscript","application/eps","application/x-xz","application/x-sqlite3","application/x-nintendo-nes-rom","application/x-google-chrome-extension","application/vnd.ms-cab-compressed","application/x-deb","application/x-unix-archive","application/x-rpm","application/x-compress","application/x-lzip","application/x-cfb","application/x-mie","application/mxf","video/mp2t","application/x-blender","image/bpg","image/j2c","image/jp2","image/jpx","image/jpm","image/mj2","audio/aiff","application/xml","application/x-mobipocket-ebook","image/heif","image/heif-sequence","image/heic","image/heic-sequence","image/icns","image/ktx","application/dicom","audio/x-musepack","text/calendar","text/vcard","text/vtt","model/gltf-binary","application/vnd.tcpdump.pcap","audio/x-dsf","application/x.ms.shortcut","application/x.apple.alias","audio/x-voc","audio/vnd.dolby.dd-raw","audio/x-m4a","image/apng","image/x-olympus-orf","image/x-sony-arw","image/x-adobe-dng","image/x-nikon-nef","image/x-panasonic-rw2","image/x-fujifilm-raf","video/x-m4v","video/3gpp2","application/x-esri-shape","audio/aac","audio/x-it","audio/x-s3m","audio/x-xm","video/MP1S","video/MP2P","application/vnd.sketchup.skp","image/avif","application/x-lzh-compressed","application/pgp-encrypted","application/x-asar","model/stl","application/vnd.ms-htmlhelp","model/3mf","image/jxl","application/zstd","image/jls","application/vnd.ms-outlook","image/vnd.dwg","application/x-parquet","application/java-vm","application/x-arj","application/x-cpio","application/x-ace-compressed","application/avro","application/vnd.iccprofile","application/x.autodesk.fbx","application/vnd.visio","application/vnd.android.package-archive"];var Us=4100;async function js(f){return new wn().fromBuffer(f)}function wt(f,s,u){u={offset:0,...u};for(let[r,w]of s.entries())if(u.mask){if(w!==(u.mask[r]&f[r+u.offset]))return!1}else if(w!==f[r+u.offset])return!1;return!0}var wn=class{constructor(s){this.detectors=s?.customDetectors,this.tokenizerOptions={abortSignal:s?.signal},this.fromTokenizer=this.fromTokenizer.bind(this),this.fromBuffer=this.fromBuffer.bind(this),this.parse=this.parse.bind(this)}async fromTokenizer(s){let u=s.position;for(let r of this.detectors||[]){let w=await r(s);if(w)return w;if(u!==s.position)return}return this.parse(s)}async fromBuffer(s){if(!(s instanceof Uint8Array||s instanceof ArrayBuffer))throw new TypeError(`Expected the \`input\` argument to be of type \`Uint8Array\` or \`ArrayBuffer\`, got \`${typeof s}\``);let u=s instanceof Uint8Array?s:new Uint8Array(s);if(u?.length>1)return this.fromTokenizer(Ls(u,this.tokenizerOptions))}async fromBlob(s){return this.fromStream(s.stream())}async fromStream(s){let u=await Ps(s,this.tokenizerOptions);try{return await this.fromTokenizer(u)}finally{await u.close()}}async toDetectionStream(s,u){let{sampleSize:r=Us}=u,w,F,y=s.getReader({mode:"byob"});try{let{value:ae,done:ne}=await y.read(new Uint8Array(r));if(F=ae,!ne&&ae)try{w=await this.fromBuffer(ae.slice(0,r))}catch(ee){if(!(ee instanceof Ge))throw ee;w=void 0}F=ae}finally{y.releaseLock()}let D=new TransformStream({async start(ae){ae.enqueue(F)},transform(ae,ne){ne.enqueue(ae)}}),Y=s.pipeThrough(D);return Y.fileType=w,Y}check(s,u){return wt(this.buffer,s,u)}checkString(s,u){return this.check(Bs(s),u)}async parse(s){if(this.buffer=new Uint8Array(Us),s.fileInfo.size===void 0&&(s.fileInfo.size=Number.MAX_SAFE_INTEGER),this.tokenizer=s,await s.peekBuffer(this.buffer,{length:12,mayBeLess:!0}),this.check([66,77]))return{ext:"bmp",mime:"image/bmp"};if(this.check([11,119]))return{ext:"ac3",mime:"audio/vnd.dolby.dd-raw"};if(this.check([120,1]))return{ext:"dmg",mime:"application/x-apple-diskimage"};if(this.check([77,90]))return{ext:"exe",mime:"application/x-msdownload"};if(this.check([37,33]))return await s.peekBuffer(this.buffer,{length:24,mayBeLess:!0}),this.checkString("PS-Adobe-",{offset:2})&&this.checkString(" EPSF-",{offset:14})?{ext:"eps",mime:"application/eps"}:{ext:"ps",mime:"application/postscript"};if(this.check([31,160])||this.check([31,157]))return{ext:"Z",mime:"application/x-compress"};if(this.check([199,113]))return{ext:"cpio",mime:"application/x-cpio"};if(this.check([96,234]))return{ext:"arj",mime:"application/x-arj"};if(this.check([239,187,191]))return this.tokenizer.ignore(3),this.parse(s);if(this.check([71,73,70]))return{ext:"gif",mime:"image/gif"};if(this.check([73,73,188]))return{ext:"jxr",mime:"image/vnd.ms-photo"};if(this.check([31,139,8]))return{ext:"gz",mime:"application/gzip"};if(this.check([66,90,104]))return{ext:"bz2",mime:"application/x-bzip2"};if(this.checkString("ID3")){await s.ignore(6);let u=await s.readToken(Cs);return s.position+u>s.fileInfo.size?{ext:"mp3",mime:"audio/mpeg"}:(await s.ignore(u),this.fromTokenizer(s))}if(this.checkString("MP+"))return{ext:"mpc",mime:"audio/x-musepack"};if((this.buffer[0]===67||this.buffer[0]===70)&&this.check([87,83],{offset:1}))return{ext:"swf",mime:"application/x-shockwave-flash"};if(this.check([255,216,255]))return this.check([247],{offset:3})?{ext:"jls",mime:"image/jls"}:{ext:"jpg",mime:"image/jpeg"};if(this.check([79,98,106,1]))return{ext:"avro",mime:"application/avro"};if(this.checkString("FLIF"))return{ext:"flif",mime:"image/flif"};if(this.checkString("8BPS"))return{ext:"psd",mime:"image/vnd.adobe.photoshop"};if(this.checkString("WEBP",{offset:8}))return{ext:"webp",mime:"image/webp"};if(this.checkString("MPCK"))return{ext:"mpc",mime:"audio/x-musepack"};if(this.checkString("FORM"))return{ext:"aif",mime:"audio/aiff"};if(this.checkString("icns",{offset:0}))return{ext:"icns",mime:"image/icns"};if(this.check([80,75,3,4])){try{for(;s.position+30<s.fileInfo.size;){await s.readBuffer(this.buffer,{length:30});let u=new DataView(this.buffer.buffer),r={compressedSize:u.getUint32(18,!0),uncompressedSize:u.getUint32(22,!0),filenameLength:u.getUint16(26,!0),extraFieldLength:u.getUint16(28,!0)};if(r.filename=await s.readToken(new _t(r.filenameLength,"utf-8")),await s.ignore(r.extraFieldLength),/classes\d*\.dex/.test(r.filename))return{ext:"apk",mime:"application/vnd.android.package-archive"};if(r.filename==="META-INF/mozilla.rsa")return{ext:"xpi",mime:"application/x-xpinstall"};if(r.filename.endsWith(".rels")||r.filename.endsWith(".xml"))switch(r.filename.split("/")[0]){case"_rels":break;case"word":return{ext:"docx",mime:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"};case"ppt":return{ext:"pptx",mime:"application/vnd.openxmlformats-officedocument.presentationml.presentation"};case"xl":return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};case"visio":return{ext:"vsdx",mime:"application/vnd.visio"};default:break}if(r.filename.startsWith("xl/"))return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};if(r.filename.startsWith("3D/")&&r.filename.endsWith(".model"))return{ext:"3mf",mime:"model/3mf"};if(r.filename==="mimetype"&&r.compressedSize===r.uncompressedSize){let w=await s.readToken(new _t(r.compressedSize,"utf-8"));switch(w=w.trim(),w){case"application/epub+zip":return{ext:"epub",mime:"application/epub+zip"};case"application/vnd.oasis.opendocument.text":return{ext:"odt",mime:"application/vnd.oasis.opendocument.text"};case"application/vnd.oasis.opendocument.spreadsheet":return{ext:"ods",mime:"application/vnd.oasis.opendocument.spreadsheet"};case"application/vnd.oasis.opendocument.presentation":return{ext:"odp",mime:"application/vnd.oasis.opendocument.presentation"};default:}}if(r.compressedSize===0){let w=-1;for(;w<0&&s.position<s.fileInfo.size;)await s.peekBuffer(this.buffer,{mayBeLess:!0}),w=bn(this.buffer,new Uint8Array([80,75,3,4])),await s.ignore(w>=0?w:this.buffer.length)}else await s.ignore(r.compressedSize)}}catch(u){if(!(u instanceof Ge))throw u}return{ext:"zip",mime:"application/zip"}}if(this.checkString("OggS")){await s.ignore(28);let u=new Uint8Array(8);return await s.readBuffer(u),wt(u,[79,112,117,115,72,101,97,100])?{ext:"opus",mime:"audio/ogg; codecs=opus"}:wt(u,[128,116,104,101,111,114,97])?{ext:"ogv",mime:"video/ogg"}:wt(u,[1,118,105,100,101,111,0])?{ext:"ogm",mime:"video/ogg"}:wt(u,[127,70,76,65,67])?{ext:"oga",mime:"audio/ogg"}:wt(u,[83,112,101,101,120,32,32])?{ext:"spx",mime:"audio/ogg"}:wt(u,[1,118,111,114,98,105,115])?{ext:"ogg",mime:"audio/ogg"}:{ext:"ogx",mime:"application/ogg"}}if(this.check([80,75])&&(this.buffer[2]===3||this.buffer[2]===5||this.buffer[2]===7)&&(this.buffer[3]===4||this.buffer[3]===6||this.buffer[3]===8))return{ext:"zip",mime:"application/zip"};if(this.checkString("ftyp",{offset:4})&&this.buffer[8]&96){let u=new _t(4,"latin1").get(this.buffer,8).replace("\0"," ").trim();switch(u){case"avif":case"avis":return{ext:"avif",mime:"image/avif"};case"mif1":return{ext:"heic",mime:"image/heif"};case"msf1":return{ext:"heic",mime:"image/heif-sequence"};case"heic":case"heix":return{ext:"heic",mime:"image/heic"};case"hevc":case"hevx":return{ext:"heic",mime:"image/heic-sequence"};case"qt":return{ext:"mov",mime:"video/quicktime"};case"M4V":case"M4VH":case"M4VP":return{ext:"m4v",mime:"video/x-m4v"};case"M4P":return{ext:"m4p",mime:"video/mp4"};case"M4B":return{ext:"m4b",mime:"audio/mp4"};case"M4A":return{ext:"m4a",mime:"audio/x-m4a"};case"F4V":return{ext:"f4v",mime:"video/mp4"};case"F4P":return{ext:"f4p",mime:"video/mp4"};case"F4A":return{ext:"f4a",mime:"audio/mp4"};case"F4B":return{ext:"f4b",mime:"audio/mp4"};case"crx":return{ext:"cr3",mime:"image/x-canon-cr3"};default:return u.startsWith("3g")?u.startsWith("3g2")?{ext:"3g2",mime:"video/3gpp2"}:{ext:"3gp",mime:"video/3gpp"}:{ext:"mp4",mime:"video/mp4"}}}if(this.checkString("MThd"))return{ext:"mid",mime:"audio/midi"};if(this.checkString("wOFF")&&(this.check([0,1,0,0],{offset:4})||this.checkString("OTTO",{offset:4})))return{ext:"woff",mime:"font/woff"};if(this.checkString("wOF2")&&(this.check([0,1,0,0],{offset:4})||this.checkString("OTTO",{offset:4})))return{ext:"woff2",mime:"font/woff2"};if(this.check([212,195,178,161])||this.check([161,178,195,212]))return{ext:"pcap",mime:"application/vnd.tcpdump.pcap"};if(this.checkString("DSD "))return{ext:"dsf",mime:"audio/x-dsf"};if(this.checkString("LZIP"))return{ext:"lz",mime:"application/x-lzip"};if(this.checkString("fLaC"))return{ext:"flac",mime:"audio/x-flac"};if(this.check([66,80,71,251]))return{ext:"bpg",mime:"image/bpg"};if(this.checkString("wvpk"))return{ext:"wv",mime:"audio/wavpack"};if(this.checkString("%PDF")){try{await s.ignore(1350);let u=10*1024*1024,r=new Uint8Array(Math.min(u,s.fileInfo.size));if(await s.readBuffer(r,{mayBeLess:!0}),Rs(r,new TextEncoder().encode("AIPrivateData")))return{ext:"ai",mime:"application/postscript"}}catch(u){if(!(u instanceof Ge))throw u}return{ext:"pdf",mime:"application/pdf"}}if(this.check([0,97,115,109]))return{ext:"wasm",mime:"application/wasm"};if(this.check([73,73])){let u=await this.readTiffHeader(!1);if(u)return u}if(this.check([77,77])){let u=await this.readTiffHeader(!0);if(u)return u}if(this.checkString("MAC "))return{ext:"ape",mime:"audio/ape"};if(this.check([26,69,223,163])){async function u(){let D=await s.peekNumber(Ts),Y=128,ae=0;for(;!(D&Y)&&Y!==0;)++ae,Y>>=1;let ne=new Uint8Array(ae+1);return await s.readBuffer(ne),ne}async function r(){let D=await u(),Y=await u();Y[0]^=128>>Y.length-1;let ae=Math.min(6,Y.length),ne=new DataView(D.buffer),ee=new DataView(Y.buffer,Y.length-ae,ae);return{id:xn(ne),len:xn(ee)}}async function w(D){for(;D>0;){let Y=await r();if(Y.id===17026)return(await s.readToken(new _t(Y.len))).replaceAll(/\00.*$/g,"");await s.ignore(Y.len),--D}}let F=await r();switch(await w(F.len)){case"webm":return{ext:"webm",mime:"video/webm"};case"matroska":return{ext:"mkv",mime:"video/x-matroska"};default:return}}if(this.check([82,73,70,70])){if(this.check([65,86,73],{offset:8}))return{ext:"avi",mime:"video/vnd.avi"};if(this.check([87,65,86,69],{offset:8}))return{ext:"wav",mime:"audio/wav"};if(this.check([81,76,67,77],{offset:8}))return{ext:"qcp",mime:"audio/qcelp"}}if(this.checkString("SQLi"))return{ext:"sqlite",mime:"application/x-sqlite3"};if(this.check([78,69,83,26]))return{ext:"nes",mime:"application/x-nintendo-nes-rom"};if(this.checkString("Cr24"))return{ext:"crx",mime:"application/x-google-chrome-extension"};if(this.checkString("MSCF")||this.checkString("ISc("))return{ext:"cab",mime:"application/vnd.ms-cab-compressed"};if(this.check([237,171,238,219]))return{ext:"rpm",mime:"application/x-rpm"};if(this.check([197,208,211,198]))return{ext:"eps",mime:"application/eps"};if(this.check([40,181,47,253]))return{ext:"zst",mime:"application/zstd"};if(this.check([127,69,76,70]))return{ext:"elf",mime:"application/x-elf"};if(this.check([33,66,68,78]))return{ext:"pst",mime:"application/vnd.ms-outlook"};if(this.checkString("PAR1"))return{ext:"parquet",mime:"application/x-parquet"};if(this.check([207,250,237,254]))return{ext:"macho",mime:"application/x-mach-binary"};if(this.check([79,84,84,79,0]))return{ext:"otf",mime:"font/otf"};if(this.checkString("#!AMR"))return{ext:"amr",mime:"audio/amr"};if(this.checkString("{\\rtf"))return{ext:"rtf",mime:"application/rtf"};if(this.check([70,76,86,1]))return{ext:"flv",mime:"video/x-flv"};if(this.checkString("IMPM"))return{ext:"it",mime:"audio/x-it"};if(this.checkString("-lh0-",{offset:2})||this.checkString("-lh1-",{offset:2})||this.checkString("-lh2-",{offset:2})||this.checkString("-lh3-",{offset:2})||this.checkString("-lh4-",{offset:2})||this.checkString("-lh5-",{offset:2})||this.checkString("-lh6-",{offset:2})||this.checkString("-lh7-",{offset:2})||this.checkString("-lzs-",{offset:2})||this.checkString("-lz4-",{offset:2})||this.checkString("-lz5-",{offset:2})||this.checkString("-lhd-",{offset:2}))return{ext:"lzh",mime:"application/x-lzh-compressed"};if(this.check([0,0,1,186])){if(this.check([33],{offset:4,mask:[241]}))return{ext:"mpg",mime:"video/MP1S"};if(this.check([68],{offset:4,mask:[196]}))return{ext:"mpg",mime:"video/MP2P"}}if(this.checkString("ITSF"))return{ext:"chm",mime:"application/vnd.ms-htmlhelp"};if(this.check([202,254,186,190]))return{ext:"class",mime:"application/java-vm"};if(this.check([253,55,122,88,90,0]))return{ext:"xz",mime:"application/x-xz"};if(this.checkString("<?xml "))return{ext:"xml",mime:"application/xml"};if(this.check([55,122,188,175,39,28]))return{ext:"7z",mime:"application/x-7z-compressed"};if(this.check([82,97,114,33,26,7])&&(this.buffer[6]===0||this.buffer[6]===1))return{ext:"rar",mime:"application/x-rar-compressed"};if(this.checkString("solid "))return{ext:"stl",mime:"model/stl"};if(this.checkString("AC")){let u=new _t(4,"latin1").get(this.buffer,2);if(u.match("^d*")&&u>=1e3&&u<=1050)return{ext:"dwg",mime:"image/vnd.dwg"}}if(this.checkString("070707"))return{ext:"cpio",mime:"application/x-cpio"};if(this.checkString("BLENDER"))return{ext:"blend",mime:"application/x-blender"};if(this.checkString("!<arch>"))return await s.ignore(8),await s.readToken(new _t(13,"ascii"))==="debian-binary"?{ext:"deb",mime:"application/x-deb"}:{ext:"ar",mime:"application/x-unix-archive"};if(this.checkString("WEBVTT")&&[`
`,"\r","	"," ","\0"].some(u=>this.checkString(u,{offset:6})))return{ext:"vtt",mime:"text/vtt"};if(this.check([137,80,78,71,13,10,26,10])){await s.ignore(8);async function u(){return{length:await s.readToken(Fs),type:await s.readToken(new _t(4,"latin1"))}}do{let r=await u();if(r.length<0)return;switch(r.type){case"IDAT":return{ext:"png",mime:"image/png"};case"acTL":return{ext:"apng",mime:"image/apng"};default:await s.ignore(r.length+4)}}while(s.position+8<s.fileInfo.size);return{ext:"png",mime:"image/png"}}if(this.check([65,82,82,79,87,49,0,0]))return{ext:"arrow",mime:"application/x-apache-arrow"};if(this.check([103,108,84,70,2,0,0,0]))return{ext:"glb",mime:"model/gltf-binary"};if(this.check([102,114,101,101],{offset:4})||this.check([109,100,97,116],{offset:4})||this.check([109,111,111,118],{offset:4})||this.check([119,105,100,101],{offset:4}))return{ext:"mov",mime:"video/quicktime"};if(this.check([73,73,82,79,8,0,0,0,24]))return{ext:"orf",mime:"image/x-olympus-orf"};if(this.checkString("gimp xcf "))return{ext:"xcf",mime:"image/x-xcf"};if(this.check([73,73,85,0,24,0,0,0,136,231,116,216]))return{ext:"rw2",mime:"image/x-panasonic-rw2"};if(this.check([48,38,178,117,142,102,207,17,166,217])){async function u(){let r=new Uint8Array(16);return await s.readBuffer(r),{id:r,size:Number(await s.readToken(Os))}}for(await s.ignore(30);s.position+24<s.fileInfo.size;){let r=await u(),w=r.size-24;if(wt(r.id,[145,7,220,183,183,169,207,17,142,230,0,192,12,32,83,101])){let F=new Uint8Array(16);if(w-=await s.readBuffer(F),wt(F,[64,158,105,248,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"audio/x-ms-asf"};if(wt(F,[192,239,25,188,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"video/x-ms-asf"};break}await s.ignore(w)}return{ext:"asf",mime:"application/vnd.ms-asf"}}if(this.check([171,75,84,88,32,49,49,187,13,10,26,10]))return{ext:"ktx",mime:"image/ktx"};if((this.check([126,16,4])||this.check([126,24,4]))&&this.check([48,77,73,69],{offset:4}))return{ext:"mie",mime:"application/x-mie"};if(this.check([39,10,0,0,0,0,0,0,0,0,0,0],{offset:2}))return{ext:"shp",mime:"application/x-esri-shape"};if(this.check([255,79,255,81]))return{ext:"j2c",mime:"image/j2c"};if(this.check([0,0,0,12,106,80,32,32,13,10,135,10]))switch(await s.ignore(20),await s.readToken(new _t(4,"ascii"))){case"jp2 ":return{ext:"jp2",mime:"image/jp2"};case"jpx ":return{ext:"jpx",mime:"image/jpx"};case"jpm ":return{ext:"jpm",mime:"image/jpm"};case"mjp2":return{ext:"mj2",mime:"image/mj2"};default:return}if(this.check([255,10])||this.check([0,0,0,12,74,88,76,32,13,10,135,10]))return{ext:"jxl",mime:"image/jxl"};if(this.check([254,255]))return this.check([0,60,0,63,0,120,0,109,0,108],{offset:2})?{ext:"xml",mime:"application/xml"}:void 0;if(this.check([0,0,1,186])||this.check([0,0,1,179]))return{ext:"mpg",mime:"video/mpeg"};if(this.check([0,1,0,0,0]))return{ext:"ttf",mime:"font/ttf"};if(this.check([0,0,1,0]))return{ext:"ico",mime:"image/x-icon"};if(this.check([0,0,2,0]))return{ext:"cur",mime:"image/x-icon"};if(this.check([208,207,17,224,161,177,26,225]))return{ext:"cfb",mime:"application/x-cfb"};if(await s.peekBuffer(this.buffer,{length:Math.min(256,s.fileInfo.size),mayBeLess:!0}),this.check([97,99,115,112],{offset:36}))return{ext:"icc",mime:"application/vnd.iccprofile"};if(this.checkString("**ACE",{offset:7})&&this.checkString("**",{offset:12}))return{ext:"ace",mime:"application/x-ace-compressed"};if(this.checkString("BEGIN:")){if(this.checkString("VCARD",{offset:6}))return{ext:"vcf",mime:"text/vcard"};if(this.checkString("VCALENDAR",{offset:6}))return{ext:"ics",mime:"text/calendar"}}if(this.checkString("FUJIFILMCCD-RAW"))return{ext:"raf",mime:"image/x-fujifilm-raf"};if(this.checkString("Extended Module:"))return{ext:"xm",mime:"audio/x-xm"};if(this.checkString("Creative Voice File"))return{ext:"voc",mime:"audio/x-voc"};if(this.check([4,0,0,0])&&this.buffer.length>=16){let u=new DataView(this.buffer.buffer).getUint32(12,!0);if(u>12&&this.buffer.length>=u+16)try{let r=new TextDecoder().decode(this.buffer.slice(16,u+16));if(JSON.parse(r).files)return{ext:"asar",mime:"application/x-asar"}}catch{}}if(this.check([6,14,43,52,2,5,1,1,13,1,2,1,1,2]))return{ext:"mxf",mime:"application/mxf"};if(this.checkString("SCRM",{offset:44}))return{ext:"s3m",mime:"audio/x-s3m"};if(this.check([71])&&this.check([71],{offset:188}))return{ext:"mts",mime:"video/mp2t"};if(this.check([71],{offset:4})&&this.check([71],{offset:196}))return{ext:"mts",mime:"video/mp2t"};if(this.check([66,79,79,75,77,79,66,73],{offset:60}))return{ext:"mobi",mime:"application/x-mobipocket-ebook"};if(this.check([68,73,67,77],{offset:128}))return{ext:"dcm",mime:"application/dicom"};if(this.check([76,0,0,0,1,20,2,0,0,0,0,0,192,0,0,0,0,0,0,70]))return{ext:"lnk",mime:"application/x.ms.shortcut"};if(this.check([98,111,111,107,0,0,0,0,109,97,114,107,0,0,0,0]))return{ext:"alias",mime:"application/x.apple.alias"};if(this.checkString("Kaydara FBX Binary  \0"))return{ext:"fbx",mime:"application/x.autodesk.fbx"};if(this.check([76,80],{offset:34})&&(this.check([0,0,1],{offset:8})||this.check([1,0,2],{offset:8})||this.check([2,0,2],{offset:8})))return{ext:"eot",mime:"application/vnd.ms-fontobject"};if(this.check([6,6,237,245,216,29,70,229,189,49,239,231,254,116,183,29]))return{ext:"indd",mime:"application/x-indesign"};if(await s.peekBuffer(this.buffer,{length:Math.min(512,s.fileInfo.size),mayBeLess:!0}),Ds(this.buffer))return{ext:"tar",mime:"application/x-tar"};if(this.check([255,254]))return this.check([60,0,63,0,120,0,109,0,108,0],{offset:2})?{ext:"xml",mime:"application/xml"}:this.check([255,14,83,0,107,0,101,0,116,0,99,0,104,0,85,0,112,0,32,0,77,0,111,0,100,0,101,0,108,0],{offset:2})?{ext:"skp",mime:"application/vnd.sketchup.skp"}:void 0;if(this.checkString("-----BEGIN PGP MESSAGE-----"))return{ext:"pgp",mime:"application/pgp-encrypted"};if(this.buffer.length>=2&&this.check([255,224],{offset:0,mask:[255,224]})){if(this.check([16],{offset:1,mask:[22]}))return this.check([8],{offset:1,mask:[8]})?{ext:"aac",mime:"audio/aac"}:{ext:"aac",mime:"audio/aac"};if(this.check([2],{offset:1,mask:[6]}))return{ext:"mp3",mime:"audio/mpeg"};if(this.check([4],{offset:1,mask:[6]}))return{ext:"mp2",mime:"audio/mpeg"};if(this.check([6],{offset:1,mask:[6]}))return{ext:"mp1",mime:"audio/mpeg"}}}async readTiffTag(s){let u=await this.tokenizer.readToken(s?Nr:Mr);switch(this.tokenizer.ignore(10),u){case 50341:return{ext:"arw",mime:"image/x-sony-arw"};case 50706:return{ext:"dng",mime:"image/x-adobe-dng"};default:}}async readTiffIFD(s){let u=await this.tokenizer.readToken(s?Nr:Mr);for(let r=0;r<u;++r){let w=await this.readTiffTag(s);if(w)return w}}async readTiffHeader(s){let u=(s?Nr:Mr).get(this.buffer,2),r=(s?Is:ks).get(this.buffer,4);if(u===42){if(r>=6){if(this.checkString("CR",{offset:8}))return{ext:"cr2",mime:"image/x-canon-cr2"};if(r>=8&&(this.check([28,0,254,0],{offset:8})||this.check([31,0,11,0],{offset:8})))return{ext:"nef",mime:"image/x-nikon-nef"}}return await this.tokenizer.ignore(r),await this.readTiffIFD(s)??{ext:"tif",mime:"image/tiff"}}if(u===43)return{ext:"tif",mime:"image/tiff"}}},vm=new Set(Ms),Sm=new Set(Ns);we();Ee();qe();var Kt="\u2016";var Ws="SELECT '__OMITTED__'";var Jt=()=>new Promise(f=>setTimeout(f,0)),qn=f=>new Promise(s=>setTimeout(s,f));function Ae(f,...s){return f.reduce((u,r,w)=>{let F=s[w]??"",y=(f[w+1]??"").trim(),D=r.trim();return D.endsWith('"')&&y.startsWith('"')?F=String(F).replaceAll('"','""'):D.endsWith("'")&&y.startsWith("'")&&(F=String(F).replaceAll("'","''")),u+r+F},"")}async function hr(f){return await js(f)}async function En(f){let s=await f;return s.objectValues=await Promise.all(s.objectValues.map(async u=>{for(let r in u){let w=u[r];if(w instanceof Uint8Array){let F=await hr(w);u[`${r}__mime__`]=F}}return u})),s}function S_(f){return/JSON/i.test(f)?"JSON":/DATE/i.test(f)?"DATE":/(BOOLEAN|^BIT$)/i.test(f)?"BOOLEAN":/INT/i.test(f)?"INTEGER":/(CHAR|CLOB|TEXT)/i.test(f)?"TEXT":/BLOB/i.test(f)?"BLOB":/(REAL|FLOA|DOUB)/i.test(f)?"REAL":/(NUMERIC|DECIMAL)/i.test(f)?"NUMERIC":"?"}async function zs(f,{type:s,sql:u,...r},w){let F=r.tbl_name,y;y=Ae`SELECT tableInfo.*, foreignKeyList."table" AS fkTable, foreignKeyList."to" AS fkName, CASE WHEN foreignKeyList."from" IS NOT NULL THEN 1 ELSE 0 END AS fk FROM pragma_table_xinfo('${F}') AS tableInfo LEFT JOIN (SELECT * FROM pragma_foreign_key_list('${F}')) AS foreignKeyList ON foreignKeyList."from"=tableInfo.name GROUP BY tableInfo.name ORDER BY tableInfo.cid`;let D,Y;try{D=await f.execAsObject(y,w)}catch(de){Y=de,D={objectValues:[],columns:[]}}let ae=Math.max(...D.objectValues.map(({pk:de})=>de).filter(de=>!!de)),ne=D.objectValues.map(({cid:de,notnull:ce,name:xe,type:Te,pk:Re,fk:Ze,fkTable:Me,fkName:Ke,dflt_value:et,hidden:je})=>({cid:de,notnull:ce,name:xe,type:Te,typeAffinity:S_(Te),pk:Re,numPk:ae,fk:Ze,fkTable:Me,fkName:Ke,dflt_value:et,hidden:je}));ne.unshift({cid:-1,notnull:0,name:"ROWID",type:"ROWID",typeAffinity:"ROWID",pk:0,numPk:0,fk:0,fkTable:0,fkName:0,dflt_value:void 0,hidden:0});let ee=s==="table"&&!/WITHOUT\s+ROWID/i.test(u)||s==="index";return{...r,error:Y,sql:u,hasRowId:ee,uiName:r.name,tblName:F,rootPage:r.rootpage,type:s,sub:s,columnsMeta:ne,columnsMetaByName:Object.fromEntries(ne.map(de=>[de.name,de]))}}async function A_(f,s,u,r){let w=u.objectValues.filter(ae=>ae.type==="table"),F=u.objectValues.filter(ae=>ae.type==="view"),[y,D]=await Promise.all([Promise.all(w.map(ae=>zs(f,ae,r))),Promise.all(F.map(ae=>zs(f,ae,r)))]);return[{filename:decodeURIComponent(s),type:"table",tables:y,subRows:y},{filename:decodeURIComponent(s),type:"view",tables:D,subRows:D}]}async function Vs(f,s,u){let r=await f.execAsObject("SELECT * FROM main.sqlite_schema ORDER BY type, tbl_name",u);return A_(f,s,r,u)}var Wr=f=>f.columnsMeta.filter(s=>s.pk).sort((s,u)=>s.pk-u.pk).map(s=>s.name),T_=({textCutoff:f=1024,blobCutoff:s=1024}={})=>u=>Ae` CASE WHEN typeof("${u.name}") = 'blob' THEN SUBSTR("${u.name}", 1, ${f}) WHEN typeof("${u.name}") = 'text' THEN SUBSTR("${u.name}", 1, ${s}) ELSE "${u.name}" END AS "${u.name}", CASE WHEN typeof("${u.name}") IN ('blob','text') THEN LENGTH("${u.name}") ELSE NULL END AS "${u.name+"__size__"}"`;function k_(f){let s=Wr(f);return f.hasRowId?Ae`ROWID AS ROWID`:s.length?`${s.map(r=>Ae`"${r}"`).join(Ae` || '${Kt}' || `)} AS ROWID`:void 0}function Ut(f,{simplified:s=!1,textCutoff:u=1024,blobCutoff:r=1024,idsOnly:w=!1}={}){let F=w?[]:s?["*"]:f.columnsMeta.filter(y=>y.name!=="ROWID").map(T_({textCutoff:u,blobCutoff:r}));switch(f.type){case"index":case"table":{let y=[k_(f),...F].filter(D=>!!D);return Ae`SELECT ${y.join(", ")} FROM "${f.tblName}"`}default:{let y=["SELECT ROW_NUMBER() OVER () AS ROWID",...F].join(", ");return Ae`SELECT * FROM (${y} FROM "${f.tblName}")`}}}function jt(f,s,u,r,w=!1,{simplified:F=!1,noSort:y=!1}={}){let D=[],Y=[],ae=F?ee=>Ae`'${ee}'`:ee=>(Y.push(ee),"?"),ne=Object.entries(s).filter(([,{search:ee,exact:de,invert:ce,nonNullish:xe}])=>!!ee||de||ce||xe);if(ne.length>0||u){let ee=[];if(ne.length>0){let de=ne.map(([ce,{search:xe,exact:Te,invert:Re,nonNullish:Ze}])=>{let Me=xe?.replaceAll("%","\\%").replaceAll("_","\\_"),Ke=xe!==Me,et=Re&&!xe,je=Re?"NOT ":"",ht=et?"":"NOT ",pt=Me==="NULL"?Ae`IS ${je}NULL`:Me==="''"?Ae`IS ${je}''`:Me&&Ae`${je}LIKE ${ae(Te?Me:`%${Me}%`)}${Ke?" ESCAPE '\\'":""}`,Wt=pt&&Ae`"${ce}" ${pt}`,yr=Ze?Ae`("${ce}" IS ${ht}NULL ${et?"OR":"AND"} "${ce}" IS ${ht}'')`:null;return[Wt,yr].filter(xr=>!!xr).join(" AND ")}).filter(ce=>!!ce);de.length>0&&ee.push(de.join(" AND "))}if(u&&r){let de=u.replaceAll("%","\\%").replaceAll("_","\\_"),ce=u!==de,xe=r.map(Te=>Ae`"${Te.name}" LIKE ${ae(`%${de}%`)}${ce?" ESCAPE '\\'":""}`);ee.push(Ae`(${xe.join(" OR ")})`)}ee.length>0&&D.push(Ae`WHERE ${ee.join(" AND ")}`)}return y||(f&&f.length>0?D.push(Ae`ORDER BY ${f.map(ee=>Ae`"${ee.id}" ${ee.desc?"DESC":"ASC"}`).join(", ")}`):w&&D.push(Ae`ORDER BY ROWID`)),[D.join(" "),Y]}function $s(f,s){return f.map((u,r)=>Ae`"${u}" = '${s[r]}'`).join(" AND ")}function vn(f,s){if(f.hasRowId||f.type==="view")return Ae`WHERE ROWID = ${s}`;{let u=String(s).split(Kt),r=Wr(f);return Ae`WHERE (${$s(r,u)})`}}function Hs(f){if(f.hasRowId)return Ae`RETURNING ROWID`;{let s=Wr(f);return Ae`RETURNING ${s.map(u=>Ae`"${u}"`).join(", ")}`}}function gr(f,s){if(!s.length)return"";if(f.hasRowId||f.type==="view")return s.length===1?Ae`WHERE ROWID = ${s[0]}`:Ae`WHERE ROWID IN (${s.join(", ")})`;{let u=s.map(w=>String(w).split(Kt)),r=Wr(f);return Ae`WHERE ${u.map(w=>`(${$s(r,w)})`).join(" OR ")}`}}var zr=class{execAsObject(s,u){return En(this.execAsObjectImpl(s,[],u))}execAsObjectWithParams(s,u,r){return En(this.execAsObjectImpl(s,u,r))}first(s,u){return this.firstWithParams(s,[],u)}run(s,u){return this.runWithParams(s,[],u)}};var I_=(f,s)=>{throw Error(f,s)},F_;async function Qs(f){return F_??=vs({locateFile:s=>f[s]??I_(`Could not locate ${s}`)})}var Vr=class{static async fromStream(s,u,r,{mappings:w={}}={}){let F=encodeURIComponent(s),y=await Qs(this.mappings||=w);if(0)try{}catch(Y){}let D=[];return await u.pipeTo(new WritableStream({write(Y){D.push(Y)}})),this.createMem2Db(y,s,xs(D),r)}static async fromBuffer(s,u,r,{maxFileSize:w=200*2**20,mappings:F={}}={}){let y=encodeURIComponent(s),D=await Qs(this.mappings||=F);if(0)try{}catch(Y){}return this.createMem2Db(D,s,u,r,{maxFileSize:w})}static{this.walMergePragmas=["PRAGMA locking_mode = EXCLUSIVE;","PRAGMA journal_mode = WAL;","PRAGMA wal_checkpoint(FULL);","PRAGMA journal_mode = OFF;"]}static createOpfsDb(s,u,r=!1){if(r){let y=new s.capi.sqlite3_vfs(s.capi.sqlite3_vfs_find("opfs")),D=s.oo1.DB.dbCtorHelper;D.setVfsPostOpenCallback(y.pointer,(Y,ae)=>{ae.capi.sqlite3_busy_timeout(Y,1e4),ae.capi.sqlite3_exec(Y,[...this.walMergePragmas],0,0,0)}),new s.oo1.OpfsDb(encodeURIComponent(u),"c").close(),D.setVfsPostOpenCallback(y.pointer,(Y,ae)=>{ae.capi.sqlite3_busy_timeout(Y,1e4),ae.capi.sqlite3_exec(Y,["PRAGMA journal_mode = DELETE;","PRAGMA cache_size = -16384;"],0,0,0)})}let w=new URL(`file://localhost/${u}`);Js&&w.searchParams.set("immutable","1");let F=new s.oo1.OpfsDb(w.href);return this.checkDb(F),new Hr(s,F)}static createMem2Db(s,u,r,w,{maxFileSize:F=200*2**20}={}){if(!s.capi.sqlite3_vfs_find("mem2")){let ae=s.capi.sqlite3_vfs_find(null),ne=ae?new s.capi.sqlite3_vfs(ae):null,ee=new s.capi.sqlite3_io_methods;ee.$iVersion=1;let de=new s.capi.sqlite3_vfs().addOnDispose(()=>{ee.dispose()});de.$iVersion=2,de.$szOsFile=s.capi.sqlite3_file.structInfo.sizeof,de.$mxPathname=1024,de.$zName=s.wasm.allocCString("mem2",!1),de.$xDlOpen=de.$xDlError=de.$xDlSym=de.$xDlClose=null,ne&&(de.$xRandomness=ne.$xRandomness,de.$xSleep=ne.$xSleep,ne.dispose());let ce=bs(s,ee);s.vfs.installVfs({io:{struct:ee,methods:ce.io},vfs:{struct:de,methods:ce.vfs}}),s.oo1.DB.dbCtorHelper.setVfsPostOpenCallback(de.pointer,(xe,Te)=>{Te.capi.sqlite3_busy_timeout(xe,1e4),Te.capi.sqlite3_exec(xe,[...this.walMergePragmas,"PRAGMA synchronous = OFF","PRAGMA auto_vacuum = NONE;","PRAGMA cache_size = -16384;"],0,0,0)})}let D=encodeURIComponent(u);Es(D,r,w,{maxFileSize:F});let Y=new s.oo1.DB({vfs:"mem2",filename:D});return this.checkDb(Y),new Hr(s,Y)}static checkDb(s){s.exec("PRAGMA foreign_keys = ON;"),s.exec("SELECT * FROM main.sqlite_schema LIMIT 0")}},Ks=(f,s)=>{if("stream"in s)return Vr.fromStream(f,s.stream,s.walData,s);if("data"in s)return Vr.fromBuffer(f,s.data,s.walData,s);throw Error(`Not implemented for: ${JSON.stringify(s,null,2)}`)},Xt=performance?.now?.bind(performance)??Date.now.bind(Date),$r=50,Js=!0,Hr=class extends zr{constructor(u,r){super();this.sqlite3=u;this.db=r}get type(){return"wasm"}get readOnly(){return Js}execAsObjectImpl(u,r,w){return O_(this.db,u,r,w)}first(u,r){return Gs(this.db,u,[],r)}firstWithParams(u,r,w){return Gs(this.db,u,r,w)}async runWithParams(u,r,w){let F=this.db,y=r.length?F.prepare(u).bind(r):F.prepare(u);try{await Jt(),w?.throwIfAborted();let D=Xt()+$r,Y=y.step();for(;Y;)Xt()>D&&(await Jt(),w?.throwIfAborted(),D=Xt()+$r),Y=y.step()}finally{y.finalize()}}async exportDb(){return this.sqlite3.capi.sqlite3_js_db_export(this.db.pointer,"main")}close(){this.db.close()}};async function O_(f,s,u,r){let w=[],F=u.length?f.prepare(s).bind(u):f.prepare(s),y=F.getColumnNames();try{await Jt(),r?.throwIfAborted();let D=Xt()+$r,Y=F.step();for(;Y;){Xt()>D&&(await Jt(),r?.throwIfAborted(),D=Xt()+$r);let ae=F.get({});for(let ne in ae){let ee=ae[ne];if(ee instanceof Uint8Array){let de=await hr(ee);ae[`${ne}__mime__`]=de,ae[ne]=pr(ee,[ee.buffer])}}w.push(ae),Y=F.step()}return{columns:y,objectValues:w}}finally{F.finalize()}}async function Gs(f,s,u,r){return await Jt(),r?.throwIfAborted(),f.selectArray(s,u.length?u:void 0)?.[0]}we();Ee();qe();we();Ee();qe();var Qr=class{#e=new Map;get size(){return this.#e.size}get(s){let u;return this.#e.has(s)||this.#e.set(s,u=Promise.withResolvers()),(u??this.#e.get(s)).promise}set(s,u){return this.#e.has(s)?this.#e.get(s).resolve?.(u):this.#e.set(s,{promise:Promise.resolve(u)}),this}has(s){return!0}hasPending(s){return this.#e.get(s)}delete(s){return this.#e.get(s)?.reject?.(),this.#e.delete(s)}clear(){for(let s of this.#e.values())s.reject?.();this.#e.clear()}forEach(s,u){this.#e.forEach((r,w)=>s.call(u,r.promise,w,this))}*entries(){for(let[s,u]of this.#e)yield[s,u.promise]}keys(){return this.#e.keys()}*values(){for(let s of this.#e.values())yield s.promise}*[Symbol.iterator](){for(let[s,u]of this.#e)yield[s,u.promise]}get[Symbol.toStringTag](){return"EventualMap"}};var L_=32766,Gr=class{constructor(s){this.createDbWrapper=s;this.dbs=new Qr}async importDb(s,u){let r=await this.createDbWrapper(s,u),w=new Sn(s,r);return this.dbs.set(s,w),mn(w)}async close(s){}[Symbol.dispose](){for(let s of this.dbs.values())s.then(u=>u.close())}},Sn=class{constructor(s,u){this.filename=s;this.#t=u}#e=new Map;#t;#f=new Map;#i=!1;#n=0;get type(){return this.#t.type}get readOnly(){return this.#t.readOnly}get journalMode(){let s=Ae`PRAGMA journal_mode`;return this.log(s),this.#t.first(s)}#s;#c=[];setLogger(s){if(this.#s=s,this.#c.length){for(let u of this.#c)this.#s.log(u).catch(console.warn);this.#c=[]}}log(s,u){if(u?.aborted)return;let r=s.trim()+";";this.#s?this.#s.log(r).catch(console.warn):this.#c.push(r)}getTableGroups(s){let u=this.#e.get(this.filename);return u||this.#e.set(this.filename,u=Vs(this.#t,this.filename)),u}async#r(s){let u=await this.getTableGroups(),r=["table","view","index","trigger"].indexOf(s.table),w=u[r].tables.find(F=>F.uiName===s.name);if(!w)throw Error(`Could not find schema for table: "${s.name}"`);return w}async close(s){if(this.#t?.close(),0)try{}catch{}}async getCount(s,{columnFilters:u={},globalFilter:r=""}={},w){let F=await this.#r(s),[y,D]=jt([],u,r,F.columnsMeta,F.hasRowId,{noSort:!0}),[Y]=jt([],u,r,F.columnsMeta,F.hasRowId,{noSort:!0,simplified:!0}),ae=Ae`SELECT COUNT(*) FROM "${s.name}" ${y}`,ne=Ae`SELECT COUNT(*) FROM "${s.name}" ${Y}`;this.log(ne,w);let ee;return ee=Number(await this.#t.firstWithParams(ae,D,w)),ee}async getPage(s,{offset:u=0,sorting:r=[],columnFilters:w={},globalFilter:F=""}={},y){await qn(50);let D=await this.#r(s),[Y,ae]=jt(r,w,F,D.columnsMeta,D.hasRowId),[ne]=jt(r,w,F,D.columnsMeta,D.hasRowId,{simplified:!0}),ee=Ae`LIMIT ${3*100} OFFSET ${u}`,de=Ae`${Ut(D)} ${Y} ${ee}`,ce=`${Ut(D,{simplified:!0})} ${ne} ${ee}`;this.log(ce,y);let{objectValues:xe}=await this.#t.execAsObjectWithParams(de,ae,y);return{offset:u,objectValues:xe}}async getIdsFromToIndex(s,u,r,{sorting:w=[],columnFilters:F={},globalFilter:y=""}={},D){let Y=Math.min(u,r),ne=`LIMIT ${Math.abs(r-u)+1} OFFSET ${Y}`,ee=await this.#r(s),[de,ce]=jt(w,F,y,ee.columnsMeta,ee.hasRowId),[xe]=jt(w,F,y,ee.columnsMeta,ee.hasRowId,{simplified:!0}),Te=`${Ut(ee,{idsOnly:!0})} ${de} ${ne}`,Re=`${Ut(ee,{idsOnly:!0,simplified:!0})} ${xe} ${ne}`;this.log(Re,D);let{objectValues:Ze}=await this.#t.execAsObjectWithParams(Te,ce,D),Me=new Set;for(let Ke of Ze)Me.add(Ke.ROWID);return Me}async getByRowId(s,u,{textCutoff:r=1024,blobCutoff:w=1024}={},F){return(await this.getByRowIds(s,[u],{textCutoff:r,blobCutoff:w},F))?.objectValues?.[0]}async getByRowIds(s,u=[],{textCutoff:r=1024,blobCutoff:w=1024}={},F){let y=Array.from(u);if(!y.length)return{columns:[],objectValues:[]};let D=await this.#r(s),Y=Ut(D,{textCutoff:r,blobCutoff:w}),ae=Ut(D,{textCutoff:r,blobCutoff:w,simplified:!0}),ne=`${Y} ${gr(D,y)} LIMIT ${y.length}`,ee=`${ae} ${gr(D,y)} LIMIT ${y.length}`;this.log(ee,F);let de=await this.#t.execAsObject(ne,F);return de.objectValues=y.map((ce,xe)=>de.objectValues.find(Re=>Re.ROWID==ce)),de}async getBlob(s,u,r,w){await qn(50);let F=await this.#r(s),y=Ae`SELECT "${r}" FROM "${F.tblName}" ${gr(F,[u])}`;this.log(y,w);let D=await this.#t.first(y,w);return D&&pr({data:D,type:await hr(D),size:D.byteLength},[D.buffer])}async exportDb(s,u){let r=await this.#t.exportDb(u);return pr(r,[r.buffer])}async getStorageSize(s){let u=await this.#r(s),r=Ae`SELECT SUM("pgsize") AS totalSize, COUNT(*) AS numPages FROM "dbstat" WHERE name='${u.tblName}'`;this.log(r);let{objectValues:[{totalSize:w,numPages:F}]}=await this.#t.execAsObject(r);return{totalSize:w,numPages:F}}async getIndices(s){let u=await this.#r(s),r=Ae`SELECT * from pragma_index_list('${u.tblName}') ORDER BY seq`;this.log(r);let{objectValues:w}=await this.#t.execAsObject(r);return w.map(F=>({seq:F.seq,name:F.name,unique:!!F.unique,origin:F.origin,partial:!!F.partial}))}async#o(){this.#i||(this.#i=!0,await this.#l(Ae`BEGIN TRANSACTION`))}#a(s){if(typeof s=="string"){if(s===""||s==="NULL")return null;if(s==="''")return""}return s}async updateRow(s,u,r,w,F){let y=await this.#r(s),D=vn(y,u),Y=Ae`SELECT "${r}" FROM "${s.name}" ${D}`,ae=Ae`UPDATE "${s.name}" SET "${r}" = ? ${D}`,ne=await this.#t.first(Y,F)??null,ee=[this.#a(w)];return await this.#u(ae,ee,F),{query:ae,values:ee,undoValues:[ne]}}async insertRow(s,u,r){let w=await this.#r(s),F=Object.keys(u),y=Object.values(u).map(this.#a),D=F.map(xe=>`"${xe}"`).join(", "),Y=y.map(()=>"?").join(", "),ae=Hs(w),ne=Ae`INSERT INTO "${s.name}" (${D}) VALUES (${Y}) ${ae}`,{objectValues:[ee]}=await this.#d(ne,y,r);if(!ee)throw Error("Failed to insert row");let de=Object.values(ee).join(Kt),ce=Ae`DELETE FROM "${s.name}" ${vn(w,de)}`;return{query:ne,undoQuery:ce,values:y,undoValues:[]}}async deleteRows(s,u,r){let w=await this.#r(s),F=gr(w,u),y=Ae`DELETE FROM "${s.name}" ${F} RETURNING ${w.hasRowId?"ROWID, *":"*"}`,{columns:D,objectValues:Y}=await this.#d(y,[],r),ae=Y.length*D.length>=L_,ne,ee;if(ae)ne=Ws;else{let de=D.map(xe=>`"${xe}"`).join(", "),ce=Y.map(()=>`(${D.map(()=>"?").join(", ")})`).join(", ");ne=Ae`INSERT INTO "${s.name}" (${de}) VALUES ${ce}`,ee=Y.flatMap(xe=>D.map(Te=>xe[Te]))}return{query:y,undoQuery:ne,values:[],undoValues:ee??[]}}async#u(s,u,r){await this.#o(),await this.#l(Ae`SAVEPOINT "UNDOPOINT"`,r),this.#n++,await this.#p(s,u,r)}async#_(s,u,r){return await this.#o(),await this.#l(Ae`SAVEPOINT "UNDOPOINT"`,r),this.#n++,this.log(s,r),await this.#t.firstWithParams(s,u,r)}async#d(s,u,r){return await this.#o(),await this.#l(Ae`SAVEPOINT "UNDOPOINT"`,r),this.#n++,this.log(s,r),await this.#t.execAsObjectWithParams(s,u,r)}#l(s,u){return this.log(s,u),this.#t.run(s)}#p(s,u,r){return this.log(s,r),this.#t.runWithParams(s,u,r)}async undo(s){this.#n>0?(this.#n--,await this.#l(Ae`ROLLBACK TO "UNDOPOINT"`),await this.#l(Ae`RELEASE "UNDOPOINT"`),this.#n===0&&(this.#i=!1,await this.#l(Ae`COMMIT`))):(await this.#o(),await this.#p(s.undoQuery??s.query,s.undoValues))}async redo(s,u){await this.#u(s.query,s.values,u)}async applyEdits(s,u){if(s.length){await this.#o();for(let r of s)await this.#p(r.query,r.values,u)}}async commit(s){this.#i&&(this.#i=!1,this.#n=0,await this.#l(Ae`COMMIT`,s))}async rollback(s){this.#i&&(this.#i=!1,this.#n=0,await this.#l(Ae`ROLLBACK`,s))}getFilename(){return this.filename}[Symbol.dispose](){this.#t.close()}};Dr(new Gr(Ks),hn(as));
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
/*! Bundled license information:

@jspm/core/nodelibs/browser/buffer.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

ieee754/index.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)
*/
