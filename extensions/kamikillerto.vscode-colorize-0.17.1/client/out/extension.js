"use strict";var zC=Object.create;var os=Object.defineProperty;var WC=Object.getOwnPropertyDescriptor;var VC=Object.getOwnPropertyNames;var BC=Object.getPrototypeOf,KC=Object.prototype.hasOwnProperty;var k=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),GC=(n,e)=>{for(var t in e)os(n,t,{get:e[t],enumerable:!0})},Zh=(n,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of VC(e))!KC.call(n,i)&&i!==t&&os(n,i,{get:()=>e[i],enumerable:!(r=WC(e,i))||r.enumerable});return n};var Cc=(n,e,t)=>(t=n!=null?zC(BC(n)):{},Zh(e||!n||!n.__esModule?os(t,"default",{value:n,enumerable:!0}):t,n)),XC=n=>Zh(os({},"__esModule",{value:!0}),n);var fm=k((mq,dm)=>{"use strict";dm.exports=um;function um(n,e,t){n instanceof RegExp&&(n=cm(n,t)),e instanceof RegExp&&(e=cm(e,t));var r=lm(n,e,t);return r&&{start:r[0],end:r[1],pre:t.slice(0,r[0]),body:t.slice(r[0]+n.length,r[1]),post:t.slice(r[1]+e.length)}}function cm(n,e){var t=e.match(n);return t?t[0]:null}um.range=lm;function lm(n,e,t){var r,i,o,s,a,c=t.indexOf(n),u=t.indexOf(e,c+1),d=c;if(c>=0&&u>0){if(n===e)return[c,u];for(r=[],o=t.length;d>=0&&!a;)d==c?(r.push(d),c=t.indexOf(n,d+1)):r.length==1?a=[r.pop(),u]:(i=r.pop(),i<o&&(o=i,s=u),u=t.indexOf(e,d+1)),d=c<u&&c>=0?c:u;r.length&&(a=[o,s])}return a}});var vu=k((yq,vm)=>{var hm=fm();vm.exports=vR;var gm="\0SLASH"+Math.random()+"\0",pm="\0OPEN"+Math.random()+"\0",bu="\0CLOSE"+Math.random()+"\0",mm="\0COMMA"+Math.random()+"\0",ym="\0PERIOD"+Math.random()+"\0";function yu(n){return parseInt(n,10)==n?parseInt(n,10):n.charCodeAt(0)}function yR(n){return n.split("\\\\").join(gm).split("\\{").join(pm).split("\\}").join(bu).split("\\,").join(mm).split("\\.").join(ym)}function bR(n){return n.split(gm).join("\\").split(pm).join("{").split(bu).join("}").split(mm).join(",").split(ym).join(".")}function bm(n){if(!n)return[""];var e=[],t=hm("{","}",n);if(!t)return n.split(",");var r=t.pre,i=t.body,o=t.post,s=r.split(",");s[s.length-1]+="{"+i+"}";var a=bm(o);return o.length&&(s[s.length-1]+=a.shift(),s.push.apply(s,a)),e.push.apply(e,s),e}function vR(n){return n?(n.substr(0,2)==="{}"&&(n="\\{\\}"+n.substr(2)),vo(yR(n),!0).map(bR)):[]}function CR(n){return"{"+n+"}"}function wR(n){return/^-?0\d/.test(n)}function DR(n,e){return n<=e}function RR(n,e){return n>=e}function vo(n,e){var t=[],r=hm("{","}",n);if(!r)return[n];var i=r.pre,o=r.post.length?vo(r.post,!1):[""];if(/\$$/.test(r.pre))for(var s=0;s<o.length;s++){var a=i+"{"+r.body+"}"+o[s];t.push(a)}else{var c=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(r.body),u=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(r.body),d=c||u,h=r.body.indexOf(",")>=0;if(!d&&!h)return r.post.match(/,.*\}/)?(n=r.pre+"{"+r.body+bu+r.post,vo(n)):[n];var p;if(d)p=r.body.split(/\.\./);else if(p=bm(r.body),p.length===1&&(p=vo(p[0],!1).map(CR),p.length===1))return o.map(function(He){return r.pre+p[0]+He});var v;if(d){var y=yu(p[0]),R=yu(p[1]),E=Math.max(p[0].length,p[1].length),I=p.length==3?Math.abs(yu(p[2])):1,O=DR,q=R<y;q&&(I*=-1,O=RR);var N=p.some(wR);v=[];for(var B=y;O(B,R);B+=I){var se;if(u)se=String.fromCharCode(B),se==="\\"&&(se="");else if(se=String(B),N){var V=E-se.length;if(V>0){var J=new Array(V+1).join("0");B<0?se="-"+J+se.slice(1):se=J+se}}v.push(se)}}else{v=[];for(var ie=0;ie<p.length;ie++)v.push.apply(v,vo(p[ie],!1))}for(var ie=0;ie<v.length;ie++)for(var s=0;s<o.length;s++){var a=i+v[ie]+o[s];(!e||d||a)&&t.push(a)}}return t}});var Tn=k(et=>{"use strict";Object.defineProperty(et,"__esModule",{value:!0});et.asPromise=et.thenable=et.typedArray=et.stringArray=et.array=et.func=et.error=et.number=et.string=et.boolean=void 0;function s_(n){return n===!0||n===!1}et.boolean=s_;function km(n){return typeof n=="string"||n instanceof String}et.string=km;function a_(n){return typeof n=="number"||n instanceof Number}et.number=a_;function c_(n){return n instanceof Error}et.error=c_;function Fm(n){return typeof n=="function"}et.func=Fm;function Mm(n){return Array.isArray(n)}et.array=Mm;function u_(n){return Mm(n)&&n.every(e=>km(e))}et.stringArray=u_;function l_(n,e){return Array.isArray(n)&&n.every(e)}et.typedArray=l_;function Om(n){return n&&Fm(n.then)}et.thenable=Om;function d_(n){return n instanceof Promise?n:Om(n)?new Promise((e,t)=>{n.then(r=>e(r),r=>t(r))}):Promise.resolve(n)}et.asPromise=d_});var Ti=k(Ot=>{"use strict";Object.defineProperty(Ot,"__esModule",{value:!0});Ot.stringArray=Ot.array=Ot.func=Ot.error=Ot.number=Ot.string=Ot.boolean=void 0;function f_(n){return n===!0||n===!1}Ot.boolean=f_;function Lm(n){return typeof n=="string"||n instanceof String}Ot.string=Lm;function h_(n){return typeof n=="number"||n instanceof Number}Ot.number=h_;function g_(n){return n instanceof Error}Ot.error=g_;function p_(n){return typeof n=="function"}Ot.func=p_;function Am(n){return Array.isArray(n)}Ot.array=Am;function m_(n){return Am(n)&&n.every(e=>Lm(e))}Ot.stringArray=m_});var Bu=k(Q=>{"use strict";Object.defineProperty(Q,"__esModule",{value:!0});Q.Message=Q.NotificationType9=Q.NotificationType8=Q.NotificationType7=Q.NotificationType6=Q.NotificationType5=Q.NotificationType4=Q.NotificationType3=Q.NotificationType2=Q.NotificationType1=Q.NotificationType0=Q.NotificationType=Q.RequestType9=Q.RequestType8=Q.RequestType7=Q.RequestType6=Q.RequestType5=Q.RequestType4=Q.RequestType3=Q.RequestType2=Q.RequestType1=Q.RequestType=Q.RequestType0=Q.AbstractMessageSignature=Q.ParameterStructures=Q.ResponseError=Q.ErrorCodes=void 0;var Zr=Ti(),Du;(function(n){n.ParseError=-32700,n.InvalidRequest=-32600,n.MethodNotFound=-32601,n.InvalidParams=-32602,n.InternalError=-32603,n.jsonrpcReservedErrorRangeStart=-32099,n.serverErrorStart=-32099,n.MessageWriteError=-32099,n.MessageReadError=-32098,n.PendingResponseRejected=-32097,n.ConnectionInactive=-32096,n.ServerNotInitialized=-32002,n.UnknownErrorCode=-32001,n.jsonrpcReservedErrorRangeEnd=-32e3,n.serverErrorEnd=-32e3})(Du||(Q.ErrorCodes=Du={}));var Ru=class n extends Error{constructor(e,t,r){super(t),this.code=Zr.number(e)?e:Du.UnknownErrorCode,this.data=r,Object.setPrototypeOf(this,n.prototype)}toJson(){let e={code:this.code,message:this.message};return this.data!==void 0&&(e.data=this.data),e}};Q.ResponseError=Ru;var Qt=class n{constructor(e){this.kind=e}static is(e){return e===n.auto||e===n.byName||e===n.byPosition}toString(){return this.kind}};Q.ParameterStructures=Qt;Qt.auto=new Qt("auto");Qt.byPosition=new Qt("byPosition");Qt.byName=new Qt("byName");var $e=class{constructor(e,t){this.method=e,this.numberOfParams=t}get parameterStructures(){return Qt.auto}};Q.AbstractMessageSignature=$e;var _u=class extends $e{constructor(e){super(e,0)}};Q.RequestType0=_u;var Su=class extends $e{constructor(e,t=Qt.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};Q.RequestType=Su;var Tu=class extends $e{constructor(e,t=Qt.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};Q.RequestType1=Tu;var Eu=class extends $e{constructor(e){super(e,2)}};Q.RequestType2=Eu;var xu=class extends $e{constructor(e){super(e,3)}};Q.RequestType3=xu;var Pu=class extends $e{constructor(e){super(e,4)}};Q.RequestType4=Pu;var qu=class extends $e{constructor(e){super(e,5)}};Q.RequestType5=qu;var Iu=class extends $e{constructor(e){super(e,6)}};Q.RequestType6=Iu;var ku=class extends $e{constructor(e){super(e,7)}};Q.RequestType7=ku;var Fu=class extends $e{constructor(e){super(e,8)}};Q.RequestType8=Fu;var Mu=class extends $e{constructor(e){super(e,9)}};Q.RequestType9=Mu;var Ou=class extends $e{constructor(e,t=Qt.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};Q.NotificationType=Ou;var Lu=class extends $e{constructor(e){super(e,0)}};Q.NotificationType0=Lu;var Au=class extends $e{constructor(e,t=Qt.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};Q.NotificationType1=Au;var Nu=class extends $e{constructor(e){super(e,2)}};Q.NotificationType2=Nu;var $u=class extends $e{constructor(e){super(e,3)}};Q.NotificationType3=$u;var ju=class extends $e{constructor(e){super(e,4)}};Q.NotificationType4=ju;var Hu=class extends $e{constructor(e){super(e,5)}};Q.NotificationType5=Hu;var Uu=class extends $e{constructor(e){super(e,6)}};Q.NotificationType6=Uu;var zu=class extends $e{constructor(e){super(e,7)}};Q.NotificationType7=zu;var Wu=class extends $e{constructor(e){super(e,8)}};Q.NotificationType8=Wu;var Vu=class extends $e{constructor(e){super(e,9)}};Q.NotificationType9=Vu;var Nm;(function(n){function e(i){let o=i;return o&&Zr.string(o.method)&&(Zr.string(o.id)||Zr.number(o.id))}n.isRequest=e;function t(i){let o=i;return o&&Zr.string(o.method)&&i.id===void 0}n.isNotification=t;function r(i){let o=i;return o&&(o.result!==void 0||!!o.error)&&(Zr.string(o.id)||Zr.number(o.id)||o.id===null)}n.isResponse=r})(Nm||(Q.Message=Nm={}))});var Gu=k(Pr=>{"use strict";var $m;Object.defineProperty(Pr,"__esModule",{value:!0});Pr.LRUCache=Pr.LinkedMap=Pr.Touch=void 0;var Lt;(function(n){n.None=0,n.First=1,n.AsOld=n.First,n.Last=2,n.AsNew=n.Last})(Lt||(Pr.Touch=Lt={}));var Ps=class{constructor(){this[$m]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,t=Lt.None){let r=this._map.get(e);if(r)return t!==Lt.None&&this.touch(r,t),r.value}set(e,t,r=Lt.None){let i=this._map.get(e);if(i)i.value=t,r!==Lt.None&&this.touch(i,r);else{switch(i={key:e,value:t,next:void 0,previous:void 0},r){case Lt.None:this.addItemLast(i);break;case Lt.First:this.addItemFirst(i);break;case Lt.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){let r=this._state,i=this._head;for(;i;){if(t?e.bind(t)(i.value,i.key,this):e(i.value,i.key,this),this._state!==r)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let e=this._state,t=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(t){let i={value:t.key,done:!1};return t=t.next,i}else return{value:void 0,done:!0}}};return r}values(){let e=this._state,t=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(t){let i={value:t.value,done:!1};return t=t.next,i}else return{value:void 0,done:!0}}};return r}entries(){let e=this._state,t=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(t){let i={value:[t.key,t.value],done:!1};return t=t.next,i}else return{value:void 0,done:!0}}};return r}[($m=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this._head,r=this.size;for(;t&&r>e;)this._map.delete(t.key),t=t.next,r--;this._head=t,this._size=r,t&&(t.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let t=e.next,r=e.previous;if(!t||!r)throw new Error("Invalid list");t.previous=r,r.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(t!==Lt.First&&t!==Lt.Last)){if(t===Lt.First){if(e===this._head)return;let r=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(r.previous=i,i.next=r),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(t===Lt.Last){if(e===this._tail)return;let r=e.next,i=e.previous;e===this._head?(r.previous=void 0,this._head=r):(r.previous=i,i.next=r),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((t,r)=>{e.push([r,t])}),e}fromJSON(e){this.clear();for(let[t,r]of e)this.set(t,r)}};Pr.LinkedMap=Ps;var Ku=class extends Ps{constructor(e,t=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,t=Lt.AsNew){return super.get(e,t)}peek(e){return super.get(e,Lt.None)}set(e,t){return super.set(e,t,Lt.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};Pr.LRUCache=Ku});var Hm=k(qs=>{"use strict";Object.defineProperty(qs,"__esModule",{value:!0});qs.Disposable=void 0;var jm;(function(n){function e(t){return{dispose:t}}n.create=e})(jm||(qs.Disposable=jm={}))});var qr=k(Ju=>{"use strict";Object.defineProperty(Ju,"__esModule",{value:!0});var Xu;function Yu(){if(Xu===void 0)throw new Error("No runtime abstraction layer installed");return Xu}(function(n){function e(t){if(t===void 0)throw new Error("No runtime abstraction layer provided");Xu=t}n.install=e})(Yu||(Yu={}));Ju.default=Yu});var xi=k(Ei=>{"use strict";Object.defineProperty(Ei,"__esModule",{value:!0});Ei.Emitter=Ei.Event=void 0;var y_=qr(),Um;(function(n){let e={dispose(){}};n.None=function(){return e}})(Um||(Ei.Event=Um={}));var Zu=class{add(e,t=null,r){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(t),Array.isArray(r)&&r.push({dispose:()=>this.remove(e,t)})}remove(e,t=null){if(!this._callbacks)return;let r=!1;for(let i=0,o=this._callbacks.length;i<o;i++)if(this._callbacks[i]===e)if(this._contexts[i]===t){this._callbacks.splice(i,1),this._contexts.splice(i,1);return}else r=!0;if(r)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];let t=[],r=this._callbacks.slice(0),i=this._contexts.slice(0);for(let o=0,s=r.length;o<s;o++)try{t.push(r[o].apply(i[o],e))}catch(a){(0,y_.default)().console.error(a)}return t}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},Is=class n{constructor(e){this._options=e}get event(){return this._event||(this._event=(e,t,r)=>{this._callbacks||(this._callbacks=new Zu),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,t);let i={dispose:()=>{this._callbacks&&(this._callbacks.remove(e,t),i.dispose=n._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(r)&&r.push(i),i}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};Ei.Emitter=Is;Is._noop=function(){}});var Ms=k(Pi=>{"use strict";Object.defineProperty(Pi,"__esModule",{value:!0});Pi.CancellationTokenSource=Pi.CancellationToken=void 0;var b_=qr(),v_=Ti(),Qu=xi(),ks;(function(n){n.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:Qu.Event.None}),n.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:Qu.Event.None});function e(t){let r=t;return r&&(r===n.None||r===n.Cancelled||v_.boolean(r.isCancellationRequested)&&!!r.onCancellationRequested)}n.is=e})(ks||(Pi.CancellationToken=ks={}));var C_=Object.freeze(function(n,e){let t=(0,b_.default)().timer.setTimeout(n.bind(e),0);return{dispose(){t.dispose()}}}),Fs=class{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?C_:(this._emitter||(this._emitter=new Qu.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},el=class{get token(){return this._token||(this._token=new Fs),this._token}cancel(){this._token?this._token.cancel():this._token=ks.Cancelled}dispose(){this._token?this._token instanceof Fs&&this._token.dispose():this._token=ks.None}};Pi.CancellationTokenSource=el});var zm=k(qi=>{"use strict";Object.defineProperty(qi,"__esModule",{value:!0});qi.SharedArrayReceiverStrategy=qi.SharedArraySenderStrategy=void 0;var w_=Ms(),Do;(function(n){n.Continue=0,n.Cancelled=1})(Do||(Do={}));var tl=class{constructor(){this.buffers=new Map}enableCancellation(e){if(e.id===null)return;let t=new SharedArrayBuffer(4),r=new Int32Array(t,0,1);r[0]=Do.Continue,this.buffers.set(e.id,t),e.$cancellationData=t}async sendCancellation(e,t){let r=this.buffers.get(t);if(r===void 0)return;let i=new Int32Array(r,0,1);Atomics.store(i,0,Do.Cancelled)}cleanup(e){this.buffers.delete(e)}dispose(){this.buffers.clear()}};qi.SharedArraySenderStrategy=tl;var nl=class{constructor(e){this.data=new Int32Array(e,0,1)}get isCancellationRequested(){return Atomics.load(this.data,0)===Do.Cancelled}get onCancellationRequested(){throw new Error("Cancellation over SharedArrayBuffer doesn't support cancellation events")}},rl=class{constructor(e){this.token=new nl(e)}cancel(){}dispose(){}},il=class{constructor(){this.kind="request"}createCancellationTokenSource(e){let t=e.$cancellationData;return t===void 0?new w_.CancellationTokenSource:new rl(t)}};qi.SharedArrayReceiverStrategy=il});var sl=k(Os=>{"use strict";Object.defineProperty(Os,"__esModule",{value:!0});Os.Semaphore=void 0;var D_=qr(),ol=class{constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((t,r)=>{this._waiting.push({thunk:e,resolve:t,reject:r}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,D_.default)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let t=e.thunk();t instanceof Promise?t.then(r=>{this._active--,e.resolve(r),this.runNext()},r=>{this._active--,e.reject(r),this.runNext()}):(this._active--,e.resolve(t),this.runNext())}catch(t){this._active--,e.reject(t),this.runNext()}}};Os.Semaphore=ol});var Vm=k(Ir=>{"use strict";Object.defineProperty(Ir,"__esModule",{value:!0});Ir.ReadableStreamMessageReader=Ir.AbstractMessageReader=Ir.MessageReader=void 0;var cl=qr(),Ii=Ti(),al=xi(),R_=sl(),Wm;(function(n){function e(t){let r=t;return r&&Ii.func(r.listen)&&Ii.func(r.dispose)&&Ii.func(r.onError)&&Ii.func(r.onClose)&&Ii.func(r.onPartialMessage)}n.is=e})(Wm||(Ir.MessageReader=Wm={}));var Ls=class{constructor(){this.errorEmitter=new al.Emitter,this.closeEmitter=new al.Emitter,this.partialMessageEmitter=new al.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${Ii.string(e.message)?e.message:"unknown"}`)}};Ir.AbstractMessageReader=Ls;var ul;(function(n){function e(t){let r,i,o,s=new Map,a,c=new Map;if(t===void 0||typeof t=="string")r=t??"utf-8";else{if(r=t.charset??"utf-8",t.contentDecoder!==void 0&&(o=t.contentDecoder,s.set(o.name,o)),t.contentDecoders!==void 0)for(let u of t.contentDecoders)s.set(u.name,u);if(t.contentTypeDecoder!==void 0&&(a=t.contentTypeDecoder,c.set(a.name,a)),t.contentTypeDecoders!==void 0)for(let u of t.contentTypeDecoders)c.set(u.name,u)}return a===void 0&&(a=(0,cl.default)().applicationJson.decoder,c.set(a.name,a)),{charset:r,contentDecoder:o,contentDecoders:s,contentTypeDecoder:a,contentTypeDecoders:c}}n.fromOptions=e})(ul||(ul={}));var ll=class extends Ls{constructor(e,t){super(),this.readable=e,this.options=ul.fromOptions(t),this.buffer=(0,cl.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0,this.readSemaphore=new R_.Semaphore(1)}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;let t=this.readable.onData(r=>{this.onData(r)});return this.readable.onError(r=>this.fireError(r)),this.readable.onClose(()=>this.fireClose()),t}onData(e){try{for(this.buffer.append(e);;){if(this.nextMessageLength===-1){let r=this.buffer.tryReadHeaders(!0);if(!r)return;let i=r.get("content-length");if(!i){this.fireError(new Error(`Header must provide a Content-Length property.
${JSON.stringify(Object.fromEntries(r))}`));return}let o=parseInt(i);if(isNaN(o)){this.fireError(new Error(`Content-Length value must be a number. Got ${i}`));return}this.nextMessageLength=o}let t=this.buffer.tryReadBody(this.nextMessageLength);if(t===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.readSemaphore.lock(async()=>{let r=this.options.contentDecoder!==void 0?await this.options.contentDecoder.decode(t):t,i=await this.options.contentTypeDecoder.decode(r,this.options);this.callback(i)}).catch(r=>{this.fireError(r)})}}catch(t){this.fireError(t)}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=(0,cl.default)().timer.setTimeout((e,t)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:t}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}};Ir.ReadableStreamMessageReader=ll});var Ym=k(kr=>{"use strict";Object.defineProperty(kr,"__esModule",{value:!0});kr.WriteableStreamMessageWriter=kr.AbstractMessageWriter=kr.MessageWriter=void 0;var Bm=qr(),Ro=Ti(),__=sl(),Km=xi(),S_="Content-Length: ",Gm=`\r
`,Xm;(function(n){function e(t){let r=t;return r&&Ro.func(r.dispose)&&Ro.func(r.onClose)&&Ro.func(r.onError)&&Ro.func(r.write)}n.is=e})(Xm||(kr.MessageWriter=Xm={}));var As=class{constructor(){this.errorEmitter=new Km.Emitter,this.closeEmitter=new Km.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,t,r){this.errorEmitter.fire([this.asError(e),t,r])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${Ro.string(e.message)?e.message:"unknown"}`)}};kr.AbstractMessageWriter=As;var dl;(function(n){function e(t){return t===void 0||typeof t=="string"?{charset:t??"utf-8",contentTypeEncoder:(0,Bm.default)().applicationJson.encoder}:{charset:t.charset??"utf-8",contentEncoder:t.contentEncoder,contentTypeEncoder:t.contentTypeEncoder??(0,Bm.default)().applicationJson.encoder}}n.fromOptions=e})(dl||(dl={}));var fl=class extends As{constructor(e,t){super(),this.writable=e,this.options=dl.fromOptions(t),this.errorCount=0,this.writeSemaphore=new __.Semaphore(1),this.writable.onError(r=>this.fireError(r)),this.writable.onClose(()=>this.fireClose())}async write(e){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(e,this.options).then(r=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(r):r).then(r=>{let i=[];return i.push(S_,r.byteLength.toString(),Gm),i.push(Gm),this.doWrite(e,i,r)},r=>{throw this.fireError(r),r}))}async doWrite(e,t,r){try{return await this.writable.write(t.join(""),"ascii"),this.writable.write(r)}catch(i){return this.handleError(i,e),Promise.reject(i)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){this.writable.end()}};kr.WriteableStreamMessageWriter=fl});var Jm=k(Ns=>{"use strict";Object.defineProperty(Ns,"__esModule",{value:!0});Ns.AbstractMessageBuffer=void 0;var T_=13,E_=10,x_=`\r
`,hl=class{constructor(e="utf-8"){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){let t=typeof e=="string"?this.fromString(e,this._encoding):e;this._chunks.push(t),this._totalLength+=t.byteLength}tryReadHeaders(e=!1){if(this._chunks.length===0)return;let t=0,r=0,i=0,o=0;e:for(;r<this._chunks.length;){let u=this._chunks[r];for(i=0;i<u.length;){switch(u[i]){case T_:switch(t){case 0:t=1;break;case 2:t=3;break;default:t=0}break;case E_:switch(t){case 1:t=2;break;case 3:t=4,i++;break e;default:t=0}break;default:t=0}i++}o+=u.byteLength,r++}if(t!==4)return;let s=this._read(o+i),a=new Map,c=this.toString(s,"ascii").split(x_);if(c.length<2)return a;for(let u=0;u<c.length-2;u++){let d=c[u],h=d.indexOf(":");if(h===-1)throw new Error(`Message header must separate key and value using ':'
${d}`);let p=d.substr(0,h),v=d.substr(h+1).trim();a.set(e?p.toLowerCase():p,v)}return a}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(e===0)return this.emptyBuffer();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){let o=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(o)}if(this._chunks[0].byteLength>e){let o=this._chunks[0],s=this.asNative(o,e);return this._chunks[0]=o.slice(e),this._totalLength-=e,s}let t=this.allocNative(e),r=0,i=0;for(;e>0;){let o=this._chunks[i];if(o.byteLength>e){let s=o.slice(0,e);t.set(s,r),r+=e,this._chunks[i]=o.slice(e),this._totalLength-=e,e-=e}else t.set(o,r),r+=o.byteLength,this._chunks.shift(),this._totalLength-=o.byteLength,e-=o.byteLength}return t}};Ns.AbstractMessageBuffer=hl});var n0=k(ae=>{"use strict";Object.defineProperty(ae,"__esModule",{value:!0});ae.createMessageConnection=ae.ConnectionOptions=ae.MessageStrategy=ae.CancellationStrategy=ae.CancellationSenderStrategy=ae.CancellationReceiverStrategy=ae.RequestCancellationReceiverStrategy=ae.IdCancellationReceiverStrategy=ae.ConnectionStrategy=ae.ConnectionError=ae.ConnectionErrors=ae.LogTraceNotification=ae.SetTraceNotification=ae.TraceFormat=ae.TraceValues=ae.Trace=ae.NullLogger=ae.ProgressType=ae.ProgressToken=void 0;var Zm=qr(),Xe=Ti(),ee=Bu(),Qm=Gu(),_o=xi(),gl=Ms(),Eo;(function(n){n.type=new ee.NotificationType("$/cancelRequest")})(Eo||(Eo={}));var pl;(function(n){function e(t){return typeof t=="string"||typeof t=="number"}n.is=e})(pl||(ae.ProgressToken=pl={}));var So;(function(n){n.type=new ee.NotificationType("$/progress")})(So||(So={}));var ml=class{constructor(){}};ae.ProgressType=ml;var yl;(function(n){function e(t){return Xe.func(t)}n.is=e})(yl||(yl={}));ae.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var Se;(function(n){n[n.Off=0]="Off",n[n.Messages=1]="Messages",n[n.Compact=2]="Compact",n[n.Verbose=3]="Verbose"})(Se||(ae.Trace=Se={}));var e0;(function(n){n.Off="off",n.Messages="messages",n.Compact="compact",n.Verbose="verbose"})(e0||(ae.TraceValues=e0={}));(function(n){function e(r){if(!Xe.string(r))return n.Off;switch(r=r.toLowerCase(),r){case"off":return n.Off;case"messages":return n.Messages;case"compact":return n.Compact;case"verbose":return n.Verbose;default:return n.Off}}n.fromString=e;function t(r){switch(r){case n.Off:return"off";case n.Messages:return"messages";case n.Compact:return"compact";case n.Verbose:return"verbose";default:return"off"}}n.toString=t})(Se||(ae.Trace=Se={}));var hn;(function(n){n.Text="text",n.JSON="json"})(hn||(ae.TraceFormat=hn={}));(function(n){function e(t){return Xe.string(t)?(t=t.toLowerCase(),t==="json"?n.JSON:n.Text):n.Text}n.fromString=e})(hn||(ae.TraceFormat=hn={}));var bl;(function(n){n.type=new ee.NotificationType("$/setTrace")})(bl||(ae.SetTraceNotification=bl={}));var $s;(function(n){n.type=new ee.NotificationType("$/logTrace")})($s||(ae.LogTraceNotification=$s={}));var To;(function(n){n[n.Closed=1]="Closed",n[n.Disposed=2]="Disposed",n[n.AlreadyListening=3]="AlreadyListening"})(To||(ae.ConnectionErrors=To={}));var ki=class n extends Error{constructor(e,t){super(t),this.code=e,Object.setPrototypeOf(this,n.prototype)}};ae.ConnectionError=ki;var vl;(function(n){function e(t){let r=t;return r&&Xe.func(r.cancelUndispatched)}n.is=e})(vl||(ae.ConnectionStrategy=vl={}));var js;(function(n){function e(t){let r=t;return r&&(r.kind===void 0||r.kind==="id")&&Xe.func(r.createCancellationTokenSource)&&(r.dispose===void 0||Xe.func(r.dispose))}n.is=e})(js||(ae.IdCancellationReceiverStrategy=js={}));var Cl;(function(n){function e(t){let r=t;return r&&r.kind==="request"&&Xe.func(r.createCancellationTokenSource)&&(r.dispose===void 0||Xe.func(r.dispose))}n.is=e})(Cl||(ae.RequestCancellationReceiverStrategy=Cl={}));var Hs;(function(n){n.Message=Object.freeze({createCancellationTokenSource(t){return new gl.CancellationTokenSource}});function e(t){return js.is(t)||Cl.is(t)}n.is=e})(Hs||(ae.CancellationReceiverStrategy=Hs={}));var Us;(function(n){n.Message=Object.freeze({sendCancellation(t,r){return t.sendNotification(Eo.type,{id:r})},cleanup(t){}});function e(t){let r=t;return r&&Xe.func(r.sendCancellation)&&Xe.func(r.cleanup)}n.is=e})(Us||(ae.CancellationSenderStrategy=Us={}));var zs;(function(n){n.Message=Object.freeze({receiver:Hs.Message,sender:Us.Message});function e(t){let r=t;return r&&Hs.is(r.receiver)&&Us.is(r.sender)}n.is=e})(zs||(ae.CancellationStrategy=zs={}));var Ws;(function(n){function e(t){let r=t;return r&&Xe.func(r.handleMessage)}n.is=e})(Ws||(ae.MessageStrategy=Ws={}));var t0;(function(n){function e(t){let r=t;return r&&(zs.is(r.cancellationStrategy)||vl.is(r.connectionStrategy)||Ws.is(r.messageStrategy))}n.is=e})(t0||(ae.ConnectionOptions=t0={}));var $n;(function(n){n[n.New=1]="New",n[n.Listening=2]="Listening",n[n.Closed=3]="Closed",n[n.Disposed=4]="Disposed"})($n||($n={}));function P_(n,e,t,r){let i=t!==void 0?t:ae.NullLogger,o=0,s=0,a=0,c="2.0",u,d=new Map,h,p=new Map,v=new Map,y,R=new Qm.LinkedMap,E=new Map,I=new Set,O=new Map,q=Se.Off,N=hn.Text,B,se=$n.New,V=new _o.Emitter,J=new _o.Emitter,ie=new _o.Emitter,He=new _o.Emitter,Ie=new _o.Emitter,Ge=r&&r.cancellationStrategy?r.cancellationStrategy:zs.Message;function Gt(w){if(w===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+w.toString()}function ft(w){return w===null?"res-unknown-"+(++a).toString():"res-"+w.toString()}function it(){return"not-"+(++s).toString()}function Oe(w,M){ee.Message.isRequest(M)?w.set(Gt(M.id),M):ee.Message.isResponse(M)?w.set(ft(M.id),M):w.set(it(),M)}function Xt(w){}function vn(){return se===$n.Listening}function Pe(){return se===$n.Closed}function ot(){return se===$n.Disposed}function yt(){(se===$n.New||se===$n.Listening)&&(se=$n.Closed,J.fire(void 0))}function ht(w){V.fire([w,void 0,void 0])}function Vn(w){V.fire(w)}n.onClose(yt),n.onError(ht),e.onClose(yt),e.onError(Vn);function Cn(){y||R.size===0||(y=(0,Zm.default)().timer.setImmediate(()=>{y=void 0,or()}))}function Ht(w){ee.Message.isRequest(w)?Bn(w):ee.Message.isNotification(w)?Mn(w):ee.Message.isResponse(w)?Fn(w):Kn(w)}function or(){if(R.size===0)return;let w=R.shift();try{let M=r?.messageStrategy;Ws.is(M)?M.handleMessage(w,Ht):Ht(w)}finally{Cn()}}let br=w=>{try{if(ee.Message.isNotification(w)&&w.method===Eo.type.method){let M=w.params.id,H=Gt(M),W=R.get(H);if(ee.Message.isRequest(W)){let ve=r?.connectionStrategy,Ee=ve&&ve.cancelUndispatched?ve.cancelUndispatched(W,Xt):void 0;if(Ee&&(Ee.error!==void 0||Ee.result!==void 0)){R.delete(H),O.delete(M),Ee.id=W.id,wn(Ee,w.method,Date.now()),e.write(Ee).catch(()=>i.error("Sending response for canceled message failed."));return}}let we=O.get(M);if(we!==void 0){we.cancel(),Dn(w);return}else I.add(M)}Oe(R,w)}finally{Cn()}};function Bn(w){if(ot())return;function M(le,Re,pe){let Fe={jsonrpc:c,id:w.id};le instanceof ee.ResponseError?Fe.error=le.toJson():Fe.result=le===void 0?null:le,wn(Fe,Re,pe),e.write(Fe).catch(()=>i.error("Sending response failed."))}function H(le,Re,pe){let Fe={jsonrpc:c,id:w.id,error:le.toJson()};wn(Fe,Re,pe),e.write(Fe).catch(()=>i.error("Sending response failed."))}function W(le,Re,pe){le===void 0&&(le=null);let Fe={jsonrpc:c,id:w.id,result:le};wn(Fe,Re,pe),e.write(Fe).catch(()=>i.error("Sending response failed."))}vr(w);let we=d.get(w.method),ve,Ee;we&&(ve=we.type,Ee=we.handler);let ke=Date.now();if(Ee||u){let le=w.id??String(Date.now()),Re=js.is(Ge.receiver)?Ge.receiver.createCancellationTokenSource(le):Ge.receiver.createCancellationTokenSource(w);w.id!==null&&I.has(w.id)&&Re.cancel(),w.id!==null&&O.set(le,Re);try{let pe;if(Ee)if(w.params===void 0){if(ve!==void 0&&ve.numberOfParams!==0){H(new ee.ResponseError(ee.ErrorCodes.InvalidParams,`Request ${w.method} defines ${ve.numberOfParams} params but received none.`),w.method,ke);return}pe=Ee(Re.token)}else if(Array.isArray(w.params)){if(ve!==void 0&&ve.parameterStructures===ee.ParameterStructures.byName){H(new ee.ResponseError(ee.ErrorCodes.InvalidParams,`Request ${w.method} defines parameters by name but received parameters by position`),w.method,ke);return}pe=Ee(...w.params,Re.token)}else{if(ve!==void 0&&ve.parameterStructures===ee.ParameterStructures.byPosition){H(new ee.ResponseError(ee.ErrorCodes.InvalidParams,`Request ${w.method} defines parameters by position but received parameters by name`),w.method,ke);return}pe=Ee(w.params,Re.token)}else u&&(pe=u(w.method,w.params,Re.token));let Fe=pe;pe?Fe.then?Fe.then(Qe=>{O.delete(le),M(Qe,w.method,ke)},Qe=>{O.delete(le),Qe instanceof ee.ResponseError?H(Qe,w.method,ke):Qe&&Xe.string(Qe.message)?H(new ee.ResponseError(ee.ErrorCodes.InternalError,`Request ${w.method} failed with message: ${Qe.message}`),w.method,ke):H(new ee.ResponseError(ee.ErrorCodes.InternalError,`Request ${w.method} failed unexpectedly without providing any details.`),w.method,ke)}):(O.delete(le),M(pe,w.method,ke)):(O.delete(le),W(pe,w.method,ke))}catch(pe){O.delete(le),pe instanceof ee.ResponseError?M(pe,w.method,ke):pe&&Xe.string(pe.message)?H(new ee.ResponseError(ee.ErrorCodes.InternalError,`Request ${w.method} failed with message: ${pe.message}`),w.method,ke):H(new ee.ResponseError(ee.ErrorCodes.InternalError,`Request ${w.method} failed unexpectedly without providing any details.`),w.method,ke)}}else H(new ee.ResponseError(ee.ErrorCodes.MethodNotFound,`Unhandled method ${w.method}`),w.method,ke)}function Fn(w){if(!ot())if(w.id===null)w.error?i.error(`Received response message without id: Error is: 
${JSON.stringify(w.error,void 0,4)}`):i.error("Received response message without id. No further error information provided.");else{let M=w.id,H=E.get(M);if(Gn(w,H),H!==void 0){E.delete(M);try{if(w.error){let W=w.error;H.reject(new ee.ResponseError(W.code,W.message,W.data))}else if(w.result!==void 0)H.resolve(w.result);else throw new Error("Should never happen.")}catch(W){W.message?i.error(`Response handler '${H.method}' failed with message: ${W.message}`):i.error(`Response handler '${H.method}' failed unexpectedly.`)}}}}function Mn(w){if(ot())return;let M,H;if(w.method===Eo.type.method){let W=w.params.id;I.delete(W),Dn(w);return}else{let W=p.get(w.method);W&&(H=W.handler,M=W.type)}if(H||h)try{if(Dn(w),H)if(w.params===void 0)M!==void 0&&M.numberOfParams!==0&&M.parameterStructures!==ee.ParameterStructures.byName&&i.error(`Notification ${w.method} defines ${M.numberOfParams} params but received none.`),H();else if(Array.isArray(w.params)){let W=w.params;w.method===So.type.method&&W.length===2&&pl.is(W[0])?H({token:W[0],value:W[1]}):(M!==void 0&&(M.parameterStructures===ee.ParameterStructures.byName&&i.error(`Notification ${w.method} defines parameters by name but received parameters by position`),M.numberOfParams!==w.params.length&&i.error(`Notification ${w.method} defines ${M.numberOfParams} params but received ${W.length} arguments`)),H(...W))}else M!==void 0&&M.parameterStructures===ee.ParameterStructures.byPosition&&i.error(`Notification ${w.method} defines parameters by position but received parameters by name`),H(w.params);else h&&h(w.method,w.params)}catch(W){W.message?i.error(`Notification handler '${w.method}' failed with message: ${W.message}`):i.error(`Notification handler '${w.method}' failed unexpectedly.`)}else ie.fire(w)}function Kn(w){if(!w){i.error("Received empty message.");return}i.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(w,null,4)}`);let M=w;if(Xe.string(M.id)||Xe.number(M.id)){let H=M.id,W=E.get(H);W&&W.reject(new Error("The received response has neither a result nor an error property."))}}function st(w){if(w!=null)switch(q){case Se.Verbose:return JSON.stringify(w,null,4);case Se.Compact:return JSON.stringify(w);default:return}}function sr(w){if(!(q===Se.Off||!B))if(N===hn.Text){let M;(q===Se.Verbose||q===Se.Compact)&&w.params&&(M=`Params: ${st(w.params)}

`),B.log(`Sending request '${w.method} - (${w.id})'.`,M)}else rt("send-request",w)}function On(w){if(!(q===Se.Off||!B))if(N===hn.Text){let M;(q===Se.Verbose||q===Se.Compact)&&(w.params?M=`Params: ${st(w.params)}

`:M=`No parameters provided.

`),B.log(`Sending notification '${w.method}'.`,M)}else rt("send-notification",w)}function wn(w,M,H){if(!(q===Se.Off||!B))if(N===hn.Text){let W;(q===Se.Verbose||q===Se.Compact)&&(w.error&&w.error.data?W=`Error data: ${st(w.error.data)}

`:w.result?W=`Result: ${st(w.result)}

`:w.error===void 0&&(W=`No result returned.

`)),B.log(`Sending response '${M} - (${w.id})'. Processing request took ${Date.now()-H}ms`,W)}else rt("send-response",w)}function vr(w){if(!(q===Se.Off||!B))if(N===hn.Text){let M;(q===Se.Verbose||q===Se.Compact)&&w.params&&(M=`Params: ${st(w.params)}

`),B.log(`Received request '${w.method} - (${w.id})'.`,M)}else rt("receive-request",w)}function Dn(w){if(!(q===Se.Off||!B||w.method===$s.type.method))if(N===hn.Text){let M;(q===Se.Verbose||q===Se.Compact)&&(w.params?M=`Params: ${st(w.params)}

`:M=`No parameters provided.

`),B.log(`Received notification '${w.method}'.`,M)}else rt("receive-notification",w)}function Gn(w,M){if(!(q===Se.Off||!B))if(N===hn.Text){let H;if((q===Se.Verbose||q===Se.Compact)&&(w.error&&w.error.data?H=`Error data: ${st(w.error.data)}

`:w.result?H=`Result: ${st(w.result)}

`:w.error===void 0&&(H=`No result returned.

`)),M){let W=w.error?` Request failed: ${w.error.message} (${w.error.code}).`:"";B.log(`Received response '${M.method} - (${w.id})' in ${Date.now()-M.timerStart}ms.${W}`,H)}else B.log(`Received response ${w.id} without active response promise.`,H)}else rt("receive-response",w)}function rt(w,M){if(!B||q===Se.Off)return;let H={isLSPMessage:!0,type:w,message:M,timestamp:Date.now()};B.log(H)}function kt(){if(Pe())throw new ki(To.Closed,"Connection is closed.");if(ot())throw new ki(To.Disposed,"Connection is disposed.")}function St(){if(vn())throw new ki(To.AlreadyListening,"Connection is already listening")}function cn(){if(!vn())throw new Error("Call listen() first.")}function Yt(w){return w===void 0?null:w}function Xn(w){if(w!==null)return w}function ar(w){return w!=null&&!Array.isArray(w)&&typeof w=="object"}function Ln(w,M){switch(w){case ee.ParameterStructures.auto:return ar(M)?Xn(M):[Yt(M)];case ee.ParameterStructures.byName:if(!ar(M))throw new Error("Received parameters by name but param is not an object literal.");return Xn(M);case ee.ParameterStructures.byPosition:return[Yt(M)];default:throw new Error(`Unknown parameter structure ${w.toString()}`)}}function cr(w,M){let H,W=w.numberOfParams;switch(W){case 0:H=void 0;break;case 1:H=Ln(w.parameterStructures,M[0]);break;default:H=[];for(let we=0;we<M.length&&we<W;we++)H.push(Yt(M[we]));if(M.length<W)for(let we=M.length;we<W;we++)H.push(null);break}return H}let Ut={sendNotification:(w,...M)=>{kt();let H,W;if(Xe.string(w)){H=w;let ve=M[0],Ee=0,ke=ee.ParameterStructures.auto;ee.ParameterStructures.is(ve)&&(Ee=1,ke=ve);let le=M.length,Re=le-Ee;switch(Re){case 0:W=void 0;break;case 1:W=Ln(ke,M[Ee]);break;default:if(ke===ee.ParameterStructures.byName)throw new Error(`Received ${Re} parameters for 'by Name' notification parameter structure.`);W=M.slice(Ee,le).map(pe=>Yt(pe));break}}else{let ve=M;H=w.method,W=cr(w,ve)}let we={jsonrpc:c,method:H,params:W};return On(we),e.write(we).catch(ve=>{throw i.error("Sending notification failed."),ve})},onNotification:(w,M)=>{kt();let H;return Xe.func(w)?h=w:M&&(Xe.string(w)?(H=w,p.set(w,{type:void 0,handler:M})):(H=w.method,p.set(w.method,{type:w,handler:M}))),{dispose:()=>{H!==void 0?p.delete(H):h=void 0}}},onProgress:(w,M,H)=>{if(v.has(M))throw new Error(`Progress handler for token ${M} already registered`);return v.set(M,H),{dispose:()=>{v.delete(M)}}},sendProgress:(w,M,H)=>Ut.sendNotification(So.type,{token:M,value:H}),onUnhandledProgress:He.event,sendRequest:(w,...M)=>{kt(),cn();let H,W,we;if(Xe.string(w)){H=w;let le=M[0],Re=M[M.length-1],pe=0,Fe=ee.ParameterStructures.auto;ee.ParameterStructures.is(le)&&(pe=1,Fe=le);let Qe=M.length;gl.CancellationToken.is(Re)&&(Qe=Qe-1,we=Re);let bt=Qe-pe;switch(bt){case 0:W=void 0;break;case 1:W=Ln(Fe,M[pe]);break;default:if(Fe===ee.ParameterStructures.byName)throw new Error(`Received ${bt} parameters for 'by Name' request parameter structure.`);W=M.slice(pe,Qe).map(Cr=>Yt(Cr));break}}else{let le=M;H=w.method,W=cr(w,le);let Re=w.numberOfParams;we=gl.CancellationToken.is(le[Re])?le[Re]:void 0}let ve=o++,Ee;we&&(Ee=we.onCancellationRequested(()=>{let le=Ge.sender.sendCancellation(Ut,ve);return le===void 0?(i.log(`Received no promise from cancellation strategy when cancelling id ${ve}`),Promise.resolve()):le.catch(()=>{i.log(`Sending cancellation messages for id ${ve} failed`)})}));let ke={jsonrpc:c,id:ve,method:H,params:W};return sr(ke),typeof Ge.sender.enableCancellation=="function"&&Ge.sender.enableCancellation(ke),new Promise(async(le,Re)=>{let pe=bt=>{le(bt),Ge.sender.cleanup(ve),Ee?.dispose()},Fe=bt=>{Re(bt),Ge.sender.cleanup(ve),Ee?.dispose()},Qe={method:H,timerStart:Date.now(),resolve:pe,reject:Fe};try{await e.write(ke),E.set(ve,Qe)}catch(bt){throw i.error("Sending request failed."),Qe.reject(new ee.ResponseError(ee.ErrorCodes.MessageWriteError,bt.message?bt.message:"Unknown reason")),bt}})},onRequest:(w,M)=>{kt();let H=null;return yl.is(w)?(H=void 0,u=w):Xe.string(w)?(H=null,M!==void 0&&(H=w,d.set(w,{handler:M,type:void 0}))):M!==void 0&&(H=w.method,d.set(w.method,{type:w,handler:M})),{dispose:()=>{H!==null&&(H!==void 0?d.delete(H):u=void 0)}}},hasPendingResponse:()=>E.size>0,trace:async(w,M,H)=>{let W=!1,we=hn.Text;H!==void 0&&(Xe.boolean(H)?W=H:(W=H.sendNotification||!1,we=H.traceFormat||hn.Text)),q=w,N=we,q===Se.Off?B=void 0:B=M,W&&!Pe()&&!ot()&&await Ut.sendNotification(bl.type,{value:Se.toString(w)})},onError:V.event,onClose:J.event,onUnhandledNotification:ie.event,onDispose:Ie.event,end:()=>{e.end()},dispose:()=>{if(ot())return;se=$n.Disposed,Ie.fire(void 0);let w=new ee.ResponseError(ee.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(let M of E.values())M.reject(w);E=new Map,O=new Map,I=new Set,R=new Qm.LinkedMap,Xe.func(e.dispose)&&e.dispose(),Xe.func(n.dispose)&&n.dispose()},listen:()=>{kt(),St(),se=$n.Listening,n.listen(br)},inspect:()=>{(0,Zm.default)().console.log("inspect")}};return Ut.onNotification($s.type,w=>{if(q===Se.Off||!B)return;let M=q===Se.Verbose||q===Se.Compact;B.log(w.message,M?w.verbose:void 0)}),Ut.onNotification(So.type,w=>{let M=v.get(w.token);M?M(w.value):He.fire(w)}),Ut}ae.createMessageConnection=P_});var Vs=k(F=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0});F.ProgressType=F.ProgressToken=F.createMessageConnection=F.NullLogger=F.ConnectionOptions=F.ConnectionStrategy=F.AbstractMessageBuffer=F.WriteableStreamMessageWriter=F.AbstractMessageWriter=F.MessageWriter=F.ReadableStreamMessageReader=F.AbstractMessageReader=F.MessageReader=F.SharedArrayReceiverStrategy=F.SharedArraySenderStrategy=F.CancellationToken=F.CancellationTokenSource=F.Emitter=F.Event=F.Disposable=F.LRUCache=F.Touch=F.LinkedMap=F.ParameterStructures=F.NotificationType9=F.NotificationType8=F.NotificationType7=F.NotificationType6=F.NotificationType5=F.NotificationType4=F.NotificationType3=F.NotificationType2=F.NotificationType1=F.NotificationType0=F.NotificationType=F.ErrorCodes=F.ResponseError=F.RequestType9=F.RequestType8=F.RequestType7=F.RequestType6=F.RequestType5=F.RequestType4=F.RequestType3=F.RequestType2=F.RequestType1=F.RequestType0=F.RequestType=F.Message=F.RAL=void 0;F.MessageStrategy=F.CancellationStrategy=F.CancellationSenderStrategy=F.CancellationReceiverStrategy=F.ConnectionError=F.ConnectionErrors=F.LogTraceNotification=F.SetTraceNotification=F.TraceFormat=F.TraceValues=F.Trace=void 0;var Ne=Bu();Object.defineProperty(F,"Message",{enumerable:!0,get:function(){return Ne.Message}});Object.defineProperty(F,"RequestType",{enumerable:!0,get:function(){return Ne.RequestType}});Object.defineProperty(F,"RequestType0",{enumerable:!0,get:function(){return Ne.RequestType0}});Object.defineProperty(F,"RequestType1",{enumerable:!0,get:function(){return Ne.RequestType1}});Object.defineProperty(F,"RequestType2",{enumerable:!0,get:function(){return Ne.RequestType2}});Object.defineProperty(F,"RequestType3",{enumerable:!0,get:function(){return Ne.RequestType3}});Object.defineProperty(F,"RequestType4",{enumerable:!0,get:function(){return Ne.RequestType4}});Object.defineProperty(F,"RequestType5",{enumerable:!0,get:function(){return Ne.RequestType5}});Object.defineProperty(F,"RequestType6",{enumerable:!0,get:function(){return Ne.RequestType6}});Object.defineProperty(F,"RequestType7",{enumerable:!0,get:function(){return Ne.RequestType7}});Object.defineProperty(F,"RequestType8",{enumerable:!0,get:function(){return Ne.RequestType8}});Object.defineProperty(F,"RequestType9",{enumerable:!0,get:function(){return Ne.RequestType9}});Object.defineProperty(F,"ResponseError",{enumerable:!0,get:function(){return Ne.ResponseError}});Object.defineProperty(F,"ErrorCodes",{enumerable:!0,get:function(){return Ne.ErrorCodes}});Object.defineProperty(F,"NotificationType",{enumerable:!0,get:function(){return Ne.NotificationType}});Object.defineProperty(F,"NotificationType0",{enumerable:!0,get:function(){return Ne.NotificationType0}});Object.defineProperty(F,"NotificationType1",{enumerable:!0,get:function(){return Ne.NotificationType1}});Object.defineProperty(F,"NotificationType2",{enumerable:!0,get:function(){return Ne.NotificationType2}});Object.defineProperty(F,"NotificationType3",{enumerable:!0,get:function(){return Ne.NotificationType3}});Object.defineProperty(F,"NotificationType4",{enumerable:!0,get:function(){return Ne.NotificationType4}});Object.defineProperty(F,"NotificationType5",{enumerable:!0,get:function(){return Ne.NotificationType5}});Object.defineProperty(F,"NotificationType6",{enumerable:!0,get:function(){return Ne.NotificationType6}});Object.defineProperty(F,"NotificationType7",{enumerable:!0,get:function(){return Ne.NotificationType7}});Object.defineProperty(F,"NotificationType8",{enumerable:!0,get:function(){return Ne.NotificationType8}});Object.defineProperty(F,"NotificationType9",{enumerable:!0,get:function(){return Ne.NotificationType9}});Object.defineProperty(F,"ParameterStructures",{enumerable:!0,get:function(){return Ne.ParameterStructures}});var wl=Gu();Object.defineProperty(F,"LinkedMap",{enumerable:!0,get:function(){return wl.LinkedMap}});Object.defineProperty(F,"LRUCache",{enumerable:!0,get:function(){return wl.LRUCache}});Object.defineProperty(F,"Touch",{enumerable:!0,get:function(){return wl.Touch}});var q_=Hm();Object.defineProperty(F,"Disposable",{enumerable:!0,get:function(){return q_.Disposable}});var r0=xi();Object.defineProperty(F,"Event",{enumerable:!0,get:function(){return r0.Event}});Object.defineProperty(F,"Emitter",{enumerable:!0,get:function(){return r0.Emitter}});var i0=Ms();Object.defineProperty(F,"CancellationTokenSource",{enumerable:!0,get:function(){return i0.CancellationTokenSource}});Object.defineProperty(F,"CancellationToken",{enumerable:!0,get:function(){return i0.CancellationToken}});var o0=zm();Object.defineProperty(F,"SharedArraySenderStrategy",{enumerable:!0,get:function(){return o0.SharedArraySenderStrategy}});Object.defineProperty(F,"SharedArrayReceiverStrategy",{enumerable:!0,get:function(){return o0.SharedArrayReceiverStrategy}});var Dl=Vm();Object.defineProperty(F,"MessageReader",{enumerable:!0,get:function(){return Dl.MessageReader}});Object.defineProperty(F,"AbstractMessageReader",{enumerable:!0,get:function(){return Dl.AbstractMessageReader}});Object.defineProperty(F,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return Dl.ReadableStreamMessageReader}});var Rl=Ym();Object.defineProperty(F,"MessageWriter",{enumerable:!0,get:function(){return Rl.MessageWriter}});Object.defineProperty(F,"AbstractMessageWriter",{enumerable:!0,get:function(){return Rl.AbstractMessageWriter}});Object.defineProperty(F,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return Rl.WriteableStreamMessageWriter}});var I_=Jm();Object.defineProperty(F,"AbstractMessageBuffer",{enumerable:!0,get:function(){return I_.AbstractMessageBuffer}});var qt=n0();Object.defineProperty(F,"ConnectionStrategy",{enumerable:!0,get:function(){return qt.ConnectionStrategy}});Object.defineProperty(F,"ConnectionOptions",{enumerable:!0,get:function(){return qt.ConnectionOptions}});Object.defineProperty(F,"NullLogger",{enumerable:!0,get:function(){return qt.NullLogger}});Object.defineProperty(F,"createMessageConnection",{enumerable:!0,get:function(){return qt.createMessageConnection}});Object.defineProperty(F,"ProgressToken",{enumerable:!0,get:function(){return qt.ProgressToken}});Object.defineProperty(F,"ProgressType",{enumerable:!0,get:function(){return qt.ProgressType}});Object.defineProperty(F,"Trace",{enumerable:!0,get:function(){return qt.Trace}});Object.defineProperty(F,"TraceValues",{enumerable:!0,get:function(){return qt.TraceValues}});Object.defineProperty(F,"TraceFormat",{enumerable:!0,get:function(){return qt.TraceFormat}});Object.defineProperty(F,"SetTraceNotification",{enumerable:!0,get:function(){return qt.SetTraceNotification}});Object.defineProperty(F,"LogTraceNotification",{enumerable:!0,get:function(){return qt.LogTraceNotification}});Object.defineProperty(F,"ConnectionErrors",{enumerable:!0,get:function(){return qt.ConnectionErrors}});Object.defineProperty(F,"ConnectionError",{enumerable:!0,get:function(){return qt.ConnectionError}});Object.defineProperty(F,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return qt.CancellationReceiverStrategy}});Object.defineProperty(F,"CancellationSenderStrategy",{enumerable:!0,get:function(){return qt.CancellationSenderStrategy}});Object.defineProperty(F,"CancellationStrategy",{enumerable:!0,get:function(){return qt.CancellationStrategy}});Object.defineProperty(F,"MessageStrategy",{enumerable:!0,get:function(){return qt.MessageStrategy}});var k_=qr();F.RAL=k_.default});var c0=k(El=>{"use strict";Object.defineProperty(El,"__esModule",{value:!0});var s0=require("util"),lr=Vs(),Bs=class n extends lr.AbstractMessageBuffer{constructor(e="utf-8"){super(e)}emptyBuffer(){return n.emptyBuffer}fromString(e,t){return Buffer.from(e,t)}toString(e,t){return e instanceof Buffer?e.toString(t):new s0.TextDecoder(t).decode(e)}asNative(e,t){return t===void 0?e instanceof Buffer?e:Buffer.from(e):e instanceof Buffer?e.slice(0,t):Buffer.from(e,0,t)}allocNative(e){return Buffer.allocUnsafe(e)}};Bs.emptyBuffer=Buffer.allocUnsafe(0);var _l=class{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),lr.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),lr.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),lr.Disposable.create(()=>this.stream.off("end",e))}onData(e){return this.stream.on("data",e),lr.Disposable.create(()=>this.stream.off("data",e))}},Sl=class{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),lr.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),lr.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),lr.Disposable.create(()=>this.stream.off("end",e))}write(e,t){return new Promise((r,i)=>{let o=s=>{s==null?r():i(s)};typeof e=="string"?this.stream.write(e,t,o):this.stream.write(e,o)})}end(){this.stream.end()}},a0=Object.freeze({messageBuffer:Object.freeze({create:n=>new Bs(n)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(n,e)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(n,void 0,0),e.charset))}catch(t){return Promise.reject(t)}}}),decoder:Object.freeze({name:"application/json",decode:(n,e)=>{try{return n instanceof Buffer?Promise.resolve(JSON.parse(n.toString(e.charset))):Promise.resolve(JSON.parse(new s0.TextDecoder(e.charset).decode(n)))}catch(t){return Promise.reject(t)}}})}),stream:Object.freeze({asReadableStream:n=>new _l(n),asWritableStream:n=>new Sl(n)}),console,timer:Object.freeze({setTimeout(n,e,...t){let r=setTimeout(n,e,...t);return{dispose:()=>clearTimeout(r)}},setImmediate(n,...e){let t=setImmediate(n,...e);return{dispose:()=>clearImmediate(t)}},setInterval(n,e,...t){let r=setInterval(n,e,...t);return{dispose:()=>clearInterval(r)}}})});function Tl(){return a0}(function(n){function e(){lr.RAL.install(a0)}n.install=e})(Tl||(Tl={}));El.default=Tl});var ti=k(be=>{"use strict";var F_=be&&be.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,i)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),M_=be&&be.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&F_(e,n,t)};Object.defineProperty(be,"__esModule",{value:!0});be.createMessageConnection=be.createServerSocketTransport=be.createClientSocketTransport=be.createServerPipeTransport=be.createClientPipeTransport=be.generateRandomPipeName=be.StreamMessageWriter=be.StreamMessageReader=be.SocketMessageWriter=be.SocketMessageReader=be.PortMessageWriter=be.PortMessageReader=be.IPCMessageWriter=be.IPCMessageReader=void 0;var Fi=c0();Fi.default.install();var u0=require("path"),O_=require("os"),L_=require("crypto"),Xs=require("net"),gn=Vs();M_(Vs(),be);var xl=class extends gn.AbstractMessageReader{constructor(e){super(),this.process=e;let t=this.process;t.on("error",r=>this.fireError(r)),t.on("close",()=>this.fireClose())}listen(e){return this.process.on("message",e),gn.Disposable.create(()=>this.process.off("message",e))}};be.IPCMessageReader=xl;var Pl=class extends gn.AbstractMessageWriter{constructor(e){super(),this.process=e,this.errorCount=0;let t=this.process;t.on("error",r=>this.fireError(r)),t.on("close",()=>this.fireClose)}write(e){try{return typeof this.process.send=="function"&&this.process.send(e,void 0,void 0,t=>{t?(this.errorCount++,this.handleError(t,e)):this.errorCount=0}),Promise.resolve()}catch(t){return this.handleError(t,e),Promise.reject(t)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){}};be.IPCMessageWriter=Pl;var ql=class extends gn.AbstractMessageReader{constructor(e){super(),this.onData=new gn.Emitter,e.on("close",()=>this.fireClose),e.on("error",t=>this.fireError(t)),e.on("message",t=>{this.onData.fire(t)})}listen(e){return this.onData.event(e)}};be.PortMessageReader=ql;var Il=class extends gn.AbstractMessageWriter{constructor(e){super(),this.port=e,this.errorCount=0,e.on("close",()=>this.fireClose()),e.on("error",t=>this.fireError(t))}write(e){try{return this.port.postMessage(e),Promise.resolve()}catch(t){return this.handleError(t,e),Promise.reject(t)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){}};be.PortMessageWriter=Il;var Qr=class extends gn.ReadableStreamMessageReader{constructor(e,t="utf-8"){super((0,Fi.default)().stream.asReadableStream(e),t)}};be.SocketMessageReader=Qr;var ei=class extends gn.WriteableStreamMessageWriter{constructor(e,t){super((0,Fi.default)().stream.asWritableStream(e),t),this.socket=e}dispose(){super.dispose(),this.socket.destroy()}};be.SocketMessageWriter=ei;var Ks=class extends gn.ReadableStreamMessageReader{constructor(e,t){super((0,Fi.default)().stream.asReadableStream(e),t)}};be.StreamMessageReader=Ks;var Gs=class extends gn.WriteableStreamMessageWriter{constructor(e,t){super((0,Fi.default)().stream.asWritableStream(e),t)}};be.StreamMessageWriter=Gs;var l0=process.env.XDG_RUNTIME_DIR,A_=new Map([["linux",107],["darwin",103]]);function N_(){let n=(0,L_.randomBytes)(21).toString("hex");if(process.platform==="win32")return`\\\\.\\pipe\\vscode-jsonrpc-${n}-sock`;let e;l0?e=u0.join(l0,`vscode-ipc-${n}.sock`):e=u0.join(O_.tmpdir(),`vscode-${n}.sock`);let t=A_.get(process.platform);return t!==void 0&&e.length>t&&(0,Fi.default)().console.warn(`WARNING: IPC handle "${e}" is longer than ${t} characters.`),e}be.generateRandomPipeName=N_;function $_(n,e="utf-8"){let t,r=new Promise((i,o)=>{t=i});return new Promise((i,o)=>{let s=(0,Xs.createServer)(a=>{s.close(),t([new Qr(a,e),new ei(a,e)])});s.on("error",o),s.listen(n,()=>{s.removeListener("error",o),i({onConnected:()=>r})})})}be.createClientPipeTransport=$_;function j_(n,e="utf-8"){let t=(0,Xs.createConnection)(n);return[new Qr(t,e),new ei(t,e)]}be.createServerPipeTransport=j_;function H_(n,e="utf-8"){let t,r=new Promise((i,o)=>{t=i});return new Promise((i,o)=>{let s=(0,Xs.createServer)(a=>{s.close(),t([new Qr(a,e),new ei(a,e)])});s.on("error",o),s.listen(n,"127.0.0.1",()=>{s.removeListener("error",o),i({onConnected:()=>r})})})}be.createClientSocketTransport=H_;function U_(n,e="utf-8"){let t=(0,Xs.createConnection)(n,"127.0.0.1");return[new Qr(t,e),new ei(t,e)]}be.createServerSocketTransport=U_;function z_(n){let e=n;return e.read!==void 0&&e.addListener!==void 0}function W_(n){let e=n;return e.write!==void 0&&e.addListener!==void 0}function V_(n,e,t,r){t||(t=gn.NullLogger);let i=z_(n)?new Ks(n):n,o=W_(e)?new Gs(e):e;return gn.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),(0,gn.createMessageConnection)(i,o,t,r)}be.createMessageConnection=V_});var kl=k((Zq,d0)=>{"use strict";d0.exports=ti()});var Js=k((f0,Ys)=>{(function(n){if(typeof Ys=="object"&&typeof Ys.exports=="object"){var e=n(require,f0);e!==void 0&&(Ys.exports=e)}else typeof define=="function"&&define.amd&&define(["require","exports"],n)})(function(n,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextDocument=e.EOL=e.WorkspaceFolder=e.InlineCompletionContext=e.SelectedCompletionInfo=e.InlineCompletionTriggerKind=e.InlineCompletionList=e.InlineCompletionItem=e.StringValue=e.InlayHint=e.InlayHintLabelPart=e.InlayHintKind=e.InlineValueContext=e.InlineValueEvaluatableExpression=e.InlineValueVariableLookup=e.InlineValueText=e.SemanticTokens=e.SemanticTokenModifiers=e.SemanticTokenTypes=e.SelectionRange=e.DocumentLink=e.FormattingOptions=e.CodeLens=e.CodeAction=e.CodeActionContext=e.CodeActionTriggerKind=e.CodeActionKind=e.DocumentSymbol=e.WorkspaceSymbol=e.SymbolInformation=e.SymbolTag=e.SymbolKind=e.DocumentHighlight=e.DocumentHighlightKind=e.SignatureInformation=e.ParameterInformation=e.Hover=e.MarkedString=e.CompletionList=e.CompletionItem=e.CompletionItemLabelDetails=e.InsertTextMode=e.InsertReplaceEdit=e.CompletionItemTag=e.InsertTextFormat=e.CompletionItemKind=e.MarkupContent=e.MarkupKind=e.TextDocumentItem=e.OptionalVersionedTextDocumentIdentifier=e.VersionedTextDocumentIdentifier=e.TextDocumentIdentifier=e.WorkspaceChange=e.WorkspaceEdit=e.DeleteFile=e.RenameFile=e.CreateFile=e.TextDocumentEdit=e.AnnotatedTextEdit=e.ChangeAnnotationIdentifier=e.ChangeAnnotation=e.TextEdit=e.Command=e.Diagnostic=e.CodeDescription=e.DiagnosticTag=e.DiagnosticSeverity=e.DiagnosticRelatedInformation=e.FoldingRange=e.FoldingRangeKind=e.ColorPresentation=e.ColorInformation=e.Color=e.LocationLink=e.Location=e.Range=e.Position=e.uinteger=e.integer=e.URI=e.DocumentUri=void 0;var t;(function(m){function D(_){return typeof _=="string"}m.is=D})(t||(e.DocumentUri=t={}));var r;(function(m){function D(_){return typeof _=="string"}m.is=D})(r||(e.URI=r={}));var i;(function(m){m.MIN_VALUE=-2147483648,m.MAX_VALUE=2147483647;function D(_){return typeof _=="number"&&m.MIN_VALUE<=_&&_<=m.MAX_VALUE}m.is=D})(i||(e.integer=i={}));var o;(function(m){m.MIN_VALUE=0,m.MAX_VALUE=2147483647;function D(_){return typeof _=="number"&&m.MIN_VALUE<=_&&_<=m.MAX_VALUE}m.is=D})(o||(e.uinteger=o={}));var s;(function(m){function D(b,f){return b===Number.MAX_VALUE&&(b=o.MAX_VALUE),f===Number.MAX_VALUE&&(f=o.MAX_VALUE),{line:b,character:f}}m.create=D;function _(b){var f=b;return T.objectLiteral(f)&&T.uinteger(f.line)&&T.uinteger(f.character)}m.is=_})(s||(e.Position=s={}));var a;(function(m){function D(b,f,x,L){if(T.uinteger(b)&&T.uinteger(f)&&T.uinteger(x)&&T.uinteger(L))return{start:s.create(b,f),end:s.create(x,L)};if(s.is(b)&&s.is(f))return{start:b,end:f};throw new Error("Range#create called with invalid arguments[".concat(b,", ").concat(f,", ").concat(x,", ").concat(L,"]"))}m.create=D;function _(b){var f=b;return T.objectLiteral(f)&&s.is(f.start)&&s.is(f.end)}m.is=_})(a||(e.Range=a={}));var c;(function(m){function D(b,f){return{uri:b,range:f}}m.create=D;function _(b){var f=b;return T.objectLiteral(f)&&a.is(f.range)&&(T.string(f.uri)||T.undefined(f.uri))}m.is=_})(c||(e.Location=c={}));var u;(function(m){function D(b,f,x,L){return{targetUri:b,targetRange:f,targetSelectionRange:x,originSelectionRange:L}}m.create=D;function _(b){var f=b;return T.objectLiteral(f)&&a.is(f.targetRange)&&T.string(f.targetUri)&&a.is(f.targetSelectionRange)&&(a.is(f.originSelectionRange)||T.undefined(f.originSelectionRange))}m.is=_})(u||(e.LocationLink=u={}));var d;(function(m){function D(b,f,x,L){return{red:b,green:f,blue:x,alpha:L}}m.create=D;function _(b){var f=b;return T.objectLiteral(f)&&T.numberRange(f.red,0,1)&&T.numberRange(f.green,0,1)&&T.numberRange(f.blue,0,1)&&T.numberRange(f.alpha,0,1)}m.is=_})(d||(e.Color=d={}));var h;(function(m){function D(b,f){return{range:b,color:f}}m.create=D;function _(b){var f=b;return T.objectLiteral(f)&&a.is(f.range)&&d.is(f.color)}m.is=_})(h||(e.ColorInformation=h={}));var p;(function(m){function D(b,f,x){return{label:b,textEdit:f,additionalTextEdits:x}}m.create=D;function _(b){var f=b;return T.objectLiteral(f)&&T.string(f.label)&&(T.undefined(f.textEdit)||B.is(f))&&(T.undefined(f.additionalTextEdits)||T.typedArray(f.additionalTextEdits,B.is))}m.is=_})(p||(e.ColorPresentation=p={}));var v;(function(m){m.Comment="comment",m.Imports="imports",m.Region="region"})(v||(e.FoldingRangeKind=v={}));var y;(function(m){function D(b,f,x,L,ne,Ue){var Me={startLine:b,endLine:f};return T.defined(x)&&(Me.startCharacter=x),T.defined(L)&&(Me.endCharacter=L),T.defined(ne)&&(Me.kind=ne),T.defined(Ue)&&(Me.collapsedText=Ue),Me}m.create=D;function _(b){var f=b;return T.objectLiteral(f)&&T.uinteger(f.startLine)&&T.uinteger(f.startLine)&&(T.undefined(f.startCharacter)||T.uinteger(f.startCharacter))&&(T.undefined(f.endCharacter)||T.uinteger(f.endCharacter))&&(T.undefined(f.kind)||T.string(f.kind))}m.is=_})(y||(e.FoldingRange=y={}));var R;(function(m){function D(b,f){return{location:b,message:f}}m.create=D;function _(b){var f=b;return T.defined(f)&&c.is(f.location)&&T.string(f.message)}m.is=_})(R||(e.DiagnosticRelatedInformation=R={}));var E;(function(m){m.Error=1,m.Warning=2,m.Information=3,m.Hint=4})(E||(e.DiagnosticSeverity=E={}));var I;(function(m){m.Unnecessary=1,m.Deprecated=2})(I||(e.DiagnosticTag=I={}));var O;(function(m){function D(_){var b=_;return T.objectLiteral(b)&&T.string(b.href)}m.is=D})(O||(e.CodeDescription=O={}));var q;(function(m){function D(b,f,x,L,ne,Ue){var Me={range:b,message:f};return T.defined(x)&&(Me.severity=x),T.defined(L)&&(Me.code=L),T.defined(ne)&&(Me.source=ne),T.defined(Ue)&&(Me.relatedInformation=Ue),Me}m.create=D;function _(b){var f,x=b;return T.defined(x)&&a.is(x.range)&&T.string(x.message)&&(T.number(x.severity)||T.undefined(x.severity))&&(T.integer(x.code)||T.string(x.code)||T.undefined(x.code))&&(T.undefined(x.codeDescription)||T.string((f=x.codeDescription)===null||f===void 0?void 0:f.href))&&(T.string(x.source)||T.undefined(x.source))&&(T.undefined(x.relatedInformation)||T.typedArray(x.relatedInformation,R.is))}m.is=_})(q||(e.Diagnostic=q={}));var N;(function(m){function D(b,f){for(var x=[],L=2;L<arguments.length;L++)x[L-2]=arguments[L];var ne={title:b,command:f};return T.defined(x)&&x.length>0&&(ne.arguments=x),ne}m.create=D;function _(b){var f=b;return T.defined(f)&&T.string(f.title)&&T.string(f.command)}m.is=_})(N||(e.Command=N={}));var B;(function(m){function D(x,L){return{range:x,newText:L}}m.replace=D;function _(x,L){return{range:{start:x,end:x},newText:L}}m.insert=_;function b(x){return{range:x,newText:""}}m.del=b;function f(x){var L=x;return T.objectLiteral(L)&&T.string(L.newText)&&a.is(L.range)}m.is=f})(B||(e.TextEdit=B={}));var se;(function(m){function D(b,f,x){var L={label:b};return f!==void 0&&(L.needsConfirmation=f),x!==void 0&&(L.description=x),L}m.create=D;function _(b){var f=b;return T.objectLiteral(f)&&T.string(f.label)&&(T.boolean(f.needsConfirmation)||f.needsConfirmation===void 0)&&(T.string(f.description)||f.description===void 0)}m.is=_})(se||(e.ChangeAnnotation=se={}));var V;(function(m){function D(_){var b=_;return T.string(b)}m.is=D})(V||(e.ChangeAnnotationIdentifier=V={}));var J;(function(m){function D(x,L,ne){return{range:x,newText:L,annotationId:ne}}m.replace=D;function _(x,L,ne){return{range:{start:x,end:x},newText:L,annotationId:ne}}m.insert=_;function b(x,L){return{range:x,newText:"",annotationId:L}}m.del=b;function f(x){var L=x;return B.is(L)&&(se.is(L.annotationId)||V.is(L.annotationId))}m.is=f})(J||(e.AnnotatedTextEdit=J={}));var ie;(function(m){function D(b,f){return{textDocument:b,edits:f}}m.create=D;function _(b){var f=b;return T.defined(f)&&Pe.is(f.textDocument)&&Array.isArray(f.edits)}m.is=_})(ie||(e.TextDocumentEdit=ie={}));var He;(function(m){function D(b,f,x){var L={kind:"create",uri:b};return f!==void 0&&(f.overwrite!==void 0||f.ignoreIfExists!==void 0)&&(L.options=f),x!==void 0&&(L.annotationId=x),L}m.create=D;function _(b){var f=b;return f&&f.kind==="create"&&T.string(f.uri)&&(f.options===void 0||(f.options.overwrite===void 0||T.boolean(f.options.overwrite))&&(f.options.ignoreIfExists===void 0||T.boolean(f.options.ignoreIfExists)))&&(f.annotationId===void 0||V.is(f.annotationId))}m.is=_})(He||(e.CreateFile=He={}));var Ie;(function(m){function D(b,f,x,L){var ne={kind:"rename",oldUri:b,newUri:f};return x!==void 0&&(x.overwrite!==void 0||x.ignoreIfExists!==void 0)&&(ne.options=x),L!==void 0&&(ne.annotationId=L),ne}m.create=D;function _(b){var f=b;return f&&f.kind==="rename"&&T.string(f.oldUri)&&T.string(f.newUri)&&(f.options===void 0||(f.options.overwrite===void 0||T.boolean(f.options.overwrite))&&(f.options.ignoreIfExists===void 0||T.boolean(f.options.ignoreIfExists)))&&(f.annotationId===void 0||V.is(f.annotationId))}m.is=_})(Ie||(e.RenameFile=Ie={}));var Ge;(function(m){function D(b,f,x){var L={kind:"delete",uri:b};return f!==void 0&&(f.recursive!==void 0||f.ignoreIfNotExists!==void 0)&&(L.options=f),x!==void 0&&(L.annotationId=x),L}m.create=D;function _(b){var f=b;return f&&f.kind==="delete"&&T.string(f.uri)&&(f.options===void 0||(f.options.recursive===void 0||T.boolean(f.options.recursive))&&(f.options.ignoreIfNotExists===void 0||T.boolean(f.options.ignoreIfNotExists)))&&(f.annotationId===void 0||V.is(f.annotationId))}m.is=_})(Ge||(e.DeleteFile=Ge={}));var Gt;(function(m){function D(_){var b=_;return b&&(b.changes!==void 0||b.documentChanges!==void 0)&&(b.documentChanges===void 0||b.documentChanges.every(function(f){return T.string(f.kind)?He.is(f)||Ie.is(f)||Ge.is(f):ie.is(f)}))}m.is=D})(Gt||(e.WorkspaceEdit=Gt={}));var ft=function(){function m(D,_){this.edits=D,this.changeAnnotations=_}return m.prototype.insert=function(D,_,b){var f,x;if(b===void 0?f=B.insert(D,_):V.is(b)?(x=b,f=J.insert(D,_,b)):(this.assertChangeAnnotations(this.changeAnnotations),x=this.changeAnnotations.manage(b),f=J.insert(D,_,x)),this.edits.push(f),x!==void 0)return x},m.prototype.replace=function(D,_,b){var f,x;if(b===void 0?f=B.replace(D,_):V.is(b)?(x=b,f=J.replace(D,_,b)):(this.assertChangeAnnotations(this.changeAnnotations),x=this.changeAnnotations.manage(b),f=J.replace(D,_,x)),this.edits.push(f),x!==void 0)return x},m.prototype.delete=function(D,_){var b,f;if(_===void 0?b=B.del(D):V.is(_)?(f=_,b=J.del(D,_)):(this.assertChangeAnnotations(this.changeAnnotations),f=this.changeAnnotations.manage(_),b=J.del(D,f)),this.edits.push(b),f!==void 0)return f},m.prototype.add=function(D){this.edits.push(D)},m.prototype.all=function(){return this.edits},m.prototype.clear=function(){this.edits.splice(0,this.edits.length)},m.prototype.assertChangeAnnotations=function(D){if(D===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},m}(),it=function(){function m(D){this._annotations=D===void 0?Object.create(null):D,this._counter=0,this._size=0}return m.prototype.all=function(){return this._annotations},Object.defineProperty(m.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),m.prototype.manage=function(D,_){var b;if(V.is(D)?b=D:(b=this.nextId(),_=D),this._annotations[b]!==void 0)throw new Error("Id ".concat(b," is already in use."));if(_===void 0)throw new Error("No annotation provided for id ".concat(b));return this._annotations[b]=_,this._size++,b},m.prototype.nextId=function(){return this._counter++,this._counter.toString()},m}(),Oe=function(){function m(D){var _=this;this._textEditChanges=Object.create(null),D!==void 0?(this._workspaceEdit=D,D.documentChanges?(this._changeAnnotations=new it(D.changeAnnotations),D.changeAnnotations=this._changeAnnotations.all(),D.documentChanges.forEach(function(b){if(ie.is(b)){var f=new ft(b.edits,_._changeAnnotations);_._textEditChanges[b.textDocument.uri]=f}})):D.changes&&Object.keys(D.changes).forEach(function(b){var f=new ft(D.changes[b]);_._textEditChanges[b]=f})):this._workspaceEdit={}}return Object.defineProperty(m.prototype,"edit",{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),m.prototype.getTextEditChange=function(D){if(Pe.is(D)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var _={uri:D.uri,version:D.version},b=this._textEditChanges[_.uri];if(!b){var f=[],x={textDocument:_,edits:f};this._workspaceEdit.documentChanges.push(x),b=new ft(f,this._changeAnnotations),this._textEditChanges[_.uri]=b}return b}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var b=this._textEditChanges[D];if(!b){var f=[];this._workspaceEdit.changes[D]=f,b=new ft(f),this._textEditChanges[D]=b}return b}},m.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new it,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},m.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},m.prototype.createFile=function(D,_,b){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var f;se.is(_)||V.is(_)?f=_:b=_;var x,L;if(f===void 0?x=He.create(D,b):(L=V.is(f)?f:this._changeAnnotations.manage(f),x=He.create(D,b,L)),this._workspaceEdit.documentChanges.push(x),L!==void 0)return L},m.prototype.renameFile=function(D,_,b,f){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var x;se.is(b)||V.is(b)?x=b:f=b;var L,ne;if(x===void 0?L=Ie.create(D,_,f):(ne=V.is(x)?x:this._changeAnnotations.manage(x),L=Ie.create(D,_,f,ne)),this._workspaceEdit.documentChanges.push(L),ne!==void 0)return ne},m.prototype.deleteFile=function(D,_,b){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var f;se.is(_)||V.is(_)?f=_:b=_;var x,L;if(f===void 0?x=Ge.create(D,b):(L=V.is(f)?f:this._changeAnnotations.manage(f),x=Ge.create(D,b,L)),this._workspaceEdit.documentChanges.push(x),L!==void 0)return L},m}();e.WorkspaceChange=Oe;var Xt;(function(m){function D(b){return{uri:b}}m.create=D;function _(b){var f=b;return T.defined(f)&&T.string(f.uri)}m.is=_})(Xt||(e.TextDocumentIdentifier=Xt={}));var vn;(function(m){function D(b,f){return{uri:b,version:f}}m.create=D;function _(b){var f=b;return T.defined(f)&&T.string(f.uri)&&T.integer(f.version)}m.is=_})(vn||(e.VersionedTextDocumentIdentifier=vn={}));var Pe;(function(m){function D(b,f){return{uri:b,version:f}}m.create=D;function _(b){var f=b;return T.defined(f)&&T.string(f.uri)&&(f.version===null||T.integer(f.version))}m.is=_})(Pe||(e.OptionalVersionedTextDocumentIdentifier=Pe={}));var ot;(function(m){function D(b,f,x,L){return{uri:b,languageId:f,version:x,text:L}}m.create=D;function _(b){var f=b;return T.defined(f)&&T.string(f.uri)&&T.string(f.languageId)&&T.integer(f.version)&&T.string(f.text)}m.is=_})(ot||(e.TextDocumentItem=ot={}));var yt;(function(m){m.PlainText="plaintext",m.Markdown="markdown";function D(_){var b=_;return b===m.PlainText||b===m.Markdown}m.is=D})(yt||(e.MarkupKind=yt={}));var ht;(function(m){function D(_){var b=_;return T.objectLiteral(_)&&yt.is(b.kind)&&T.string(b.value)}m.is=D})(ht||(e.MarkupContent=ht={}));var Vn;(function(m){m.Text=1,m.Method=2,m.Function=3,m.Constructor=4,m.Field=5,m.Variable=6,m.Class=7,m.Interface=8,m.Module=9,m.Property=10,m.Unit=11,m.Value=12,m.Enum=13,m.Keyword=14,m.Snippet=15,m.Color=16,m.File=17,m.Reference=18,m.Folder=19,m.EnumMember=20,m.Constant=21,m.Struct=22,m.Event=23,m.Operator=24,m.TypeParameter=25})(Vn||(e.CompletionItemKind=Vn={}));var Cn;(function(m){m.PlainText=1,m.Snippet=2})(Cn||(e.InsertTextFormat=Cn={}));var Ht;(function(m){m.Deprecated=1})(Ht||(e.CompletionItemTag=Ht={}));var or;(function(m){function D(b,f,x){return{newText:b,insert:f,replace:x}}m.create=D;function _(b){var f=b;return f&&T.string(f.newText)&&a.is(f.insert)&&a.is(f.replace)}m.is=_})(or||(e.InsertReplaceEdit=or={}));var br;(function(m){m.asIs=1,m.adjustIndentation=2})(br||(e.InsertTextMode=br={}));var Bn;(function(m){function D(_){var b=_;return b&&(T.string(b.detail)||b.detail===void 0)&&(T.string(b.description)||b.description===void 0)}m.is=D})(Bn||(e.CompletionItemLabelDetails=Bn={}));var Fn;(function(m){function D(_){return{label:_}}m.create=D})(Fn||(e.CompletionItem=Fn={}));var Mn;(function(m){function D(_,b){return{items:_||[],isIncomplete:!!b}}m.create=D})(Mn||(e.CompletionList=Mn={}));var Kn;(function(m){function D(b){return b.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}m.fromPlainText=D;function _(b){var f=b;return T.string(f)||T.objectLiteral(f)&&T.string(f.language)&&T.string(f.value)}m.is=_})(Kn||(e.MarkedString=Kn={}));var st;(function(m){function D(_){var b=_;return!!b&&T.objectLiteral(b)&&(ht.is(b.contents)||Kn.is(b.contents)||T.typedArray(b.contents,Kn.is))&&(_.range===void 0||a.is(_.range))}m.is=D})(st||(e.Hover=st={}));var sr;(function(m){function D(_,b){return b?{label:_,documentation:b}:{label:_}}m.create=D})(sr||(e.ParameterInformation=sr={}));var On;(function(m){function D(_,b){for(var f=[],x=2;x<arguments.length;x++)f[x-2]=arguments[x];var L={label:_};return T.defined(b)&&(L.documentation=b),T.defined(f)?L.parameters=f:L.parameters=[],L}m.create=D})(On||(e.SignatureInformation=On={}));var wn;(function(m){m.Text=1,m.Read=2,m.Write=3})(wn||(e.DocumentHighlightKind=wn={}));var vr;(function(m){function D(_,b){var f={range:_};return T.number(b)&&(f.kind=b),f}m.create=D})(vr||(e.DocumentHighlight=vr={}));var Dn;(function(m){m.File=1,m.Module=2,m.Namespace=3,m.Package=4,m.Class=5,m.Method=6,m.Property=7,m.Field=8,m.Constructor=9,m.Enum=10,m.Interface=11,m.Function=12,m.Variable=13,m.Constant=14,m.String=15,m.Number=16,m.Boolean=17,m.Array=18,m.Object=19,m.Key=20,m.Null=21,m.EnumMember=22,m.Struct=23,m.Event=24,m.Operator=25,m.TypeParameter=26})(Dn||(e.SymbolKind=Dn={}));var Gn;(function(m){m.Deprecated=1})(Gn||(e.SymbolTag=Gn={}));var rt;(function(m){function D(_,b,f,x,L){var ne={name:_,kind:b,location:{uri:x,range:f}};return L&&(ne.containerName=L),ne}m.create=D})(rt||(e.SymbolInformation=rt={}));var kt;(function(m){function D(_,b,f,x){return x!==void 0?{name:_,kind:b,location:{uri:f,range:x}}:{name:_,kind:b,location:{uri:f}}}m.create=D})(kt||(e.WorkspaceSymbol=kt={}));var St;(function(m){function D(b,f,x,L,ne,Ue){var Me={name:b,detail:f,kind:x,range:L,selectionRange:ne};return Ue!==void 0&&(Me.children=Ue),Me}m.create=D;function _(b){var f=b;return f&&T.string(f.name)&&T.number(f.kind)&&a.is(f.range)&&a.is(f.selectionRange)&&(f.detail===void 0||T.string(f.detail))&&(f.deprecated===void 0||T.boolean(f.deprecated))&&(f.children===void 0||Array.isArray(f.children))&&(f.tags===void 0||Array.isArray(f.tags))}m.is=_})(St||(e.DocumentSymbol=St={}));var cn;(function(m){m.Empty="",m.QuickFix="quickfix",m.Refactor="refactor",m.RefactorExtract="refactor.extract",m.RefactorInline="refactor.inline",m.RefactorRewrite="refactor.rewrite",m.Source="source",m.SourceOrganizeImports="source.organizeImports",m.SourceFixAll="source.fixAll"})(cn||(e.CodeActionKind=cn={}));var Yt;(function(m){m.Invoked=1,m.Automatic=2})(Yt||(e.CodeActionTriggerKind=Yt={}));var Xn;(function(m){function D(b,f,x){var L={diagnostics:b};return f!=null&&(L.only=f),x!=null&&(L.triggerKind=x),L}m.create=D;function _(b){var f=b;return T.defined(f)&&T.typedArray(f.diagnostics,q.is)&&(f.only===void 0||T.typedArray(f.only,T.string))&&(f.triggerKind===void 0||f.triggerKind===Yt.Invoked||f.triggerKind===Yt.Automatic)}m.is=_})(Xn||(e.CodeActionContext=Xn={}));var ar;(function(m){function D(b,f,x){var L={title:b},ne=!0;return typeof f=="string"?(ne=!1,L.kind=f):N.is(f)?L.command=f:L.edit=f,ne&&x!==void 0&&(L.kind=x),L}m.create=D;function _(b){var f=b;return f&&T.string(f.title)&&(f.diagnostics===void 0||T.typedArray(f.diagnostics,q.is))&&(f.kind===void 0||T.string(f.kind))&&(f.edit!==void 0||f.command!==void 0)&&(f.command===void 0||N.is(f.command))&&(f.isPreferred===void 0||T.boolean(f.isPreferred))&&(f.edit===void 0||Gt.is(f.edit))}m.is=_})(ar||(e.CodeAction=ar={}));var Ln;(function(m){function D(b,f){var x={range:b};return T.defined(f)&&(x.data=f),x}m.create=D;function _(b){var f=b;return T.defined(f)&&a.is(f.range)&&(T.undefined(f.command)||N.is(f.command))}m.is=_})(Ln||(e.CodeLens=Ln={}));var cr;(function(m){function D(b,f){return{tabSize:b,insertSpaces:f}}m.create=D;function _(b){var f=b;return T.defined(f)&&T.uinteger(f.tabSize)&&T.boolean(f.insertSpaces)}m.is=_})(cr||(e.FormattingOptions=cr={}));var Ut;(function(m){function D(b,f,x){return{range:b,target:f,data:x}}m.create=D;function _(b){var f=b;return T.defined(f)&&a.is(f.range)&&(T.undefined(f.target)||T.string(f.target))}m.is=_})(Ut||(e.DocumentLink=Ut={}));var w;(function(m){function D(b,f){return{range:b,parent:f}}m.create=D;function _(b){var f=b;return T.objectLiteral(f)&&a.is(f.range)&&(f.parent===void 0||m.is(f.parent))}m.is=_})(w||(e.SelectionRange=w={}));var M;(function(m){m.namespace="namespace",m.type="type",m.class="class",m.enum="enum",m.interface="interface",m.struct="struct",m.typeParameter="typeParameter",m.parameter="parameter",m.variable="variable",m.property="property",m.enumMember="enumMember",m.event="event",m.function="function",m.method="method",m.macro="macro",m.keyword="keyword",m.modifier="modifier",m.comment="comment",m.string="string",m.number="number",m.regexp="regexp",m.operator="operator",m.decorator="decorator"})(M||(e.SemanticTokenTypes=M={}));var H;(function(m){m.declaration="declaration",m.definition="definition",m.readonly="readonly",m.static="static",m.deprecated="deprecated",m.abstract="abstract",m.async="async",m.modification="modification",m.documentation="documentation",m.defaultLibrary="defaultLibrary"})(H||(e.SemanticTokenModifiers=H={}));var W;(function(m){function D(_){var b=_;return T.objectLiteral(b)&&(b.resultId===void 0||typeof b.resultId=="string")&&Array.isArray(b.data)&&(b.data.length===0||typeof b.data[0]=="number")}m.is=D})(W||(e.SemanticTokens=W={}));var we;(function(m){function D(b,f){return{range:b,text:f}}m.create=D;function _(b){var f=b;return f!=null&&a.is(f.range)&&T.string(f.text)}m.is=_})(we||(e.InlineValueText=we={}));var ve;(function(m){function D(b,f,x){return{range:b,variableName:f,caseSensitiveLookup:x}}m.create=D;function _(b){var f=b;return f!=null&&a.is(f.range)&&T.boolean(f.caseSensitiveLookup)&&(T.string(f.variableName)||f.variableName===void 0)}m.is=_})(ve||(e.InlineValueVariableLookup=ve={}));var Ee;(function(m){function D(b,f){return{range:b,expression:f}}m.create=D;function _(b){var f=b;return f!=null&&a.is(f.range)&&(T.string(f.expression)||f.expression===void 0)}m.is=_})(Ee||(e.InlineValueEvaluatableExpression=Ee={}));var ke;(function(m){function D(b,f){return{frameId:b,stoppedLocation:f}}m.create=D;function _(b){var f=b;return T.defined(f)&&a.is(b.stoppedLocation)}m.is=_})(ke||(e.InlineValueContext=ke={}));var le;(function(m){m.Type=1,m.Parameter=2;function D(_){return _===1||_===2}m.is=D})(le||(e.InlayHintKind=le={}));var Re;(function(m){function D(b){return{value:b}}m.create=D;function _(b){var f=b;return T.objectLiteral(f)&&(f.tooltip===void 0||T.string(f.tooltip)||ht.is(f.tooltip))&&(f.location===void 0||c.is(f.location))&&(f.command===void 0||N.is(f.command))}m.is=_})(Re||(e.InlayHintLabelPart=Re={}));var pe;(function(m){function D(b,f,x){var L={position:b,label:f};return x!==void 0&&(L.kind=x),L}m.create=D;function _(b){var f=b;return T.objectLiteral(f)&&s.is(f.position)&&(T.string(f.label)||T.typedArray(f.label,Re.is))&&(f.kind===void 0||le.is(f.kind))&&f.textEdits===void 0||T.typedArray(f.textEdits,B.is)&&(f.tooltip===void 0||T.string(f.tooltip)||ht.is(f.tooltip))&&(f.paddingLeft===void 0||T.boolean(f.paddingLeft))&&(f.paddingRight===void 0||T.boolean(f.paddingRight))}m.is=_})(pe||(e.InlayHint=pe={}));var Fe;(function(m){function D(_){return{kind:"snippet",value:_}}m.createSnippet=D})(Fe||(e.StringValue=Fe={}));var Qe;(function(m){function D(_,b,f,x){return{insertText:_,filterText:b,range:f,command:x}}m.create=D})(Qe||(e.InlineCompletionItem=Qe={}));var bt;(function(m){function D(_){return{items:_}}m.create=D})(bt||(e.InlineCompletionList=bt={}));var Cr;(function(m){m.Invoked=0,m.Automatic=1})(Cr||(e.InlineCompletionTriggerKind=Cr={}));var wr;(function(m){function D(_,b){return{range:_,text:b}}m.create=D})(wr||(e.SelectedCompletionInfo=wr={}));var g;(function(m){function D(_,b){return{triggerKind:_,selectedCompletionInfo:b}}m.create=D})(g||(e.InlineCompletionContext=g={}));var P;(function(m){function D(_){var b=_;return T.objectLiteral(b)&&r.is(b.uri)&&T.string(b.name)}m.is=D})(P||(e.WorkspaceFolder=P={})),e.EOL=[`
`,`\r
`,"\r"];var X;(function(m){function D(x,L,ne,Ue){return new _e(x,L,ne,Ue)}m.create=D;function _(x){var L=x;return!!(T.defined(L)&&T.string(L.uri)&&(T.undefined(L.languageId)||T.string(L.languageId))&&T.uinteger(L.lineCount)&&T.func(L.getText)&&T.func(L.positionAt)&&T.func(L.offsetAt))}m.is=_;function b(x,L){for(var ne=x.getText(),Ue=f(L,function(Yn,l){var S=Yn.range.start.line-l.range.start.line;return S===0?Yn.range.start.character-l.range.start.character:S}),Me=ne.length,Jt=Ue.length-1;Jt>=0;Jt--){var un=Ue[Jt],An=x.offsetAt(un.range.start),he=x.offsetAt(un.range.end);if(he<=Me)ne=ne.substring(0,An)+un.newText+ne.substring(he,ne.length);else throw new Error("Overlapping edit");Me=An}return ne}m.applyEdits=b;function f(x,L){if(x.length<=1)return x;var ne=x.length/2|0,Ue=x.slice(0,ne),Me=x.slice(ne);f(Ue,L),f(Me,L);for(var Jt=0,un=0,An=0;Jt<Ue.length&&un<Me.length;){var he=L(Ue[Jt],Me[un]);he<=0?x[An++]=Ue[Jt++]:x[An++]=Me[un++]}for(;Jt<Ue.length;)x[An++]=Ue[Jt++];for(;un<Me.length;)x[An++]=Me[un++];return x}})(X||(e.TextDocument=X={}));var _e=function(){function m(D,_,b,f){this._uri=D,this._languageId=_,this._version=b,this._content=f,this._lineOffsets=void 0}return Object.defineProperty(m.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),m.prototype.getText=function(D){if(D){var _=this.offsetAt(D.start),b=this.offsetAt(D.end);return this._content.substring(_,b)}return this._content},m.prototype.update=function(D,_){this._content=D.text,this._version=_,this._lineOffsets=void 0},m.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var D=[],_=this._content,b=!0,f=0;f<_.length;f++){b&&(D.push(f),b=!1);var x=_.charAt(f);b=x==="\r"||x===`
`,x==="\r"&&f+1<_.length&&_.charAt(f+1)===`
`&&f++}b&&_.length>0&&D.push(_.length),this._lineOffsets=D}return this._lineOffsets},m.prototype.positionAt=function(D){D=Math.max(Math.min(D,this._content.length),0);var _=this.getLineOffsets(),b=0,f=_.length;if(f===0)return s.create(0,D);for(;b<f;){var x=Math.floor((b+f)/2);_[x]>D?f=x:b=x+1}var L=b-1;return s.create(L,D-_[L])},m.prototype.offsetAt=function(D){var _=this.getLineOffsets();if(D.line>=_.length)return this._content.length;if(D.line<0)return 0;var b=_[D.line],f=D.line+1<_.length?_[D.line+1]:this._content.length;return Math.max(Math.min(b+D.character,f),b)},Object.defineProperty(m.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),m}(),T;(function(m){var D=Object.prototype.toString;function _(he){return typeof he<"u"}m.defined=_;function b(he){return typeof he>"u"}m.undefined=b;function f(he){return he===!0||he===!1}m.boolean=f;function x(he){return D.call(he)==="[object String]"}m.string=x;function L(he){return D.call(he)==="[object Number]"}m.number=L;function ne(he,Yn,l){return D.call(he)==="[object Number]"&&Yn<=he&&he<=l}m.numberRange=ne;function Ue(he){return D.call(he)==="[object Number]"&&-2147483648<=he&&he<=2147483647}m.integer=Ue;function Me(he){return D.call(he)==="[object Number]"&&0<=he&&he<=2147483647}m.uinteger=Me;function Jt(he){return D.call(he)==="[object Function]"}m.func=Jt;function un(he){return he!==null&&typeof he=="object"}m.objectLiteral=un;function An(he,Yn){return Array.isArray(he)&&he.every(Yn)}m.typedArray=An})(T||(T={}))})});var Ve=k(en=>{"use strict";Object.defineProperty(en,"__esModule",{value:!0});en.ProtocolNotificationType=en.ProtocolNotificationType0=en.ProtocolRequestType=en.ProtocolRequestType0=en.RegistrationType=en.MessageDirection=void 0;var Mi=ti(),h0;(function(n){n.clientToServer="clientToServer",n.serverToClient="serverToClient",n.both="both"})(h0||(en.MessageDirection=h0={}));var Fl=class{constructor(e){this.method=e}};en.RegistrationType=Fl;var Ml=class extends Mi.RequestType0{constructor(e){super(e)}};en.ProtocolRequestType0=Ml;var Ol=class extends Mi.RequestType{constructor(e){super(e,Mi.ParameterStructures.byName)}};en.ProtocolRequestType=Ol;var Ll=class extends Mi.NotificationType0{constructor(e){super(e)}};en.ProtocolNotificationType0=Ll;var Al=class extends Mi.NotificationType{constructor(e){super(e,Mi.ParameterStructures.byName)}};en.ProtocolNotificationType=Al});var Zs=k(ut=>{"use strict";Object.defineProperty(ut,"__esModule",{value:!0});ut.objectLiteral=ut.typedArray=ut.stringArray=ut.array=ut.func=ut.error=ut.number=ut.string=ut.boolean=void 0;function B_(n){return n===!0||n===!1}ut.boolean=B_;function g0(n){return typeof n=="string"||n instanceof String}ut.string=g0;function K_(n){return typeof n=="number"||n instanceof Number}ut.number=K_;function G_(n){return n instanceof Error}ut.error=G_;function X_(n){return typeof n=="function"}ut.func=X_;function p0(n){return Array.isArray(n)}ut.array=p0;function Y_(n){return p0(n)&&n.every(e=>g0(e))}ut.stringArray=Y_;function J_(n,e){return Array.isArray(n)&&n.every(e)}ut.typedArray=J_;function Z_(n){return n!==null&&typeof n=="object"}ut.objectLiteral=Z_});var b0=k(Qs=>{"use strict";Object.defineProperty(Qs,"__esModule",{value:!0});Qs.ImplementationRequest=void 0;var m0=Ve(),y0;(function(n){n.method="textDocument/implementation",n.messageDirection=m0.MessageDirection.clientToServer,n.type=new m0.ProtocolRequestType(n.method)})(y0||(Qs.ImplementationRequest=y0={}))});var w0=k(ea=>{"use strict";Object.defineProperty(ea,"__esModule",{value:!0});ea.TypeDefinitionRequest=void 0;var v0=Ve(),C0;(function(n){n.method="textDocument/typeDefinition",n.messageDirection=v0.MessageDirection.clientToServer,n.type=new v0.ProtocolRequestType(n.method)})(C0||(ea.TypeDefinitionRequest=C0={}))});var _0=k(Oi=>{"use strict";Object.defineProperty(Oi,"__esModule",{value:!0});Oi.DidChangeWorkspaceFoldersNotification=Oi.WorkspaceFoldersRequest=void 0;var ta=Ve(),D0;(function(n){n.method="workspace/workspaceFolders",n.messageDirection=ta.MessageDirection.serverToClient,n.type=new ta.ProtocolRequestType0(n.method)})(D0||(Oi.WorkspaceFoldersRequest=D0={}));var R0;(function(n){n.method="workspace/didChangeWorkspaceFolders",n.messageDirection=ta.MessageDirection.clientToServer,n.type=new ta.ProtocolNotificationType(n.method)})(R0||(Oi.DidChangeWorkspaceFoldersNotification=R0={}))});var E0=k(na=>{"use strict";Object.defineProperty(na,"__esModule",{value:!0});na.ConfigurationRequest=void 0;var S0=Ve(),T0;(function(n){n.method="workspace/configuration",n.messageDirection=S0.MessageDirection.serverToClient,n.type=new S0.ProtocolRequestType(n.method)})(T0||(na.ConfigurationRequest=T0={}))});var q0=k(Li=>{"use strict";Object.defineProperty(Li,"__esModule",{value:!0});Li.ColorPresentationRequest=Li.DocumentColorRequest=void 0;var ra=Ve(),x0;(function(n){n.method="textDocument/documentColor",n.messageDirection=ra.MessageDirection.clientToServer,n.type=new ra.ProtocolRequestType(n.method)})(x0||(Li.DocumentColorRequest=x0={}));var P0;(function(n){n.method="textDocument/colorPresentation",n.messageDirection=ra.MessageDirection.clientToServer,n.type=new ra.ProtocolRequestType(n.method)})(P0||(Li.ColorPresentationRequest=P0={}))});var F0=k(Ai=>{"use strict";Object.defineProperty(Ai,"__esModule",{value:!0});Ai.FoldingRangeRefreshRequest=Ai.FoldingRangeRequest=void 0;var ia=Ve(),I0;(function(n){n.method="textDocument/foldingRange",n.messageDirection=ia.MessageDirection.clientToServer,n.type=new ia.ProtocolRequestType(n.method)})(I0||(Ai.FoldingRangeRequest=I0={}));var k0;(function(n){n.method="workspace/foldingRange/refresh",n.messageDirection=ia.MessageDirection.serverToClient,n.type=new ia.ProtocolRequestType0(n.method)})(k0||(Ai.FoldingRangeRefreshRequest=k0={}))});var L0=k(oa=>{"use strict";Object.defineProperty(oa,"__esModule",{value:!0});oa.DeclarationRequest=void 0;var M0=Ve(),O0;(function(n){n.method="textDocument/declaration",n.messageDirection=M0.MessageDirection.clientToServer,n.type=new M0.ProtocolRequestType(n.method)})(O0||(oa.DeclarationRequest=O0={}))});var $0=k(sa=>{"use strict";Object.defineProperty(sa,"__esModule",{value:!0});sa.SelectionRangeRequest=void 0;var A0=Ve(),N0;(function(n){n.method="textDocument/selectionRange",n.messageDirection=A0.MessageDirection.clientToServer,n.type=new A0.ProtocolRequestType(n.method)})(N0||(sa.SelectionRangeRequest=N0={}))});var z0=k(Fr=>{"use strict";Object.defineProperty(Fr,"__esModule",{value:!0});Fr.WorkDoneProgressCancelNotification=Fr.WorkDoneProgressCreateRequest=Fr.WorkDoneProgress=void 0;var Q_=ti(),aa=Ve(),j0;(function(n){n.type=new Q_.ProgressType;function e(t){return t===n.type}n.is=e})(j0||(Fr.WorkDoneProgress=j0={}));var H0;(function(n){n.method="window/workDoneProgress/create",n.messageDirection=aa.MessageDirection.serverToClient,n.type=new aa.ProtocolRequestType(n.method)})(H0||(Fr.WorkDoneProgressCreateRequest=H0={}));var U0;(function(n){n.method="window/workDoneProgress/cancel",n.messageDirection=aa.MessageDirection.clientToServer,n.type=new aa.ProtocolNotificationType(n.method)})(U0||(Fr.WorkDoneProgressCancelNotification=U0={}))});var K0=k(Mr=>{"use strict";Object.defineProperty(Mr,"__esModule",{value:!0});Mr.CallHierarchyOutgoingCallsRequest=Mr.CallHierarchyIncomingCallsRequest=Mr.CallHierarchyPrepareRequest=void 0;var Ni=Ve(),W0;(function(n){n.method="textDocument/prepareCallHierarchy",n.messageDirection=Ni.MessageDirection.clientToServer,n.type=new Ni.ProtocolRequestType(n.method)})(W0||(Mr.CallHierarchyPrepareRequest=W0={}));var V0;(function(n){n.method="callHierarchy/incomingCalls",n.messageDirection=Ni.MessageDirection.clientToServer,n.type=new Ni.ProtocolRequestType(n.method)})(V0||(Mr.CallHierarchyIncomingCallsRequest=V0={}));var B0;(function(n){n.method="callHierarchy/outgoingCalls",n.messageDirection=Ni.MessageDirection.clientToServer,n.type=new Ni.ProtocolRequestType(n.method)})(B0||(Mr.CallHierarchyOutgoingCallsRequest=B0={}))});var Q0=k(tn=>{"use strict";Object.defineProperty(tn,"__esModule",{value:!0});tn.SemanticTokensRefreshRequest=tn.SemanticTokensRangeRequest=tn.SemanticTokensDeltaRequest=tn.SemanticTokensRequest=tn.SemanticTokensRegistrationType=tn.TokenFormat=void 0;var dr=Ve(),G0;(function(n){n.Relative="relative"})(G0||(tn.TokenFormat=G0={}));var xo;(function(n){n.method="textDocument/semanticTokens",n.type=new dr.RegistrationType(n.method)})(xo||(tn.SemanticTokensRegistrationType=xo={}));var X0;(function(n){n.method="textDocument/semanticTokens/full",n.messageDirection=dr.MessageDirection.clientToServer,n.type=new dr.ProtocolRequestType(n.method),n.registrationMethod=xo.method})(X0||(tn.SemanticTokensRequest=X0={}));var Y0;(function(n){n.method="textDocument/semanticTokens/full/delta",n.messageDirection=dr.MessageDirection.clientToServer,n.type=new dr.ProtocolRequestType(n.method),n.registrationMethod=xo.method})(Y0||(tn.SemanticTokensDeltaRequest=Y0={}));var J0;(function(n){n.method="textDocument/semanticTokens/range",n.messageDirection=dr.MessageDirection.clientToServer,n.type=new dr.ProtocolRequestType(n.method),n.registrationMethod=xo.method})(J0||(tn.SemanticTokensRangeRequest=J0={}));var Z0;(function(n){n.method="workspace/semanticTokens/refresh",n.messageDirection=dr.MessageDirection.serverToClient,n.type=new dr.ProtocolRequestType0(n.method)})(Z0||(tn.SemanticTokensRefreshRequest=Z0={}))});var ny=k(ca=>{"use strict";Object.defineProperty(ca,"__esModule",{value:!0});ca.ShowDocumentRequest=void 0;var ey=Ve(),ty;(function(n){n.method="window/showDocument",n.messageDirection=ey.MessageDirection.serverToClient,n.type=new ey.ProtocolRequestType(n.method)})(ty||(ca.ShowDocumentRequest=ty={}))});var oy=k(ua=>{"use strict";Object.defineProperty(ua,"__esModule",{value:!0});ua.LinkedEditingRangeRequest=void 0;var ry=Ve(),iy;(function(n){n.method="textDocument/linkedEditingRange",n.messageDirection=ry.MessageDirection.clientToServer,n.type=new ry.ProtocolRequestType(n.method)})(iy||(ua.LinkedEditingRangeRequest=iy={}))});var hy=k(At=>{"use strict";Object.defineProperty(At,"__esModule",{value:!0});At.WillDeleteFilesRequest=At.DidDeleteFilesNotification=At.DidRenameFilesNotification=At.WillRenameFilesRequest=At.DidCreateFilesNotification=At.WillCreateFilesRequest=At.FileOperationPatternKind=void 0;var En=Ve(),sy;(function(n){n.file="file",n.folder="folder"})(sy||(At.FileOperationPatternKind=sy={}));var ay;(function(n){n.method="workspace/willCreateFiles",n.messageDirection=En.MessageDirection.clientToServer,n.type=new En.ProtocolRequestType(n.method)})(ay||(At.WillCreateFilesRequest=ay={}));var cy;(function(n){n.method="workspace/didCreateFiles",n.messageDirection=En.MessageDirection.clientToServer,n.type=new En.ProtocolNotificationType(n.method)})(cy||(At.DidCreateFilesNotification=cy={}));var uy;(function(n){n.method="workspace/willRenameFiles",n.messageDirection=En.MessageDirection.clientToServer,n.type=new En.ProtocolRequestType(n.method)})(uy||(At.WillRenameFilesRequest=uy={}));var ly;(function(n){n.method="workspace/didRenameFiles",n.messageDirection=En.MessageDirection.clientToServer,n.type=new En.ProtocolNotificationType(n.method)})(ly||(At.DidRenameFilesNotification=ly={}));var dy;(function(n){n.method="workspace/didDeleteFiles",n.messageDirection=En.MessageDirection.clientToServer,n.type=new En.ProtocolNotificationType(n.method)})(dy||(At.DidDeleteFilesNotification=dy={}));var fy;(function(n){n.method="workspace/willDeleteFiles",n.messageDirection=En.MessageDirection.clientToServer,n.type=new En.ProtocolRequestType(n.method)})(fy||(At.WillDeleteFilesRequest=fy={}))});var by=k(Or=>{"use strict";Object.defineProperty(Or,"__esModule",{value:!0});Or.MonikerRequest=Or.MonikerKind=Or.UniquenessLevel=void 0;var gy=Ve(),py;(function(n){n.document="document",n.project="project",n.group="group",n.scheme="scheme",n.global="global"})(py||(Or.UniquenessLevel=py={}));var my;(function(n){n.$import="import",n.$export="export",n.local="local"})(my||(Or.MonikerKind=my={}));var yy;(function(n){n.method="textDocument/moniker",n.messageDirection=gy.MessageDirection.clientToServer,n.type=new gy.ProtocolRequestType(n.method)})(yy||(Or.MonikerRequest=yy={}))});var Dy=k(Lr=>{"use strict";Object.defineProperty(Lr,"__esModule",{value:!0});Lr.TypeHierarchySubtypesRequest=Lr.TypeHierarchySupertypesRequest=Lr.TypeHierarchyPrepareRequest=void 0;var $i=Ve(),vy;(function(n){n.method="textDocument/prepareTypeHierarchy",n.messageDirection=$i.MessageDirection.clientToServer,n.type=new $i.ProtocolRequestType(n.method)})(vy||(Lr.TypeHierarchyPrepareRequest=vy={}));var Cy;(function(n){n.method="typeHierarchy/supertypes",n.messageDirection=$i.MessageDirection.clientToServer,n.type=new $i.ProtocolRequestType(n.method)})(Cy||(Lr.TypeHierarchySupertypesRequest=Cy={}));var wy;(function(n){n.method="typeHierarchy/subtypes",n.messageDirection=$i.MessageDirection.clientToServer,n.type=new $i.ProtocolRequestType(n.method)})(wy||(Lr.TypeHierarchySubtypesRequest=wy={}))});var Sy=k(ji=>{"use strict";Object.defineProperty(ji,"__esModule",{value:!0});ji.InlineValueRefreshRequest=ji.InlineValueRequest=void 0;var la=Ve(),Ry;(function(n){n.method="textDocument/inlineValue",n.messageDirection=la.MessageDirection.clientToServer,n.type=new la.ProtocolRequestType(n.method)})(Ry||(ji.InlineValueRequest=Ry={}));var _y;(function(n){n.method="workspace/inlineValue/refresh",n.messageDirection=la.MessageDirection.serverToClient,n.type=new la.ProtocolRequestType0(n.method)})(_y||(ji.InlineValueRefreshRequest=_y={}))});var Py=k(Ar=>{"use strict";Object.defineProperty(Ar,"__esModule",{value:!0});Ar.InlayHintRefreshRequest=Ar.InlayHintResolveRequest=Ar.InlayHintRequest=void 0;var Hi=Ve(),Ty;(function(n){n.method="textDocument/inlayHint",n.messageDirection=Hi.MessageDirection.clientToServer,n.type=new Hi.ProtocolRequestType(n.method)})(Ty||(Ar.InlayHintRequest=Ty={}));var Ey;(function(n){n.method="inlayHint/resolve",n.messageDirection=Hi.MessageDirection.clientToServer,n.type=new Hi.ProtocolRequestType(n.method)})(Ey||(Ar.InlayHintResolveRequest=Ey={}));var xy;(function(n){n.method="workspace/inlayHint/refresh",n.messageDirection=Hi.MessageDirection.serverToClient,n.type=new Hi.ProtocolRequestType0(n.method)})(xy||(Ar.InlayHintRefreshRequest=xy={}))});var Ly=k(xn=>{"use strict";Object.defineProperty(xn,"__esModule",{value:!0});xn.DiagnosticRefreshRequest=xn.WorkspaceDiagnosticRequest=xn.DocumentDiagnosticRequest=xn.DocumentDiagnosticReportKind=xn.DiagnosticServerCancellationData=void 0;var Oy=ti(),eS=Zs(),Ui=Ve(),qy;(function(n){function e(t){let r=t;return r&&eS.boolean(r.retriggerRequest)}n.is=e})(qy||(xn.DiagnosticServerCancellationData=qy={}));var Iy;(function(n){n.Full="full",n.Unchanged="unchanged"})(Iy||(xn.DocumentDiagnosticReportKind=Iy={}));var ky;(function(n){n.method="textDocument/diagnostic",n.messageDirection=Ui.MessageDirection.clientToServer,n.type=new Ui.ProtocolRequestType(n.method),n.partialResult=new Oy.ProgressType})(ky||(xn.DocumentDiagnosticRequest=ky={}));var Fy;(function(n){n.method="workspace/diagnostic",n.messageDirection=Ui.MessageDirection.clientToServer,n.type=new Ui.ProtocolRequestType(n.method),n.partialResult=new Oy.ProgressType})(Fy||(xn.WorkspaceDiagnosticRequest=Fy={}));var My;(function(n){n.method="workspace/diagnostic/refresh",n.messageDirection=Ui.MessageDirection.serverToClient,n.type=new Ui.ProtocolRequestType0(n.method)})(My||(xn.DiagnosticRefreshRequest=My={}))});var zy=k(tt=>{"use strict";Object.defineProperty(tt,"__esModule",{value:!0});tt.DidCloseNotebookDocumentNotification=tt.DidSaveNotebookDocumentNotification=tt.DidChangeNotebookDocumentNotification=tt.NotebookCellArrayChange=tt.DidOpenNotebookDocumentNotification=tt.NotebookDocumentSyncRegistrationType=tt.NotebookDocument=tt.NotebookCell=tt.ExecutionSummary=tt.NotebookCellKind=void 0;var Po=Js(),jn=Zs(),tr=Ve(),Nl;(function(n){n.Markup=1,n.Code=2;function e(t){return t===1||t===2}n.is=e})(Nl||(tt.NotebookCellKind=Nl={}));var $l;(function(n){function e(i,o){let s={executionOrder:i};return(o===!0||o===!1)&&(s.success=o),s}n.create=e;function t(i){let o=i;return jn.objectLiteral(o)&&Po.uinteger.is(o.executionOrder)&&(o.success===void 0||jn.boolean(o.success))}n.is=t;function r(i,o){return i===o?!0:i==null||o===null||o===void 0?!1:i.executionOrder===o.executionOrder&&i.success===o.success}n.equals=r})($l||(tt.ExecutionSummary=$l={}));var da;(function(n){function e(o,s){return{kind:o,document:s}}n.create=e;function t(o){let s=o;return jn.objectLiteral(s)&&Nl.is(s.kind)&&Po.DocumentUri.is(s.document)&&(s.metadata===void 0||jn.objectLiteral(s.metadata))}n.is=t;function r(o,s){let a=new Set;return o.document!==s.document&&a.add("document"),o.kind!==s.kind&&a.add("kind"),o.executionSummary!==s.executionSummary&&a.add("executionSummary"),(o.metadata!==void 0||s.metadata!==void 0)&&!i(o.metadata,s.metadata)&&a.add("metadata"),(o.executionSummary!==void 0||s.executionSummary!==void 0)&&!$l.equals(o.executionSummary,s.executionSummary)&&a.add("executionSummary"),a}n.diff=r;function i(o,s){if(o===s)return!0;if(o==null||s===null||s===void 0||typeof o!=typeof s||typeof o!="object")return!1;let a=Array.isArray(o),c=Array.isArray(s);if(a!==c)return!1;if(a&&c){if(o.length!==s.length)return!1;for(let u=0;u<o.length;u++)if(!i(o[u],s[u]))return!1}if(jn.objectLiteral(o)&&jn.objectLiteral(s)){let u=Object.keys(o),d=Object.keys(s);if(u.length!==d.length||(u.sort(),d.sort(),!i(u,d)))return!1;for(let h=0;h<u.length;h++){let p=u[h];if(!i(o[p],s[p]))return!1}}return!0}})(da||(tt.NotebookCell=da={}));var Ay;(function(n){function e(r,i,o,s){return{uri:r,notebookType:i,version:o,cells:s}}n.create=e;function t(r){let i=r;return jn.objectLiteral(i)&&jn.string(i.uri)&&Po.integer.is(i.version)&&jn.typedArray(i.cells,da.is)}n.is=t})(Ay||(tt.NotebookDocument=Ay={}));var zi;(function(n){n.method="notebookDocument/sync",n.messageDirection=tr.MessageDirection.clientToServer,n.type=new tr.RegistrationType(n.method)})(zi||(tt.NotebookDocumentSyncRegistrationType=zi={}));var Ny;(function(n){n.method="notebookDocument/didOpen",n.messageDirection=tr.MessageDirection.clientToServer,n.type=new tr.ProtocolNotificationType(n.method),n.registrationMethod=zi.method})(Ny||(tt.DidOpenNotebookDocumentNotification=Ny={}));var $y;(function(n){function e(r){let i=r;return jn.objectLiteral(i)&&Po.uinteger.is(i.start)&&Po.uinteger.is(i.deleteCount)&&(i.cells===void 0||jn.typedArray(i.cells,da.is))}n.is=e;function t(r,i,o){let s={start:r,deleteCount:i};return o!==void 0&&(s.cells=o),s}n.create=t})($y||(tt.NotebookCellArrayChange=$y={}));var jy;(function(n){n.method="notebookDocument/didChange",n.messageDirection=tr.MessageDirection.clientToServer,n.type=new tr.ProtocolNotificationType(n.method),n.registrationMethod=zi.method})(jy||(tt.DidChangeNotebookDocumentNotification=jy={}));var Hy;(function(n){n.method="notebookDocument/didSave",n.messageDirection=tr.MessageDirection.clientToServer,n.type=new tr.ProtocolNotificationType(n.method),n.registrationMethod=zi.method})(Hy||(tt.DidSaveNotebookDocumentNotification=Hy={}));var Uy;(function(n){n.method="notebookDocument/didClose",n.messageDirection=tr.MessageDirection.clientToServer,n.type=new tr.ProtocolNotificationType(n.method),n.registrationMethod=zi.method})(Uy||(tt.DidCloseNotebookDocumentNotification=Uy={}))});var By=k(fa=>{"use strict";Object.defineProperty(fa,"__esModule",{value:!0});fa.InlineCompletionRequest=void 0;var Wy=Ve(),Vy;(function(n){n.method="textDocument/inlineCompletion",n.messageDirection=Wy.MessageDirection.clientToServer,n.type=new Wy.ProtocolRequestType(n.method)})(Vy||(fa.InlineCompletionRequest=Vy={}))});var ov=k(C=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0});C.WorkspaceSymbolRequest=C.CodeActionResolveRequest=C.CodeActionRequest=C.DocumentSymbolRequest=C.DocumentHighlightRequest=C.ReferencesRequest=C.DefinitionRequest=C.SignatureHelpRequest=C.SignatureHelpTriggerKind=C.HoverRequest=C.CompletionResolveRequest=C.CompletionRequest=C.CompletionTriggerKind=C.PublishDiagnosticsNotification=C.WatchKind=C.RelativePattern=C.FileChangeType=C.DidChangeWatchedFilesNotification=C.WillSaveTextDocumentWaitUntilRequest=C.WillSaveTextDocumentNotification=C.TextDocumentSaveReason=C.DidSaveTextDocumentNotification=C.DidCloseTextDocumentNotification=C.DidChangeTextDocumentNotification=C.TextDocumentContentChangeEvent=C.DidOpenTextDocumentNotification=C.TextDocumentSyncKind=C.TelemetryEventNotification=C.LogMessageNotification=C.ShowMessageRequest=C.ShowMessageNotification=C.MessageType=C.DidChangeConfigurationNotification=C.ExitNotification=C.ShutdownRequest=C.InitializedNotification=C.InitializeErrorCodes=C.InitializeRequest=C.WorkDoneProgressOptions=C.TextDocumentRegistrationOptions=C.StaticRegistrationOptions=C.PositionEncodingKind=C.FailureHandlingKind=C.ResourceOperationKind=C.UnregistrationRequest=C.RegistrationRequest=C.DocumentSelector=C.NotebookCellTextDocumentFilter=C.NotebookDocumentFilter=C.TextDocumentFilter=void 0;C.MonikerRequest=C.MonikerKind=C.UniquenessLevel=C.WillDeleteFilesRequest=C.DidDeleteFilesNotification=C.WillRenameFilesRequest=C.DidRenameFilesNotification=C.WillCreateFilesRequest=C.DidCreateFilesNotification=C.FileOperationPatternKind=C.LinkedEditingRangeRequest=C.ShowDocumentRequest=C.SemanticTokensRegistrationType=C.SemanticTokensRefreshRequest=C.SemanticTokensRangeRequest=C.SemanticTokensDeltaRequest=C.SemanticTokensRequest=C.TokenFormat=C.CallHierarchyPrepareRequest=C.CallHierarchyOutgoingCallsRequest=C.CallHierarchyIncomingCallsRequest=C.WorkDoneProgressCancelNotification=C.WorkDoneProgressCreateRequest=C.WorkDoneProgress=C.SelectionRangeRequest=C.DeclarationRequest=C.FoldingRangeRefreshRequest=C.FoldingRangeRequest=C.ColorPresentationRequest=C.DocumentColorRequest=C.ConfigurationRequest=C.DidChangeWorkspaceFoldersNotification=C.WorkspaceFoldersRequest=C.TypeDefinitionRequest=C.ImplementationRequest=C.ApplyWorkspaceEditRequest=C.ExecuteCommandRequest=C.PrepareRenameRequest=C.RenameRequest=C.PrepareSupportDefaultBehavior=C.DocumentOnTypeFormattingRequest=C.DocumentRangesFormattingRequest=C.DocumentRangeFormattingRequest=C.DocumentFormattingRequest=C.DocumentLinkResolveRequest=C.DocumentLinkRequest=C.CodeLensRefreshRequest=C.CodeLensResolveRequest=C.CodeLensRequest=C.WorkspaceSymbolResolveRequest=void 0;C.InlineCompletionRequest=C.DidCloseNotebookDocumentNotification=C.DidSaveNotebookDocumentNotification=C.DidChangeNotebookDocumentNotification=C.NotebookCellArrayChange=C.DidOpenNotebookDocumentNotification=C.NotebookDocumentSyncRegistrationType=C.NotebookDocument=C.NotebookCell=C.ExecutionSummary=C.NotebookCellKind=C.DiagnosticRefreshRequest=C.WorkspaceDiagnosticRequest=C.DocumentDiagnosticRequest=C.DocumentDiagnosticReportKind=C.DiagnosticServerCancellationData=C.InlayHintRefreshRequest=C.InlayHintResolveRequest=C.InlayHintRequest=C.InlineValueRefreshRequest=C.InlineValueRequest=C.TypeHierarchySupertypesRequest=C.TypeHierarchySubtypesRequest=C.TypeHierarchyPrepareRequest=void 0;var j=Ve(),Ky=Js(),Dt=Zs(),tS=b0();Object.defineProperty(C,"ImplementationRequest",{enumerable:!0,get:function(){return tS.ImplementationRequest}});var nS=w0();Object.defineProperty(C,"TypeDefinitionRequest",{enumerable:!0,get:function(){return nS.TypeDefinitionRequest}});var tv=_0();Object.defineProperty(C,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return tv.WorkspaceFoldersRequest}});Object.defineProperty(C,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return tv.DidChangeWorkspaceFoldersNotification}});var rS=E0();Object.defineProperty(C,"ConfigurationRequest",{enumerable:!0,get:function(){return rS.ConfigurationRequest}});var nv=q0();Object.defineProperty(C,"DocumentColorRequest",{enumerable:!0,get:function(){return nv.DocumentColorRequest}});Object.defineProperty(C,"ColorPresentationRequest",{enumerable:!0,get:function(){return nv.ColorPresentationRequest}});var rv=F0();Object.defineProperty(C,"FoldingRangeRequest",{enumerable:!0,get:function(){return rv.FoldingRangeRequest}});Object.defineProperty(C,"FoldingRangeRefreshRequest",{enumerable:!0,get:function(){return rv.FoldingRangeRefreshRequest}});var iS=L0();Object.defineProperty(C,"DeclarationRequest",{enumerable:!0,get:function(){return iS.DeclarationRequest}});var oS=$0();Object.defineProperty(C,"SelectionRangeRequest",{enumerable:!0,get:function(){return oS.SelectionRangeRequest}});var Wl=z0();Object.defineProperty(C,"WorkDoneProgress",{enumerable:!0,get:function(){return Wl.WorkDoneProgress}});Object.defineProperty(C,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return Wl.WorkDoneProgressCreateRequest}});Object.defineProperty(C,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return Wl.WorkDoneProgressCancelNotification}});var Vl=K0();Object.defineProperty(C,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return Vl.CallHierarchyIncomingCallsRequest}});Object.defineProperty(C,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return Vl.CallHierarchyOutgoingCallsRequest}});Object.defineProperty(C,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return Vl.CallHierarchyPrepareRequest}});var Wi=Q0();Object.defineProperty(C,"TokenFormat",{enumerable:!0,get:function(){return Wi.TokenFormat}});Object.defineProperty(C,"SemanticTokensRequest",{enumerable:!0,get:function(){return Wi.SemanticTokensRequest}});Object.defineProperty(C,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return Wi.SemanticTokensDeltaRequest}});Object.defineProperty(C,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return Wi.SemanticTokensRangeRequest}});Object.defineProperty(C,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return Wi.SemanticTokensRefreshRequest}});Object.defineProperty(C,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return Wi.SemanticTokensRegistrationType}});var sS=ny();Object.defineProperty(C,"ShowDocumentRequest",{enumerable:!0,get:function(){return sS.ShowDocumentRequest}});var aS=oy();Object.defineProperty(C,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return aS.LinkedEditingRangeRequest}});var ni=hy();Object.defineProperty(C,"FileOperationPatternKind",{enumerable:!0,get:function(){return ni.FileOperationPatternKind}});Object.defineProperty(C,"DidCreateFilesNotification",{enumerable:!0,get:function(){return ni.DidCreateFilesNotification}});Object.defineProperty(C,"WillCreateFilesRequest",{enumerable:!0,get:function(){return ni.WillCreateFilesRequest}});Object.defineProperty(C,"DidRenameFilesNotification",{enumerable:!0,get:function(){return ni.DidRenameFilesNotification}});Object.defineProperty(C,"WillRenameFilesRequest",{enumerable:!0,get:function(){return ni.WillRenameFilesRequest}});Object.defineProperty(C,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return ni.DidDeleteFilesNotification}});Object.defineProperty(C,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return ni.WillDeleteFilesRequest}});var Bl=by();Object.defineProperty(C,"UniquenessLevel",{enumerable:!0,get:function(){return Bl.UniquenessLevel}});Object.defineProperty(C,"MonikerKind",{enumerable:!0,get:function(){return Bl.MonikerKind}});Object.defineProperty(C,"MonikerRequest",{enumerable:!0,get:function(){return Bl.MonikerRequest}});var Kl=Dy();Object.defineProperty(C,"TypeHierarchyPrepareRequest",{enumerable:!0,get:function(){return Kl.TypeHierarchyPrepareRequest}});Object.defineProperty(C,"TypeHierarchySubtypesRequest",{enumerable:!0,get:function(){return Kl.TypeHierarchySubtypesRequest}});Object.defineProperty(C,"TypeHierarchySupertypesRequest",{enumerable:!0,get:function(){return Kl.TypeHierarchySupertypesRequest}});var iv=Sy();Object.defineProperty(C,"InlineValueRequest",{enumerable:!0,get:function(){return iv.InlineValueRequest}});Object.defineProperty(C,"InlineValueRefreshRequest",{enumerable:!0,get:function(){return iv.InlineValueRefreshRequest}});var Gl=Py();Object.defineProperty(C,"InlayHintRequest",{enumerable:!0,get:function(){return Gl.InlayHintRequest}});Object.defineProperty(C,"InlayHintResolveRequest",{enumerable:!0,get:function(){return Gl.InlayHintResolveRequest}});Object.defineProperty(C,"InlayHintRefreshRequest",{enumerable:!0,get:function(){return Gl.InlayHintRefreshRequest}});var qo=Ly();Object.defineProperty(C,"DiagnosticServerCancellationData",{enumerable:!0,get:function(){return qo.DiagnosticServerCancellationData}});Object.defineProperty(C,"DocumentDiagnosticReportKind",{enumerable:!0,get:function(){return qo.DocumentDiagnosticReportKind}});Object.defineProperty(C,"DocumentDiagnosticRequest",{enumerable:!0,get:function(){return qo.DocumentDiagnosticRequest}});Object.defineProperty(C,"WorkspaceDiagnosticRequest",{enumerable:!0,get:function(){return qo.WorkspaceDiagnosticRequest}});Object.defineProperty(C,"DiagnosticRefreshRequest",{enumerable:!0,get:function(){return qo.DiagnosticRefreshRequest}});var nr=zy();Object.defineProperty(C,"NotebookCellKind",{enumerable:!0,get:function(){return nr.NotebookCellKind}});Object.defineProperty(C,"ExecutionSummary",{enumerable:!0,get:function(){return nr.ExecutionSummary}});Object.defineProperty(C,"NotebookCell",{enumerable:!0,get:function(){return nr.NotebookCell}});Object.defineProperty(C,"NotebookDocument",{enumerable:!0,get:function(){return nr.NotebookDocument}});Object.defineProperty(C,"NotebookDocumentSyncRegistrationType",{enumerable:!0,get:function(){return nr.NotebookDocumentSyncRegistrationType}});Object.defineProperty(C,"DidOpenNotebookDocumentNotification",{enumerable:!0,get:function(){return nr.DidOpenNotebookDocumentNotification}});Object.defineProperty(C,"NotebookCellArrayChange",{enumerable:!0,get:function(){return nr.NotebookCellArrayChange}});Object.defineProperty(C,"DidChangeNotebookDocumentNotification",{enumerable:!0,get:function(){return nr.DidChangeNotebookDocumentNotification}});Object.defineProperty(C,"DidSaveNotebookDocumentNotification",{enumerable:!0,get:function(){return nr.DidSaveNotebookDocumentNotification}});Object.defineProperty(C,"DidCloseNotebookDocumentNotification",{enumerable:!0,get:function(){return nr.DidCloseNotebookDocumentNotification}});var cS=By();Object.defineProperty(C,"InlineCompletionRequest",{enumerable:!0,get:function(){return cS.InlineCompletionRequest}});var jl;(function(n){function e(t){let r=t;return Dt.string(r)||Dt.string(r.language)||Dt.string(r.scheme)||Dt.string(r.pattern)}n.is=e})(jl||(C.TextDocumentFilter=jl={}));var Hl;(function(n){function e(t){let r=t;return Dt.objectLiteral(r)&&(Dt.string(r.notebookType)||Dt.string(r.scheme)||Dt.string(r.pattern))}n.is=e})(Hl||(C.NotebookDocumentFilter=Hl={}));var Ul;(function(n){function e(t){let r=t;return Dt.objectLiteral(r)&&(Dt.string(r.notebook)||Hl.is(r.notebook))&&(r.language===void 0||Dt.string(r.language))}n.is=e})(Ul||(C.NotebookCellTextDocumentFilter=Ul={}));var zl;(function(n){function e(t){if(!Array.isArray(t))return!1;for(let r of t)if(!Dt.string(r)&&!jl.is(r)&&!Ul.is(r))return!1;return!0}n.is=e})(zl||(C.DocumentSelector=zl={}));var Gy;(function(n){n.method="client/registerCapability",n.messageDirection=j.MessageDirection.serverToClient,n.type=new j.ProtocolRequestType(n.method)})(Gy||(C.RegistrationRequest=Gy={}));var Xy;(function(n){n.method="client/unregisterCapability",n.messageDirection=j.MessageDirection.serverToClient,n.type=new j.ProtocolRequestType(n.method)})(Xy||(C.UnregistrationRequest=Xy={}));var Yy;(function(n){n.Create="create",n.Rename="rename",n.Delete="delete"})(Yy||(C.ResourceOperationKind=Yy={}));var Jy;(function(n){n.Abort="abort",n.Transactional="transactional",n.TextOnlyTransactional="textOnlyTransactional",n.Undo="undo"})(Jy||(C.FailureHandlingKind=Jy={}));var Zy;(function(n){n.UTF8="utf-8",n.UTF16="utf-16",n.UTF32="utf-32"})(Zy||(C.PositionEncodingKind=Zy={}));var Qy;(function(n){function e(t){let r=t;return r&&Dt.string(r.id)&&r.id.length>0}n.hasId=e})(Qy||(C.StaticRegistrationOptions=Qy={}));var eb;(function(n){function e(t){let r=t;return r&&(r.documentSelector===null||zl.is(r.documentSelector))}n.is=e})(eb||(C.TextDocumentRegistrationOptions=eb={}));var tb;(function(n){function e(r){let i=r;return Dt.objectLiteral(i)&&(i.workDoneProgress===void 0||Dt.boolean(i.workDoneProgress))}n.is=e;function t(r){let i=r;return i&&Dt.boolean(i.workDoneProgress)}n.hasWorkDoneProgress=t})(tb||(C.WorkDoneProgressOptions=tb={}));var nb;(function(n){n.method="initialize",n.messageDirection=j.MessageDirection.clientToServer,n.type=new j.ProtocolRequestType(n.method)})(nb||(C.InitializeRequest=nb={}));var rb;(function(n){n.unknownProtocolVersion=1})(rb||(C.InitializeErrorCodes=rb={}));var ib;(function(n){n.method="initialized",n.messageDirection=j.MessageDirection.clientToServer,n.type=new j.ProtocolNotificationType(n.method)})(ib||(C.InitializedNotification=ib={}));var ob;(function(n){n.method="shutdown",n.messageDirection=j.MessageDirection.clientToServer,n.type=new j.ProtocolRequestType0(n.method)})(ob||(C.ShutdownRequest=ob={}));var sb;(function(n){n.method="exit",n.messageDirection=j.MessageDirection.clientToServer,n.type=new j.ProtocolNotificationType0(n.method)})(sb||(C.ExitNotification=sb={}));var ab;(function(n){n.method="workspace/didChangeConfiguration",n.messageDirection=j.MessageDirection.clientToServer,n.type=new j.ProtocolNotificationType(n.method)})(ab||(C.DidChangeConfigurationNotification=ab={}));var cb;(function(n){n.Error=1,n.Warning=2,n.Info=3,n.Log=4,n.Debug=5})(cb||(C.MessageType=cb={}));var ub;(function(n){n.method="window/showMessage",n.messageDirection=j.MessageDirection.serverToClient,n.type=new j.ProtocolNotificationType(n.method)})(ub||(C.ShowMessageNotification=ub={}));var lb;(function(n){n.method="window/showMessageRequest",n.messageDirection=j.MessageDirection.serverToClient,n.type=new j.ProtocolRequestType(n.method)})(lb||(C.ShowMessageRequest=lb={}));var db;(function(n){n.method="window/logMessage",n.messageDirection=j.MessageDirection.serverToClient,n.type=new j.ProtocolNotificationType(n.method)})(db||(C.LogMessageNotification=db={}));var fb;(function(n){n.method="telemetry/event",n.messageDirection=j.MessageDirection.serverToClient,n.type=new j.ProtocolNotificationType(n.method)})(fb||(C.TelemetryEventNotification=fb={}));var hb;(function(n){n.None=0,n.Full=1,n.Incremental=2})(hb||(C.TextDocumentSyncKind=hb={}));var gb;(function(n){n.method="textDocument/didOpen",n.messageDirection=j.MessageDirection.clientToServer,n.type=new j.ProtocolNotificationType(n.method)})(gb||(C.DidOpenTextDocumentNotification=gb={}));var pb;(function(n){function e(r){let i=r;return i!=null&&typeof i.text=="string"&&i.range!==void 0&&(i.rangeLength===void 0||typeof i.rangeLength=="number")}n.isIncremental=e;function t(r){let i=r;return i!=null&&typeof i.text=="string"&&i.range===void 0&&i.rangeLength===void 0}n.isFull=t})(pb||(C.TextDocumentContentChangeEvent=pb={}));var mb;(function(n){n.method="textDocument/didChange",n.messageDirection=j.MessageDirection.clientToServer,n.type=new j.ProtocolNotificationType(n.method)})(mb||(C.DidChangeTextDocumentNotification=mb={}));var yb;(function(n){n.method="textDocument/didClose",n.messageDirection=j.MessageDirection.clientToServer,n.type=new j.ProtocolNotificationType(n.method)})(yb||(C.DidCloseTextDocumentNotification=yb={}));var bb;(function(n){n.method="textDocument/didSave",n.messageDirection=j.MessageDirection.clientToServer,n.type=new j.ProtocolNotificationType(n.method)})(bb||(C.DidSaveTextDocumentNotification=bb={}));var vb;(function(n){n.Manual=1,n.AfterDelay=2,n.FocusOut=3})(vb||(C.TextDocumentSaveReason=vb={}));var Cb;(function(n){n.method="textDocument/willSave",n.messageDirection=j.MessageDirection.clientToServer,n.type=new j.ProtocolNotificationType(n.method)})(Cb||(C.WillSaveTextDocumentNotification=Cb={}));var wb;(function(n){n.method="textDocument/willSaveWaitUntil",n.messageDirection=j.MessageDirection.clientToServer,n.type=new j.ProtocolRequestType(n.method)})(wb||(C.WillSaveTextDocumentWaitUntilRequest=wb={}));var Db;(function(n){n.method="workspace/didChangeWatchedFiles",n.messageDirection=j.MessageDirection.clientToServer,n.type=new j.ProtocolNotificationType(n.method)})(Db||(C.DidChangeWatchedFilesNotification=Db={}));var Rb;(function(n){n.Created=1,n.Changed=2,n.Deleted=3})(Rb||(C.FileChangeType=Rb={}));var _b;(function(n){function e(t){let r=t;return Dt.objectLiteral(r)&&(Ky.URI.is(r.baseUri)||Ky.WorkspaceFolder.is(r.baseUri))&&Dt.string(r.pattern)}n.is=e})(_b||(C.RelativePattern=_b={}));var Sb;(function(n){n.Create=1,n.Change=2,n.Delete=4})(Sb||(C.WatchKind=Sb={}));var Tb;(function(n){n.method="textDocument/publishDiagnostics",n.messageDirection=j.MessageDirection.serverToClient,n.type=new j.ProtocolNotificationType(n.method)})(Tb||(C.PublishDiagnosticsNotification=Tb={}));var Eb;(function(n){n.Invoked=1,n.TriggerCharacter=2,n.TriggerForIncompleteCompletions=3})(Eb||(C.CompletionTriggerKind=Eb={}));var xb;(function(n){n.method="textDocument/completion",n.messageDirection=j.MessageDirection.clientToServer,n.type=new j.ProtocolRequestType(n.method)})(xb||(C.CompletionRequest=xb={}));var Pb;(function(n){n.method="completionItem/resolve",n.messageDirection=j.MessageDirection.clientToServer,n.type=new j.ProtocolRequestType(n.method)})(Pb||(C.CompletionResolveRequest=Pb={}));var qb;(function(n){n.method="textDocument/hover",n.messageDirection=j.MessageDirection.clientToServer,n.type=new j.ProtocolRequestType(n.method)})(qb||(C.HoverRequest=qb={}));var Ib;(function(n){n.Invoked=1,n.TriggerCharacter=2,n.ContentChange=3})(Ib||(C.SignatureHelpTriggerKind=Ib={}));var kb;(function(n){n.method="textDocument/signatureHelp",n.messageDirection=j.MessageDirection.clientToServer,n.type=new j.ProtocolRequestType(n.method)})(kb||(C.SignatureHelpRequest=kb={}));var Fb;(function(n){n.method="textDocument/definition",n.messageDirection=j.MessageDirection.clientToServer,n.type=new j.ProtocolRequestType(n.method)})(Fb||(C.DefinitionRequest=Fb={}));var Mb;(function(n){n.method="textDocument/references",n.messageDirection=j.MessageDirection.clientToServer,n.type=new j.ProtocolRequestType(n.method)})(Mb||(C.ReferencesRequest=Mb={}));var Ob;(function(n){n.method="textDocument/documentHighlight",n.messageDirection=j.MessageDirection.clientToServer,n.type=new j.ProtocolRequestType(n.method)})(Ob||(C.DocumentHighlightRequest=Ob={}));var Lb;(function(n){n.method="textDocument/documentSymbol",n.messageDirection=j.MessageDirection.clientToServer,n.type=new j.ProtocolRequestType(n.method)})(Lb||(C.DocumentSymbolRequest=Lb={}));var Ab;(function(n){n.method="textDocument/codeAction",n.messageDirection=j.MessageDirection.clientToServer,n.type=new j.ProtocolRequestType(n.method)})(Ab||(C.CodeActionRequest=Ab={}));var Nb;(function(n){n.method="codeAction/resolve",n.messageDirection=j.MessageDirection.clientToServer,n.type=new j.ProtocolRequestType(n.method)})(Nb||(C.CodeActionResolveRequest=Nb={}));var $b;(function(n){n.method="workspace/symbol",n.messageDirection=j.MessageDirection.clientToServer,n.type=new j.ProtocolRequestType(n.method)})($b||(C.WorkspaceSymbolRequest=$b={}));var jb;(function(n){n.method="workspaceSymbol/resolve",n.messageDirection=j.MessageDirection.clientToServer,n.type=new j.ProtocolRequestType(n.method)})(jb||(C.WorkspaceSymbolResolveRequest=jb={}));var Hb;(function(n){n.method="textDocument/codeLens",n.messageDirection=j.MessageDirection.clientToServer,n.type=new j.ProtocolRequestType(n.method)})(Hb||(C.CodeLensRequest=Hb={}));var Ub;(function(n){n.method="codeLens/resolve",n.messageDirection=j.MessageDirection.clientToServer,n.type=new j.ProtocolRequestType(n.method)})(Ub||(C.CodeLensResolveRequest=Ub={}));var zb;(function(n){n.method="workspace/codeLens/refresh",n.messageDirection=j.MessageDirection.serverToClient,n.type=new j.ProtocolRequestType0(n.method)})(zb||(C.CodeLensRefreshRequest=zb={}));var Wb;(function(n){n.method="textDocument/documentLink",n.messageDirection=j.MessageDirection.clientToServer,n.type=new j.ProtocolRequestType(n.method)})(Wb||(C.DocumentLinkRequest=Wb={}));var Vb;(function(n){n.method="documentLink/resolve",n.messageDirection=j.MessageDirection.clientToServer,n.type=new j.ProtocolRequestType(n.method)})(Vb||(C.DocumentLinkResolveRequest=Vb={}));var Bb;(function(n){n.method="textDocument/formatting",n.messageDirection=j.MessageDirection.clientToServer,n.type=new j.ProtocolRequestType(n.method)})(Bb||(C.DocumentFormattingRequest=Bb={}));var Kb;(function(n){n.method="textDocument/rangeFormatting",n.messageDirection=j.MessageDirection.clientToServer,n.type=new j.ProtocolRequestType(n.method)})(Kb||(C.DocumentRangeFormattingRequest=Kb={}));var Gb;(function(n){n.method="textDocument/rangesFormatting",n.messageDirection=j.MessageDirection.clientToServer,n.type=new j.ProtocolRequestType(n.method)})(Gb||(C.DocumentRangesFormattingRequest=Gb={}));var Xb;(function(n){n.method="textDocument/onTypeFormatting",n.messageDirection=j.MessageDirection.clientToServer,n.type=new j.ProtocolRequestType(n.method)})(Xb||(C.DocumentOnTypeFormattingRequest=Xb={}));var Yb;(function(n){n.Identifier=1})(Yb||(C.PrepareSupportDefaultBehavior=Yb={}));var Jb;(function(n){n.method="textDocument/rename",n.messageDirection=j.MessageDirection.clientToServer,n.type=new j.ProtocolRequestType(n.method)})(Jb||(C.RenameRequest=Jb={}));var Zb;(function(n){n.method="textDocument/prepareRename",n.messageDirection=j.MessageDirection.clientToServer,n.type=new j.ProtocolRequestType(n.method)})(Zb||(C.PrepareRenameRequest=Zb={}));var Qb;(function(n){n.method="workspace/executeCommand",n.messageDirection=j.MessageDirection.clientToServer,n.type=new j.ProtocolRequestType(n.method)})(Qb||(C.ExecuteCommandRequest=Qb={}));var ev;(function(n){n.method="workspace/applyEdit",n.messageDirection=j.MessageDirection.serverToClient,n.type=new j.ProtocolRequestType("workspace/applyEdit")})(ev||(C.ApplyWorkspaceEditRequest=ev={}))});var av=k(ha=>{"use strict";Object.defineProperty(ha,"__esModule",{value:!0});ha.createProtocolConnection=void 0;var sv=ti();function uS(n,e,t,r){return sv.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),(0,sv.createMessageConnection)(n,e,t,r)}ha.createProtocolConnection=uS});var uv=k(nn=>{"use strict";var lS=nn&&nn.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,i)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),ga=nn&&nn.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&lS(e,n,t)};Object.defineProperty(nn,"__esModule",{value:!0});nn.LSPErrorCodes=nn.createProtocolConnection=void 0;ga(ti(),nn);ga(Js(),nn);ga(Ve(),nn);ga(ov(),nn);var dS=av();Object.defineProperty(nn,"createProtocolConnection",{enumerable:!0,get:function(){return dS.createProtocolConnection}});var cv;(function(n){n.lspReservedErrorRangeStart=-32899,n.RequestFailed=-32803,n.ServerCancelled=-32802,n.ContentModified=-32801,n.RequestCancelled=-32800,n.lspReservedErrorRangeEnd=-32800})(cv||(nn.LSPErrorCodes=cv={}))});var re=k(rr=>{"use strict";var fS=rr&&rr.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,i)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),lv=rr&&rr.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&fS(e,n,t)};Object.defineProperty(rr,"__esModule",{value:!0});rr.createProtocolConnection=void 0;var hS=kl();lv(kl(),rr);lv(uv(),rr);function gS(n,e,t,r){return(0,hS.createMessageConnection)(n,e,t,r)}rr.createProtocolConnection=gS});var pa=k(Nt=>{"use strict";Object.defineProperty(Nt,"__esModule",{value:!0});Nt.forEach=Nt.mapAsync=Nt.map=Nt.clearTestMode=Nt.setTestMode=Nt.Semaphore=Nt.Delayer=void 0;var ko=re(),Xl=class{constructor(e){this.defaultDelay=e,this.timeout=void 0,this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0}trigger(e,t=this.defaultDelay){return this.task=e,t>=0&&this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise(r=>{this.onSuccess=r}).then(()=>{this.completionPromise=void 0,this.onSuccess=void 0;var r=this.task();return this.task=void 0,r})),(t>=0||this.timeout===void 0)&&(this.timeout=(0,ko.RAL)().timer.setTimeout(()=>{this.timeout=void 0,this.onSuccess(void 0)},t>=0?t:this.defaultDelay)),this.completionPromise}forceDelivery(){if(!this.completionPromise)return;this.cancelTimeout();let e=this.task();return this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0,e}isTriggered(){return this.timeout!==void 0}cancel(){this.cancelTimeout(),this.completionPromise=void 0}cancelTimeout(){this.timeout!==void 0&&(this.timeout.dispose(),this.timeout=void 0)}};Nt.Delayer=Xl;var Yl=class{constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((t,r)=>{this._waiting.push({thunk:e,resolve:t,reject:r}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,ko.RAL)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let t=e.thunk();t instanceof Promise?t.then(r=>{this._active--,e.resolve(r),this.runNext()},r=>{this._active--,e.reject(r),this.runNext()}):(this._active--,e.resolve(t),this.runNext())}catch(t){this._active--,e.reject(t),this.runNext()}}};Nt.Semaphore=Yl;var Jl=!1;function pS(){Jl=!0}Nt.setTestMode=pS;function mS(){Jl=!1}Nt.clearTestMode=mS;var dv=15,Io=class{constructor(e=dv){this.yieldAfter=Jl===!0?Math.max(e,2):Math.max(e,dv),this.startTime=Date.now(),this.counter=0,this.total=0,this.counterInterval=1}start(){this.counter=0,this.total=0,this.counterInterval=1,this.startTime=Date.now()}shouldYield(){if(++this.counter>=this.counterInterval){let e=Date.now()-this.startTime,t=Math.max(0,this.yieldAfter-e);if(this.total+=this.counter,this.counter=0,e>=this.yieldAfter||t<=1)return this.counterInterval=1,this.total=0,!0;switch(e){case 0:case 1:this.counterInterval=this.total*2;break}}return!1}};async function yS(n,e,t,r){if(n.length===0)return[];let i=new Array(n.length),o=new Io(r?.yieldAfter);function s(c){o.start();for(let u=c;u<n.length;u++)if(i[u]=e(n[u]),o.shouldYield())return r?.yieldCallback&&r.yieldCallback(),u+1;return-1}let a=s(0);for(;a!==-1&&!(t!==void 0&&t.isCancellationRequested);)a=await new Promise(c=>{(0,ko.RAL)().timer.setImmediate(()=>{c(s(a))})});return i}Nt.map=yS;async function bS(n,e,t,r){if(n.length===0)return[];let i=new Array(n.length),o=new Io(r?.yieldAfter);async function s(c){o.start();for(let u=c;u<n.length;u++)if(i[u]=await e(n[u],t),o.shouldYield())return r?.yieldCallback&&r.yieldCallback(),u+1;return-1}let a=await s(0);for(;a!==-1&&!(t!==void 0&&t.isCancellationRequested);)a=await new Promise(c=>{(0,ko.RAL)().timer.setImmediate(()=>{c(s(a))})});return i}Nt.mapAsync=bS;async function vS(n,e,t,r){if(n.length===0)return;let i=new Io(r?.yieldAfter);function o(a){i.start();for(let c=a;c<n.length;c++)if(e(n[c]),i.shouldYield())return r?.yieldCallback&&r.yieldCallback(),c+1;return-1}let s=o(0);for(;s!==-1&&!(t!==void 0&&t.isCancellationRequested);)s=await new Promise(a=>{(0,ko.RAL)().timer.setImmediate(()=>{a(o(s))})})}Nt.forEach=vS});var ed=k(Ql=>{"use strict";Object.defineProperty(Ql,"__esModule",{value:!0});var CS=require("vscode"),Zl=class extends CS.CompletionItem{constructor(e){super(e)}};Ql.default=Zl});var rd=k(nd=>{"use strict";Object.defineProperty(nd,"__esModule",{value:!0});var wS=require("vscode"),td=class extends wS.CodeLens{constructor(e){super(e)}};nd.default=td});var sd=k(od=>{"use strict";Object.defineProperty(od,"__esModule",{value:!0});var DS=require("vscode"),id=class extends DS.DocumentLink{constructor(e,t){super(e,t)}};od.default=id});var ud=k(cd=>{"use strict";Object.defineProperty(cd,"__esModule",{value:!0});var RS=require("vscode"),ad=class extends RS.CodeAction{constructor(e,t){super(e),this.data=t}};cd.default=ad});var fd=k(Vi=>{"use strict";Object.defineProperty(Vi,"__esModule",{value:!0});Vi.ProtocolDiagnostic=Vi.DiagnosticCode=void 0;var _S=require("vscode"),ld=Tn(),fv;(function(n){function e(t){let r=t;return r!=null&&(ld.number(r.value)||ld.string(r.value))&&ld.string(r.target)}n.is=e})(fv||(Vi.DiagnosticCode=fv={}));var dd=class extends _S.Diagnostic{constructor(e,t,r,i){super(e,t,r),this.data=i,this.hasDiagnosticCode=!1}};Vi.ProtocolDiagnostic=dd});var pd=k(gd=>{"use strict";Object.defineProperty(gd,"__esModule",{value:!0});var SS=require("vscode"),hd=class extends SS.CallHierarchyItem{constructor(e,t,r,i,o,s,a){super(e,t,r,i,o,s),a!==void 0&&(this.data=a)}};gd.default=hd});var bd=k(yd=>{"use strict";Object.defineProperty(yd,"__esModule",{value:!0});var TS=require("vscode"),md=class extends TS.TypeHierarchyItem{constructor(e,t,r,i,o,s,a){super(e,t,r,i,o,s),a!==void 0&&(this.data=a)}};yd.default=md});var wd=k(Cd=>{"use strict";Object.defineProperty(Cd,"__esModule",{value:!0});var ma=require("vscode"),vd=class extends ma.SymbolInformation{constructor(e,t,r,i,o){let s=!(i instanceof ma.Uri);super(e,t,r,s?i:new ma.Location(i,new ma.Range(0,0,0,0))),this.hasRange=s,o!==void 0&&(this.data=o)}};Cd.default=vd});var _d=k(Rd=>{"use strict";Object.defineProperty(Rd,"__esModule",{value:!0});var ES=require("vscode"),Dd=class extends ES.InlayHint{constructor(e,t,r){super(e,t,r)}};Rd.default=Dd});var mv=k(ya=>{"use strict";Object.defineProperty(ya,"__esModule",{value:!0});ya.createConverter=void 0;var lt=require("vscode"),oe=re(),ri=Tn(),hv=pa(),xS=ed(),PS=rd(),qS=sd(),gv=ud(),pv=fd(),IS=pd(),kS=bd(),FS=wd(),MS=_d(),Sd;(function(n){function e(t){let r=t;return r&&!!r.inserting&&!!r.replacing}n.is=e})(Sd||(Sd={}));function OS(n){let t=n||(g=>g.toString());function r(g){return t(g)}function i(g){return{uri:t(g.uri)}}function o(g){return{uri:t(g.uri),languageId:g.languageId,version:g.version,text:g.getText()}}function s(g){return{uri:t(g.uri),version:g.version}}function a(g){return{textDocument:o(g)}}function c(g){let P=g;return!!P.document&&!!P.contentChanges}function u(g){let P=g;return!!P.uri&&!!P.version}function d(g,P,X){if(u(g))return{textDocument:{uri:t(g.uri),version:g.version},contentChanges:[{text:g.getText()}]};if(c(g)){let _e=P,T=X;return{textDocument:{uri:t(_e),version:T},contentChanges:g.contentChanges.map(D=>{let _=D.range;return{range:{start:{line:_.start.line,character:_.start.character},end:{line:_.end.line,character:_.end.character}},rangeLength:D.rangeLength,text:D.text}})}}else throw Error("Unsupported text document change parameter")}function h(g){return{textDocument:i(g)}}function p(g,P=!1){let X={textDocument:i(g)};return P&&(X.text=g.getText()),X}function v(g){switch(g){case lt.TextDocumentSaveReason.Manual:return oe.TextDocumentSaveReason.Manual;case lt.TextDocumentSaveReason.AfterDelay:return oe.TextDocumentSaveReason.AfterDelay;case lt.TextDocumentSaveReason.FocusOut:return oe.TextDocumentSaveReason.FocusOut}return oe.TextDocumentSaveReason.Manual}function y(g){return{textDocument:i(g.document),reason:v(g.reason)}}function R(g){return{files:g.files.map(P=>({uri:t(P)}))}}function E(g){return{files:g.files.map(P=>({oldUri:t(P.oldUri),newUri:t(P.newUri)}))}}function I(g){return{files:g.files.map(P=>({uri:t(P)}))}}function O(g){return{files:g.files.map(P=>({uri:t(P)}))}}function q(g){return{files:g.files.map(P=>({oldUri:t(P.oldUri),newUri:t(P.newUri)}))}}function N(g){return{files:g.files.map(P=>({uri:t(P)}))}}function B(g,P){return{textDocument:i(g),position:it(P)}}function se(g){switch(g){case lt.CompletionTriggerKind.TriggerCharacter:return oe.CompletionTriggerKind.TriggerCharacter;case lt.CompletionTriggerKind.TriggerForIncompleteCompletions:return oe.CompletionTriggerKind.TriggerForIncompleteCompletions;default:return oe.CompletionTriggerKind.Invoked}}function V(g,P,X){return{textDocument:i(g),position:it(P),context:{triggerKind:se(X.triggerKind),triggerCharacter:X.triggerCharacter}}}function J(g){switch(g){case lt.SignatureHelpTriggerKind.Invoke:return oe.SignatureHelpTriggerKind.Invoked;case lt.SignatureHelpTriggerKind.TriggerCharacter:return oe.SignatureHelpTriggerKind.TriggerCharacter;case lt.SignatureHelpTriggerKind.ContentChange:return oe.SignatureHelpTriggerKind.ContentChange}}function ie(g){return{label:g.label}}function He(g){return g.map(ie)}function Ie(g){return{label:g.label,parameters:He(g.parameters)}}function Ge(g){return g.map(Ie)}function Gt(g){return g===void 0?g:{signatures:Ge(g.signatures),activeSignature:g.activeSignature,activeParameter:g.activeParameter}}function ft(g,P,X){return{textDocument:i(g),position:it(P),context:{isRetrigger:X.isRetrigger,triggerCharacter:X.triggerCharacter,triggerKind:J(X.triggerKind),activeSignatureHelp:Gt(X.activeSignatureHelp)}}}function it(g){return{line:g.line,character:g.character}}function Oe(g){return g==null?g:{line:g.line>oe.uinteger.MAX_VALUE?oe.uinteger.MAX_VALUE:g.line,character:g.character>oe.uinteger.MAX_VALUE?oe.uinteger.MAX_VALUE:g.character}}function Xt(g,P){return hv.map(g,Oe,P)}function vn(g){return g.map(Oe)}function Pe(g){return g==null?g:{start:Oe(g.start),end:Oe(g.end)}}function ot(g){return g.map(Pe)}function yt(g){return g==null?g:oe.Location.create(r(g.uri),Pe(g.range))}function ht(g){switch(g){case lt.DiagnosticSeverity.Error:return oe.DiagnosticSeverity.Error;case lt.DiagnosticSeverity.Warning:return oe.DiagnosticSeverity.Warning;case lt.DiagnosticSeverity.Information:return oe.DiagnosticSeverity.Information;case lt.DiagnosticSeverity.Hint:return oe.DiagnosticSeverity.Hint}}function Vn(g){if(!g)return;let P=[];for(let X of g){let _e=Cn(X);_e!==void 0&&P.push(_e)}return P.length>0?P:void 0}function Cn(g){switch(g){case lt.DiagnosticTag.Unnecessary:return oe.DiagnosticTag.Unnecessary;case lt.DiagnosticTag.Deprecated:return oe.DiagnosticTag.Deprecated;default:return}}function Ht(g){return{message:g.message,location:yt(g.location)}}function or(g){return g.map(Ht)}function br(g){if(g!=null)return ri.number(g)||ri.string(g)?g:{value:g.value,target:r(g.target)}}function Bn(g){let P=oe.Diagnostic.create(Pe(g.range),g.message),X=g instanceof pv.ProtocolDiagnostic?g:void 0;X!==void 0&&X.data!==void 0&&(P.data=X.data);let _e=br(g.code);return pv.DiagnosticCode.is(_e)?X!==void 0&&X.hasDiagnosticCode?P.code=_e:(P.code=_e.value,P.codeDescription={href:_e.target}):P.code=_e,ri.number(g.severity)&&(P.severity=ht(g.severity)),Array.isArray(g.tags)&&(P.tags=Vn(g.tags)),g.relatedInformation&&(P.relatedInformation=or(g.relatedInformation)),g.source&&(P.source=g.source),P}function Fn(g,P){return g==null?g:hv.map(g,Bn,P)}function Mn(g){return g==null?g:g.map(Bn)}function Kn(g,P){switch(g){case"$string":return P;case oe.MarkupKind.PlainText:return{kind:g,value:P};case oe.MarkupKind.Markdown:return{kind:g,value:P.value};default:return`Unsupported Markup content received. Kind is: ${g}`}}function st(g){switch(g){case lt.CompletionItemTag.Deprecated:return oe.CompletionItemTag.Deprecated}}function sr(g){if(g===void 0)return g;let P=[];for(let X of g){let _e=st(X);_e!==void 0&&P.push(_e)}return P}function On(g,P){return P!==void 0?P:g+1}function wn(g,P=!1){let X,_e;ri.string(g.label)?X=g.label:(X=g.label.label,P&&(g.label.detail!==void 0||g.label.description!==void 0)&&(_e={detail:g.label.detail,description:g.label.description}));let T={label:X};_e!==void 0&&(T.labelDetails=_e);let m=g instanceof xS.default?g:void 0;g.detail&&(T.detail=g.detail),g.documentation&&(!m||m.documentationFormat==="$string"?T.documentation=g.documentation:T.documentation=Kn(m.documentationFormat,g.documentation)),g.filterText&&(T.filterText=g.filterText),vr(T,g),ri.number(g.kind)&&(T.kind=On(g.kind,m&&m.originalItemKind)),g.sortText&&(T.sortText=g.sortText),g.additionalTextEdits&&(T.additionalTextEdits=rt(g.additionalTextEdits)),g.commitCharacters&&(T.commitCharacters=g.commitCharacters.slice()),g.command&&(T.command=W(g.command)),(g.preselect===!0||g.preselect===!1)&&(T.preselect=g.preselect);let D=sr(g.tags);if(m){if(m.data!==void 0&&(T.data=m.data),m.deprecated===!0||m.deprecated===!1){if(m.deprecated===!0&&D!==void 0&&D.length>0){let _=D.indexOf(lt.CompletionItemTag.Deprecated);_!==-1&&D.splice(_,1)}T.deprecated=m.deprecated}m.insertTextMode!==void 0&&(T.insertTextMode=m.insertTextMode)}return D!==void 0&&D.length>0&&(T.tags=D),T.insertTextMode===void 0&&g.keepWhitespace===!0&&(T.insertTextMode=oe.InsertTextMode.adjustIndentation),T}function vr(g,P){let X=oe.InsertTextFormat.PlainText,_e,T;P.textEdit?(_e=P.textEdit.newText,T=P.textEdit.range):P.insertText instanceof lt.SnippetString?(X=oe.InsertTextFormat.Snippet,_e=P.insertText.value):_e=P.insertText,P.range&&(T=P.range),g.insertTextFormat=X,P.fromEdit&&_e!==void 0&&T!==void 0?g.textEdit=Dn(_e,T):g.insertText=_e}function Dn(g,P){return Sd.is(P)?oe.InsertReplaceEdit.create(g,Pe(P.inserting),Pe(P.replacing)):{newText:g,range:Pe(P)}}function Gn(g){return{range:Pe(g.range),newText:g.newText}}function rt(g){return g==null?g:g.map(Gn)}function kt(g){return g<=lt.SymbolKind.TypeParameter?g+1:oe.SymbolKind.Property}function St(g){return g}function cn(g){return g.map(St)}function Yt(g,P,X){return{textDocument:i(g),position:it(P),context:{includeDeclaration:X.includeDeclaration}}}async function Xn(g,P){let X=oe.CodeAction.create(g.title);if(g instanceof gv.default&&g.data!==void 0&&(X.data=g.data),g.kind!==void 0&&(X.kind=w(g.kind)),g.diagnostics!==void 0&&(X.diagnostics=await Fn(g.diagnostics,P)),g.edit!==void 0)throw new Error("VS Code code actions can only be converted to a protocol code action without an edit.");return g.command!==void 0&&(X.command=W(g.command)),g.isPreferred!==void 0&&(X.isPreferred=g.isPreferred),g.disabled!==void 0&&(X.disabled={reason:g.disabled.reason}),X}function ar(g){let P=oe.CodeAction.create(g.title);if(g instanceof gv.default&&g.data!==void 0&&(P.data=g.data),g.kind!==void 0&&(P.kind=w(g.kind)),g.diagnostics!==void 0&&(P.diagnostics=Mn(g.diagnostics)),g.edit!==void 0)throw new Error("VS Code code actions can only be converted to a protocol code action without an edit.");return g.command!==void 0&&(P.command=W(g.command)),g.isPreferred!==void 0&&(P.isPreferred=g.isPreferred),g.disabled!==void 0&&(P.disabled={reason:g.disabled.reason}),P}async function Ln(g,P){if(g==null)return g;let X;return g.only&&ri.string(g.only.value)&&(X=[g.only.value]),oe.CodeActionContext.create(await Fn(g.diagnostics,P),X,Ut(g.triggerKind))}function cr(g){if(g==null)return g;let P;return g.only&&ri.string(g.only.value)&&(P=[g.only.value]),oe.CodeActionContext.create(Mn(g.diagnostics),P,Ut(g.triggerKind))}function Ut(g){switch(g){case lt.CodeActionTriggerKind.Invoke:return oe.CodeActionTriggerKind.Invoked;case lt.CodeActionTriggerKind.Automatic:return oe.CodeActionTriggerKind.Automatic;default:return}}function w(g){if(g!=null)return g.value}function M(g){return g==null?g:oe.InlineValueContext.create(g.frameId,Pe(g.stoppedLocation))}function H(g,P,X){return{context:oe.InlineCompletionContext.create(X.triggerKind,X.selectedCompletionInfo),textDocument:i(g),position:Oe(P)}}function W(g){let P=oe.Command.create(g.title,g.command);return g.arguments&&(P.arguments=g.arguments),P}function we(g){let P=oe.CodeLens.create(Pe(g.range));return g.command&&(P.command=W(g.command)),g instanceof PS.default&&g.data&&(P.data=g.data),P}function ve(g,P){let X={tabSize:g.tabSize,insertSpaces:g.insertSpaces};return P.trimTrailingWhitespace&&(X.trimTrailingWhitespace=!0),P.trimFinalNewlines&&(X.trimFinalNewlines=!0),P.insertFinalNewline&&(X.insertFinalNewline=!0),X}function Ee(g){return{textDocument:i(g)}}function ke(g){return{textDocument:i(g)}}function le(g){let P=oe.DocumentLink.create(Pe(g.range));g.target&&(P.target=r(g.target)),g.tooltip!==void 0&&(P.tooltip=g.tooltip);let X=g instanceof qS.default?g:void 0;return X&&X.data&&(P.data=X.data),P}function Re(g){return{textDocument:i(g)}}function pe(g){let P={name:g.name,kind:kt(g.kind),uri:r(g.uri),range:Pe(g.range),selectionRange:Pe(g.selectionRange)};return g.detail!==void 0&&g.detail.length>0&&(P.detail=g.detail),g.tags!==void 0&&(P.tags=cn(g.tags)),g instanceof IS.default&&g.data!==void 0&&(P.data=g.data),P}function Fe(g){let P={name:g.name,kind:kt(g.kind),uri:r(g.uri),range:Pe(g.range),selectionRange:Pe(g.selectionRange)};return g.detail!==void 0&&g.detail.length>0&&(P.detail=g.detail),g.tags!==void 0&&(P.tags=cn(g.tags)),g instanceof kS.default&&g.data!==void 0&&(P.data=g.data),P}function Qe(g){let P=g instanceof FS.default?{name:g.name,kind:kt(g.kind),location:g.hasRange?yt(g.location):{uri:t(g.location.uri)},data:g.data}:{name:g.name,kind:kt(g.kind),location:yt(g.location)};return g.tags!==void 0&&(P.tags=cn(g.tags)),g.containerName!==""&&(P.containerName=g.containerName),P}function bt(g){let P=typeof g.label=="string"?g.label:g.label.map(Cr),X=oe.InlayHint.create(Oe(g.position),P);return g.kind!==void 0&&(X.kind=g.kind),g.textEdits!==void 0&&(X.textEdits=rt(g.textEdits)),g.tooltip!==void 0&&(X.tooltip=wr(g.tooltip)),g.paddingLeft!==void 0&&(X.paddingLeft=g.paddingLeft),g.paddingRight!==void 0&&(X.paddingRight=g.paddingRight),g instanceof MS.default&&g.data!==void 0&&(X.data=g.data),X}function Cr(g){let P=oe.InlayHintLabelPart.create(g.value);return g.location!==void 0&&(P.location=yt(g.location)),g.command!==void 0&&(P.command=W(g.command)),g.tooltip!==void 0&&(P.tooltip=wr(g.tooltip)),P}function wr(g){return typeof g=="string"?g:{kind:oe.MarkupKind.Markdown,value:g.value}}return{asUri:r,asTextDocumentIdentifier:i,asTextDocumentItem:o,asVersionedTextDocumentIdentifier:s,asOpenTextDocumentParams:a,asChangeTextDocumentParams:d,asCloseTextDocumentParams:h,asSaveTextDocumentParams:p,asWillSaveTextDocumentParams:y,asDidCreateFilesParams:R,asDidRenameFilesParams:E,asDidDeleteFilesParams:I,asWillCreateFilesParams:O,asWillRenameFilesParams:q,asWillDeleteFilesParams:N,asTextDocumentPositionParams:B,asCompletionParams:V,asSignatureHelpParams:ft,asWorkerPosition:it,asRange:Pe,asRanges:ot,asPosition:Oe,asPositions:Xt,asPositionsSync:vn,asLocation:yt,asDiagnosticSeverity:ht,asDiagnosticTag:Cn,asDiagnostic:Bn,asDiagnostics:Fn,asDiagnosticsSync:Mn,asCompletionItem:wn,asTextEdit:Gn,asSymbolKind:kt,asSymbolTag:St,asSymbolTags:cn,asReferenceParams:Yt,asCodeAction:Xn,asCodeActionSync:ar,asCodeActionContext:Ln,asCodeActionContextSync:cr,asInlineValueContext:M,asCommand:W,asCodeLens:we,asFormattingOptions:ve,asDocumentSymbolParams:Ee,asCodeLensParams:ke,asDocumentLink:le,asDocumentLinkParams:Re,asCallHierarchyItem:pe,asTypeHierarchyItem:Fe,asInlayHint:bt,asWorkspaceSymbol:Qe,asInlineCompletionParams:H}}ya.createConverter=OS});var vv=k(va=>{"use strict";Object.defineProperty(va,"__esModule",{value:!0});va.createConverter=void 0;var z=require("vscode"),te=re(),Pn=Tn(),De=pa(),LS=ed(),AS=rd(),NS=sd(),$S=ud(),yv=fd(),jS=pd(),HS=bd(),US=wd(),zS=_d(),bv=re(),ba;(function(n){function e(t){let r=t;return r&&Pn.string(r.language)&&Pn.string(r.value)}n.is=e})(ba||(ba={}));function WS(n,e,t){let i=n||(l=>z.Uri.parse(l));function o(l){return i(l)}function s(l){let S=[];for(let A of l)if(typeof A=="string")S.push(A);else if(bv.NotebookCellTextDocumentFilter.is(A))if(typeof A.notebook=="string")S.push({notebookType:A.notebook,language:A.language});else{let Y=A.notebook.notebookType??"*";S.push({notebookType:Y,scheme:A.notebook.scheme,pattern:A.notebook.pattern,language:A.language})}else bv.TextDocumentFilter.is(A)&&S.push({language:A.language,scheme:A.scheme,pattern:A.pattern});return S}async function a(l,S){return De.map(l,u,S)}function c(l){let S=new Array(l.length);for(let A=0;A<l.length;A++)S[A]=u(l[A]);return S}function u(l){let S=new yv.ProtocolDiagnostic(y(l.range),l.message,E(l.severity),l.data);if(l.code!==void 0){if(typeof l.code=="string"||typeof l.code=="number")te.CodeDescription.is(l.codeDescription)?S.code={value:l.code,target:o(l.codeDescription.href)}:S.code=l.code;else if(yv.DiagnosticCode.is(l.code)){S.hasDiagnosticCode=!0;let A=l.code;S.code={value:A.value,target:o(A.target)}}}return l.source&&(S.source=l.source),l.relatedInformation&&(S.relatedInformation=d(l.relatedInformation)),Array.isArray(l.tags)&&(S.tags=h(l.tags)),S}function d(l){let S=new Array(l.length);for(let A=0;A<l.length;A++){let Y=l[A];S[A]=new z.DiagnosticRelatedInformation(ht(Y.location),Y.message)}return S}function h(l){if(!l)return;let S=[];for(let A of l){let Y=p(A);Y!==void 0&&S.push(Y)}return S.length>0?S:void 0}function p(l){switch(l){case te.DiagnosticTag.Unnecessary:return z.DiagnosticTag.Unnecessary;case te.DiagnosticTag.Deprecated:return z.DiagnosticTag.Deprecated;default:return}}function v(l){return l?new z.Position(l.line,l.character):void 0}function y(l){return l?new z.Range(l.start.line,l.start.character,l.end.line,l.end.character):void 0}async function R(l,S){return De.map(l,A=>new z.Range(A.start.line,A.start.character,A.end.line,A.end.character),S)}function E(l){if(l==null)return z.DiagnosticSeverity.Error;switch(l){case te.DiagnosticSeverity.Error:return z.DiagnosticSeverity.Error;case te.DiagnosticSeverity.Warning:return z.DiagnosticSeverity.Warning;case te.DiagnosticSeverity.Information:return z.DiagnosticSeverity.Information;case te.DiagnosticSeverity.Hint:return z.DiagnosticSeverity.Hint}return z.DiagnosticSeverity.Error}function I(l){if(Pn.string(l))return q(l);if(ba.is(l))return q().appendCodeblock(l.value,l.language);if(Array.isArray(l)){let S=[];for(let A of l){let Y=q();ba.is(A)?Y.appendCodeblock(A.value,A.language):Y.appendMarkdown(A),S.push(Y)}return S}else return q(l)}function O(l){if(Pn.string(l))return l;switch(l.kind){case te.MarkupKind.Markdown:return q(l.value);case te.MarkupKind.PlainText:return l.value;default:return`Unsupported Markup content received. Kind is: ${l.kind}`}}function q(l){let S;if(l===void 0||typeof l=="string")S=new z.MarkdownString(l);else switch(l.kind){case te.MarkupKind.Markdown:S=new z.MarkdownString(l.value);break;case te.MarkupKind.PlainText:S=new z.MarkdownString,S.appendText(l.value);break;default:S=new z.MarkdownString,S.appendText(`Unsupported Markup content received. Kind is: ${l.kind}`);break}return S.isTrusted=e,S.supportHtml=t,S}function N(l){if(l)return new z.Hover(I(l.contents),y(l.range))}async function B(l,S,A){if(!l)return;if(Array.isArray(l))return De.map(l,Jn=>He(Jn,S),A);let Y=l,{defaultRange:vt,commitCharacters:Tt}=se(Y,S),qe=await De.map(Y.items,Jn=>He(Jn,Tt,vt,Y.itemDefaults?.insertTextMode,Y.itemDefaults?.insertTextFormat,Y.itemDefaults?.data),A);return new z.CompletionList(qe,Y.isIncomplete)}function se(l,S){let A=l.itemDefaults?.editRange,Y=l.itemDefaults?.commitCharacters??S;return te.Range.is(A)?{defaultRange:y(A),commitCharacters:Y}:A!==void 0?{defaultRange:{inserting:y(A.insert),replacing:y(A.replace)},commitCharacters:Y}:{defaultRange:void 0,commitCharacters:Y}}function V(l){return te.CompletionItemKind.Text<=l&&l<=te.CompletionItemKind.TypeParameter?[l-1,void 0]:[z.CompletionItemKind.Text,l]}function J(l){switch(l){case te.CompletionItemTag.Deprecated:return z.CompletionItemTag.Deprecated}}function ie(l){if(l==null)return[];let S=[];for(let A of l){let Y=J(A);Y!==void 0&&S.push(Y)}return S}function He(l,S,A,Y,vt,Tt){let qe=ie(l.tags),Jn=Ie(l),Le=new LS.default(Jn);l.detail&&(Le.detail=l.detail),l.documentation&&(Le.documentation=O(l.documentation),Le.documentationFormat=Pn.string(l.documentation)?"$string":l.documentation.kind),l.filterText&&(Le.filterText=l.filterText);let is=Ge(l,A,vt);if(is&&(Le.insertText=is.text,Le.range=is.range,Le.fromEdit=is.fromEdit),Pn.number(l.kind)){let[UC,Jh]=V(l.kind);Le.kind=UC,Jh&&(Le.originalItemKind=Jh)}l.sortText&&(Le.sortText=l.sortText),l.additionalTextEdits&&(Le.additionalTextEdits=Oe(l.additionalTextEdits));let Xh=l.commitCharacters!==void 0?Pn.stringArray(l.commitCharacters)?l.commitCharacters:void 0:S;Xh&&(Le.commitCharacters=Xh.slice()),l.command&&(Le.command=rt(l.command)),(l.deprecated===!0||l.deprecated===!1)&&(Le.deprecated=l.deprecated,l.deprecated===!0&&qe.push(z.CompletionItemTag.Deprecated)),(l.preselect===!0||l.preselect===!1)&&(Le.preselect=l.preselect);let Yh=l.data??Tt;Yh!==void 0&&(Le.data=Yh),qe.length>0&&(Le.tags=qe);let vc=l.insertTextMode??Y;return vc!==void 0&&(Le.insertTextMode=vc,vc===te.InsertTextMode.asIs&&(Le.keepWhitespace=!0)),Le}function Ie(l){return te.CompletionItemLabelDetails.is(l.labelDetails)?{label:l.label,detail:l.labelDetails.detail,description:l.labelDetails.description}:l.label}function Ge(l,S,A){let Y=l.insertTextFormat??A;if(l.textEdit!==void 0||S!==void 0){let[vt,Tt]=l.textEdit!==void 0?Gt(l.textEdit):[S,l.textEditText??l.label];return Y===te.InsertTextFormat.Snippet?{text:new z.SnippetString(Tt),range:vt,fromEdit:!0}:{text:Tt,range:vt,fromEdit:!0}}else return l.insertText?Y===te.InsertTextFormat.Snippet?{text:new z.SnippetString(l.insertText),fromEdit:!1}:{text:l.insertText,fromEdit:!1}:void 0}function Gt(l){return te.InsertReplaceEdit.is(l)?[{inserting:y(l.insert),replacing:y(l.replace)},l.newText]:[y(l.range),l.newText]}function ft(l){if(l)return new z.TextEdit(y(l.range),l.newText)}async function it(l,S){if(l)return De.map(l,ft,S)}function Oe(l){if(!l)return;let S=new Array(l.length);for(let A=0;A<l.length;A++)S[A]=ft(l[A]);return S}async function Xt(l,S){if(!l)return;let A=new z.SignatureHelp;return Pn.number(l.activeSignature)?A.activeSignature=l.activeSignature:A.activeSignature=0,Pn.number(l.activeParameter)?A.activeParameter=l.activeParameter:A.activeParameter=0,l.signatures&&(A.signatures=await vn(l.signatures,S)),A}async function vn(l,S){return De.mapAsync(l,Pe,S)}async function Pe(l,S){let A=new z.SignatureInformation(l.label);return l.documentation!==void 0&&(A.documentation=O(l.documentation)),l.parameters!==void 0&&(A.parameters=await ot(l.parameters,S)),l.activeParameter!==void 0&&(A.activeParameter=l.activeParameter),A}function ot(l,S){return De.map(l,yt,S)}function yt(l){let S=new z.ParameterInformation(l.label);return l.documentation&&(S.documentation=O(l.documentation)),S}function ht(l){return l?new z.Location(i(l.uri),y(l.range)):void 0}async function Vn(l,S){if(l)return or(l,S)}async function Cn(l,S){if(l)return or(l,S)}function Ht(l){if(!l)return;let S={targetUri:i(l.targetUri),targetRange:y(l.targetRange),originSelectionRange:y(l.originSelectionRange),targetSelectionRange:y(l.targetSelectionRange)};if(!S.targetSelectionRange)throw new Error("targetSelectionRange must not be undefined or null");return S}async function or(l,S){if(l)if(Pn.array(l)){if(l.length===0)return[];if(te.LocationLink.is(l[0])){let A=l;return De.map(A,Ht,S)}else{let A=l;return De.map(A,ht,S)}}else return te.LocationLink.is(l)?[Ht(l)]:ht(l)}async function br(l,S){if(l)return De.map(l,ht,S)}async function Bn(l,S){if(l)return De.map(l,Fn,S)}function Fn(l){let S=new z.DocumentHighlight(y(l.range));return Pn.number(l.kind)&&(S.kind=Mn(l.kind)),S}function Mn(l){switch(l){case te.DocumentHighlightKind.Text:return z.DocumentHighlightKind.Text;case te.DocumentHighlightKind.Read:return z.DocumentHighlightKind.Read;case te.DocumentHighlightKind.Write:return z.DocumentHighlightKind.Write}return z.DocumentHighlightKind.Text}async function Kn(l,S){if(l)return De.map(l,wn,S)}function st(l){return l<=te.SymbolKind.TypeParameter?l-1:z.SymbolKind.Property}function sr(l){switch(l){case te.SymbolTag.Deprecated:return z.SymbolTag.Deprecated;default:return}}function On(l){if(l==null)return;let S=[];for(let A of l){let Y=sr(A);Y!==void 0&&S.push(Y)}return S.length===0?void 0:S}function wn(l){let S=l.data,A=l.location,Y=A.range===void 0||S!==void 0?new US.default(l.name,st(l.kind),l.containerName??"",A.range===void 0?i(A.uri):new z.Location(i(l.location.uri),y(A.range)),S):new z.SymbolInformation(l.name,st(l.kind),l.containerName??"",new z.Location(i(l.location.uri),y(A.range)));return Gn(Y,l),Y}async function vr(l,S){if(l!=null)return De.map(l,Dn,S)}function Dn(l){let S=new z.DocumentSymbol(l.name,l.detail||"",st(l.kind),y(l.range),y(l.selectionRange));if(Gn(S,l),l.children!==void 0&&l.children.length>0){let A=[];for(let Y of l.children)A.push(Dn(Y));S.children=A}return S}function Gn(l,S){l.tags=On(S.tags),S.deprecated&&(l.tags?l.tags.includes(z.SymbolTag.Deprecated)||(l.tags=l.tags.concat(z.SymbolTag.Deprecated)):l.tags=[z.SymbolTag.Deprecated])}function rt(l){let S={title:l.title,command:l.command};return l.arguments&&(S.arguments=l.arguments),S}async function kt(l,S){if(l)return De.map(l,rt,S)}let St=new Map;St.set(te.CodeActionKind.Empty,z.CodeActionKind.Empty),St.set(te.CodeActionKind.QuickFix,z.CodeActionKind.QuickFix),St.set(te.CodeActionKind.Refactor,z.CodeActionKind.Refactor),St.set(te.CodeActionKind.RefactorExtract,z.CodeActionKind.RefactorExtract),St.set(te.CodeActionKind.RefactorInline,z.CodeActionKind.RefactorInline),St.set(te.CodeActionKind.RefactorRewrite,z.CodeActionKind.RefactorRewrite),St.set(te.CodeActionKind.Source,z.CodeActionKind.Source),St.set(te.CodeActionKind.SourceOrganizeImports,z.CodeActionKind.SourceOrganizeImports);function cn(l){if(l==null)return;let S=St.get(l);if(S)return S;let A=l.split(".");S=z.CodeActionKind.Empty;for(let Y of A)S=S.append(Y);return S}function Yt(l){if(l!=null)return l.map(S=>cn(S))}async function Xn(l,S){if(l==null)return;let A=new $S.default(l.title,l.data);return l.kind!==void 0&&(A.kind=cn(l.kind)),l.diagnostics!==void 0&&(A.diagnostics=c(l.diagnostics)),l.edit!==void 0&&(A.edit=await Ut(l.edit,S)),l.command!==void 0&&(A.command=rt(l.command)),l.isPreferred!==void 0&&(A.isPreferred=l.isPreferred),l.disabled!==void 0&&(A.disabled={reason:l.disabled.reason}),A}function ar(l,S){return De.mapAsync(l,async A=>te.Command.is(A)?rt(A):Xn(A,S),S)}function Ln(l){if(!l)return;let S=new AS.default(y(l.range));return l.command&&(S.command=rt(l.command)),l.data!==void 0&&l.data!==null&&(S.data=l.data),S}async function cr(l,S){if(l)return De.map(l,Ln,S)}async function Ut(l,S){if(!l)return;let A=new Map;if(l.changeAnnotations!==void 0){let Tt=l.changeAnnotations;await De.forEach(Object.keys(Tt),qe=>{let Jn=w(Tt[qe]);A.set(qe,Jn)},S)}let Y=Tt=>{if(Tt!==void 0)return A.get(Tt)},vt=new z.WorkspaceEdit;if(l.documentChanges){let Tt=l.documentChanges;await De.forEach(Tt,qe=>{if(te.CreateFile.is(qe))vt.createFile(i(qe.uri),qe.options,Y(qe.annotationId));else if(te.RenameFile.is(qe))vt.renameFile(i(qe.oldUri),i(qe.newUri),qe.options,Y(qe.annotationId));else if(te.DeleteFile.is(qe))vt.deleteFile(i(qe.uri),qe.options,Y(qe.annotationId));else if(te.TextDocumentEdit.is(qe)){let Jn=i(qe.textDocument.uri);for(let Le of qe.edits)te.AnnotatedTextEdit.is(Le)?vt.replace(Jn,y(Le.range),Le.newText,Y(Le.annotationId)):vt.replace(Jn,y(Le.range),Le.newText)}else throw new Error(`Unknown workspace edit change received:
${JSON.stringify(qe,void 0,4)}`)},S)}else if(l.changes){let Tt=l.changes;await De.forEach(Object.keys(Tt),qe=>{vt.set(i(qe),Oe(Tt[qe]))},S)}return vt}function w(l){if(l!==void 0)return{label:l.label,needsConfirmation:!!l.needsConfirmation,description:l.description}}function M(l){let S=y(l.range),A=l.target?o(l.target):void 0,Y=new NS.default(S,A);return l.tooltip!==void 0&&(Y.tooltip=l.tooltip),l.data!==void 0&&l.data!==null&&(Y.data=l.data),Y}async function H(l,S){if(l)return De.map(l,M,S)}function W(l){return new z.Color(l.red,l.green,l.blue,l.alpha)}function we(l){return new z.ColorInformation(y(l.range),W(l.color))}async function ve(l,S){if(l)return De.map(l,we,S)}function Ee(l){let S=new z.ColorPresentation(l.label);return S.additionalTextEdits=Oe(l.additionalTextEdits),l.textEdit&&(S.textEdit=ft(l.textEdit)),S}async function ke(l,S){if(l)return De.map(l,Ee,S)}function le(l){if(l)switch(l){case te.FoldingRangeKind.Comment:return z.FoldingRangeKind.Comment;case te.FoldingRangeKind.Imports:return z.FoldingRangeKind.Imports;case te.FoldingRangeKind.Region:return z.FoldingRangeKind.Region}}function Re(l){return new z.FoldingRange(l.startLine,l.endLine,le(l.kind))}async function pe(l,S){if(l)return De.map(l,Re,S)}function Fe(l){return new z.SelectionRange(y(l.range),l.parent?Fe(l.parent):void 0)}async function Qe(l,S){return Array.isArray(l)?De.map(l,Fe,S):[]}function bt(l){return te.InlineValueText.is(l)?new z.InlineValueText(y(l.range),l.text):te.InlineValueVariableLookup.is(l)?new z.InlineValueVariableLookup(y(l.range),l.variableName,l.caseSensitiveLookup):new z.InlineValueEvaluatableExpression(y(l.range),l.expression)}async function Cr(l,S){return Array.isArray(l)?De.map(l,bt,S):[]}async function wr(l,S){let A=typeof l.label=="string"?l.label:await De.map(l.label,g,S),Y=new zS.default(v(l.position),A);return l.kind!==void 0&&(Y.kind=l.kind),l.textEdits!==void 0&&(Y.textEdits=await it(l.textEdits,S)),l.tooltip!==void 0&&(Y.tooltip=P(l.tooltip)),l.paddingLeft!==void 0&&(Y.paddingLeft=l.paddingLeft),l.paddingRight!==void 0&&(Y.paddingRight=l.paddingRight),l.data!==void 0&&(Y.data=l.data),Y}function g(l){let S=new z.InlayHintLabelPart(l.value);return l.location!==void 0&&(S.location=ht(l.location)),l.tooltip!==void 0&&(S.tooltip=P(l.tooltip)),l.command!==void 0&&(S.command=rt(l.command)),S}function P(l){return typeof l=="string"?l:q(l)}async function X(l,S){if(Array.isArray(l))return De.mapAsync(l,wr,S)}function _e(l){if(l===null)return;let S=new jS.default(st(l.kind),l.name,l.detail||"",o(l.uri),y(l.range),y(l.selectionRange),l.data);return l.tags!==void 0&&(S.tags=On(l.tags)),S}async function T(l,S){if(l!==null)return De.map(l,_e,S)}async function m(l,S){return new z.CallHierarchyIncomingCall(_e(l.from),await R(l.fromRanges,S))}async function D(l,S){if(l!==null)return De.mapAsync(l,m,S)}async function _(l,S){return new z.CallHierarchyOutgoingCall(_e(l.to),await R(l.fromRanges,S))}async function b(l,S){if(l!==null)return De.mapAsync(l,_,S)}async function f(l,S){if(l!=null)return new z.SemanticTokens(new Uint32Array(l.data),l.resultId)}function x(l){return new z.SemanticTokensEdit(l.start,l.deleteCount,l.data!==void 0?new Uint32Array(l.data):void 0)}async function L(l,S){if(l!=null)return new z.SemanticTokensEdits(l.edits.map(x),l.resultId)}function ne(l){return l}async function Ue(l,S){if(l!=null)return new z.LinkedEditingRanges(await R(l.ranges,S),Me(l.wordPattern))}function Me(l){if(l!=null)return new RegExp(l)}function Jt(l){if(l===null)return;let S=new HS.default(st(l.kind),l.name,l.detail||"",o(l.uri),y(l.range),y(l.selectionRange),l.data);return l.tags!==void 0&&(S.tags=On(l.tags)),S}async function un(l,S){if(l!==null)return De.map(l,Jt,S)}function An(l){if(Pn.string(l))return l;if(te.RelativePattern.is(l)){if(te.URI.is(l.baseUri))return new z.RelativePattern(o(l.baseUri),l.pattern);if(te.WorkspaceFolder.is(l.baseUri)){let S=z.workspace.getWorkspaceFolder(o(l.baseUri.uri));return S!==void 0?new z.RelativePattern(S,l.pattern):void 0}}}async function he(l,S){if(!l)return;if(Array.isArray(l))return De.map(l,vt=>Yn(vt),S);let A=l,Y=await De.map(A.items,vt=>Yn(vt),S);return new z.InlineCompletionList(Y)}function Yn(l){let S;typeof l.insertText=="string"?S=l.insertText:S=new z.SnippetString(l.insertText.value);let A;l.command&&(A=rt(l.command));let Y=new z.InlineCompletionItem(S,y(l.range),A);return l.filterText&&(Y.filterText=l.filterText),Y}return{asUri:o,asDocumentSelector:s,asDiagnostics:a,asDiagnostic:u,asRange:y,asRanges:R,asPosition:v,asDiagnosticSeverity:E,asDiagnosticTag:p,asHover:N,asCompletionResult:B,asCompletionItem:He,asTextEdit:ft,asTextEdits:it,asSignatureHelp:Xt,asSignatureInformations:vn,asSignatureInformation:Pe,asParameterInformations:ot,asParameterInformation:yt,asDeclarationResult:Vn,asDefinitionResult:Cn,asLocation:ht,asReferences:br,asDocumentHighlights:Bn,asDocumentHighlight:Fn,asDocumentHighlightKind:Mn,asSymbolKind:st,asSymbolTag:sr,asSymbolTags:On,asSymbolInformations:Kn,asSymbolInformation:wn,asDocumentSymbols:vr,asDocumentSymbol:Dn,asCommand:rt,asCommands:kt,asCodeAction:Xn,asCodeActionKind:cn,asCodeActionKinds:Yt,asCodeActionResult:ar,asCodeLens:Ln,asCodeLenses:cr,asWorkspaceEdit:Ut,asDocumentLink:M,asDocumentLinks:H,asFoldingRangeKind:le,asFoldingRange:Re,asFoldingRanges:pe,asColor:W,asColorInformation:we,asColorInformations:ve,asColorPresentation:Ee,asColorPresentations:ke,asSelectionRange:Fe,asSelectionRanges:Qe,asInlineValue:bt,asInlineValues:Cr,asInlayHint:wr,asInlayHints:X,asSemanticTokensLegend:ne,asSemanticTokens:f,asSemanticTokensEdit:x,asSemanticTokensEdits:L,asCallHierarchyItem:_e,asCallHierarchyItems:T,asCallHierarchyIncomingCall:m,asCallHierarchyIncomingCalls:D,asCallHierarchyOutgoingCall:_,asCallHierarchyOutgoingCalls:b,asLinkedEditingRanges:Ue,asTypeHierarchyItem:Jt,asTypeHierarchyItems:un,asGlobPattern:An,asInlineCompletionResult:he,asInlineCompletionItem:Yn}}va.createConverter=WS});var Be=k(qn=>{"use strict";Object.defineProperty(qn,"__esModule",{value:!0});qn.generateUuid=qn.parse=qn.isUUID=qn.v4=qn.empty=void 0;var Fo=class{constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}},Mo=class n extends Fo{static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return n._oneOf(n._chars)}constructor(){super([n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),"-",n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),"-","4",n._randomHex(),n._randomHex(),n._randomHex(),"-",n._oneOf(n._timeHighBits),n._randomHex(),n._randomHex(),n._randomHex(),"-",n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex()].join(""))}};Mo._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];Mo._timeHighBits=["8","9","a","b"];qn.empty=new Fo("00000000-0000-0000-0000-000000000000");function Cv(){return new Mo}qn.v4=Cv;var VS=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function wv(n){return VS.test(n)}qn.isUUID=wv;function BS(n){if(!wv(n))throw new Error("invalid uuid");return new Fo(n)}qn.parse=BS;function KS(){return Cv().asHex()}qn.generateUuid=KS});var Ed=k(Ca=>{"use strict";Object.defineProperty(Ca,"__esModule",{value:!0});Ca.ProgressPart=void 0;var Dv=require("vscode"),Rv=re(),_v=Tn(),Td=class{constructor(e,t,r){this._client=e,this._token=t,this._reported=0,this._infinite=!1,this._lspProgressDisposable=this._client.onProgress(Rv.WorkDoneProgress.type,this._token,i=>{switch(i.kind){case"begin":this.begin(i);break;case"report":this.report(i);break;case"end":this.done(),r&&r(this);break}})}begin(e){this._infinite=e.percentage===void 0,this._lspProgressDisposable!==void 0&&Dv.window.withProgress({location:Dv.ProgressLocation.Window,cancellable:e.cancellable,title:e.title},async(t,r)=>{if(this._lspProgressDisposable!==void 0)return this._progress=t,this._cancellationToken=r,this._tokenDisposable=this._cancellationToken.onCancellationRequested(()=>{this._client.sendNotification(Rv.WorkDoneProgressCancelNotification.type,{token:this._token})}),this.report(e),new Promise((i,o)=>{this._resolve=i,this._reject=o})})}report(e){if(this._infinite&&_v.string(e.message))this._progress!==void 0&&this._progress.report({message:e.message});else if(_v.number(e.percentage)){let t=Math.max(0,Math.min(e.percentage,100)),r=Math.max(0,t-this._reported);this._reported+=r,this._progress!==void 0&&this._progress.report({message:e.message,increment:r})}}cancel(){this.cleanup(),this._reject!==void 0&&(this._reject(),this._resolve=void 0,this._reject=void 0)}done(){this.cleanup(),this._resolve!==void 0&&(this._resolve(),this._resolve=void 0,this._reject=void 0)}cleanup(){this._lspProgressDisposable!==void 0&&(this._lspProgressDisposable.dispose(),this._lspProgressDisposable=void 0),this._tokenDisposable!==void 0&&(this._tokenDisposable.dispose(),this._tokenDisposable=void 0),this._progress=void 0,this._cancellationToken=void 0}};Ca.ProgressPart=Td});var Ce=k(Rt=>{"use strict";Object.defineProperty(Rt,"__esModule",{value:!0});Rt.WorkspaceFeature=Rt.TextDocumentLanguageFeature=Rt.TextDocumentEventFeature=Rt.DynamicDocumentFeature=Rt.DynamicFeature=Rt.StaticFeature=Rt.ensure=Rt.LSPCancellationError=void 0;var ii=require("vscode"),xd=re(),Vt=Tn(),Sv=Be(),Pd=class extends ii.CancellationError{constructor(e){super(),this.data=e}};Rt.LSPCancellationError=Pd;function GS(n,e){return n[e]===void 0&&(n[e]={}),n[e]}Rt.ensure=GS;var Tv;(function(n){function e(t){let r=t;return r!=null&&Vt.func(r.fillClientCapabilities)&&Vt.func(r.initialize)&&Vt.func(r.getState)&&Vt.func(r.clear)&&(r.fillInitializeParams===void 0||Vt.func(r.fillInitializeParams))}n.is=e})(Tv||(Rt.StaticFeature=Tv={}));var Ev;(function(n){function e(t){let r=t;return r!=null&&Vt.func(r.fillClientCapabilities)&&Vt.func(r.initialize)&&Vt.func(r.getState)&&Vt.func(r.clear)&&(r.fillInitializeParams===void 0||Vt.func(r.fillInitializeParams))&&Vt.func(r.register)&&Vt.func(r.unregister)&&r.registrationType!==void 0}n.is=e})(Ev||(Rt.DynamicFeature=Ev={}));var Oo=class{constructor(e){this._client=e}getState(){let e=this.getDocumentSelectors(),t=0;for(let i of e){t++;for(let o of ii.workspace.textDocuments)if(ii.languages.match(i,o)>0)return{kind:"document",id:this.registrationType.method,registrations:!0,matches:!0}}let r=t>0;return{kind:"document",id:this.registrationType.method,registrations:r,matches:!1}}};Rt.DynamicDocumentFeature=Oo;var qd=class extends Oo{static textDocumentFilter(e,t){for(let r of e)if(ii.languages.match(r,t)>0)return!0;return!1}constructor(e,t,r,i,o,s,a){super(e),this._event=t,this._type=r,this._middleware=i,this._createParams=o,this._textDocument=s,this._selectorFilter=a,this._selectors=new Map,this._onNotificationSent=new ii.EventEmitter}getStateInfo(){return[this._selectors.values(),!1]}getDocumentSelectors(){return this._selectors.values()}register(e){e.registerOptions.documentSelector&&(this._listener||(this._listener=this._event(t=>{this.callback(t).catch(r=>{this._client.error(`Sending document notification ${this._type.method} failed.`,r)})})),this._selectors.set(e.id,this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector)))}async callback(e){let t=async r=>{let i=this._createParams(r);await this._client.sendNotification(this._type,i),this.notificationSent(this.getTextDocument(r),this._type,i)};if(this.matches(e)){let r=this._middleware();return r?r(e,i=>t(i)):t(e)}}matches(e){return this._client.hasDedicatedTextSynchronizationFeature(this._textDocument(e))?!1:!this._selectorFilter||this._selectorFilter(this._selectors.values(),e)}get onNotificationSent(){return this._onNotificationSent.event}notificationSent(e,t,r){this._onNotificationSent.fire({textDocument:e,type:t,params:r})}unregister(e){this._selectors.delete(e),this._selectors.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}clear(){this._selectors.clear(),this._onNotificationSent.dispose(),this._listener&&(this._listener.dispose(),this._listener=void 0)}getProvider(e){for(let t of this._selectors.values())if(ii.languages.match(t,e)>0)return{send:r=>this.callback(r)}}};Rt.TextDocumentEventFeature=qd;var Id=class extends Oo{constructor(e,t){super(e),this._registrationType=t,this._registrations=new Map}*getDocumentSelectors(){for(let e of this._registrations.values()){let t=e.data.registerOptions.documentSelector;t!==null&&(yield this._client.protocol2CodeConverter.asDocumentSelector(t))}}get registrationType(){return this._registrationType}register(e){if(!e.registerOptions.documentSelector)return;let t=this.registerLanguageProvider(e.registerOptions,e.id);this._registrations.set(e.id,{disposable:t[0],data:e,provider:t[1]})}unregister(e){let t=this._registrations.get(e);t!==void 0&&t.disposable.dispose()}clear(){this._registrations.forEach(e=>{e.disposable.dispose()}),this._registrations.clear()}getRegistration(e,t){if(t){if(xd.TextDocumentRegistrationOptions.is(t)){let r=xd.StaticRegistrationOptions.hasId(t)?t.id:Sv.generateUuid(),i=t.documentSelector??e;if(i)return[r,Object.assign({},t,{documentSelector:i})]}else if(Vt.boolean(t)&&t===!0||xd.WorkDoneProgressOptions.is(t)){if(!e)return[void 0,void 0];let r=Vt.boolean(t)&&t===!0?{documentSelector:e}:Object.assign({},t,{documentSelector:e});return[Sv.generateUuid(),r]}}else return[void 0,void 0];return[void 0,void 0]}getRegistrationOptions(e,t){if(!(!e||!t))return Vt.boolean(t)&&t===!0?{documentSelector:e}:Object.assign({},t,{documentSelector:e})}getProvider(e){for(let t of this._registrations.values()){let r=t.data.registerOptions.documentSelector;if(r!==null&&ii.languages.match(this._client.protocol2CodeConverter.asDocumentSelector(r),e)>0)return t.provider}}getAllProviders(){let e=[];for(let t of this._registrations.values())e.push(t.provider);return e}};Rt.TextDocumentLanguageFeature=Id;var kd=class{constructor(e,t){this._client=e,this._registrationType=t,this._registrations=new Map}getState(){let e=this._registrations.size>0;return{kind:"workspace",id:this._registrationType.method,registrations:e}}get registrationType(){return this._registrationType}register(e){let t=this.registerLanguageProvider(e.registerOptions);this._registrations.set(e.id,{disposable:t[0],provider:t[1]})}unregister(e){let t=this._registrations.get(e);t!==void 0&&t.disposable.dispose()}clear(){this._registrations.forEach(e=>{e.disposable.dispose()}),this._registrations.clear()}getProviders(){let e=[];for(let t of this._registrations.values())e.push(t.provider);return e}};Rt.WorkspaceFeature=kd});var Pv=k((HI,xv)=>{var XS=typeof process=="object"&&process&&process.platform==="win32";xv.exports=XS?{sep:"\\"}:{sep:"/"}});var Da=k((zI,Ad)=>{var pn=Ad.exports=(n,e,t={})=>(wa(e),!t.nocomment&&e.charAt(0)==="#"?!1:new Bi(e,t).match(n));Ad.exports=pn;var Od=Pv();pn.sep=Od.sep;var Hn=Symbol("globstar **");pn.GLOBSTAR=Hn;var YS=vu(),qv={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},Ld="[^/]",Fd=Ld+"*?",JS="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",ZS="(?:(?!(?:\\/|^)\\.).)*?",Fv=n=>n.split("").reduce((e,t)=>(e[t]=!0,e),{}),Iv=Fv("().*{}+?[]^$\\!"),QS=Fv("[.("),kv=/\/+/;pn.filter=(n,e={})=>(t,r,i)=>pn(t,n,e);var Nr=(n,e={})=>{let t={};return Object.keys(n).forEach(r=>t[r]=n[r]),Object.keys(e).forEach(r=>t[r]=e[r]),t};pn.defaults=n=>{if(!n||typeof n!="object"||!Object.keys(n).length)return pn;let e=pn,t=(r,i,o)=>e(r,i,Nr(n,o));return t.Minimatch=class extends e.Minimatch{constructor(i,o){super(i,Nr(n,o))}},t.Minimatch.defaults=r=>e.defaults(Nr(n,r)).Minimatch,t.filter=(r,i)=>e.filter(r,Nr(n,i)),t.defaults=r=>e.defaults(Nr(n,r)),t.makeRe=(r,i)=>e.makeRe(r,Nr(n,i)),t.braceExpand=(r,i)=>e.braceExpand(r,Nr(n,i)),t.match=(r,i,o)=>e.match(r,i,Nr(n,o)),t};pn.braceExpand=(n,e)=>Mv(n,e);var Mv=(n,e={})=>(wa(n),e.nobrace||!/\{(?:(?!\{).)*\}/.test(n)?[n]:YS(n)),e5=1024*64,wa=n=>{if(typeof n!="string")throw new TypeError("invalid pattern");if(n.length>e5)throw new TypeError("pattern is too long")},Md=Symbol("subparse");pn.makeRe=(n,e)=>new Bi(n,e||{}).makeRe();pn.match=(n,e,t={})=>{let r=new Bi(e,t);return n=n.filter(i=>r.match(i)),r.options.nonull&&!n.length&&n.push(e),n};var t5=n=>n.replace(/\\(.)/g,"$1"),n5=n=>n.replace(/\\([^-\]])/g,"$1"),r5=n=>n.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),i5=n=>n.replace(/[[\]\\]/g,"\\$&"),Bi=class{constructor(e,t){wa(e),t||(t={}),this.options=t,this.set=[],this.pattern=e,this.windowsPathsNoEscape=!!t.windowsPathsNoEscape||t.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.partial=!!t.partial,this.make()}debug(){}make(){let e=this.pattern,t=this.options;if(!t.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate();let r=this.globSet=this.braceExpand();t.debug&&(this.debug=(...i)=>console.error(...i)),this.debug(this.pattern,r),r=this.globParts=r.map(i=>i.split(kv)),this.debug(this.pattern,r),r=r.map((i,o,s)=>i.map(this.parse,this)),this.debug(this.pattern,r),r=r.filter(i=>i.indexOf(!1)===-1),this.debug(this.pattern,r),this.set=r}parseNegate(){if(this.options.nonegate)return;let e=this.pattern,t=!1,r=0;for(let i=0;i<e.length&&e.charAt(i)==="!";i++)t=!t,r++;r&&(this.pattern=e.slice(r)),this.negate=t}matchOne(e,t,r){var i=this.options;this.debug("matchOne",{this:this,file:e,pattern:t}),this.debug("matchOne",e.length,t.length);for(var o=0,s=0,a=e.length,c=t.length;o<a&&s<c;o++,s++){this.debug("matchOne loop");var u=t[s],d=e[o];if(this.debug(t,u,d),u===!1)return!1;if(u===Hn){this.debug("GLOBSTAR",[t,u,d]);var h=o,p=s+1;if(p===c){for(this.debug("** at the end");o<a;o++)if(e[o]==="."||e[o]===".."||!i.dot&&e[o].charAt(0)===".")return!1;return!0}for(;h<a;){var v=e[h];if(this.debug(`
globstar while`,e,h,t,p,v),this.matchOne(e.slice(h),t.slice(p),r))return this.debug("globstar found match!",h,a,v),!0;if(v==="."||v===".."||!i.dot&&v.charAt(0)==="."){this.debug("dot detected!",e,h,t,p);break}this.debug("globstar swallow a segment, and continue"),h++}return!!(r&&(this.debug(`
>>> no match, partial?`,e,h,t,p),h===a))}var y;if(typeof u=="string"?(y=d===u,this.debug("string match",u,d,y)):(y=d.match(u),this.debug("pattern match",u,d,y)),!y)return!1}if(o===a&&s===c)return!0;if(o===a)return r;if(s===c)return o===a-1&&e[o]==="";throw new Error("wtf?")}braceExpand(){return Mv(this.pattern,this.options)}parse(e,t){wa(e);let r=this.options;if(e==="**")if(r.noglobstar)e="*";else return Hn;if(e==="")return"";let i="",o=!1,s=!1,a=[],c=[],u,d=!1,h=-1,p=-1,v,y,R,E=e.charAt(0)===".",I=r.dot||E,O=()=>E?"":I?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",q=V=>V.charAt(0)==="."?"":r.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",N=()=>{if(u){switch(u){case"*":i+=Fd,o=!0;break;case"?":i+=Ld,o=!0;break;default:i+="\\"+u;break}this.debug("clearStateChar %j %j",u,i),u=!1}};for(let V=0,J;V<e.length&&(J=e.charAt(V));V++){if(this.debug("%s	%s %s %j",e,V,i,J),s){if(J==="/")return!1;Iv[J]&&(i+="\\"),i+=J,s=!1;continue}switch(J){case"/":return!1;case"\\":if(d&&e.charAt(V+1)==="-"){i+=J;continue}N(),s=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",e,V,i,J),d){this.debug("  in class"),J==="!"&&V===p+1&&(J="^"),i+=J;continue}this.debug("call clearStateChar %j",u),N(),u=J,r.noext&&N();continue;case"(":{if(d){i+="(";continue}if(!u){i+="\\(";continue}let ie={type:u,start:V-1,reStart:i.length,open:qv[u].open,close:qv[u].close};this.debug(this.pattern,"	",ie),a.push(ie),i+=ie.open,ie.start===0&&ie.type!=="!"&&(E=!0,i+=q(e.slice(V+1))),this.debug("plType %j %j",u,i),u=!1;continue}case")":{let ie=a[a.length-1];if(d||!ie){i+="\\)";continue}a.pop(),N(),o=!0,y=ie,i+=y.close,y.type==="!"&&c.push(Object.assign(y,{reEnd:i.length}));continue}case"|":{let ie=a[a.length-1];if(d||!ie){i+="\\|";continue}N(),i+="|",ie.start===0&&ie.type!=="!"&&(E=!0,i+=q(e.slice(V+1)));continue}case"[":if(N(),d){i+="\\"+J;continue}d=!0,p=V,h=i.length,i+=J;continue;case"]":if(V===p+1||!d){i+="\\"+J;continue}v=e.substring(p+1,V);try{RegExp("["+i5(n5(v))+"]"),i+=J}catch{i=i.substring(0,h)+"(?:$.)"}o=!0,d=!1;continue;default:N(),Iv[J]&&!(J==="^"&&d)&&(i+="\\"),i+=J;break}}for(d&&(v=e.slice(p+1),R=this.parse(v,Md),i=i.substring(0,h)+"\\["+R[0],o=o||R[1]),y=a.pop();y;y=a.pop()){let V;V=i.slice(y.reStart+y.open.length),this.debug("setting tail",i,y),V=V.replace(/((?:\\{2}){0,64})(\\?)\|/g,(ie,He,Ie)=>(Ie||(Ie="\\"),He+He+Ie+"|")),this.debug(`tail=%j
   %s`,V,V,y,i);let J=y.type==="*"?Fd:y.type==="?"?Ld:"\\"+y.type;o=!0,i=i.slice(0,y.reStart)+J+"\\("+V}N(),s&&(i+="\\\\");let B=QS[i.charAt(0)];for(let V=c.length-1;V>-1;V--){let J=c[V],ie=i.slice(0,J.reStart),He=i.slice(J.reStart,J.reEnd-8),Ie=i.slice(J.reEnd),Ge=i.slice(J.reEnd-8,J.reEnd)+Ie,Gt=ie.split(")").length,ft=ie.split("(").length-Gt,it=Ie;for(let Xt=0;Xt<ft;Xt++)it=it.replace(/\)[+*?]?/,"");Ie=it;let Oe=Ie===""&&t!==Md?"(?:$|\\/)":"";i=ie+He+Ie+Oe+Ge}if(i!==""&&o&&(i="(?=.)"+i),B&&(i=O()+i),t===Md)return[i,o];if(r.nocase&&!o&&(o=e.toUpperCase()!==e.toLowerCase()),!o)return t5(e);let se=r.nocase?"i":"";try{return Object.assign(new RegExp("^"+i+"$",se),{_glob:e,_src:i})}catch{return new RegExp("$.")}}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let t=this.options,r=t.noglobstar?Fd:t.dot?JS:ZS,i=t.nocase?"i":"",o=e.map(s=>(s=s.map(a=>typeof a=="string"?r5(a):a===Hn?Hn:a._src).reduce((a,c)=>(a[a.length-1]===Hn&&c===Hn||a.push(c),a),[]),s.forEach((a,c)=>{a!==Hn||s[c-1]===Hn||(c===0?s.length>1?s[c+1]="(?:\\/|"+r+"\\/)?"+s[c+1]:s[c]=r:c===s.length-1?s[c-1]+="(?:\\/|"+r+")?":(s[c-1]+="(?:\\/|\\/"+r+"\\/)"+s[c+1],s[c+1]=Hn))}),s.filter(a=>a!==Hn).join("/"))).join("|");o="^(?:"+o+")$",this.negate&&(o="^(?!"+o+").*$");try{this.regexp=new RegExp(o,i)}catch{this.regexp=!1}return this.regexp}match(e,t=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&t)return!0;let r=this.options;Od.sep!=="/"&&(e=e.split(Od.sep).join("/")),e=e.split(kv),this.debug(this.pattern,"split",e);let i=this.set;this.debug(this.pattern,"set",i);let o;for(let s=e.length-1;s>=0&&(o=e[s],!o);s--);for(let s=0;s<i.length;s++){let a=i[s],c=e;if(r.matchBase&&a.length===1&&(c=[o]),this.matchOne(c,a,t))return r.flipNegate?!0:!this.negate}return r.flipNegate?!1:this.negate}static defaults(e){return pn.defaults(e).Minimatch}};pn.Minimatch=Bi});var Vd=k($r=>{"use strict";Object.defineProperty($r,"__esModule",{value:!0});$r.DiagnosticFeature=$r.DiagnosticPullMode=$r.vsdiag=void 0;var o5=Da(),me=require("vscode"),nt=re(),s5=Be(),Nd=Ce();function Ra(n,e){return n[e]===void 0&&(n[e]={}),n[e]}var In;(function(n){let e;(function(t){t.full="full",t.unChanged="unChanged"})(e=n.DocumentDiagnosticReportKind||(n.DocumentDiagnosticReportKind={}))})(In||($r.vsdiag=In={}));var _a;(function(n){n.onType="onType",n.onSave="onSave"})(_a||($r.DiagnosticPullMode=_a={}));var $t;(function(n){n.active="open",n.reschedule="reschedule",n.outDated="drop"})($t||($t={}));var $d=class n{constructor(){this.open=new Set,this._onOpen=new me.EventEmitter,this._onClose=new me.EventEmitter,n.fillTabResources(this.open);let e=t=>{if(t.closed.length===0&&t.opened.length===0)return;let r=this.open,i=new Set;n.fillTabResources(i);let o=new Set,s=new Set(i);for(let a of r.values())i.has(a)?s.delete(a):o.add(a);if(this.open=i,o.size>0){let a=new Set;for(let c of o)a.add(me.Uri.parse(c));this._onClose.fire(a)}if(s.size>0){let a=new Set;for(let c of s)a.add(me.Uri.parse(c));this._onOpen.fire(a)}};me.window.tabGroups.onDidChangeTabs!==void 0?this.disposable=me.window.tabGroups.onDidChangeTabs(e):this.disposable={dispose:()=>{}}}get onClose(){return this._onClose.event}get onOpen(){return this._onOpen.event}dispose(){this.disposable.dispose()}isActive(e){return e instanceof me.Uri?me.window.activeTextEditor?.document.uri===e:me.window.activeTextEditor?.document===e}isVisible(e){let t=e instanceof me.Uri?e:e.uri;return this.open.has(t.toString())}getTabResources(){let e=new Set;return n.fillTabResources(new Set,e),e}static fillTabResources(e,t){let r=e??new Set;for(let i of me.window.tabGroups.all)for(let o of i.tabs){let s=o.input,a;s instanceof me.TabInputText?a=s.uri:s instanceof me.TabInputTextDiff?a=s.modified:s instanceof me.TabInputCustom&&(a=s.uri),a!==void 0&&!r.has(a.toString())&&(r.add(a.toString()),t!==void 0&&t.add(a))}}},mt;(function(n){n[n.document=1]="document",n[n.workspace=2]="workspace"})(mt||(mt={}));var fr;(function(n){function e(t){return t instanceof me.Uri?t.toString():t.uri.toString()}n.asKey=e})(fr||(fr={}));var jd=class{constructor(){this.documentPullStates=new Map,this.workspacePullStates=new Map}track(e,t,r){let i=e===mt.document?this.documentPullStates:this.workspacePullStates,[o,s,a]=t instanceof me.Uri?[t.toString(),t,r]:[t.uri.toString(),t.uri,t.version],c=i.get(o);return c===void 0&&(c={document:s,pulledVersion:a,resultId:void 0},i.set(o,c)),c}update(e,t,r,i){let o=e===mt.document?this.documentPullStates:this.workspacePullStates,[s,a,c,u]=t instanceof me.Uri?[t.toString(),t,r,i]:[t.uri.toString(),t.uri,t.version,r],d=o.get(s);d===void 0?(d={document:a,pulledVersion:c,resultId:u},o.set(s,d)):(d.pulledVersion=c,d.resultId=u)}unTrack(e,t){let r=fr.asKey(t);(e===mt.document?this.documentPullStates:this.workspacePullStates).delete(r)}tracks(e,t){let r=fr.asKey(t);return(e===mt.document?this.documentPullStates:this.workspacePullStates).has(r)}getResultId(e,t){let r=fr.asKey(t);return(e===mt.document?this.documentPullStates:this.workspacePullStates).get(r)?.resultId}getAllResultIds(){let e=[];for(let[t,r]of this.workspacePullStates)this.documentPullStates.has(t)&&(r=this.documentPullStates.get(t)),r.resultId!==void 0&&e.push({uri:t,value:r.resultId});return e}},Hd=class{constructor(e,t,r){this.client=e,this.tabs=t,this.options=r,this.isDisposed=!1,this.onDidChangeDiagnosticsEmitter=new me.EventEmitter,this.provider=this.createProvider(),this.diagnostics=me.languages.createDiagnosticCollection(r.identifier),this.openRequests=new Map,this.documentStates=new jd,this.workspaceErrorCounter=0}knows(e,t){let r=t instanceof me.Uri?t:t.uri;return this.documentStates.tracks(e,t)||this.openRequests.has(r.toString())}forget(e,t){this.documentStates.unTrack(e,t)}pull(e,t){if(this.isDisposed)return;let r=e instanceof me.Uri?e:e.uri;this.pullAsync(e).then(()=>{t&&t()},i=>{this.client.error(`Document pull failed for text document ${r.toString()}`,i,!1)})}async pullAsync(e,t){if(this.isDisposed)return;let r=e instanceof me.Uri,i=r?e:e.uri,o=i.toString();t=r?t:e.version;let s=this.openRequests.get(o),a=r?this.documentStates.track(mt.document,e,t):this.documentStates.track(mt.document,e);if(s===void 0){let c=new me.CancellationTokenSource;this.openRequests.set(o,{state:$t.active,document:e,version:t,tokenSource:c});let u,d;try{u=await this.provider.provideDiagnostics(e,a.resultId,c.token)??{kind:In.DocumentDiagnosticReportKind.full,items:[]}}catch(h){if(h instanceof Nd.LSPCancellationError&&nt.DiagnosticServerCancellationData.is(h.data)&&h.data.retriggerRequest===!1&&(d={state:$t.outDated,document:e}),d===void 0&&h instanceof me.CancellationError)d={state:$t.reschedule,document:e};else throw h}if(d=d??this.openRequests.get(o),d===void 0){this.client.error(`Lost request state in diagnostic pull model. Clearing diagnostics for ${o}`),this.diagnostics.delete(i);return}if(this.openRequests.delete(o),!this.tabs.isVisible(e)){this.documentStates.unTrack(mt.document,e);return}if(d.state===$t.outDated)return;u!==void 0&&(u.kind===In.DocumentDiagnosticReportKind.full&&this.diagnostics.set(i,u.items),a.pulledVersion=t,a.resultId=u.resultId),d.state===$t.reschedule&&this.pull(e)}else s.state===$t.active?(s.tokenSource.cancel(),this.openRequests.set(o,{state:$t.reschedule,document:s.document})):s.state===$t.outDated&&this.openRequests.set(o,{state:$t.reschedule,document:s.document})}forgetDocument(e){let t=e instanceof me.Uri?e:e.uri,r=t.toString(),i=this.openRequests.get(r);this.options.workspaceDiagnostics?i!==void 0?this.openRequests.set(r,{state:$t.reschedule,document:e}):this.pull(e,()=>{this.forget(mt.document,e)}):(i!==void 0&&(i.state===$t.active&&i.tokenSource.cancel(),this.openRequests.set(r,{state:$t.outDated,document:e})),this.diagnostics.delete(t),this.forget(mt.document,e))}pullWorkspace(){this.isDisposed||this.pullWorkspaceAsync().then(()=>{this.workspaceTimeout=(0,nt.RAL)().timer.setTimeout(()=>{this.pullWorkspace()},2e3)},e=>{!(e instanceof Nd.LSPCancellationError)&&!nt.DiagnosticServerCancellationData.is(e.data)&&(this.client.error("Workspace diagnostic pull failed.",e,!1),this.workspaceErrorCounter++),this.workspaceErrorCounter<=5&&(this.workspaceTimeout=(0,nt.RAL)().timer.setTimeout(()=>{this.pullWorkspace()},2e3))})}async pullWorkspaceAsync(){if(!this.provider.provideWorkspaceDiagnostics||this.isDisposed)return;this.workspaceCancellation!==void 0&&(this.workspaceCancellation.cancel(),this.workspaceCancellation=void 0),this.workspaceCancellation=new me.CancellationTokenSource;let e=this.documentStates.getAllResultIds().map(t=>({uri:this.client.protocol2CodeConverter.asUri(t.uri),value:t.value}));await this.provider.provideWorkspaceDiagnostics(e,this.workspaceCancellation.token,t=>{if(!(!t||this.isDisposed))for(let r of t.items)r.kind===In.DocumentDiagnosticReportKind.full&&(this.documentStates.tracks(mt.document,r.uri)||this.diagnostics.set(r.uri,r.items)),this.documentStates.update(mt.workspace,r.uri,r.version??void 0,r.resultId)})}createProvider(){let e={onDidChangeDiagnostics:this.onDidChangeDiagnosticsEmitter.event,provideDiagnostics:(t,r,i)=>{let o=(a,c,u)=>{let d={identifier:this.options.identifier,textDocument:{uri:this.client.code2ProtocolConverter.asUri(a instanceof me.Uri?a:a.uri)},previousResultId:c};return this.isDisposed===!0||!this.client.isRunning()?{kind:In.DocumentDiagnosticReportKind.full,items:[]}:this.client.sendRequest(nt.DocumentDiagnosticRequest.type,d,u).then(async h=>h==null||this.isDisposed||u.isCancellationRequested?{kind:In.DocumentDiagnosticReportKind.full,items:[]}:h.kind===nt.DocumentDiagnosticReportKind.Full?{kind:In.DocumentDiagnosticReportKind.full,resultId:h.resultId,items:await this.client.protocol2CodeConverter.asDiagnostics(h.items,u)}:{kind:In.DocumentDiagnosticReportKind.unChanged,resultId:h.resultId},h=>this.client.handleFailedRequest(nt.DocumentDiagnosticRequest.type,u,h,{kind:In.DocumentDiagnosticReportKind.full,items:[]}))},s=this.client.middleware;return s.provideDiagnostics?s.provideDiagnostics(t,r,i,o):o(t,r,i)}};return this.options.workspaceDiagnostics&&(e.provideWorkspaceDiagnostics=(t,r,i)=>{let o=async u=>u.kind===nt.DocumentDiagnosticReportKind.Full?{kind:In.DocumentDiagnosticReportKind.full,uri:this.client.protocol2CodeConverter.asUri(u.uri),resultId:u.resultId,version:u.version,items:await this.client.protocol2CodeConverter.asDiagnostics(u.items,r)}:{kind:In.DocumentDiagnosticReportKind.unChanged,uri:this.client.protocol2CodeConverter.asUri(u.uri),resultId:u.resultId,version:u.version},s=u=>{let d=[];for(let h of u)d.push({uri:this.client.code2ProtocolConverter.asUri(h.uri),value:h.value});return d},a=(u,d)=>{let h=(0,s5.generateUuid)(),p=this.client.onProgress(nt.WorkspaceDiagnosticRequest.partialResult,h,async y=>{if(y==null){i(null);return}let R={items:[]};for(let E of y.items)try{R.items.push(await o(E))}catch(I){this.client.error("Converting workspace diagnostics failed.",I)}i(R)}),v={identifier:this.options.identifier,previousResultIds:s(u),partialResultToken:h};return this.isDisposed===!0||!this.client.isRunning()?{items:[]}:this.client.sendRequest(nt.WorkspaceDiagnosticRequest.type,v,d).then(async y=>{if(d.isCancellationRequested)return{items:[]};let R={items:[]};for(let E of y.items)R.items.push(await o(E));return p.dispose(),i(R),{items:[]}},y=>(p.dispose(),this.client.handleFailedRequest(nt.DocumentDiagnosticRequest.type,d,y,{items:[]})))},c=this.client.middleware;return c.provideWorkspaceDiagnostics?c.provideWorkspaceDiagnostics(t,r,i,a):a(t,r,i)}),e}dispose(){this.isDisposed=!0,this.workspaceCancellation?.cancel(),this.workspaceTimeout?.dispose();for(let[e,t]of this.openRequests)t.state===$t.active&&t.tokenSource.cancel(),this.openRequests.set(e,{state:$t.outDated,document:t.document});this.diagnostics.dispose()}},Ud=class{constructor(e){this.diagnosticRequestor=e,this.documents=new nt.LinkedMap,this.isDisposed=!1}add(e){if(this.isDisposed===!0)return;let t=fr.asKey(e);this.documents.has(t)||(this.documents.set(t,e,nt.Touch.Last),this.trigger())}remove(e){let t=fr.asKey(e);this.documents.delete(t),this.documents.size===0?this.stop():t===this.endDocumentKey()&&(this.endDocument=this.documents.last)}trigger(){if(this.isDisposed!==!0){if(this.intervalHandle!==void 0){this.endDocument=this.documents.last;return}this.endDocument=this.documents.last,this.intervalHandle=(0,nt.RAL)().timer.setInterval(()=>{let e=this.documents.first;if(e!==void 0){let t=fr.asKey(e);this.diagnosticRequestor.pull(e),this.documents.set(t,e,nt.Touch.Last),t===this.endDocumentKey()&&this.stop()}},200)}}dispose(){this.isDisposed=!0,this.stop(),this.documents.clear()}stop(){this.intervalHandle?.dispose(),this.intervalHandle=void 0,this.endDocument=void 0}endDocumentKey(){return this.endDocument!==void 0?fr.asKey(this.endDocument):void 0}},zd=class{constructor(e,t,r){let i=e.clientOptions.diagnosticPullOptions??{onChange:!0,onSave:!1},o=e.protocol2CodeConverter.asDocumentSelector(r.documentSelector),s=[],a=y=>{let R=r.documentSelector;if(i.match!==void 0)return i.match(R,y);for(let E of R)if(nt.TextDocumentFilter.is(E)){if(typeof E=="string"||E.language!==void 0&&E.language!=="*"||E.scheme!==void 0&&E.scheme!=="*"&&E.scheme!==y.scheme)return!1;if(E.pattern!==void 0){let I=new o5.Minimatch(E.pattern,{noext:!0});if(!I.makeRe()||!I.match(y.fsPath))return!1}}return!0},c=y=>y instanceof me.Uri?a(y):me.languages.match(o,y)>0&&t.isVisible(y),u=y=>y instanceof me.Uri?this.activeTextDocument?.uri.toString()===y.toString():this.activeTextDocument===y;this.diagnosticRequestor=new Hd(e,t,r),this.backgroundScheduler=new Ud(this.diagnosticRequestor);let d=y=>{!c(y)||!r.interFileDependencies||u(y)||this.backgroundScheduler.add(y)};this.activeTextDocument=me.window.activeTextEditor?.document,me.window.onDidChangeActiveTextEditor(y=>{let R=this.activeTextDocument;this.activeTextDocument=y?.document,R!==void 0&&d(R),this.activeTextDocument!==void 0&&this.backgroundScheduler.remove(this.activeTextDocument)});let h=e.getFeature(nt.DidOpenTextDocumentNotification.method);s.push(h.onNotificationSent(y=>{let R=y.textDocument;this.diagnosticRequestor.knows(mt.document,R)||c(R)&&this.diagnosticRequestor.pull(R,()=>{d(R)})})),s.push(t.onOpen(y=>{for(let R of y){if(this.diagnosticRequestor.knows(mt.document,R))continue;let E=R.toString(),I;for(let O of me.workspace.textDocuments)if(E===O.uri.toString()){I=O;break}I!==void 0&&c(I)&&this.diagnosticRequestor.pull(I,()=>{d(I)})}}));let p=new Set;for(let y of me.workspace.textDocuments)c(y)&&(this.diagnosticRequestor.pull(y,()=>{d(y)}),p.add(y.uri.toString()));if(i.onTabs===!0)for(let y of t.getTabResources())!p.has(y.toString())&&c(y)&&this.diagnosticRequestor.pull(y,()=>{d(y)});if(i.onChange===!0){let y=e.getFeature(nt.DidChangeTextDocumentNotification.method);s.push(y.onNotificationSent(async R=>{let E=R.textDocument;(i.filter===void 0||!i.filter(E,_a.onType))&&this.diagnosticRequestor.knows(mt.document,E)&&this.diagnosticRequestor.pull(E,()=>{this.backgroundScheduler.trigger()})}))}if(i.onSave===!0){let y=e.getFeature(nt.DidSaveTextDocumentNotification.method);s.push(y.onNotificationSent(R=>{let E=R.textDocument;(i.filter===void 0||!i.filter(E,_a.onSave))&&this.diagnosticRequestor.knows(mt.document,E)&&this.diagnosticRequestor.pull(R.textDocument,()=>{this.backgroundScheduler.trigger()})}))}let v=e.getFeature(nt.DidCloseTextDocumentNotification.method);s.push(v.onNotificationSent(y=>{this.cleanUpDocument(y.textDocument)})),t.onClose(y=>{for(let R of y)this.cleanUpDocument(R)}),this.diagnosticRequestor.onDidChangeDiagnosticsEmitter.event(()=>{for(let y of me.workspace.textDocuments)c(y)&&this.diagnosticRequestor.pull(y)}),r.workspaceDiagnostics===!0&&r.identifier!=="da348dc5-c30a-4515-9d98-31ff3be38d14"&&this.diagnosticRequestor.pullWorkspace(),this.disposable=me.Disposable.from(...s,this.backgroundScheduler,this.diagnosticRequestor)}get onDidChangeDiagnosticsEmitter(){return this.diagnosticRequestor.onDidChangeDiagnosticsEmitter}get diagnostics(){return this.diagnosticRequestor.provider}cleanUpDocument(e){this.diagnosticRequestor.knows(mt.document,e)&&(this.diagnosticRequestor.forgetDocument(e),this.backgroundScheduler.remove(e))}},Wd=class extends Nd.TextDocumentLanguageFeature{constructor(e){super(e,nt.DocumentDiagnosticRequest.type)}fillClientCapabilities(e){let t=Ra(Ra(e,"textDocument"),"diagnostic");t.dynamicRegistration=!0,t.relatedDocumentSupport=!1,Ra(Ra(e,"workspace"),"diagnostics").refreshSupport=!0}initialize(e,t){this._client.onRequest(nt.DiagnosticRefreshRequest.type,async()=>{for(let s of this.getAllProviders())s.onDidChangeDiagnosticsEmitter.fire()});let[i,o]=this.getRegistration(t,e.diagnosticProvider);!i||!o||this.register({id:i,registerOptions:o})}clear(){this.tabs!==void 0&&(this.tabs.dispose(),this.tabs=void 0),super.clear()}registerLanguageProvider(e){this.tabs===void 0&&(this.tabs=new $d);let t=new zd(this._client,this.tabs,e);return[t.disposable,t]}};$r.DiagnosticFeature=Wd});var Av=k(xa=>{"use strict";Object.defineProperty(xa,"__esModule",{value:!0});xa.NotebookDocumentSyncFeature=void 0;var jt=require("vscode"),a5=Da(),hr=re(),c5=Be(),Ov=Tn();function Lv(n,e){return n[e]===void 0&&(n[e]={}),n[e]}var Ki;(function(n){let e;(function(t){function r(p,v){return{version:p.version,uri:v.asUri(p.uri)}}t.asVersionedNotebookDocumentIdentifier=r;function i(p,v,y){let R=hr.NotebookDocument.create(y.asUri(p.uri),p.notebookType,p.version,o(v,y));return Object.keys(p.metadata).length>0&&(R.metadata=s(p.metadata)),R}t.asNotebookDocument=i;function o(p,v){return p.map(y=>a(y,v))}t.asNotebookCells=o;function s(p){return u(new Set,p)}t.asMetadata=s;function a(p,v){let y=hr.NotebookCell.create(c(p.kind),v.asUri(p.document.uri));return Object.keys(p.metadata).length>0&&(y.metadata=s(p.metadata)),p.executionSummary!==void 0&&Ov.number(p.executionSummary.executionOrder)&&Ov.boolean(p.executionSummary.success)&&(y.executionSummary={executionOrder:p.executionSummary.executionOrder,success:p.executionSummary.success}),y}t.asNotebookCell=a;function c(p){switch(p){case jt.NotebookCellKind.Markup:return hr.NotebookCellKind.Markup;case jt.NotebookCellKind.Code:return hr.NotebookCellKind.Code}}function u(p,v){if(p.has(v))throw new Error("Can't deep copy cyclic structures.");if(Array.isArray(v)){let y=[];for(let R of v)if(R!==null&&typeof R=="object"||Array.isArray(R))y.push(u(p,R));else{if(R instanceof RegExp)throw new Error("Can't transfer regular expressions to the server");y.push(R)}return y}else{let y=Object.keys(v),R=Object.create(null);for(let E of y){let I=v[E];if(I!==null&&typeof I=="object"||Array.isArray(I))R[E]=u(p,I);else{if(I instanceof RegExp)throw new Error("Can't transfer regular expressions to the server");R[E]=I}}return R}}function d(p,v){let y=v.asChangeTextDocumentParams(p,p.document.uri,p.document.version);return{document:y.textDocument,changes:y.contentChanges}}t.asTextContentChange=d;function h(p,v){let y=Object.create(null);if(p.metadata&&(y.metadata=n.c2p.asMetadata(p.metadata)),p.cells!==void 0){let R=Object.create(null),E=p.cells;E.structure&&(R.structure={array:{start:E.structure.array.start,deleteCount:E.structure.array.deleteCount,cells:E.structure.array.cells!==void 0?E.structure.array.cells.map(I=>n.c2p.asNotebookCell(I,v)):void 0},didOpen:E.structure.didOpen!==void 0?E.structure.didOpen.map(I=>v.asOpenTextDocumentParams(I.document).textDocument):void 0,didClose:E.structure.didClose!==void 0?E.structure.didClose.map(I=>v.asCloseTextDocumentParams(I.document).textDocument):void 0}),E.data!==void 0&&(R.data=E.data.map(I=>n.c2p.asNotebookCell(I,v))),E.textContent!==void 0&&(R.textContent=E.textContent.map(I=>n.c2p.asTextContentChange(I,v))),Object.keys(R).length>0&&(y.cells=R)}return y}t.asNotebookDocumentChangeEvent=h})(e=n.c2p||(n.c2p={}))})(Ki||(Ki={}));var Bd;(function(n){function e(a,c,u){let d=a.length,h=c.length,p=0;for(;p<h&&p<d&&t(a[p],c[p],u);)p++;if(p<h&&p<d){let v=d-1,y=h-1;for(;v>=0&&y>=0&&t(a[v],c[y],u);)v--,y--;let R=v+1-p,E=p===y+1?void 0:c.slice(p,y+1);return E!==void 0?{start:p,deleteCount:R,cells:E}:{start:p,deleteCount:R}}else return p<h?{start:p,deleteCount:0,cells:c.slice(p)}:p<d?{start:p,deleteCount:d-p}:void 0}n.computeDiff=e;function t(a,c,u=!0){return a.kind!==c.kind||a.document.uri.toString()!==c.document.uri.toString()||a.document.languageId!==c.document.languageId||!r(a.executionSummary,c.executionSummary)?!1:!u||u&&o(a.metadata,c.metadata)}function r(a,c){return a===c?!0:a===void 0||c===void 0?!1:a.executionOrder===c.executionOrder&&a.success===c.success&&i(a.timing,c.timing)}function i(a,c){return a===c?!0:a===void 0||c===void 0?!1:a.startTime===c.startTime&&a.endTime===c.endTime}function o(a,c){if(a===c)return!0;if(a==null||c===null||c===void 0||typeof a!=typeof c||typeof a!="object")return!1;let u=Array.isArray(a),d=Array.isArray(c);if(u!==d)return!1;if(u&&d){if(a.length!==c.length)return!1;for(let h=0;h<a.length;h++)if(!o(a[h],c[h]))return!1}if(s(a)&&s(c)){let h=Object.keys(a),p=Object.keys(c);if(h.length!==p.length||(h.sort(),p.sort(),!o(h,p)))return!1;for(let v=0;v<h.length;v++){let y=h[v];if(!o(a[y],c[y]))return!1}return!0}return!1}function s(a){return a!==null&&typeof a=="object"}n.isObjectLiteral=s})(Bd||(Bd={}));var Kd;(function(n){function e(t,r){if(typeof t=="string")return t==="*"||r.notebookType===t;if(t.notebookType!==void 0&&t.notebookType!=="*"&&r.notebookType!==t.notebookType)return!1;let i=r.uri;if(t.scheme!==void 0&&t.scheme!=="*"&&i.scheme!==t.scheme)return!1;if(t.pattern!==void 0){let o=new a5.Minimatch(t.pattern,{noext:!0});if(!o.makeRe()||!o.match(i.fsPath))return!1}return!0}n.matchNotebook=e})(Kd||(Kd={}));var Sa;(function(n){function e(r){let i=r.notebookSelector,o=[];for(let s of i){let a=(typeof s.notebook=="string"?s.notebook:s.notebook?.notebookType)??"*",c=typeof s.notebook=="string"?void 0:s.notebook?.scheme,u=typeof s.notebook=="string"?void 0:s.notebook?.pattern;if(s.cells!==void 0)for(let d of s.cells)o.push(t(a,c,u,d.language));else o.push(t(a,c,u,void 0))}return o}n.asDocumentSelector=e;function t(r,i,o,s){return i===void 0&&o===void 0?{notebook:r,language:s}:{notebook:{notebookType:r,scheme:i,pattern:o},language:s}}})(Sa||(Sa={}));var Ta;(function(n){function e(t){return{cells:t,uris:new Set(t.map(r=>r.document.uri.toString()))}}n.create=e})(Ta||(Ta={}));var Gi=class{constructor(e,t){this.client=e,this.options=t,this.notebookSyncInfo=new Map,this.notebookDidOpen=new Set,this.disposables=[],this.selector=e.protocol2CodeConverter.asDocumentSelector(Sa.asDocumentSelector(t)),jt.workspace.onDidOpenNotebookDocument(r=>{this.notebookDidOpen.add(r.uri.toString()),this.didOpen(r)},void 0,this.disposables);for(let r of jt.workspace.notebookDocuments)this.notebookDidOpen.add(r.uri.toString()),this.didOpen(r);jt.workspace.onDidChangeNotebookDocument(r=>this.didChangeNotebookDocument(r),void 0,this.disposables),this.options.save===!0&&jt.workspace.onDidSaveNotebookDocument(r=>this.didSave(r),void 0,this.disposables),jt.workspace.onDidCloseNotebookDocument(r=>{this.didClose(r),this.notebookDidOpen.delete(r.uri.toString())},void 0,this.disposables)}getState(){for(let e of jt.workspace.notebookDocuments)if(this.getMatchingCells(e)!==void 0)return{kind:"document",id:"$internal",registrations:!0,matches:!0};return{kind:"document",id:"$internal",registrations:!0,matches:!1}}get mode(){return"notebook"}handles(e){return jt.languages.match(this.selector,e)>0}didOpenNotebookCellTextDocument(e,t){if(jt.languages.match(this.selector,t.document)===0||!this.notebookDidOpen.has(e.uri.toString()))return;let r=this.notebookSyncInfo.get(e.uri.toString()),i=this.cellMatches(e,t);if(r!==void 0){let o=r.uris.has(t.document.uri.toString());if(i&&o||!i&&!o)return;if(i){let s=this.getMatchingCells(e);if(s!==void 0){let a=this.asNotebookDocumentChangeEvent(e,void 0,r,s);a!==void 0&&this.doSendChange(a,s).catch(()=>{})}}}else i&&this.doSendOpen(e,[t]).catch(()=>{})}didChangeNotebookCellTextDocument(e,t){jt.languages.match(this.selector,t.document)!==0&&this.doSendChange({notebook:e,cells:{textContent:[t]}},void 0).catch(()=>{})}didCloseNotebookCellTextDocument(e,t){let r=this.notebookSyncInfo.get(e.uri.toString());if(r===void 0)return;let i=t.document.uri,o=r.cells.findIndex(s=>s.document.uri.toString()===i.toString());if(o!==-1)if(o===0&&r.cells.length===1)this.doSendClose(e,r.cells).catch(()=>{});else{let s=r.cells.slice(),a=s.splice(o,1);this.doSendChange({notebook:e,cells:{structure:{array:{start:o,deleteCount:1},didClose:a}}},s).catch(()=>{})}}dispose(){for(let e of this.disposables)e.dispose()}didOpen(e,t=this.getMatchingCells(e),r=this.notebookSyncInfo.get(e.uri.toString())){if(r!==void 0)if(t!==void 0){let i=this.asNotebookDocumentChangeEvent(e,void 0,r,t);i!==void 0&&this.doSendChange(i,t).catch(()=>{})}else this.doSendClose(e,[]).catch(()=>{});else{if(t===void 0)return;this.doSendOpen(e,t).catch(()=>{})}}didChangeNotebookDocument(e){let t=e.notebook,r=this.notebookSyncInfo.get(t.uri.toString());if(r===void 0){if(e.contentChanges.length===0)return;let i=this.getMatchingCells(t);if(i===void 0)return;this.didOpen(t,i,r)}else{let i=this.getMatchingCells(t);if(i===void 0){this.didClose(t,r);return}let o=this.asNotebookDocumentChangeEvent(e.notebook,e,r,i);o!==void 0&&this.doSendChange(o,i).catch(()=>{})}}didSave(e){this.notebookSyncInfo.get(e.uri.toString())!==void 0&&this.doSendSave(e).catch(()=>{})}didClose(e,t=this.notebookSyncInfo.get(e.uri.toString())){if(t===void 0)return;let r=e.getCells().filter(i=>t.uris.has(i.document.uri.toString()));this.doSendClose(e,r).catch(()=>{})}async sendDidOpenNotebookDocument(e){let t=this.getMatchingCells(e);if(t!==void 0)return this.doSendOpen(e,t)}async doSendOpen(e,t){let r=async(o,s)=>{let a=Ki.c2p.asNotebookDocument(o,s,this.client.code2ProtocolConverter),c=s.map(u=>this.client.code2ProtocolConverter.asTextDocumentItem(u.document));try{await this.client.sendNotification(hr.DidOpenNotebookDocumentNotification.type,{notebookDocument:a,cellTextDocuments:c})}catch(u){throw this.client.error("Sending DidOpenNotebookDocumentNotification failed",u),u}},i=this.client.middleware?.notebooks;return this.notebookSyncInfo.set(e.uri.toString(),Ta.create(t)),i?.didOpen!==void 0?i.didOpen(e,t,r):r(e,t)}async sendDidChangeNotebookDocument(e){return this.doSendChange(e,void 0)}async doSendChange(e,t=this.getMatchingCells(e.notebook)){let r=async o=>{try{await this.client.sendNotification(hr.DidChangeNotebookDocumentNotification.type,{notebookDocument:Ki.c2p.asVersionedNotebookDocumentIdentifier(o.notebook,this.client.code2ProtocolConverter),change:Ki.c2p.asNotebookDocumentChangeEvent(o,this.client.code2ProtocolConverter)})}catch(s){throw this.client.error("Sending DidChangeNotebookDocumentNotification failed",s),s}},i=this.client.middleware?.notebooks;return e.cells?.structure!==void 0&&this.notebookSyncInfo.set(e.notebook.uri.toString(),Ta.create(t??[])),i?.didChange!==void 0?i?.didChange(e,r):r(e)}async sendDidSaveNotebookDocument(e){return this.doSendSave(e)}async doSendSave(e){let t=async i=>{try{await this.client.sendNotification(hr.DidSaveNotebookDocumentNotification.type,{notebookDocument:{uri:this.client.code2ProtocolConverter.asUri(i.uri)}})}catch(o){throw this.client.error("Sending DidSaveNotebookDocumentNotification failed",o),o}},r=this.client.middleware?.notebooks;return r?.didSave!==void 0?r.didSave(e,t):t(e)}async sendDidCloseNotebookDocument(e){return this.doSendClose(e,this.getMatchingCells(e)??[])}async doSendClose(e,t){let r=async(o,s)=>{try{await this.client.sendNotification(hr.DidCloseNotebookDocumentNotification.type,{notebookDocument:{uri:this.client.code2ProtocolConverter.asUri(o.uri)},cellTextDocuments:s.map(a=>this.client.code2ProtocolConverter.asTextDocumentIdentifier(a.document))})}catch(a){throw this.client.error("Sending DidCloseNotebookDocumentNotification failed",a),a}},i=this.client.middleware?.notebooks;return this.notebookSyncInfo.delete(e.uri.toString()),i?.didClose!==void 0?i.didClose(e,t,r):r(e,t)}asNotebookDocumentChangeEvent(e,t,r,i){if(t!==void 0&&t.notebook!==e)throw new Error("Notebook must be identical");let o={notebook:e};t?.metadata!==void 0&&(o.metadata=Ki.c2p.asMetadata(t.metadata));let s;if(t?.cellChanges!==void 0&&t.cellChanges.length>0){let a=[];s=new Set(i.map(c=>c.document.uri.toString()));for(let c of t.cellChanges)s.has(c.cell.document.uri.toString())&&(c.executionSummary!==void 0||c.metadata!==void 0)&&a.push(c.cell);a.length>0&&(o.cells=o.cells??{},o.cells.data=a)}if((t?.contentChanges!==void 0&&t.contentChanges.length>0||t===void 0)&&r!==void 0&&i!==void 0){let a=r.cells,c=i,u=Bd.computeDiff(a,c,!1),d,h;if(u!==void 0){d=u.cells===void 0?new Map:new Map(u.cells.map(y=>[y.document.uri.toString(),y])),h=u.deleteCount===0?new Map:new Map(a.slice(u.start,u.start+u.deleteCount).map(y=>[y.document.uri.toString(),y]));for(let y of Array.from(h.keys()))d.has(y)&&(h.delete(y),d.delete(y));o.cells=o.cells??{};let p=[],v=[];if(d.size>0||h.size>0){for(let y of d.values())p.push(y);for(let y of h.values())v.push(y)}o.cells.structure={array:u,didOpen:p,didClose:v}}}return Object.keys(o).length>1?o:void 0}getMatchingCells(e,t=e.getCells()){if(this.options.notebookSelector!==void 0){for(let r of this.options.notebookSelector)if(r.notebook===void 0||Kd.matchNotebook(r.notebook,e)){let i=this.filterCells(e,t,r.cells);return i.length===0?void 0:i}}}cellMatches(e,t){let r=this.getMatchingCells(e,[t]);return r!==void 0&&r[0]===t}filterCells(e,t,r){let i=r!==void 0?t.filter(o=>{let s=o.document.languageId;return r.some(a=>a.language==="*"||s===a.language)}):t;return typeof this.client.clientOptions.notebookDocumentOptions?.filterCells=="function"?this.client.clientOptions.notebookDocumentOptions.filterCells(e,i):i}},Ea=class n{constructor(e){this.client=e,this.registrations=new Map,this.registrationType=hr.NotebookDocumentSyncRegistrationType.type,jt.workspace.onDidOpenTextDocument(t=>{if(t.uri.scheme!==n.CellScheme)return;let[r,i]=this.findNotebookDocumentAndCell(t);if(!(r===void 0||i===void 0))for(let o of this.registrations.values())o instanceof Gi&&o.didOpenNotebookCellTextDocument(r,i)}),jt.workspace.onDidChangeTextDocument(t=>{if(t.contentChanges.length===0)return;let r=t.document;if(r.uri.scheme!==n.CellScheme)return;let[i]=this.findNotebookDocumentAndCell(r);if(i!==void 0)for(let o of this.registrations.values())o instanceof Gi&&o.didChangeNotebookCellTextDocument(i,t)}),jt.workspace.onDidCloseTextDocument(t=>{if(t.uri.scheme!==n.CellScheme)return;let[r,i]=this.findNotebookDocumentAndCell(t);if(!(r===void 0||i===void 0))for(let o of this.registrations.values())o instanceof Gi&&o.didCloseNotebookCellTextDocument(r,i)})}getState(){if(this.registrations.size===0)return{kind:"document",id:this.registrationType.method,registrations:!1,matches:!1};for(let e of this.registrations.values()){let t=e.getState();if(t.kind==="document"&&t.registrations===!0&&t.matches===!0)return{kind:"document",id:this.registrationType.method,registrations:!0,matches:!0}}return{kind:"document",id:this.registrationType.method,registrations:!0,matches:!1}}fillClientCapabilities(e){let t=Lv(Lv(e,"notebookDocument"),"synchronization");t.dynamicRegistration=!0,t.executionSummarySupport=!0}preInitialize(e){let t=e.notebookDocumentSync;t!==void 0&&(this.dedicatedChannel=this.client.protocol2CodeConverter.asDocumentSelector(Sa.asDocumentSelector(t)))}initialize(e){let t=e.notebookDocumentSync;if(t===void 0)return;let r=t.id??c5.generateUuid();this.register({id:r,registerOptions:t})}register(e){let t=new Gi(this.client,e.registerOptions);this.registrations.set(e.id,t)}unregister(e){let t=this.registrations.get(e);t&&t.dispose()}clear(){for(let e of this.registrations.values())e.dispose();this.registrations.clear()}handles(e){if(e.uri.scheme!==n.CellScheme)return!1;if(this.dedicatedChannel!==void 0&&jt.languages.match(this.dedicatedChannel,e)>0)return!0;for(let t of this.registrations.values())if(t.handles(e))return!0;return!1}getProvider(e){for(let t of this.registrations.values())if(t.handles(e.document))return t}findNotebookDocumentAndCell(e){let t=e.uri.toString();for(let r of jt.workspace.notebookDocuments)for(let i of r.getCells())if(i.document.uri.toString()===t)return[r,i];return[void 0,void 0]}};xa.NotebookDocumentSyncFeature=Ea;Ea.CellScheme="vscode-notebook-cell"});var $v=k(jr=>{"use strict";Object.defineProperty(jr,"__esModule",{value:!0});jr.SyncConfigurationFeature=jr.toJSONObject=jr.ConfigurationFeature=void 0;var Xi=require("vscode"),Lo=re(),u5=Tn(),l5=Be(),Nv=Ce(),Gd=class{constructor(e){this._client=e}getState(){return{kind:"static"}}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.configuration=!0}initialize(){let e=this._client;e.onRequest(Lo.ConfigurationRequest.type,(t,r)=>{let i=s=>{let a=[];for(let c of s.items){let u=c.scopeUri!==void 0&&c.scopeUri!==null?this._client.protocol2CodeConverter.asUri(c.scopeUri):void 0;a.push(this.getConfiguration(u,c.section!==null?c.section:void 0))}return a},o=e.middleware.workspace;return o&&o.configuration?o.configuration(t,r,i):i(t,r)})}getConfiguration(e,t){let r=null;if(t){let i=t.lastIndexOf(".");if(i===-1)r=oi(Xi.workspace.getConfiguration(void 0,e).get(t));else{let o=Xi.workspace.getConfiguration(t.substr(0,i),e);o&&(r=oi(o.get(t.substr(i+1))))}}else{let i=Xi.workspace.getConfiguration(void 0,e);r={};for(let o of Object.keys(i))i.has(o)&&(r[o]=oi(i.get(o)))}return r===void 0&&(r=null),r}clear(){}};jr.ConfigurationFeature=Gd;function oi(n){if(n){if(Array.isArray(n))return n.map(oi);if(typeof n=="object"){let e=Object.create(null);for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=oi(n[t]));return e}}return n}jr.toJSONObject=oi;var Xd=class{constructor(e){this._client=e,this.isCleared=!1,this._listeners=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._listeners.size>0}}get registrationType(){return Lo.DidChangeConfigurationNotification.type}fillClientCapabilities(e){(0,Nv.ensure)((0,Nv.ensure)(e,"workspace"),"didChangeConfiguration").dynamicRegistration=!0}initialize(){this.isCleared=!1;let e=this._client.clientOptions.synchronize?.configurationSection;e!==void 0&&this.register({id:l5.generateUuid(),registerOptions:{section:e}})}register(e){let t=Xi.workspace.onDidChangeConfiguration(r=>{this.onDidChangeConfiguration(e.registerOptions.section,r)});this._listeners.set(e.id,t),e.registerOptions.section!==void 0&&this.onDidChangeConfiguration(e.registerOptions.section,void 0)}unregister(e){let t=this._listeners.get(e);t&&(this._listeners.delete(e),t.dispose())}clear(){for(let e of this._listeners.values())e.dispose();this._listeners.clear(),this.isCleared=!0}onDidChangeConfiguration(e,t){if(this.isCleared)return;let r;if(u5.string(e)?r=[e]:r=e,r!==void 0&&t!==void 0&&!r.some(a=>t.affectsConfiguration(a)))return;let i=async s=>s===void 0?this._client.sendNotification(Lo.DidChangeConfigurationNotification.type,{settings:null}):this._client.sendNotification(Lo.DidChangeConfigurationNotification.type,{settings:this.extractSettingsInformation(s)}),o=this._client.middleware.workspace?.didChangeConfiguration;(o?o(r,i):i(r)).catch(s=>{this._client.error(`Sending notification ${Lo.DidChangeConfigurationNotification.type.method} failed`,s)})}extractSettingsInformation(e){function t(o,s){let a=o;for(let c=0;c<s.length-1;c++){let u=a[s[c]];u||(u=Object.create(null),a[s[c]]=u),a=u}return a}let r=this._client.clientOptions.workspaceFolder?this._client.clientOptions.workspaceFolder.uri:void 0,i=Object.create(null);for(let o=0;o<e.length;o++){let s=e[o],a=s.indexOf("."),c=null;if(a>=0?c=Xi.workspace.getConfiguration(s.substr(0,a),r).get(s.substr(a+1)):c=Xi.workspace.getConfiguration(void 0,r).get(s),c){let u=e[o].split(".");t(i,u)[u[u.length-1]]=oi(c)}}return i}};jr.SyncConfigurationFeature=Xd});var jv=k(rn=>{"use strict";Object.defineProperty(rn,"__esModule",{value:!0});rn.DidSaveTextDocumentFeature=rn.WillSaveWaitUntilFeature=rn.WillSaveFeature=rn.DidChangeTextDocumentFeature=rn.DidCloseTextDocumentFeature=rn.DidOpenTextDocumentFeature=void 0;var mn=require("vscode"),Ae=re(),Ye=Ce(),Yi=Be(),Yd=class extends Ye.TextDocumentEventFeature{constructor(e,t){super(e,mn.workspace.onDidOpenTextDocument,Ae.DidOpenTextDocumentNotification.type,()=>e.middleware.didOpen,r=>e.code2ProtocolConverter.asOpenTextDocumentParams(r),r=>r,Ye.TextDocumentEventFeature.textDocumentFilter),this._syncedDocuments=t}get openDocuments(){return this._syncedDocuments.values()}fillClientCapabilities(e){(0,Ye.ensure)((0,Ye.ensure)(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,t){let r=e.resolvedTextDocumentSync;t&&r&&r.openClose&&this.register({id:Yi.generateUuid(),registerOptions:{documentSelector:t}})}get registrationType(){return Ae.DidOpenTextDocumentNotification.type}register(e){if(super.register(e),!e.registerOptions.documentSelector)return;let t=this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector);mn.workspace.textDocuments.forEach(r=>{let i=r.uri.toString();if(!this._syncedDocuments.has(i)&&mn.languages.match(t,r)>0&&!this._client.hasDedicatedTextSynchronizationFeature(r)){let o=this._client.middleware,s=a=>this._client.sendNotification(this._type,this._createParams(a));(o.didOpen?o.didOpen(r,s):s(r)).catch(a=>{this._client.error(`Sending document notification ${this._type.method} failed`,a)}),this._syncedDocuments.set(i,r)}})}getTextDocument(e){return e}notificationSent(e,t,r){this._syncedDocuments.set(e.uri.toString(),e),super.notificationSent(e,t,r)}};rn.DidOpenTextDocumentFeature=Yd;var Jd=class extends Ye.TextDocumentEventFeature{constructor(e,t,r){super(e,mn.workspace.onDidCloseTextDocument,Ae.DidCloseTextDocumentNotification.type,()=>e.middleware.didClose,i=>e.code2ProtocolConverter.asCloseTextDocumentParams(i),i=>i,Ye.TextDocumentEventFeature.textDocumentFilter),this._syncedDocuments=t,this._pendingTextDocumentChanges=r}get registrationType(){return Ae.DidCloseTextDocumentNotification.type}fillClientCapabilities(e){(0,Ye.ensure)((0,Ye.ensure)(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,t){let r=e.resolvedTextDocumentSync;t&&r&&r.openClose&&this.register({id:Yi.generateUuid(),registerOptions:{documentSelector:t}})}async callback(e){await super.callback(e),this._pendingTextDocumentChanges.delete(e.uri.toString())}getTextDocument(e){return e}notificationSent(e,t,r){this._syncedDocuments.delete(e.uri.toString()),super.notificationSent(e,t,r)}unregister(e){let t=this._selectors.get(e);super.unregister(e);let r=this._selectors.values();this._syncedDocuments.forEach(i=>{if(mn.languages.match(t,i)>0&&!this._selectorFilter(r,i)&&!this._client.hasDedicatedTextSynchronizationFeature(i)){let o=this._client.middleware,s=a=>this._client.sendNotification(this._type,this._createParams(a));this._syncedDocuments.delete(i.uri.toString()),(o.didClose?o.didClose(i,s):s(i)).catch(a=>{this._client.error(`Sending document notification ${this._type.method} failed`,a)})}})}};rn.DidCloseTextDocumentFeature=Jd;var Zd=class extends Ye.DynamicDocumentFeature{constructor(e,t){super(e),this._changeData=new Map,this._onNotificationSent=new mn.EventEmitter,this._onPendingChangeAdded=new mn.EventEmitter,this._pendingTextDocumentChanges=t,this._syncKind=Ae.TextDocumentSyncKind.None}get onNotificationSent(){return this._onNotificationSent.event}get onPendingChangeAdded(){return this._onPendingChangeAdded.event}get syncKind(){return this._syncKind}get registrationType(){return Ae.DidChangeTextDocumentNotification.type}fillClientCapabilities(e){(0,Ye.ensure)((0,Ye.ensure)(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,t){let r=e.resolvedTextDocumentSync;t&&r&&r.change!==void 0&&r.change!==Ae.TextDocumentSyncKind.None&&this.register({id:Yi.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},{syncKind:r.change})})}register(e){e.registerOptions.documentSelector&&(this._listener||(this._listener=mn.workspace.onDidChangeTextDocument(this.callback,this)),this._changeData.set(e.id,{syncKind:e.registerOptions.syncKind,documentSelector:this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector)}),this.updateSyncKind(e.registerOptions.syncKind))}*getDocumentSelectors(){for(let e of this._changeData.values())yield e.documentSelector}async callback(e){if(e.contentChanges.length===0)return;let t=e.document.uri,r=e.document.version,i=[];for(let o of this._changeData.values())if(mn.languages.match(o.documentSelector,e.document)>0&&!this._client.hasDedicatedTextSynchronizationFeature(e.document)){let s=this._client.middleware;if(o.syncKind===Ae.TextDocumentSyncKind.Incremental){let a=async c=>{let u=this._client.code2ProtocolConverter.asChangeTextDocumentParams(c,t,r);await this._client.sendNotification(Ae.DidChangeTextDocumentNotification.type,u),this.notificationSent(c.document,Ae.DidChangeTextDocumentNotification.type,u)};i.push(s.didChange?s.didChange(e,c=>a(c)):a(e))}else if(o.syncKind===Ae.TextDocumentSyncKind.Full){let a=async c=>{let u=c.document.uri.toString();this._pendingTextDocumentChanges.set(u,c.document),this._onPendingChangeAdded.fire()};i.push(s.didChange?s.didChange(e,c=>a(c)):a(e))}}return Promise.all(i).then(void 0,o=>{throw this._client.error(`Sending document notification ${Ae.DidChangeTextDocumentNotification.type.method} failed`,o),o})}notificationSent(e,t,r){this._onNotificationSent.fire({textDocument:e,type:t,params:r})}unregister(e){if(this._changeData.delete(e),this._changeData.size===0)this._listener&&(this._listener.dispose(),this._listener=void 0),this._syncKind=Ae.TextDocumentSyncKind.None;else{this._syncKind=Ae.TextDocumentSyncKind.None;for(let t of this._changeData.values())if(this.updateSyncKind(t.syncKind),this._syncKind===Ae.TextDocumentSyncKind.Full)break}}clear(){this._pendingTextDocumentChanges.clear(),this._changeData.clear(),this._syncKind=Ae.TextDocumentSyncKind.None,this._listener&&(this._listener.dispose(),this._listener=void 0)}getPendingDocumentChanges(e){if(this._pendingTextDocumentChanges.size===0)return[];let t;if(e.size===0)t=Array.from(this._pendingTextDocumentChanges.values()),this._pendingTextDocumentChanges.clear();else{t=[];for(let r of this._pendingTextDocumentChanges)e.has(r[0])||(t.push(r[1]),this._pendingTextDocumentChanges.delete(r[0]))}return t}getProvider(e){for(let t of this._changeData.values())if(mn.languages.match(t.documentSelector,e)>0)return{send:r=>this.callback(r)}}updateSyncKind(e){if(this._syncKind!==Ae.TextDocumentSyncKind.Full)switch(e){case Ae.TextDocumentSyncKind.Full:this._syncKind=e;break;case Ae.TextDocumentSyncKind.Incremental:this._syncKind===Ae.TextDocumentSyncKind.None&&(this._syncKind=Ae.TextDocumentSyncKind.Incremental);break}}};rn.DidChangeTextDocumentFeature=Zd;var Qd=class extends Ye.TextDocumentEventFeature{constructor(e){super(e,mn.workspace.onWillSaveTextDocument,Ae.WillSaveTextDocumentNotification.type,()=>e.middleware.willSave,t=>e.code2ProtocolConverter.asWillSaveTextDocumentParams(t),t=>t.document,(t,r)=>Ye.TextDocumentEventFeature.textDocumentFilter(t,r.document))}get registrationType(){return Ae.WillSaveTextDocumentNotification.type}fillClientCapabilities(e){let t=(0,Ye.ensure)((0,Ye.ensure)(e,"textDocument"),"synchronization");t.willSave=!0}initialize(e,t){let r=e.resolvedTextDocumentSync;t&&r&&r.willSave&&this.register({id:Yi.generateUuid(),registerOptions:{documentSelector:t}})}getTextDocument(e){return e.document}};rn.WillSaveFeature=Qd;var ef=class extends Ye.DynamicDocumentFeature{constructor(e){super(e),this._selectors=new Map}getDocumentSelectors(){return this._selectors.values()}get registrationType(){return Ae.WillSaveTextDocumentWaitUntilRequest.type}fillClientCapabilities(e){let t=(0,Ye.ensure)((0,Ye.ensure)(e,"textDocument"),"synchronization");t.willSaveWaitUntil=!0}initialize(e,t){let r=e.resolvedTextDocumentSync;t&&r&&r.willSaveWaitUntil&&this.register({id:Yi.generateUuid(),registerOptions:{documentSelector:t}})}register(e){e.registerOptions.documentSelector&&(this._listener||(this._listener=mn.workspace.onWillSaveTextDocument(this.callback,this)),this._selectors.set(e.id,this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector)))}callback(e){if(Ye.TextDocumentEventFeature.textDocumentFilter(this._selectors.values(),e.document)&&!this._client.hasDedicatedTextSynchronizationFeature(e.document)){let t=this._client.middleware,r=i=>this._client.sendRequest(Ae.WillSaveTextDocumentWaitUntilRequest.type,this._client.code2ProtocolConverter.asWillSaveTextDocumentParams(i)).then(async o=>{let s=await this._client.protocol2CodeConverter.asTextEdits(o);return s===void 0?[]:s});e.waitUntil(t.willSaveWaitUntil?t.willSaveWaitUntil(e,r):r(e))}}unregister(e){this._selectors.delete(e),this._selectors.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}clear(){this._selectors.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}};rn.WillSaveWaitUntilFeature=ef;var tf=class extends Ye.TextDocumentEventFeature{constructor(e){super(e,mn.workspace.onDidSaveTextDocument,Ae.DidSaveTextDocumentNotification.type,()=>e.middleware.didSave,t=>e.code2ProtocolConverter.asSaveTextDocumentParams(t,this._includeText),t=>t,Ye.TextDocumentEventFeature.textDocumentFilter),this._includeText=!1}get registrationType(){return Ae.DidSaveTextDocumentNotification.type}fillClientCapabilities(e){(0,Ye.ensure)((0,Ye.ensure)(e,"textDocument"),"synchronization").didSave=!0}initialize(e,t){let r=e.resolvedTextDocumentSync;if(t&&r&&r.save){let i=typeof r.save=="boolean"?{includeText:!1}:{includeText:!!r.save.includeText};this.register({id:Yi.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},i)})}}register(e){this._includeText=!!e.registerOptions.includeText,super.register(e)}getTextDocument(e){return e}};rn.DidSaveTextDocumentFeature=tf});var Hv=k(Pa=>{"use strict";Object.defineProperty(Pa,"__esModule",{value:!0});Pa.CompletionItemFeature=void 0;var d5=require("vscode"),ye=re(),nf=Ce(),f5=Be(),h5=[ye.CompletionItemKind.Text,ye.CompletionItemKind.Method,ye.CompletionItemKind.Function,ye.CompletionItemKind.Constructor,ye.CompletionItemKind.Field,ye.CompletionItemKind.Variable,ye.CompletionItemKind.Class,ye.CompletionItemKind.Interface,ye.CompletionItemKind.Module,ye.CompletionItemKind.Property,ye.CompletionItemKind.Unit,ye.CompletionItemKind.Value,ye.CompletionItemKind.Enum,ye.CompletionItemKind.Keyword,ye.CompletionItemKind.Snippet,ye.CompletionItemKind.Color,ye.CompletionItemKind.File,ye.CompletionItemKind.Reference,ye.CompletionItemKind.Folder,ye.CompletionItemKind.EnumMember,ye.CompletionItemKind.Constant,ye.CompletionItemKind.Struct,ye.CompletionItemKind.Event,ye.CompletionItemKind.Operator,ye.CompletionItemKind.TypeParameter],rf=class extends nf.TextDocumentLanguageFeature{constructor(e){super(e,ye.CompletionRequest.type),this.labelDetailsSupport=new Map}fillClientCapabilities(e){let t=(0,nf.ensure)((0,nf.ensure)(e,"textDocument"),"completion");t.dynamicRegistration=!0,t.contextSupport=!0,t.completionItem={snippetSupport:!0,commitCharactersSupport:!0,documentationFormat:[ye.MarkupKind.Markdown,ye.MarkupKind.PlainText],deprecatedSupport:!0,preselectSupport:!0,tagSupport:{valueSet:[ye.CompletionItemTag.Deprecated]},insertReplaceSupport:!0,resolveSupport:{properties:["documentation","detail","additionalTextEdits"]},insertTextModeSupport:{valueSet:[ye.InsertTextMode.asIs,ye.InsertTextMode.adjustIndentation]},labelDetailsSupport:!0},t.insertTextMode=ye.InsertTextMode.adjustIndentation,t.completionItemKind={valueSet:h5},t.completionList={itemDefaults:["commitCharacters","editRange","insertTextFormat","insertTextMode","data"]}}initialize(e,t){let r=this.getRegistrationOptions(t,e.completionProvider);r&&this.register({id:f5.generateUuid(),registerOptions:r})}registerLanguageProvider(e,t){this.labelDetailsSupport.set(t,!!e.completionItem?.labelDetailsSupport);let r=e.triggerCharacters??[],i=e.allCommitCharacters,o=e.documentSelector,s={provideCompletionItems:(a,c,u,d)=>{let h=this._client,p=this._client.middleware,v=(y,R,E,I)=>h.sendRequest(ye.CompletionRequest.type,h.code2ProtocolConverter.asCompletionParams(y,R,E),I).then(O=>I.isCancellationRequested?null:h.protocol2CodeConverter.asCompletionResult(O,i,I),O=>h.handleFailedRequest(ye.CompletionRequest.type,I,O,null));return p.provideCompletionItem?p.provideCompletionItem(a,c,d,u,v):v(a,c,d,u)},resolveCompletionItem:e.resolveProvider?(a,c)=>{let u=this._client,d=this._client.middleware,h=(p,v)=>u.sendRequest(ye.CompletionResolveRequest.type,u.code2ProtocolConverter.asCompletionItem(p,!!this.labelDetailsSupport.get(t)),v).then(y=>v.isCancellationRequested?null:u.protocol2CodeConverter.asCompletionItem(y),y=>u.handleFailedRequest(ye.CompletionResolveRequest.type,v,y,p));return d.resolveCompletionItem?d.resolveCompletionItem(a,c,h):h(a,c)}:void 0};return[d5.languages.registerCompletionItemProvider(this._client.protocol2CodeConverter.asDocumentSelector(o),s,...r),s]}};Pa.CompletionItemFeature=rf});var Uv=k(qa=>{"use strict";Object.defineProperty(qa,"__esModule",{value:!0});qa.HoverFeature=void 0;var g5=require("vscode"),Ao=re(),of=Ce(),p5=Be(),sf=class extends of.TextDocumentLanguageFeature{constructor(e){super(e,Ao.HoverRequest.type)}fillClientCapabilities(e){let t=(0,of.ensure)((0,of.ensure)(e,"textDocument"),"hover");t.dynamicRegistration=!0,t.contentFormat=[Ao.MarkupKind.Markdown,Ao.MarkupKind.PlainText]}initialize(e,t){let r=this.getRegistrationOptions(t,e.hoverProvider);r&&this.register({id:p5.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,r={provideHover:(i,o,s)=>{let a=this._client,c=(d,h,p)=>a.sendRequest(Ao.HoverRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(d,h),p).then(v=>p.isCancellationRequested?null:a.protocol2CodeConverter.asHover(v),v=>a.handleFailedRequest(Ao.HoverRequest.type,p,v,null)),u=a.middleware;return u.provideHover?u.provideHover(i,o,s,c):c(i,o,s)}};return[this.registerProvider(t,r),r]}registerProvider(e,t){return g5.languages.registerHoverProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};qa.HoverFeature=sf});var zv=k(Ia=>{"use strict";Object.defineProperty(Ia,"__esModule",{value:!0});Ia.DefinitionFeature=void 0;var m5=require("vscode"),af=re(),cf=Ce(),y5=Be(),uf=class extends cf.TextDocumentLanguageFeature{constructor(e){super(e,af.DefinitionRequest.type)}fillClientCapabilities(e){let t=(0,cf.ensure)((0,cf.ensure)(e,"textDocument"),"definition");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.definitionProvider);r&&this.register({id:y5.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,r={provideDefinition:(i,o,s)=>{let a=this._client,c=(d,h,p)=>a.sendRequest(af.DefinitionRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(d,h),p).then(v=>p.isCancellationRequested?null:a.protocol2CodeConverter.asDefinitionResult(v,p),v=>a.handleFailedRequest(af.DefinitionRequest.type,p,v,null)),u=a.middleware;return u.provideDefinition?u.provideDefinition(i,o,s,c):c(i,o,s)}};return[this.registerProvider(t,r),r]}registerProvider(e,t){return m5.languages.registerDefinitionProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};Ia.DefinitionFeature=uf});var Vv=k(ka=>{"use strict";Object.defineProperty(ka,"__esModule",{value:!0});ka.SignatureHelpFeature=void 0;var Wv=require("vscode"),No=re(),lf=Ce(),b5=Be(),df=class extends lf.TextDocumentLanguageFeature{constructor(e){super(e,No.SignatureHelpRequest.type)}fillClientCapabilities(e){let t=(0,lf.ensure)((0,lf.ensure)(e,"textDocument"),"signatureHelp");t.dynamicRegistration=!0,t.signatureInformation={documentationFormat:[No.MarkupKind.Markdown,No.MarkupKind.PlainText]},t.signatureInformation.parameterInformation={labelOffsetSupport:!0},t.signatureInformation.activeParameterSupport=!0,t.contextSupport=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.signatureHelpProvider);r&&this.register({id:b5.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t={provideSignatureHelp:(r,i,o,s)=>{let a=this._client,c=(d,h,p,v)=>a.sendRequest(No.SignatureHelpRequest.type,a.code2ProtocolConverter.asSignatureHelpParams(d,h,p),v).then(y=>v.isCancellationRequested?null:a.protocol2CodeConverter.asSignatureHelp(y,v),y=>a.handleFailedRequest(No.SignatureHelpRequest.type,v,y,null)),u=a.middleware;return u.provideSignatureHelp?u.provideSignatureHelp(r,i,s,o,c):c(r,i,s,o)}};return[this.registerProvider(e,t),t]}registerProvider(e,t){let r=this._client.protocol2CodeConverter.asDocumentSelector(e.documentSelector);if(e.retriggerCharacters===void 0){let i=e.triggerCharacters||[];return Wv.languages.registerSignatureHelpProvider(r,t,...i)}else{let i={triggerCharacters:e.triggerCharacters||[],retriggerCharacters:e.retriggerCharacters||[]};return Wv.languages.registerSignatureHelpProvider(r,t,i)}}};ka.SignatureHelpFeature=df});var Bv=k(Fa=>{"use strict";Object.defineProperty(Fa,"__esModule",{value:!0});Fa.DocumentHighlightFeature=void 0;var v5=require("vscode"),ff=re(),hf=Ce(),C5=Be(),gf=class extends hf.TextDocumentLanguageFeature{constructor(e){super(e,ff.DocumentHighlightRequest.type)}fillClientCapabilities(e){(0,hf.ensure)((0,hf.ensure)(e,"textDocument"),"documentHighlight").dynamicRegistration=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.documentHighlightProvider);r&&this.register({id:C5.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,r={provideDocumentHighlights:(i,o,s)=>{let a=this._client,c=(d,h,p)=>a.sendRequest(ff.DocumentHighlightRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(d,h),p).then(v=>p.isCancellationRequested?null:a.protocol2CodeConverter.asDocumentHighlights(v,p),v=>a.handleFailedRequest(ff.DocumentHighlightRequest.type,p,v,null)),u=a.middleware;return u.provideDocumentHighlights?u.provideDocumentHighlights(i,o,s,c):c(i,o,s)}};return[v5.languages.registerDocumentHighlightProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),r),r]}};Fa.DocumentHighlightFeature=gf});var yf=k(ir=>{"use strict";Object.defineProperty(ir,"__esModule",{value:!0});ir.DocumentSymbolFeature=ir.SupportedSymbolTags=ir.SupportedSymbolKinds=void 0;var w5=require("vscode"),Te=re(),pf=Ce(),D5=Be();ir.SupportedSymbolKinds=[Te.SymbolKind.File,Te.SymbolKind.Module,Te.SymbolKind.Namespace,Te.SymbolKind.Package,Te.SymbolKind.Class,Te.SymbolKind.Method,Te.SymbolKind.Property,Te.SymbolKind.Field,Te.SymbolKind.Constructor,Te.SymbolKind.Enum,Te.SymbolKind.Interface,Te.SymbolKind.Function,Te.SymbolKind.Variable,Te.SymbolKind.Constant,Te.SymbolKind.String,Te.SymbolKind.Number,Te.SymbolKind.Boolean,Te.SymbolKind.Array,Te.SymbolKind.Object,Te.SymbolKind.Key,Te.SymbolKind.Null,Te.SymbolKind.EnumMember,Te.SymbolKind.Struct,Te.SymbolKind.Event,Te.SymbolKind.Operator,Te.SymbolKind.TypeParameter];ir.SupportedSymbolTags=[Te.SymbolTag.Deprecated];var mf=class extends pf.TextDocumentLanguageFeature{constructor(e){super(e,Te.DocumentSymbolRequest.type)}fillClientCapabilities(e){let t=(0,pf.ensure)((0,pf.ensure)(e,"textDocument"),"documentSymbol");t.dynamicRegistration=!0,t.symbolKind={valueSet:ir.SupportedSymbolKinds},t.hierarchicalDocumentSymbolSupport=!0,t.tagSupport={valueSet:ir.SupportedSymbolTags},t.labelSupport=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.documentSymbolProvider);r&&this.register({id:D5.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,r={provideDocumentSymbols:(o,s)=>{let a=this._client,c=async(d,h)=>{try{let p=await a.sendRequest(Te.DocumentSymbolRequest.type,a.code2ProtocolConverter.asDocumentSymbolParams(d),h);if(h.isCancellationRequested||p===void 0||p===null)return null;if(p.length===0)return[];{let v=p[0];return Te.DocumentSymbol.is(v)?await a.protocol2CodeConverter.asDocumentSymbols(p,h):await a.protocol2CodeConverter.asSymbolInformations(p,h)}}catch(p){return a.handleFailedRequest(Te.DocumentSymbolRequest.type,h,p,null)}},u=a.middleware;return u.provideDocumentSymbols?u.provideDocumentSymbols(o,s,c):c(o,s)}},i=e.label!==void 0?{label:e.label}:void 0;return[w5.languages.registerDocumentSymbolProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),r,i),r]}};ir.DocumentSymbolFeature=mf});var Gv=k(Ma=>{"use strict";Object.defineProperty(Ma,"__esModule",{value:!0});Ma.WorkspaceSymbolFeature=void 0;var R5=require("vscode"),$o=re(),bf=Ce(),Kv=yf(),_5=Be(),vf=class extends bf.WorkspaceFeature{constructor(e){super(e,$o.WorkspaceSymbolRequest.type)}fillClientCapabilities(e){let t=(0,bf.ensure)((0,bf.ensure)(e,"workspace"),"symbol");t.dynamicRegistration=!0,t.symbolKind={valueSet:Kv.SupportedSymbolKinds},t.tagSupport={valueSet:Kv.SupportedSymbolTags},t.resolveSupport={properties:["location.range"]}}initialize(e){e.workspaceSymbolProvider&&this.register({id:_5.generateUuid(),registerOptions:e.workspaceSymbolProvider===!0?{workDoneProgress:!1}:e.workspaceSymbolProvider})}registerLanguageProvider(e){let t={provideWorkspaceSymbols:(r,i)=>{let o=this._client,s=(c,u)=>o.sendRequest($o.WorkspaceSymbolRequest.type,{query:c},u).then(d=>u.isCancellationRequested?null:o.protocol2CodeConverter.asSymbolInformations(d,u),d=>o.handleFailedRequest($o.WorkspaceSymbolRequest.type,u,d,null)),a=o.middleware;return a.provideWorkspaceSymbols?a.provideWorkspaceSymbols(r,i,s):s(r,i)},resolveWorkspaceSymbol:e.resolveProvider===!0?(r,i)=>{let o=this._client,s=(c,u)=>o.sendRequest($o.WorkspaceSymbolResolveRequest.type,o.code2ProtocolConverter.asWorkspaceSymbol(c),u).then(d=>u.isCancellationRequested?null:o.protocol2CodeConverter.asSymbolInformation(d),d=>o.handleFailedRequest($o.WorkspaceSymbolResolveRequest.type,u,d,null)),a=o.middleware;return a.resolveWorkspaceSymbol?a.resolveWorkspaceSymbol(r,i,s):s(r,i)}:void 0};return[R5.languages.registerWorkspaceSymbolProvider(t),t]}};Ma.WorkspaceSymbolFeature=vf});var Xv=k(Oa=>{"use strict";Object.defineProperty(Oa,"__esModule",{value:!0});Oa.ReferencesFeature=void 0;var S5=require("vscode"),Cf=re(),wf=Ce(),T5=Be(),Df=class extends wf.TextDocumentLanguageFeature{constructor(e){super(e,Cf.ReferencesRequest.type)}fillClientCapabilities(e){(0,wf.ensure)((0,wf.ensure)(e,"textDocument"),"references").dynamicRegistration=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.referencesProvider);r&&this.register({id:T5.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,r={provideReferences:(i,o,s,a)=>{let c=this._client,u=(h,p,v,y)=>c.sendRequest(Cf.ReferencesRequest.type,c.code2ProtocolConverter.asReferenceParams(h,p,v),y).then(R=>y.isCancellationRequested?null:c.protocol2CodeConverter.asReferences(R,y),R=>c.handleFailedRequest(Cf.ReferencesRequest.type,y,R,null)),d=c.middleware;return d.provideReferences?d.provideReferences(i,o,s,a,u):u(i,o,s,a)}};return[this.registerProvider(t,r),r]}registerProvider(e,t){return S5.languages.registerReferenceProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};Oa.ReferencesFeature=Df});var Yv=k(La=>{"use strict";Object.defineProperty(La,"__esModule",{value:!0});La.CodeActionFeature=void 0;var E5=require("vscode"),yn=re(),x5=Be(),Rf=Ce(),_f=class extends Rf.TextDocumentLanguageFeature{constructor(e){super(e,yn.CodeActionRequest.type)}fillClientCapabilities(e){let t=(0,Rf.ensure)((0,Rf.ensure)(e,"textDocument"),"codeAction");t.dynamicRegistration=!0,t.isPreferredSupport=!0,t.disabledSupport=!0,t.dataSupport=!0,t.resolveSupport={properties:["edit"]},t.codeActionLiteralSupport={codeActionKind:{valueSet:[yn.CodeActionKind.Empty,yn.CodeActionKind.QuickFix,yn.CodeActionKind.Refactor,yn.CodeActionKind.RefactorExtract,yn.CodeActionKind.RefactorInline,yn.CodeActionKind.RefactorRewrite,yn.CodeActionKind.Source,yn.CodeActionKind.SourceOrganizeImports]}},t.honorsChangeAnnotations=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.codeActionProvider);r&&this.register({id:x5.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,r={provideCodeActions:(i,o,s,a)=>{let c=this._client,u=async(h,p,v,y)=>{let R={textDocument:c.code2ProtocolConverter.asTextDocumentIdentifier(h),range:c.code2ProtocolConverter.asRange(p),context:c.code2ProtocolConverter.asCodeActionContextSync(v)};return c.sendRequest(yn.CodeActionRequest.type,R,y).then(E=>y.isCancellationRequested||E===null||E===void 0?null:c.protocol2CodeConverter.asCodeActionResult(E,y),E=>c.handleFailedRequest(yn.CodeActionRequest.type,y,E,null))},d=c.middleware;return d.provideCodeActions?d.provideCodeActions(i,o,s,a,u):u(i,o,s,a)},resolveCodeAction:e.resolveProvider?(i,o)=>{let s=this._client,a=this._client.middleware,c=async(u,d)=>s.sendRequest(yn.CodeActionResolveRequest.type,s.code2ProtocolConverter.asCodeActionSync(u),d).then(h=>d.isCancellationRequested?u:s.protocol2CodeConverter.asCodeAction(h,d),h=>s.handleFailedRequest(yn.CodeActionResolveRequest.type,d,h,u));return a.resolveCodeAction?a.resolveCodeAction(i,o,c):c(i,o)}:void 0};return[E5.languages.registerCodeActionsProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),r,e.codeActionKinds?{providedCodeActionKinds:this._client.protocol2CodeConverter.asCodeActionKinds(e.codeActionKinds)}:void 0),r]}};La.CodeActionFeature=_f});var Zv=k(Aa=>{"use strict";Object.defineProperty(Aa,"__esModule",{value:!0});Aa.CodeLensFeature=void 0;var Jv=require("vscode"),Ji=re(),P5=Be(),jo=Ce(),Sf=class extends jo.TextDocumentLanguageFeature{constructor(e){super(e,Ji.CodeLensRequest.type)}fillClientCapabilities(e){(0,jo.ensure)((0,jo.ensure)(e,"textDocument"),"codeLens").dynamicRegistration=!0,(0,jo.ensure)((0,jo.ensure)(e,"workspace"),"codeLens").refreshSupport=!0}initialize(e,t){this._client.onRequest(Ji.CodeLensRefreshRequest.type,async()=>{for(let o of this.getAllProviders())o.onDidChangeCodeLensEmitter.fire()});let i=this.getRegistrationOptions(t,e.codeLensProvider);i&&this.register({id:P5.generateUuid(),registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r=new Jv.EventEmitter,i={onDidChangeCodeLenses:r.event,provideCodeLenses:(o,s)=>{let a=this._client,c=(d,h)=>a.sendRequest(Ji.CodeLensRequest.type,a.code2ProtocolConverter.asCodeLensParams(d),h).then(p=>h.isCancellationRequested?null:a.protocol2CodeConverter.asCodeLenses(p,h),p=>a.handleFailedRequest(Ji.CodeLensRequest.type,h,p,null)),u=a.middleware;return u.provideCodeLenses?u.provideCodeLenses(o,s,c):c(o,s)},resolveCodeLens:e.resolveProvider?(o,s)=>{let a=this._client,c=(d,h)=>a.sendRequest(Ji.CodeLensResolveRequest.type,a.code2ProtocolConverter.asCodeLens(d),h).then(p=>h.isCancellationRequested?d:a.protocol2CodeConverter.asCodeLens(p),p=>a.handleFailedRequest(Ji.CodeLensResolveRequest.type,h,p,d)),u=a.middleware;return u.resolveCodeLens?u.resolveCodeLens(o,s,c):c(o,s)}:void 0};return[Jv.languages.registerCodeLensProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),i),{provider:i,onDidChangeCodeLensEmitter:r}]}};Aa.CodeLensFeature=Sf});var Qv=k(Hr=>{"use strict";Object.defineProperty(Hr,"__esModule",{value:!0});Hr.DocumentOnTypeFormattingFeature=Hr.DocumentRangeFormattingFeature=Hr.DocumentFormattingFeature=void 0;var Na=require("vscode"),Un=re(),Pf=Be(),gr=Ce(),Zi;(function(n){function e(t){let r=Na.workspace.getConfiguration("files",t);return{trimTrailingWhitespace:r.get("trimTrailingWhitespace"),trimFinalNewlines:r.get("trimFinalNewlines"),insertFinalNewline:r.get("insertFinalNewline")}}n.fromConfiguration=e})(Zi||(Zi={}));var Tf=class extends gr.TextDocumentLanguageFeature{constructor(e){super(e,Un.DocumentFormattingRequest.type)}fillClientCapabilities(e){(0,gr.ensure)((0,gr.ensure)(e,"textDocument"),"formatting").dynamicRegistration=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.documentFormattingProvider);r&&this.register({id:Pf.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,r={provideDocumentFormattingEdits:(i,o,s)=>{let a=this._client,c=(d,h,p)=>{let v={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(d),options:a.code2ProtocolConverter.asFormattingOptions(h,Zi.fromConfiguration(d))};return a.sendRequest(Un.DocumentFormattingRequest.type,v,p).then(y=>p.isCancellationRequested?null:a.protocol2CodeConverter.asTextEdits(y,p),y=>a.handleFailedRequest(Un.DocumentFormattingRequest.type,p,y,null))},u=a.middleware;return u.provideDocumentFormattingEdits?u.provideDocumentFormattingEdits(i,o,s,c):c(i,o,s)}};return[Na.languages.registerDocumentFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),r),r]}};Hr.DocumentFormattingFeature=Tf;var Ef=class extends gr.TextDocumentLanguageFeature{constructor(e){super(e,Un.DocumentRangeFormattingRequest.type)}fillClientCapabilities(e){let t=(0,gr.ensure)((0,gr.ensure)(e,"textDocument"),"rangeFormatting");t.dynamicRegistration=!0,t.rangesSupport=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.documentRangeFormattingProvider);r&&this.register({id:Pf.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,r={provideDocumentRangeFormattingEdits:(i,o,s,a)=>{let c=this._client,u=(h,p,v,y)=>{let R={textDocument:c.code2ProtocolConverter.asTextDocumentIdentifier(h),range:c.code2ProtocolConverter.asRange(p),options:c.code2ProtocolConverter.asFormattingOptions(v,Zi.fromConfiguration(h))};return c.sendRequest(Un.DocumentRangeFormattingRequest.type,R,y).then(E=>y.isCancellationRequested?null:c.protocol2CodeConverter.asTextEdits(E,y),E=>c.handleFailedRequest(Un.DocumentRangeFormattingRequest.type,y,E,null))},d=c.middleware;return d.provideDocumentRangeFormattingEdits?d.provideDocumentRangeFormattingEdits(i,o,s,a,u):u(i,o,s,a)}};return e.rangesSupport&&(r.provideDocumentRangesFormattingEdits=(i,o,s,a)=>{let c=this._client,u=(h,p,v,y)=>{let R={textDocument:c.code2ProtocolConverter.asTextDocumentIdentifier(h),ranges:c.code2ProtocolConverter.asRanges(p),options:c.code2ProtocolConverter.asFormattingOptions(v,Zi.fromConfiguration(h))};return c.sendRequest(Un.DocumentRangesFormattingRequest.type,R,y).then(E=>y.isCancellationRequested?null:c.protocol2CodeConverter.asTextEdits(E,y),E=>c.handleFailedRequest(Un.DocumentRangesFormattingRequest.type,y,E,null))},d=c.middleware;return d.provideDocumentRangesFormattingEdits?d.provideDocumentRangesFormattingEdits(i,o,s,a,u):u(i,o,s,a)}),[Na.languages.registerDocumentRangeFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),r),r]}};Hr.DocumentRangeFormattingFeature=Ef;var xf=class extends gr.TextDocumentLanguageFeature{constructor(e){super(e,Un.DocumentOnTypeFormattingRequest.type)}fillClientCapabilities(e){(0,gr.ensure)((0,gr.ensure)(e,"textDocument"),"onTypeFormatting").dynamicRegistration=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.documentOnTypeFormattingProvider);r&&this.register({id:Pf.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,r={provideOnTypeFormattingEdits:(o,s,a,c,u)=>{let d=this._client,h=(v,y,R,E,I)=>{let O={textDocument:d.code2ProtocolConverter.asTextDocumentIdentifier(v),position:d.code2ProtocolConverter.asPosition(y),ch:R,options:d.code2ProtocolConverter.asFormattingOptions(E,Zi.fromConfiguration(v))};return d.sendRequest(Un.DocumentOnTypeFormattingRequest.type,O,I).then(q=>I.isCancellationRequested?null:d.protocol2CodeConverter.asTextEdits(q,I),q=>d.handleFailedRequest(Un.DocumentOnTypeFormattingRequest.type,I,q,null))},p=d.middleware;return p.provideOnTypeFormattingEdits?p.provideOnTypeFormattingEdits(o,s,a,c,u,h):h(o,s,a,c,u)}},i=e.moreTriggerCharacter||[];return[Na.languages.registerOnTypeFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),r,e.firstTriggerCharacter,...i),r]}};Hr.DocumentOnTypeFormattingFeature=xf});var t1=k($a=>{"use strict";Object.defineProperty($a,"__esModule",{value:!0});$a.RenameFeature=void 0;var q5=require("vscode"),si=re(),I5=Be(),e1=Tn(),qf=Ce(),If=class extends qf.TextDocumentLanguageFeature{constructor(e){super(e,si.RenameRequest.type)}fillClientCapabilities(e){let t=(0,qf.ensure)((0,qf.ensure)(e,"textDocument"),"rename");t.dynamicRegistration=!0,t.prepareSupport=!0,t.prepareSupportDefaultBehavior=si.PrepareSupportDefaultBehavior.Identifier,t.honorsChangeAnnotations=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.renameProvider);r&&(e1.boolean(e.renameProvider)&&(r.prepareProvider=!1),this.register({id:I5.generateUuid(),registerOptions:r}))}registerLanguageProvider(e){let t=e.documentSelector,r={provideRenameEdits:(i,o,s,a)=>{let c=this._client,u=(h,p,v,y)=>{let R={textDocument:c.code2ProtocolConverter.asTextDocumentIdentifier(h),position:c.code2ProtocolConverter.asPosition(p),newName:v};return c.sendRequest(si.RenameRequest.type,R,y).then(E=>y.isCancellationRequested?null:c.protocol2CodeConverter.asWorkspaceEdit(E,y),E=>c.handleFailedRequest(si.RenameRequest.type,y,E,null,!1))},d=c.middleware;return d.provideRenameEdits?d.provideRenameEdits(i,o,s,a,u):u(i,o,s,a)},prepareRename:e.prepareProvider?(i,o,s)=>{let a=this._client,c=(d,h,p)=>{let v={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(d),position:a.code2ProtocolConverter.asPosition(h)};return a.sendRequest(si.PrepareRenameRequest.type,v,p).then(y=>p.isCancellationRequested?null:si.Range.is(y)?a.protocol2CodeConverter.asRange(y):this.isDefaultBehavior(y)?y.defaultBehavior===!0?null:Promise.reject(new Error("The element can't be renamed.")):y&&si.Range.is(y.range)?{range:a.protocol2CodeConverter.asRange(y.range),placeholder:y.placeholder}:Promise.reject(new Error("The element can't be renamed.")),y=>{throw typeof y.message=="string"?new Error(y.message):new Error("The element can't be renamed.")})},u=a.middleware;return u.prepareRename?u.prepareRename(i,o,s,c):c(i,o,s)}:void 0};return[this.registerProvider(t,r),r]}registerProvider(e,t){return q5.languages.registerRenameProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}isDefaultBehavior(e){let t=e;return t&&e1.boolean(t.defaultBehavior)}};$a.RenameFeature=If});var n1=k(ja=>{"use strict";Object.defineProperty(ja,"__esModule",{value:!0});ja.DocumentLinkFeature=void 0;var k5=require("vscode"),Ho=re(),kf=Ce(),F5=Be(),Ff=class extends kf.TextDocumentLanguageFeature{constructor(e){super(e,Ho.DocumentLinkRequest.type)}fillClientCapabilities(e){let t=(0,kf.ensure)((0,kf.ensure)(e,"textDocument"),"documentLink");t.dynamicRegistration=!0,t.tooltipSupport=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.documentLinkProvider);r&&this.register({id:F5.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,r={provideDocumentLinks:(i,o)=>{let s=this._client,a=(u,d)=>s.sendRequest(Ho.DocumentLinkRequest.type,s.code2ProtocolConverter.asDocumentLinkParams(u),d).then(h=>d.isCancellationRequested?null:s.protocol2CodeConverter.asDocumentLinks(h,d),h=>s.handleFailedRequest(Ho.DocumentLinkRequest.type,d,h,null)),c=s.middleware;return c.provideDocumentLinks?c.provideDocumentLinks(i,o,a):a(i,o)},resolveDocumentLink:e.resolveProvider?(i,o)=>{let s=this._client,a=(u,d)=>s.sendRequest(Ho.DocumentLinkResolveRequest.type,s.code2ProtocolConverter.asDocumentLink(u),d).then(h=>d.isCancellationRequested?u:s.protocol2CodeConverter.asDocumentLink(h),h=>s.handleFailedRequest(Ho.DocumentLinkResolveRequest.type,d,h,u)),c=s.middleware;return c.resolveDocumentLink?c.resolveDocumentLink(i,o,a):a(i,o)}:void 0};return[k5.languages.registerDocumentLinkProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),r),r]}};ja.DocumentLinkFeature=Ff});var i1=k(Ha=>{"use strict";Object.defineProperty(Ha,"__esModule",{value:!0});Ha.ExecuteCommandFeature=void 0;var M5=require("vscode"),Mf=re(),O5=Be(),r1=Ce(),Of=class{constructor(e){this._client=e,this._commands=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._commands.size>0}}get registrationType(){return Mf.ExecuteCommandRequest.type}fillClientCapabilities(e){(0,r1.ensure)((0,r1.ensure)(e,"workspace"),"executeCommand").dynamicRegistration=!0}initialize(e){e.executeCommandProvider&&this.register({id:O5.generateUuid(),registerOptions:Object.assign({},e.executeCommandProvider)})}register(e){let t=this._client,r=t.middleware,i=(o,s)=>{let a={command:o,arguments:s};return t.sendRequest(Mf.ExecuteCommandRequest.type,a).then(void 0,c=>t.handleFailedRequest(Mf.ExecuteCommandRequest.type,void 0,c,void 0))};if(e.registerOptions.commands){let o=[];for(let s of e.registerOptions.commands)o.push(M5.commands.registerCommand(s,(...a)=>r.executeCommand?r.executeCommand(s,a,i):i(s,a)));this._commands.set(e.id,o)}}unregister(e){let t=this._commands.get(e);t&&t.forEach(r=>r.dispose())}clear(){this._commands.forEach(e=>{e.forEach(t=>t.dispose())}),this._commands.clear()}};Ha.ExecuteCommandFeature=Of});var o1=k(za=>{"use strict";Object.defineProperty(za,"__esModule",{value:!0});za.FileSystemWatcherFeature=void 0;var L5=require("vscode"),ai=re(),Ua=Ce(),Lf=class{constructor(e,t){this._client=e,this._notifyFileEvent=t,this._watchers=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._watchers.size>0}}get registrationType(){return ai.DidChangeWatchedFilesNotification.type}fillClientCapabilities(e){(0,Ua.ensure)((0,Ua.ensure)(e,"workspace"),"didChangeWatchedFiles").dynamicRegistration=!0,(0,Ua.ensure)((0,Ua.ensure)(e,"workspace"),"didChangeWatchedFiles").relativePatternSupport=!0}initialize(e,t){}register(e){if(!Array.isArray(e.registerOptions.watchers))return;let t=[];for(let r of e.registerOptions.watchers){let i=this._client.protocol2CodeConverter.asGlobPattern(r.globPattern);if(i===void 0)continue;let o=!0,s=!0,a=!0;r.kind!==void 0&&r.kind!==null&&(o=(r.kind&ai.WatchKind.Create)!==0,s=(r.kind&ai.WatchKind.Change)!==0,a=(r.kind&ai.WatchKind.Delete)!==0);let c=L5.workspace.createFileSystemWatcher(i,!o,!s,!a);this.hookListeners(c,o,s,a,t),t.push(c)}this._watchers.set(e.id,t)}registerRaw(e,t){let r=[];for(let i of t)this.hookListeners(i,!0,!0,!0,r);this._watchers.set(e,r)}hookListeners(e,t,r,i,o){t&&e.onDidCreate(s=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(s),type:ai.FileChangeType.Created}),null,o),r&&e.onDidChange(s=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(s),type:ai.FileChangeType.Changed}),null,o),i&&e.onDidDelete(s=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(s),type:ai.FileChangeType.Deleted}),null,o)}unregister(e){let t=this._watchers.get(e);if(t)for(let r of t)r.dispose()}clear(){this._watchers.forEach(e=>{for(let t of e)t.dispose()}),this._watchers.clear()}};za.FileSystemWatcherFeature=Lf});var s1=k(Wa=>{"use strict";Object.defineProperty(Wa,"__esModule",{value:!0});Wa.ColorProviderFeature=void 0;var A5=require("vscode"),Uo=re(),Af=Ce(),Nf=class extends Af.TextDocumentLanguageFeature{constructor(e){super(e,Uo.DocumentColorRequest.type)}fillClientCapabilities(e){(0,Af.ensure)((0,Af.ensure)(e,"textDocument"),"colorProvider").dynamicRegistration=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.colorProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideColorPresentations:(i,o,s)=>{let a=this._client,c=(d,h,p)=>{let v={color:d,textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(h.document),range:a.code2ProtocolConverter.asRange(h.range)};return a.sendRequest(Uo.ColorPresentationRequest.type,v,p).then(y=>p.isCancellationRequested?null:this._client.protocol2CodeConverter.asColorPresentations(y,p),y=>a.handleFailedRequest(Uo.ColorPresentationRequest.type,p,y,null))},u=a.middleware;return u.provideColorPresentations?u.provideColorPresentations(i,o,s,c):c(i,o,s)},provideDocumentColors:(i,o)=>{let s=this._client,a=(u,d)=>{let h={textDocument:s.code2ProtocolConverter.asTextDocumentIdentifier(u)};return s.sendRequest(Uo.DocumentColorRequest.type,h,d).then(p=>d.isCancellationRequested?null:this._client.protocol2CodeConverter.asColorInformations(p,d),p=>s.handleFailedRequest(Uo.DocumentColorRequest.type,d,p,null))},c=s.middleware;return c.provideDocumentColors?c.provideDocumentColors(i,o,a):a(i,o)}};return[A5.languages.registerColorProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),r),r]}};Wa.ColorProviderFeature=Nf});var a1=k(Va=>{"use strict";Object.defineProperty(Va,"__esModule",{value:!0});Va.ImplementationFeature=void 0;var N5=require("vscode"),$f=re(),jf=Ce(),Hf=class extends jf.TextDocumentLanguageFeature{constructor(e){super(e,$f.ImplementationRequest.type)}fillClientCapabilities(e){let t=(0,jf.ensure)((0,jf.ensure)(e,"textDocument"),"implementation");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.implementationProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideImplementation:(i,o,s)=>{let a=this._client,c=(d,h,p)=>a.sendRequest($f.ImplementationRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(d,h),p).then(v=>p.isCancellationRequested?null:a.protocol2CodeConverter.asDefinitionResult(v,p),v=>a.handleFailedRequest($f.ImplementationRequest.type,p,v,null)),u=a.middleware;return u.provideImplementation?u.provideImplementation(i,o,s,c):c(i,o,s)}};return[this.registerProvider(t,r),r]}registerProvider(e,t){return N5.languages.registerImplementationProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};Va.ImplementationFeature=Hf});var c1=k(Ba=>{"use strict";Object.defineProperty(Ba,"__esModule",{value:!0});Ba.TypeDefinitionFeature=void 0;var $5=require("vscode"),Uf=re(),zo=Ce(),zf=class extends zo.TextDocumentLanguageFeature{constructor(e){super(e,Uf.TypeDefinitionRequest.type)}fillClientCapabilities(e){(0,zo.ensure)((0,zo.ensure)(e,"textDocument"),"typeDefinition").dynamicRegistration=!0;let t=(0,zo.ensure)((0,zo.ensure)(e,"textDocument"),"typeDefinition");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.typeDefinitionProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideTypeDefinition:(i,o,s)=>{let a=this._client,c=(d,h,p)=>a.sendRequest(Uf.TypeDefinitionRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(d,h),p).then(v=>p.isCancellationRequested?null:a.protocol2CodeConverter.asDefinitionResult(v,p),v=>a.handleFailedRequest(Uf.TypeDefinitionRequest.type,p,v,null)),u=a.middleware;return u.provideTypeDefinition?u.provideTypeDefinition(i,o,s,c):c(i,o,s)}};return[this.registerProvider(t,r),r]}registerProvider(e,t){return $5.languages.registerTypeDefinitionProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};Ba.TypeDefinitionFeature=zf});var u1=k(Qi=>{"use strict";Object.defineProperty(Qi,"__esModule",{value:!0});Qi.WorkspaceFoldersFeature=Qi.arrayDiff=void 0;var j5=Be(),Ka=require("vscode"),Wo=re();function Wf(n,e){if(n!=null)return n[e]}function Vf(n,e){return n.filter(t=>e.indexOf(t)<0)}Qi.arrayDiff=Vf;var Bf=class{constructor(e){this._client=e,this._listeners=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._listeners.size>0}}get registrationType(){return Wo.DidChangeWorkspaceFoldersNotification.type}fillInitializeParams(e){let t=Ka.workspace.workspaceFolders;this.initializeWithFolders(t),t===void 0?e.workspaceFolders=null:e.workspaceFolders=t.map(r=>this.asProtocol(r))}initializeWithFolders(e){this._initialFolders=e}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.workspaceFolders=!0}initialize(e){let t=this._client;t.onRequest(Wo.WorkspaceFoldersRequest.type,o=>{let s=()=>{let c=Ka.workspace.workspaceFolders;return c===void 0?null:c.map(d=>this.asProtocol(d))},a=t.middleware.workspace;return a&&a.workspaceFolders?a.workspaceFolders(o,s):s(o)});let r=Wf(Wf(Wf(e,"workspace"),"workspaceFolders"),"changeNotifications"),i;typeof r=="string"?i=r:r===!0&&(i=j5.generateUuid()),i&&this.register({id:i,registerOptions:void 0})}sendInitialEvent(e){let t;if(this._initialFolders&&e){let r=Vf(this._initialFolders,e),i=Vf(e,this._initialFolders);(i.length>0||r.length>0)&&(t=this.doSendEvent(i,r))}else this._initialFolders?t=this.doSendEvent([],this._initialFolders):e&&(t=this.doSendEvent(e,[]));t!==void 0&&t.catch(r=>{this._client.error(`Sending notification ${Wo.DidChangeWorkspaceFoldersNotification.type.method} failed`,r)})}doSendEvent(e,t){let r={event:{added:e.map(i=>this.asProtocol(i)),removed:t.map(i=>this.asProtocol(i))}};return this._client.sendNotification(Wo.DidChangeWorkspaceFoldersNotification.type,r)}register(e){let t=e.id,r=this._client,i=Ka.workspace.onDidChangeWorkspaceFolders(o=>{let s=u=>this.doSendEvent(u.added,u.removed),a=r.middleware.workspace;(a&&a.didChangeWorkspaceFolders?a.didChangeWorkspaceFolders(o,s):s(o)).catch(u=>{this._client.error(`Sending notification ${Wo.DidChangeWorkspaceFoldersNotification.type.method} failed`,u)})});this._listeners.set(t,i),this.sendInitialEvent(Ka.workspace.workspaceFolders)}unregister(e){let t=this._listeners.get(e);t!==void 0&&(this._listeners.delete(e),t.dispose())}clear(){for(let e of this._listeners.values())e.dispose();this._listeners.clear()}asProtocol(e){return e===void 0?null:{uri:this._client.code2ProtocolConverter.asUri(e.uri),name:e.name}}};Qi.WorkspaceFoldersFeature=Bf});var d1=k(Ga=>{"use strict";Object.defineProperty(Ga,"__esModule",{value:!0});Ga.FoldingRangeFeature=void 0;var l1=require("vscode"),ci=re(),Vo=Ce(),Kf=class extends Vo.TextDocumentLanguageFeature{constructor(e){super(e,ci.FoldingRangeRequest.type)}fillClientCapabilities(e){let t=(0,Vo.ensure)((0,Vo.ensure)(e,"textDocument"),"foldingRange");t.dynamicRegistration=!0,t.rangeLimit=5e3,t.lineFoldingOnly=!0,t.foldingRangeKind={valueSet:[ci.FoldingRangeKind.Comment,ci.FoldingRangeKind.Imports,ci.FoldingRangeKind.Region]},t.foldingRange={collapsedText:!1},(0,Vo.ensure)((0,Vo.ensure)(e,"workspace"),"foldingRange").refreshSupport=!0}initialize(e,t){this._client.onRequest(ci.FoldingRangeRefreshRequest.type,async()=>{for(let o of this.getAllProviders())o.onDidChangeFoldingRange.fire()});let[r,i]=this.getRegistration(t,e.foldingRangeProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r=new l1.EventEmitter,i={onDidChangeFoldingRanges:r.event,provideFoldingRanges:(o,s,a)=>{let c=this._client,u=(h,p,v)=>{let y={textDocument:c.code2ProtocolConverter.asTextDocumentIdentifier(h)};return c.sendRequest(ci.FoldingRangeRequest.type,y,v).then(R=>v.isCancellationRequested?null:c.protocol2CodeConverter.asFoldingRanges(R,v),R=>c.handleFailedRequest(ci.FoldingRangeRequest.type,v,R,null))},d=c.middleware;return d.provideFoldingRanges?d.provideFoldingRanges(o,s,a,u):u(o,s,a)}};return[l1.languages.registerFoldingRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),i),{provider:i,onDidChangeFoldingRange:r}]}};Ga.FoldingRangeFeature=Kf});var f1=k(Xa=>{"use strict";Object.defineProperty(Xa,"__esModule",{value:!0});Xa.DeclarationFeature=void 0;var H5=require("vscode"),Gf=re(),Xf=Ce(),Yf=class extends Xf.TextDocumentLanguageFeature{constructor(e){super(e,Gf.DeclarationRequest.type)}fillClientCapabilities(e){let t=(0,Xf.ensure)((0,Xf.ensure)(e,"textDocument"),"declaration");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.declarationProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideDeclaration:(i,o,s)=>{let a=this._client,c=(d,h,p)=>a.sendRequest(Gf.DeclarationRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(d,h),p).then(v=>p.isCancellationRequested?null:a.protocol2CodeConverter.asDeclarationResult(v,p),v=>a.handleFailedRequest(Gf.DeclarationRequest.type,p,v,null)),u=a.middleware;return u.provideDeclaration?u.provideDeclaration(i,o,s,c):c(i,o,s)}};return[this.registerProvider(t,r),r]}registerProvider(e,t){return H5.languages.registerDeclarationProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};Xa.DeclarationFeature=Yf});var h1=k(Ya=>{"use strict";Object.defineProperty(Ya,"__esModule",{value:!0});Ya.SelectionRangeFeature=void 0;var U5=require("vscode"),Jf=re(),Zf=Ce(),Qf=class extends Zf.TextDocumentLanguageFeature{constructor(e){super(e,Jf.SelectionRangeRequest.type)}fillClientCapabilities(e){let t=(0,Zf.ensure)((0,Zf.ensure)(e,"textDocument"),"selectionRange");t.dynamicRegistration=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.selectionRangeProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideSelectionRanges:(i,o,s)=>{let a=this._client,c=async(d,h,p)=>{let v={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(d),positions:a.code2ProtocolConverter.asPositionsSync(h,p)};return a.sendRequest(Jf.SelectionRangeRequest.type,v,p).then(y=>p.isCancellationRequested?null:a.protocol2CodeConverter.asSelectionRanges(y,p),y=>a.handleFailedRequest(Jf.SelectionRangeRequest.type,p,y,null))},u=a.middleware;return u.provideSelectionRanges?u.provideSelectionRanges(i,o,s,c):c(i,o,s)}};return[this.registerProvider(t,r),r]}registerProvider(e,t){return U5.languages.registerSelectionRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};Ya.SelectionRangeFeature=Qf});var p1=k(Ja=>{"use strict";Object.defineProperty(Ja,"__esModule",{value:!0});Ja.ProgressFeature=void 0;var g1=re(),z5=Ed();function W5(n,e){return n[e]===void 0&&(n[e]=Object.create(null)),n[e]}var eh=class{constructor(e){this._client=e,this.activeParts=new Set}getState(){return{kind:"window",id:g1.WorkDoneProgressCreateRequest.method,registrations:this.activeParts.size>0}}fillClientCapabilities(e){W5(e,"window").workDoneProgress=!0}initialize(){let e=this._client,t=i=>{this.activeParts.delete(i)},r=i=>{this.activeParts.add(new z5.ProgressPart(this._client,i.token,t))};e.onRequest(g1.WorkDoneProgressCreateRequest.type,r)}clear(){for(let e of this.activeParts)e.done();this.activeParts.clear()}};Ja.ProgressFeature=eh});var m1=k(Za=>{"use strict";Object.defineProperty(Za,"__esModule",{value:!0});Za.CallHierarchyFeature=void 0;var V5=require("vscode"),ui=re(),th=Ce(),nh=class{constructor(e){this.client=e,this.middleware=e.middleware}prepareCallHierarchy(e,t,r){let i=this.client,o=this.middleware,s=(a,c,u)=>{let d=i.code2ProtocolConverter.asTextDocumentPositionParams(a,c);return i.sendRequest(ui.CallHierarchyPrepareRequest.type,d,u).then(h=>u.isCancellationRequested?null:i.protocol2CodeConverter.asCallHierarchyItems(h,u),h=>i.handleFailedRequest(ui.CallHierarchyPrepareRequest.type,u,h,null))};return o.prepareCallHierarchy?o.prepareCallHierarchy(e,t,r,s):s(e,t,r)}provideCallHierarchyIncomingCalls(e,t){let r=this.client,i=this.middleware,o=(s,a)=>{let c={item:r.code2ProtocolConverter.asCallHierarchyItem(s)};return r.sendRequest(ui.CallHierarchyIncomingCallsRequest.type,c,a).then(u=>a.isCancellationRequested?null:r.protocol2CodeConverter.asCallHierarchyIncomingCalls(u,a),u=>r.handleFailedRequest(ui.CallHierarchyIncomingCallsRequest.type,a,u,null))};return i.provideCallHierarchyIncomingCalls?i.provideCallHierarchyIncomingCalls(e,t,o):o(e,t)}provideCallHierarchyOutgoingCalls(e,t){let r=this.client,i=this.middleware,o=(s,a)=>{let c={item:r.code2ProtocolConverter.asCallHierarchyItem(s)};return r.sendRequest(ui.CallHierarchyOutgoingCallsRequest.type,c,a).then(u=>a.isCancellationRequested?null:r.protocol2CodeConverter.asCallHierarchyOutgoingCalls(u,a),u=>r.handleFailedRequest(ui.CallHierarchyOutgoingCallsRequest.type,a,u,null))};return i.provideCallHierarchyOutgoingCalls?i.provideCallHierarchyOutgoingCalls(e,t,o):o(e,t)}},rh=class extends th.TextDocumentLanguageFeature{constructor(e){super(e,ui.CallHierarchyPrepareRequest.type)}fillClientCapabilities(e){let t=e,r=(0,th.ensure)((0,th.ensure)(t,"textDocument"),"callHierarchy");r.dynamicRegistration=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.callHierarchyProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=this._client,r=new nh(t);return[V5.languages.registerCallHierarchyProvider(this._client.protocol2CodeConverter.asDocumentSelector(e.documentSelector),r),r]}};Za.CallHierarchyFeature=rh});var y1=k(ec=>{"use strict";Object.defineProperty(ec,"__esModule",{value:!0});ec.SemanticTokensFeature=void 0;var Qa=require("vscode"),ce=re(),Bo=Ce(),B5=Tn(),ih=class extends Bo.TextDocumentLanguageFeature{constructor(e){super(e,ce.SemanticTokensRegistrationType.type)}fillClientCapabilities(e){let t=(0,Bo.ensure)((0,Bo.ensure)(e,"textDocument"),"semanticTokens");t.dynamicRegistration=!0,t.tokenTypes=[ce.SemanticTokenTypes.namespace,ce.SemanticTokenTypes.type,ce.SemanticTokenTypes.class,ce.SemanticTokenTypes.enum,ce.SemanticTokenTypes.interface,ce.SemanticTokenTypes.struct,ce.SemanticTokenTypes.typeParameter,ce.SemanticTokenTypes.parameter,ce.SemanticTokenTypes.variable,ce.SemanticTokenTypes.property,ce.SemanticTokenTypes.enumMember,ce.SemanticTokenTypes.event,ce.SemanticTokenTypes.function,ce.SemanticTokenTypes.method,ce.SemanticTokenTypes.macro,ce.SemanticTokenTypes.keyword,ce.SemanticTokenTypes.modifier,ce.SemanticTokenTypes.comment,ce.SemanticTokenTypes.string,ce.SemanticTokenTypes.number,ce.SemanticTokenTypes.regexp,ce.SemanticTokenTypes.operator,ce.SemanticTokenTypes.decorator],t.tokenModifiers=[ce.SemanticTokenModifiers.declaration,ce.SemanticTokenModifiers.definition,ce.SemanticTokenModifiers.readonly,ce.SemanticTokenModifiers.static,ce.SemanticTokenModifiers.deprecated,ce.SemanticTokenModifiers.abstract,ce.SemanticTokenModifiers.async,ce.SemanticTokenModifiers.modification,ce.SemanticTokenModifiers.documentation,ce.SemanticTokenModifiers.defaultLibrary],t.formats=[ce.TokenFormat.Relative],t.requests={range:!0,full:{delta:!0}},t.multilineTokenSupport=!1,t.overlappingTokenSupport=!1,t.serverCancelSupport=!0,t.augmentsSyntaxTokens=!0,(0,Bo.ensure)((0,Bo.ensure)(e,"workspace"),"semanticTokens").refreshSupport=!0}initialize(e,t){this._client.onRequest(ce.SemanticTokensRefreshRequest.type,async()=>{for(let s of this.getAllProviders())s.onDidChangeSemanticTokensEmitter.fire()});let[i,o]=this.getRegistration(t,e.semanticTokensProvider);!i||!o||this.register({id:i,registerOptions:o})}registerLanguageProvider(e){let t=e.documentSelector,r=B5.boolean(e.full)?e.full:e.full!==void 0,i=e.full!==void 0&&typeof e.full!="boolean"&&e.full.delta===!0,o=new Qa.EventEmitter,s=r?{onDidChangeSemanticTokens:o.event,provideDocumentSemanticTokens:(v,y)=>{let R=this._client,E=R.middleware,I=(O,q)=>{let N={textDocument:R.code2ProtocolConverter.asTextDocumentIdentifier(O)};return R.sendRequest(ce.SemanticTokensRequest.type,N,q).then(B=>q.isCancellationRequested?null:R.protocol2CodeConverter.asSemanticTokens(B,q),B=>R.handleFailedRequest(ce.SemanticTokensRequest.type,q,B,null))};return E.provideDocumentSemanticTokens?E.provideDocumentSemanticTokens(v,y,I):I(v,y)},provideDocumentSemanticTokensEdits:i?(v,y,R)=>{let E=this._client,I=E.middleware,O=(q,N,B)=>{let se={textDocument:E.code2ProtocolConverter.asTextDocumentIdentifier(q),previousResultId:N};return E.sendRequest(ce.SemanticTokensDeltaRequest.type,se,B).then(async V=>B.isCancellationRequested?null:ce.SemanticTokens.is(V)?await E.protocol2CodeConverter.asSemanticTokens(V,B):await E.protocol2CodeConverter.asSemanticTokensEdits(V,B),V=>E.handleFailedRequest(ce.SemanticTokensDeltaRequest.type,B,V,null))};return I.provideDocumentSemanticTokensEdits?I.provideDocumentSemanticTokensEdits(v,y,R,O):O(v,y,R)}:void 0}:void 0,c=e.range===!0?{provideDocumentRangeSemanticTokens:(v,y,R)=>{let E=this._client,I=E.middleware,O=(q,N,B)=>{let se={textDocument:E.code2ProtocolConverter.asTextDocumentIdentifier(q),range:E.code2ProtocolConverter.asRange(N)};return E.sendRequest(ce.SemanticTokensRangeRequest.type,se,B).then(V=>B.isCancellationRequested?null:E.protocol2CodeConverter.asSemanticTokens(V,B),V=>E.handleFailedRequest(ce.SemanticTokensRangeRequest.type,B,V,null))};return I.provideDocumentRangeSemanticTokens?I.provideDocumentRangeSemanticTokens(v,y,R,O):O(v,y,R)}}:void 0,u=[],d=this._client,h=d.protocol2CodeConverter.asSemanticTokensLegend(e.legend),p=d.protocol2CodeConverter.asDocumentSelector(t);return s!==void 0&&u.push(Qa.languages.registerDocumentSemanticTokensProvider(p,s,h)),c!==void 0&&u.push(Qa.languages.registerDocumentRangeSemanticTokensProvider(p,c,h)),[new Qa.Disposable(()=>u.forEach(v=>v.dispose())),{range:c,full:s,onDidChangeSemanticTokensEmitter:o}]}};ec.SemanticTokensFeature=ih});var C1=k(on=>{"use strict";Object.defineProperty(on,"__esModule",{value:!0});on.WillDeleteFilesFeature=on.WillRenameFilesFeature=on.WillCreateFilesFeature=on.DidDeleteFilesFeature=on.DidRenameFilesFeature=on.DidCreateFilesFeature=void 0;var kn=require("vscode"),K5=Da(),pr=re(),G5=Be();function b1(n,e){return n[e]===void 0&&(n[e]={}),n[e]}function X5(n,e){return n[e]}function v1(n,e,t){n[e]=t}var Ko=class n{constructor(e,t,r,i,o){this._client=e,this._event=t,this._registrationType=r,this._clientCapability=i,this._serverCapability=o,this._filters=new Map}getState(){return{kind:"workspace",id:this._registrationType.method,registrations:this._filters.size>0}}filterSize(){return this._filters.size}get registrationType(){return this._registrationType}fillClientCapabilities(e){let t=b1(b1(e,"workspace"),"fileOperations");v1(t,"dynamicRegistration",!0),v1(t,this._clientCapability,!0)}initialize(e){let t=e.workspace?.fileOperations,r=t!==void 0?X5(t,this._serverCapability):void 0;if(r?.filters!==void 0)try{this.register({id:G5.generateUuid(),registerOptions:{filters:r.filters}})}catch(i){this._client.warn(`Ignoring invalid glob pattern for ${this._serverCapability} registration: ${i}`)}}register(e){this._listener||(this._listener=this._event(this.send,this));let t=e.registerOptions.filters.map(r=>{let i=new K5.Minimatch(r.pattern.glob,n.asMinimatchOptions(r.pattern.options));if(!i.makeRe())throw new Error(`Invalid pattern ${r.pattern.glob}!`);return{scheme:r.scheme,matcher:i,kind:r.pattern.matches}});this._filters.set(e.id,t)}unregister(e){this._filters.delete(e),this._filters.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}clear(){this._filters.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}getFileType(e){return n.getFileType(e)}async filter(e,t){let r=await Promise.all(e.files.map(async o=>{let s=t(o),a=s.fsPath.replace(/\\/g,"/");for(let c of this._filters.values())for(let u of c)if(!(u.scheme!==void 0&&u.scheme!==s.scheme)){if(u.matcher.match(a)){if(u.kind===void 0)return!0;let d=await this.getFileType(s);if(d===void 0)return this._client.error(`Failed to determine file type for ${s.toString()}.`),!0;if(d===kn.FileType.File&&u.kind===pr.FileOperationPatternKind.file||d===kn.FileType.Directory&&u.kind===pr.FileOperationPatternKind.folder)return!0}else if(u.kind===pr.FileOperationPatternKind.folder&&await n.getFileType(s)===kn.FileType.Directory&&u.matcher.match(`${a}/`))return!0}return!1})),i=e.files.filter((o,s)=>r[s]);return{...e,files:i}}static async getFileType(e){try{return(await kn.workspace.fs.stat(e)).type}catch{return}}static asMinimatchOptions(e){let t={dot:!0};return e?.ignoreCase===!0&&(t.nocase=!0),t}},tc=class extends Ko{constructor(e,t,r,i,o,s,a){super(e,t,r,i,o),this._notificationType=r,this._accessUri=s,this._createParams=a}async send(e){let t=await this.filter(e,this._accessUri);if(t.files.length){let r=async i=>this._client.sendNotification(this._notificationType,this._createParams(i));return this.doSend(t,r)}}},nc=class extends tc{constructor(){super(...arguments),this._fsPathFileTypes=new Map}async getFileType(e){let t=e.fsPath;if(this._fsPathFileTypes.has(t))return this._fsPathFileTypes.get(t);let r=await Ko.getFileType(e);return r&&this._fsPathFileTypes.set(t,r),r}async cacheFileTypes(e,t){await this.filter(e,t)}clearFileTypeCache(){this._fsPathFileTypes.clear()}unregister(e){super.unregister(e),this.filterSize()===0&&this._willListener&&(this._willListener.dispose(),this._willListener=void 0)}clear(){super.clear(),this._willListener&&(this._willListener.dispose(),this._willListener=void 0)}},oh=class extends tc{constructor(e){super(e,kn.workspace.onDidCreateFiles,pr.DidCreateFilesNotification.type,"didCreate","didCreate",t=>t,e.code2ProtocolConverter.asDidCreateFilesParams)}doSend(e,t){let r=this._client.middleware.workspace;return r?.didCreateFiles?r.didCreateFiles(e,t):t(e)}};on.DidCreateFilesFeature=oh;var sh=class extends nc{constructor(e){super(e,kn.workspace.onDidRenameFiles,pr.DidRenameFilesNotification.type,"didRename","didRename",t=>t.oldUri,e.code2ProtocolConverter.asDidRenameFilesParams)}register(e){this._willListener||(this._willListener=kn.workspace.onWillRenameFiles(this.willRename,this)),super.register(e)}willRename(e){e.waitUntil(this.cacheFileTypes(e,t=>t.oldUri))}doSend(e,t){this.clearFileTypeCache();let r=this._client.middleware.workspace;return r?.didRenameFiles?r.didRenameFiles(e,t):t(e)}};on.DidRenameFilesFeature=sh;var ah=class extends nc{constructor(e){super(e,kn.workspace.onDidDeleteFiles,pr.DidDeleteFilesNotification.type,"didDelete","didDelete",t=>t,e.code2ProtocolConverter.asDidDeleteFilesParams)}register(e){this._willListener||(this._willListener=kn.workspace.onWillDeleteFiles(this.willDelete,this)),super.register(e)}willDelete(e){e.waitUntil(this.cacheFileTypes(e,t=>t))}doSend(e,t){this.clearFileTypeCache();let r=this._client.middleware.workspace;return r?.didDeleteFiles?r.didDeleteFiles(e,t):t(e)}};on.DidDeleteFilesFeature=ah;var Go=class extends Ko{constructor(e,t,r,i,o,s,a){super(e,t,r,i,o),this._requestType=r,this._accessUri=s,this._createParams=a}async send(e){let t=this.waitUntil(e);e.waitUntil(t)}async waitUntil(e){let t=await this.filter(e,this._accessUri);if(t.files.length){let r=i=>this._client.sendRequest(this._requestType,this._createParams(i),i.token).then(this._client.protocol2CodeConverter.asWorkspaceEdit);return this.doSend(t,r)}else return}},ch=class extends Go{constructor(e){super(e,kn.workspace.onWillCreateFiles,pr.WillCreateFilesRequest.type,"willCreate","willCreate",t=>t,e.code2ProtocolConverter.asWillCreateFilesParams)}doSend(e,t){let r=this._client.middleware.workspace;return r?.willCreateFiles?r.willCreateFiles(e,t):t(e)}};on.WillCreateFilesFeature=ch;var uh=class extends Go{constructor(e){super(e,kn.workspace.onWillRenameFiles,pr.WillRenameFilesRequest.type,"willRename","willRename",t=>t.oldUri,e.code2ProtocolConverter.asWillRenameFilesParams)}doSend(e,t){let r=this._client.middleware.workspace;return r?.willRenameFiles?r.willRenameFiles(e,t):t(e)}};on.WillRenameFilesFeature=uh;var lh=class extends Go{constructor(e){super(e,kn.workspace.onWillDeleteFiles,pr.WillDeleteFilesRequest.type,"willDelete","willDelete",t=>t,e.code2ProtocolConverter.asWillDeleteFilesParams)}doSend(e,t){let r=this._client.middleware.workspace;return r?.willDeleteFiles?r.willDeleteFiles(e,t):t(e)}};on.WillDeleteFilesFeature=lh});var w1=k(rc=>{"use strict";Object.defineProperty(rc,"__esModule",{value:!0});rc.LinkedEditingFeature=void 0;var Y5=require("vscode"),dh=re(),fh=Ce(),hh=class extends fh.TextDocumentLanguageFeature{constructor(e){super(e,dh.LinkedEditingRangeRequest.type)}fillClientCapabilities(e){let t=(0,fh.ensure)((0,fh.ensure)(e,"textDocument"),"linkedEditingRange");t.dynamicRegistration=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.linkedEditingRangeProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideLinkedEditingRanges:(i,o,s)=>{let a=this._client,c=(d,h,p)=>a.sendRequest(dh.LinkedEditingRangeRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(d,h),p).then(v=>p.isCancellationRequested?null:a.protocol2CodeConverter.asLinkedEditingRanges(v,p),v=>a.handleFailedRequest(dh.LinkedEditingRangeRequest.type,p,v,null)),u=a.middleware;return u.provideLinkedEditingRange?u.provideLinkedEditingRange(i,o,s,c):c(i,o,s)}};return[this.registerProvider(t,r),r]}registerProvider(e,t){return Y5.languages.registerLinkedEditingRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};rc.LinkedEditingFeature=hh});var D1=k(ic=>{"use strict";Object.defineProperty(ic,"__esModule",{value:!0});ic.TypeHierarchyFeature=void 0;var J5=require("vscode"),li=re(),gh=Ce(),ph=class{constructor(e){this.client=e,this.middleware=e.middleware}prepareTypeHierarchy(e,t,r){let i=this.client,o=this.middleware,s=(a,c,u)=>{let d=i.code2ProtocolConverter.asTextDocumentPositionParams(a,c);return i.sendRequest(li.TypeHierarchyPrepareRequest.type,d,u).then(h=>u.isCancellationRequested?null:i.protocol2CodeConverter.asTypeHierarchyItems(h,u),h=>i.handleFailedRequest(li.TypeHierarchyPrepareRequest.type,u,h,null))};return o.prepareTypeHierarchy?o.prepareTypeHierarchy(e,t,r,s):s(e,t,r)}provideTypeHierarchySupertypes(e,t){let r=this.client,i=this.middleware,o=(s,a)=>{let c={item:r.code2ProtocolConverter.asTypeHierarchyItem(s)};return r.sendRequest(li.TypeHierarchySupertypesRequest.type,c,a).then(u=>a.isCancellationRequested?null:r.protocol2CodeConverter.asTypeHierarchyItems(u,a),u=>r.handleFailedRequest(li.TypeHierarchySupertypesRequest.type,a,u,null))};return i.provideTypeHierarchySupertypes?i.provideTypeHierarchySupertypes(e,t,o):o(e,t)}provideTypeHierarchySubtypes(e,t){let r=this.client,i=this.middleware,o=(s,a)=>{let c={item:r.code2ProtocolConverter.asTypeHierarchyItem(s)};return r.sendRequest(li.TypeHierarchySubtypesRequest.type,c,a).then(u=>a.isCancellationRequested?null:r.protocol2CodeConverter.asTypeHierarchyItems(u,a),u=>r.handleFailedRequest(li.TypeHierarchySubtypesRequest.type,a,u,null))};return i.provideTypeHierarchySubtypes?i.provideTypeHierarchySubtypes(e,t,o):o(e,t)}},mh=class extends gh.TextDocumentLanguageFeature{constructor(e){super(e,li.TypeHierarchyPrepareRequest.type)}fillClientCapabilities(e){let t=(0,gh.ensure)((0,gh.ensure)(e,"textDocument"),"typeHierarchy");t.dynamicRegistration=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.typeHierarchyProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=this._client,r=new ph(t);return[J5.languages.registerTypeHierarchyProvider(t.protocol2CodeConverter.asDocumentSelector(e.documentSelector),r),r]}};ic.TypeHierarchyFeature=mh});var _1=k(sc=>{"use strict";Object.defineProperty(sc,"__esModule",{value:!0});sc.InlineValueFeature=void 0;var R1=require("vscode"),oc=re(),Xo=Ce(),yh=class extends Xo.TextDocumentLanguageFeature{constructor(e){super(e,oc.InlineValueRequest.type)}fillClientCapabilities(e){(0,Xo.ensure)((0,Xo.ensure)(e,"textDocument"),"inlineValue").dynamicRegistration=!0,(0,Xo.ensure)((0,Xo.ensure)(e,"workspace"),"inlineValue").refreshSupport=!0}initialize(e,t){this._client.onRequest(oc.InlineValueRefreshRequest.type,async()=>{for(let o of this.getAllProviders())o.onDidChangeInlineValues.fire()});let[r,i]=this.getRegistration(t,e.inlineValueProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r=new R1.EventEmitter,i={onDidChangeInlineValues:r.event,provideInlineValues:(o,s,a,c)=>{let u=this._client,d=(p,v,y,R)=>{let E={textDocument:u.code2ProtocolConverter.asTextDocumentIdentifier(p),range:u.code2ProtocolConverter.asRange(v),context:u.code2ProtocolConverter.asInlineValueContext(y)};return u.sendRequest(oc.InlineValueRequest.type,E,R).then(I=>R.isCancellationRequested?null:u.protocol2CodeConverter.asInlineValues(I,R),I=>u.handleFailedRequest(oc.InlineValueRequest.type,R,I,null))},h=u.middleware;return h.provideInlineValues?h.provideInlineValues(o,s,a,c,d):d(o,s,a,c)}};return[this.registerProvider(t,i),{provider:i,onDidChangeInlineValues:r}]}registerProvider(e,t){return R1.languages.registerInlineValuesProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};sc.InlineValueFeature=yh});var T1=k(ac=>{"use strict";Object.defineProperty(ac,"__esModule",{value:!0});ac.InlayHintsFeature=void 0;var S1=require("vscode"),eo=re(),Yo=Ce(),bh=class extends Yo.TextDocumentLanguageFeature{constructor(e){super(e,eo.InlayHintRequest.type)}fillClientCapabilities(e){let t=(0,Yo.ensure)((0,Yo.ensure)(e,"textDocument"),"inlayHint");t.dynamicRegistration=!0,t.resolveSupport={properties:["tooltip","textEdits","label.tooltip","label.location","label.command"]},(0,Yo.ensure)((0,Yo.ensure)(e,"workspace"),"inlayHint").refreshSupport=!0}initialize(e,t){this._client.onRequest(eo.InlayHintRefreshRequest.type,async()=>{for(let o of this.getAllProviders())o.onDidChangeInlayHints.fire()});let[r,i]=this.getRegistration(t,e.inlayHintProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r=new S1.EventEmitter,i={onDidChangeInlayHints:r.event,provideInlayHints:(o,s,a)=>{let c=this._client,u=async(h,p,v)=>{let y={textDocument:c.code2ProtocolConverter.asTextDocumentIdentifier(h),range:c.code2ProtocolConverter.asRange(p)};try{let R=await c.sendRequest(eo.InlayHintRequest.type,y,v);return v.isCancellationRequested?null:c.protocol2CodeConverter.asInlayHints(R,v)}catch(R){return c.handleFailedRequest(eo.InlayHintRequest.type,v,R,null)}},d=c.middleware;return d.provideInlayHints?d.provideInlayHints(o,s,a,u):u(o,s,a)}};return i.resolveInlayHint=e.resolveProvider===!0?(o,s)=>{let a=this._client,c=async(d,h)=>{try{let p=await a.sendRequest(eo.InlayHintResolveRequest.type,a.code2ProtocolConverter.asInlayHint(d),h);if(h.isCancellationRequested)return null;let v=a.protocol2CodeConverter.asInlayHint(p,h);return h.isCancellationRequested?null:v}catch(p){return a.handleFailedRequest(eo.InlayHintResolveRequest.type,h,p,null)}},u=a.middleware;return u.resolveInlayHint?u.resolveInlayHint(o,s,c):c(o,s)}:void 0,[this.registerProvider(t,i),{provider:i,onDidChangeInlayHints:r}]}registerProvider(e,t){return S1.languages.registerInlayHintsProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};ac.InlayHintsFeature=bh});var E1=k(cc=>{"use strict";Object.defineProperty(cc,"__esModule",{value:!0});cc.InlineCompletionItemFeature=void 0;var Z5=require("vscode"),vh=re(),Ch=Ce(),Q5=Be(),wh=class extends Ch.TextDocumentLanguageFeature{constructor(e){super(e,vh.InlineCompletionRequest.type)}fillClientCapabilities(e){let t=(0,Ch.ensure)((0,Ch.ensure)(e,"textDocument"),"inlineCompletion");t.dynamicRegistration=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.inlineCompletionProvider);r&&this.register({id:Q5.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,r={provideInlineCompletionItems:(i,o,s,a)=>{let c=this._client,u=this._client.middleware,d=(h,p,v,y)=>c.sendRequest(vh.InlineCompletionRequest.type,c.code2ProtocolConverter.asInlineCompletionParams(h,p,v),y).then(R=>y.isCancellationRequested?null:c.protocol2CodeConverter.asInlineCompletionResult(R,y),R=>c.handleFailedRequest(vh.InlineCompletionRequest.type,y,R,null));return u.provideInlineCompletionItems?u.provideInlineCompletionItems(i,o,s,a,d):d(i,o,s,a)}};return[Z5.languages.registerInlineCompletionItemProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),r),r]}};cc.InlineCompletionItemFeature=wh});var Eh=k(_t=>{"use strict";Object.defineProperty(_t,"__esModule",{value:!0});_t.ProposedFeatures=_t.BaseLanguageClient=_t.MessageTransports=_t.SuspendMode=_t.State=_t.CloseAction=_t.ErrorAction=_t.RevealOutputChannelOn=void 0;var xe=require("vscode"),$=re(),eT=mv(),tT=vv(),Wn=Tn(),uc=pa(),x1=Be(),nT=Ed(),zn=Ce(),rT=Vd(),P1=Av(),q1=$v(),to=jv(),iT=Hv(),oT=Uv(),sT=zv(),aT=Vv(),cT=Bv(),uT=yf(),lT=Gv(),dT=Xv(),fT=Yv(),hT=Zv(),Dh=Qv(),gT=t1(),pT=n1(),mT=i1(),yT=o1(),bT=s1(),vT=a1(),CT=c1(),wT=u1(),DT=d1(),RT=f1(),_T=h1(),ST=p1(),TT=m1(),ET=y1(),no=C1(),xT=w1(),PT=D1(),qT=_1(),IT=T1(),kT=E1(),di;(function(n){n[n.Debug=0]="Debug",n[n.Info=1]="Info",n[n.Warn=2]="Warn",n[n.Error=3]="Error",n[n.Never=4]="Never"})(di||(_t.RevealOutputChannelOn=di={}));var Zo;(function(n){n[n.Continue=1]="Continue",n[n.Shutdown=2]="Shutdown"})(Zo||(_t.ErrorAction=Zo={}));var Ur;(function(n){n[n.DoNotRestart=1]="DoNotRestart",n[n.Restart=2]="Restart"})(Ur||(_t.CloseAction=Ur={}));var Jo;(function(n){n[n.Stopped=1]="Stopped",n[n.Starting=3]="Starting",n[n.Running=2]="Running"})(Jo||(_t.State=Jo={}));var I1;(function(n){n.off="off",n.on="on"})(I1||(_t.SuspendMode=I1={}));var Rh;(function(n){function e(t){return t==null?!1:typeof t=="boolean"||typeof t=="object"&&t!==null&&Wn.stringArray(t.enabledCommands)?t:!1}n.sanitizeIsTrusted=e})(Rh||(Rh={}));var _h=class{constructor(e,t){this.client=e,this.maxRestartCount=t,this.restarts=[]}error(e,t,r){return r&&r<=3?{action:Zo.Continue}:{action:Zo.Shutdown}}closed(){return this.restarts.push(Date.now()),this.restarts.length<=this.maxRestartCount?{action:Ur.Restart}:this.restarts[this.restarts.length-1]-this.restarts[0]<=3*60*1e3?{action:Ur.DoNotRestart,message:`The ${this.client.name} server crashed ${this.maxRestartCount+1} times in the last 3 minutes. The server will not be restarted. See the output for more information.`}:(this.restarts.shift(),{action:Ur.Restart})}},fe;(function(n){n.Initial="initial",n.Starting="starting",n.StartFailed="startFailed",n.Running="running",n.Stopping="stopping",n.Stopped="stopped"})(fe||(fe={}));var k1;(function(n){function e(t){return t&&$.MessageReader.is(t.reader)&&$.MessageWriter.is(t.writer)}n.is=e})(k1||(_t.MessageTransports=k1={}));var Qo=class n{constructor(e,t,r){this._traceFormat=$.TraceFormat.Text,this._diagnosticQueue=new Map,this._diagnosticQueueState={state:"idle"},this._features=[],this._dynamicFeatures=new Map,this.workspaceEditLock=new uc.Semaphore(1),this._id=e,this._name=t,r=r||{};let i={isTrusted:!1,supportHtml:!1};r.markdown!==void 0&&(i.isTrusted=Rh.sanitizeIsTrusted(r.markdown.isTrusted),i.supportHtml=r.markdown.supportHtml===!0),this._clientOptions={documentSelector:r.documentSelector??[],synchronize:r.synchronize??{},diagnosticCollectionName:r.diagnosticCollectionName,outputChannelName:r.outputChannelName??this._name,revealOutputChannelOn:r.revealOutputChannelOn??di.Error,stdioEncoding:r.stdioEncoding??"utf8",initializationOptions:r.initializationOptions,initializationFailedHandler:r.initializationFailedHandler,progressOnInitialization:!!r.progressOnInitialization,errorHandler:r.errorHandler??this.createDefaultErrorHandler(r.connectionOptions?.maxRestartCount),middleware:r.middleware??{},uriConverters:r.uriConverters,workspaceFolder:r.workspaceFolder,connectionOptions:r.connectionOptions,markdown:i,diagnosticPullOptions:r.diagnosticPullOptions??{onChange:!0,onSave:!1},notebookDocumentOptions:r.notebookDocumentOptions??{}},this._clientOptions.synchronize=this._clientOptions.synchronize||{},this._state=fe.Initial,this._ignoredRegistrations=new Set,this._listeners=[],this._notificationHandlers=new Map,this._pendingNotificationHandlers=new Map,this._notificationDisposables=new Map,this._requestHandlers=new Map,this._pendingRequestHandlers=new Map,this._requestDisposables=new Map,this._progressHandlers=new Map,this._pendingProgressHandlers=new Map,this._progressDisposables=new Map,this._connection=void 0,this._initializeResult=void 0,r.outputChannel?(this._outputChannel=r.outputChannel,this._disposeOutputChannel=!1):(this._outputChannel=void 0,this._disposeOutputChannel=!0),this._traceOutputChannel=r.traceOutputChannel,this._diagnostics=void 0,this._pendingOpenNotifications=new Set,this._pendingChangeSemaphore=new uc.Semaphore(1),this._pendingChangeDelayer=new uc.Delayer(250),this._fileEvents=[],this._fileEventDelayer=new uc.Delayer(250),this._onStop=void 0,this._telemetryEmitter=new $.Emitter,this._stateChangeEmitter=new $.Emitter,this._trace=$.Trace.Off,this._tracer={log:(o,s)=>{Wn.string(o)?this.logTrace(o,s):this.logObjectTrace(o)}},this._c2p=eT.createConverter(r.uriConverters?r.uriConverters.code2Protocol:void 0),this._p2c=tT.createConverter(r.uriConverters?r.uriConverters.protocol2Code:void 0,this._clientOptions.markdown.isTrusted,this._clientOptions.markdown.supportHtml),this._syncedDocuments=new Map,this.registerBuiltinFeatures()}get name(){return this._name}get middleware(){return this._clientOptions.middleware??Object.create(null)}get clientOptions(){return this._clientOptions}get protocol2CodeConverter(){return this._p2c}get code2ProtocolConverter(){return this._c2p}get onTelemetry(){return this._telemetryEmitter.event}get onDidChangeState(){return this._stateChangeEmitter.event}get outputChannel(){return this._outputChannel||(this._outputChannel=xe.window.createOutputChannel(this._clientOptions.outputChannelName?this._clientOptions.outputChannelName:this._name)),this._outputChannel}get traceOutputChannel(){return this._traceOutputChannel?this._traceOutputChannel:this.outputChannel}get diagnostics(){return this._diagnostics}get state(){return this.getPublicState()}get $state(){return this._state}set $state(e){let t=this.getPublicState();this._state=e;let r=this.getPublicState();r!==t&&this._stateChangeEmitter.fire({oldState:t,newState:r})}getPublicState(){switch(this.$state){case fe.Starting:return Jo.Starting;case fe.Running:return Jo.Running;default:return Jo.Stopped}}get initializeResult(){return this._initializeResult}async sendRequest(e,...t){if(this.$state===fe.StartFailed||this.$state===fe.Stopping||this.$state===fe.Stopped)return Promise.reject(new $.ResponseError($.ErrorCodes.ConnectionInactive,"Client is not running"));let r=await this.$start();this._didChangeTextDocumentFeature.syncKind===$.TextDocumentSyncKind.Full&&await this.sendPendingFullTextDocumentChanges(r);let i=this._clientOptions.middleware?.sendRequest;if(i!==void 0){let o,s;return t.length===1?$.CancellationToken.is(t[0])?s=t[0]:o=t[0]:t.length===2&&(o=t[0],s=t[1]),i(e,o,s,(a,c,u)=>{let d=[];return c!==void 0&&d.push(c),u!==void 0&&d.push(u),r.sendRequest(a,...d)})}else return r.sendRequest(e,...t)}onRequest(e,t){let r=typeof e=="string"?e:e.method;this._requestHandlers.set(r,t);let i=this.activeConnection(),o;return i!==void 0?(this._requestDisposables.set(r,i.onRequest(e,t)),o={dispose:()=>{let s=this._requestDisposables.get(r);s!==void 0&&(s.dispose(),this._requestDisposables.delete(r))}}):(this._pendingRequestHandlers.set(r,t),o={dispose:()=>{this._pendingRequestHandlers.delete(r);let s=this._requestDisposables.get(r);s!==void 0&&(s.dispose(),this._requestDisposables.delete(r))}}),{dispose:()=>{this._requestHandlers.delete(r),o.dispose()}}}async sendNotification(e,t){if(this.$state===fe.StartFailed||this.$state===fe.Stopping||this.$state===fe.Stopped)return Promise.reject(new $.ResponseError($.ErrorCodes.ConnectionInactive,"Client is not running"));let r=this._didChangeTextDocumentFeature.syncKind===$.TextDocumentSyncKind.Full,i;r&&typeof e!="string"&&e.method===$.DidOpenTextDocumentNotification.method&&(i=t?.textDocument.uri,this._pendingOpenNotifications.add(i));let o=await this.$start();r&&await this.sendPendingFullTextDocumentChanges(o),i!==void 0&&this._pendingOpenNotifications.delete(i);let s=this._clientOptions.middleware?.sendNotification;return s?s(e,o.sendNotification.bind(o),t):o.sendNotification(e,t)}onNotification(e,t){let r=typeof e=="string"?e:e.method;this._notificationHandlers.set(r,t);let i=this.activeConnection(),o;return i!==void 0?(this._notificationDisposables.set(r,i.onNotification(e,t)),o={dispose:()=>{let s=this._notificationDisposables.get(r);s!==void 0&&(s.dispose(),this._notificationDisposables.delete(r))}}):(this._pendingNotificationHandlers.set(r,t),o={dispose:()=>{this._pendingNotificationHandlers.delete(r);let s=this._notificationDisposables.get(r);s!==void 0&&(s.dispose(),this._notificationDisposables.delete(r))}}),{dispose:()=>{this._notificationHandlers.delete(r),o.dispose()}}}async sendProgress(e,t,r){if(this.$state===fe.StartFailed||this.$state===fe.Stopping||this.$state===fe.Stopped)return Promise.reject(new $.ResponseError($.ErrorCodes.ConnectionInactive,"Client is not running"));try{return(await this.$start()).sendProgress(e,t,r)}catch(i){throw this.error(`Sending progress for token ${t} failed.`,i),i}}onProgress(e,t,r){this._progressHandlers.set(t,{type:e,handler:r});let i=this.activeConnection(),o,s=this._clientOptions.middleware?.handleWorkDoneProgress,a=$.WorkDoneProgress.is(e)&&s!==void 0?c=>{s(t,c,()=>r(c))}:r;return i!==void 0?(this._progressDisposables.set(t,i.onProgress(e,t,a)),o={dispose:()=>{let c=this._progressDisposables.get(t);c!==void 0&&(c.dispose(),this._progressDisposables.delete(t))}}):(this._pendingProgressHandlers.set(t,{type:e,handler:r}),o={dispose:()=>{this._pendingProgressHandlers.delete(t);let c=this._progressDisposables.get(t);c!==void 0&&(c.dispose(),this._progressDisposables.delete(t))}}),{dispose:()=>{this._progressHandlers.delete(t),o.dispose()}}}createDefaultErrorHandler(e){if(e!==void 0&&e<0)throw new Error(`Invalid maxRestartCount: ${e}`);return new _h(this,e??4)}async setTrace(e){this._trace=e;let t=this.activeConnection();t!==void 0&&await t.trace(this._trace,this._tracer,{sendNotification:!1,traceFormat:this._traceFormat})}data2String(e){if(e instanceof $.ResponseError){let t=e;return`  Message: ${t.message}
  Code: ${t.code} ${t.data?`
`+t.data.toString():""}`}return e instanceof Error?Wn.string(e.stack)?e.stack:e.message:Wn.string(e)?e:e.toString()}debug(e,t,r=!0){this.logOutputMessage($.MessageType.Debug,di.Debug,"Debug",e,t,r)}info(e,t,r=!0){this.logOutputMessage($.MessageType.Info,di.Info,"Info",e,t,r)}warn(e,t,r=!0){this.logOutputMessage($.MessageType.Warning,di.Warn,"Warn",e,t,r)}error(e,t,r=!0){this.logOutputMessage($.MessageType.Error,di.Error,"Error",e,t,r)}logOutputMessage(e,t,r,i,o,s){this.outputChannel.appendLine(`[${r.padEnd(5)} - ${new Date().toLocaleTimeString()}] ${i}`),o!=null&&this.outputChannel.appendLine(this.data2String(o)),(s==="force"||s&&this._clientOptions.revealOutputChannelOn<=t)&&this.showNotificationMessage(e,i)}showNotificationMessage(e,t){t=t??"A request has failed. See the output for more information.",(e===$.MessageType.Error?xe.window.showErrorMessage:e===$.MessageType.Warning?xe.window.showWarningMessage:xe.window.showInformationMessage)(t,"Go to output").then(i=>{i!==void 0&&this.outputChannel.show(!0)})}logTrace(e,t){this.traceOutputChannel.appendLine(`[Trace - ${new Date().toLocaleTimeString()}] ${e}`),t&&this.traceOutputChannel.appendLine(this.data2String(t))}logObjectTrace(e){e.isLSPMessage&&e.type?this.traceOutputChannel.append(`[LSP   - ${new Date().toLocaleTimeString()}] `):this.traceOutputChannel.append(`[Trace - ${new Date().toLocaleTimeString()}] `),e&&this.traceOutputChannel.appendLine(`${JSON.stringify(e)}`)}needsStart(){return this.$state===fe.Initial||this.$state===fe.Stopping||this.$state===fe.Stopped}needsStop(){return this.$state===fe.Starting||this.$state===fe.Running}activeConnection(){return this.$state===fe.Running&&this._connection!==void 0?this._connection:void 0}isRunning(){return this.$state===fe.Running}async start(){if(this._disposed==="disposing"||this._disposed==="disposed")throw new Error("Client got disposed and can't be restarted.");if(this.$state===fe.Stopping)throw new Error("Client is currently stopping. Can only restart a full stopped client");if(this._onStart!==void 0)return this._onStart;let[e,t,r]=this.createOnStartPromise();this._onStart=e,this._diagnostics===void 0&&(this._diagnostics=this._clientOptions.diagnosticCollectionName?xe.languages.createDiagnosticCollection(this._clientOptions.diagnosticCollectionName):xe.languages.createDiagnosticCollection());for(let[i,o]of this._notificationHandlers)this._pendingNotificationHandlers.has(i)||this._pendingNotificationHandlers.set(i,o);for(let[i,o]of this._requestHandlers)this._pendingRequestHandlers.has(i)||this._pendingRequestHandlers.set(i,o);for(let[i,o]of this._progressHandlers)this._pendingProgressHandlers.has(i)||this._pendingProgressHandlers.set(i,o);this.$state=fe.Starting;try{let i=await this.createConnection();i.onNotification($.LogMessageNotification.type,o=>{switch(o.type){case $.MessageType.Error:this.error(o.message,void 0,!1);break;case $.MessageType.Warning:this.warn(o.message,void 0,!1);break;case $.MessageType.Info:this.info(o.message,void 0,!1);break;case $.MessageType.Debug:this.debug(o.message,void 0,!1);break;default:this.outputChannel.appendLine(o.message)}}),i.onNotification($.ShowMessageNotification.type,o=>{switch(o.type){case $.MessageType.Error:xe.window.showErrorMessage(o.message);break;case $.MessageType.Warning:xe.window.showWarningMessage(o.message);break;case $.MessageType.Info:xe.window.showInformationMessage(o.message);break;default:xe.window.showInformationMessage(o.message)}}),i.onRequest($.ShowMessageRequest.type,o=>{let s;switch(o.type){case $.MessageType.Error:s=xe.window.showErrorMessage;break;case $.MessageType.Warning:s=xe.window.showWarningMessage;break;case $.MessageType.Info:s=xe.window.showInformationMessage;break;default:s=xe.window.showInformationMessage}let a=o.actions||[];return s(o.message,...a)}),i.onNotification($.TelemetryEventNotification.type,o=>{this._telemetryEmitter.fire(o)}),i.onRequest($.ShowDocumentRequest.type,async o=>{let s=async c=>{let u=this.protocol2CodeConverter.asUri(c.uri);try{if(c.external===!0)return{success:await xe.env.openExternal(u)};{let d={};return c.selection!==void 0&&(d.selection=this.protocol2CodeConverter.asRange(c.selection)),c.takeFocus===void 0||c.takeFocus===!1?d.preserveFocus=!0:c.takeFocus===!0&&(d.preserveFocus=!1),await xe.window.showTextDocument(u,d),{success:!0}}}catch{return{success:!1}}},a=this._clientOptions.middleware.window?.showDocument;return a!==void 0?a(o,s):s(o)}),i.listen(),await this.initialize(i),t()}catch(i){this.$state=fe.StartFailed,this.error(`${this._name} client: couldn't create connection to server.`,i,"force"),r(i)}return this._onStart}createOnStartPromise(){let e,t;return[new Promise((i,o)=>{e=i,t=o}),e,t]}async initialize(e){this.refreshTrace(e,!1);let t=this._clientOptions.initializationOptions,[r,i]=this._clientOptions.workspaceFolder!==void 0?[this._clientOptions.workspaceFolder.uri.fsPath,[{uri:this._c2p.asUri(this._clientOptions.workspaceFolder.uri),name:this._clientOptions.workspaceFolder.name}]]:[this._clientGetRootPath(),null],o={processId:null,clientInfo:{name:xe.env.appName,version:xe.version},locale:this.getLocale(),rootPath:r||null,rootUri:r?this._c2p.asUri(xe.Uri.file(r)):null,capabilities:this.computeClientCapabilities(),initializationOptions:Wn.func(t)?t():t,trace:$.Trace.toString(this._trace),workspaceFolders:i};if(this.fillInitializeParams(o),this._clientOptions.progressOnInitialization){let s=x1.generateUuid(),a=new nT.ProgressPart(e,s);o.workDoneToken=s;try{let c=await this.doInitialize(e,o);return a.done(),c}catch(c){throw a.cancel(),c}}else return this.doInitialize(e,o)}async doInitialize(e,t){try{let r=await e.initialize(t);if(r.capabilities.positionEncoding!==void 0&&r.capabilities.positionEncoding!==$.PositionEncodingKind.UTF16)throw new Error(`Unsupported position encoding (${r.capabilities.positionEncoding}) received from server ${this.name}`);this._initializeResult=r,this.$state=fe.Running;let i;Wn.number(r.capabilities.textDocumentSync)?r.capabilities.textDocumentSync===$.TextDocumentSyncKind.None?i={openClose:!1,change:$.TextDocumentSyncKind.None,save:void 0}:i={openClose:!0,change:r.capabilities.textDocumentSync,save:{includeText:!1}}:r.capabilities.textDocumentSync!==void 0&&r.capabilities.textDocumentSync!==null&&(i=r.capabilities.textDocumentSync),this._capabilities=Object.assign({},r.capabilities,{resolvedTextDocumentSync:i}),e.onNotification($.PublishDiagnosticsNotification.type,o=>this.handleDiagnostics(o)),e.onRequest($.RegistrationRequest.type,o=>this.handleRegistrationRequest(o)),e.onRequest("client/registerFeature",o=>this.handleRegistrationRequest(o)),e.onRequest($.UnregistrationRequest.type,o=>this.handleUnregistrationRequest(o)),e.onRequest("client/unregisterFeature",o=>this.handleUnregistrationRequest(o)),e.onRequest($.ApplyWorkspaceEditRequest.type,o=>this.handleApplyWorkspaceEdit(o));for(let[o,s]of this._pendingNotificationHandlers)this._notificationDisposables.set(o,e.onNotification(o,s));this._pendingNotificationHandlers.clear();for(let[o,s]of this._pendingRequestHandlers)this._requestDisposables.set(o,e.onRequest(o,s));this._pendingRequestHandlers.clear();for(let[o,s]of this._pendingProgressHandlers)this._progressDisposables.set(o,e.onProgress(s.type,o,s.handler));return this._pendingProgressHandlers.clear(),await e.sendNotification($.InitializedNotification.type,{}),this.hookFileEvents(e),this.hookConfigurationChanged(e),this.initializeFeatures(e),r}catch(r){throw this._clientOptions.initializationFailedHandler?this._clientOptions.initializationFailedHandler(r)?this.initialize(e):this.stop():r instanceof $.ResponseError&&r.data&&r.data.retry?xe.window.showErrorMessage(r.message,{title:"Retry",id:"retry"}).then(i=>{i&&i.id==="retry"?this.initialize(e):this.stop()}):(r&&r.message&&xe.window.showErrorMessage(r.message),this.error("Server initialization failed.",r),this.stop()),r}}_clientGetRootPath(){let e=xe.workspace.workspaceFolders;if(!e||e.length===0)return;let t=e[0];if(t.uri.scheme==="file")return t.uri.fsPath}stop(e=2e3){return this.shutdown("stop",e)}dispose(e=2e3){try{return this._disposed="disposing",this.stop(e)}finally{this._disposed="disposed"}}async shutdown(e,t){if(this.$state===fe.Stopped||this.$state===fe.Initial)return;if(this.$state===fe.Stopping){if(this._onStop!==void 0)return this._onStop;throw new Error("Client is stopping but no stop promise available.")}let r=this.activeConnection();if(r===void 0||this.$state!==fe.Running)throw new Error(`Client is not running and can't be stopped. It's current state is: ${this.$state}`);this._initializeResult=void 0,this.$state=fe.Stopping,this.cleanUp(e);let i=new Promise(s=>{(0,$.RAL)().timer.setTimeout(s,t)}),o=(async s=>(await s.shutdown(),await s.exit(),s))(r);return this._onStop=Promise.race([i,o]).then(s=>{if(s!==void 0)s.end(),s.dispose();else throw this.error("Stopping server timed out",void 0,!1),new Error("Stopping the server timed out")},s=>{throw this.error("Stopping server failed",s,!1),s}).finally(()=>{this.$state=fe.Stopped,e==="stop"&&this.cleanUpChannel(),this._onStart=void 0,this._onStop=void 0,this._connection=void 0,this._ignoredRegistrations.clear()})}cleanUp(e){this._fileEvents=[],this._fileEventDelayer.cancel();let t=this._listeners.splice(0,this._listeners.length);for(let r of t)r.dispose();this._syncedDocuments&&this._syncedDocuments.clear();for(let r of Array.from(this._features.entries()).map(i=>i[1]).reverse())r.clear();e==="stop"&&this._diagnostics!==void 0&&(this._diagnostics.dispose(),this._diagnostics=void 0),this._idleInterval!==void 0&&(this._idleInterval.dispose(),this._idleInterval=void 0)}cleanUpChannel(){this._outputChannel!==void 0&&this._disposeOutputChannel&&(this._outputChannel.dispose(),this._outputChannel=void 0)}notifyFileEvent(e){let t=this;async function r(o){return t._fileEvents.push(o),t._fileEventDelayer.trigger(async()=>{await t.sendNotification($.DidChangeWatchedFilesNotification.type,{changes:t._fileEvents}),t._fileEvents=[]})}let i=this.clientOptions.middleware?.workspace;(i?.didChangeWatchedFile?i.didChangeWatchedFile(e,r):r(e)).catch(o=>{t.error("Notify file events failed.",o)})}async sendPendingFullTextDocumentChanges(e){return this._pendingChangeSemaphore.lock(async()=>{try{let t=this._didChangeTextDocumentFeature.getPendingDocumentChanges(this._pendingOpenNotifications);if(t.length===0)return;for(let r of t){let i=this.code2ProtocolConverter.asChangeTextDocumentParams(r);await e.sendNotification($.DidChangeTextDocumentNotification.type,i),this._didChangeTextDocumentFeature.notificationSent(r,$.DidChangeTextDocumentNotification.type,i)}}catch(t){throw this.error("Sending pending changes failed",t,!1),t}})}triggerPendingChangeDelivery(){this._pendingChangeDelayer.trigger(async()=>{let e=this.activeConnection();if(e===void 0){this.triggerPendingChangeDelivery();return}await this.sendPendingFullTextDocumentChanges(e)}).catch(e=>this.error("Delivering pending changes failed",e,!1))}handleDiagnostics(e){if(!this._diagnostics)return;let t=e.uri;this._diagnosticQueueState.state==="busy"&&this._diagnosticQueueState.document===t&&this._diagnosticQueueState.tokenSource.cancel(),this._diagnosticQueue.set(e.uri,e.diagnostics),this.triggerDiagnosticQueue()}triggerDiagnosticQueue(){(0,$.RAL)().timer.setImmediate(()=>{this.workDiagnosticQueue()})}workDiagnosticQueue(){if(this._diagnosticQueueState.state==="busy")return;let e=this._diagnosticQueue.entries().next();if(e.done===!0)return;let[t,r]=e.value;this._diagnosticQueue.delete(t);let i=new xe.CancellationTokenSource;this._diagnosticQueueState={state:"busy",document:t,tokenSource:i},this._p2c.asDiagnostics(r,i.token).then(o=>{if(!i.token.isCancellationRequested){let s=this._p2c.asUri(t),a=this.clientOptions.middleware;a.handleDiagnostics?a.handleDiagnostics(s,o,(c,u)=>this.setDiagnostics(c,u)):this.setDiagnostics(s,o)}}).finally(()=>{this._diagnosticQueueState={state:"idle"},this.triggerDiagnosticQueue()})}setDiagnostics(e,t){this._diagnostics&&this._diagnostics.set(e,t)}getLocale(){return xe.env.language}async $start(){if(this.$state===fe.StartFailed)throw new Error("Previous start failed. Can't restart server.");await this.start();let e=this.activeConnection();if(e===void 0)throw new Error("Starting server failed");return e}async createConnection(){let e=(i,o,s)=>{this.handleConnectionError(i,o,s).catch(a=>this.error("Handling connection error failed",a))},t=()=>{this.handleConnectionClosed().catch(i=>this.error("Handling connection close failed",i))},r=await this.createMessageTransports(this._clientOptions.stdioEncoding||"utf8");return this._connection=FT(r.reader,r.writer,e,t,this._clientOptions.connectionOptions),this._connection}async handleConnectionClosed(){if(this.$state===fe.Stopped)return;try{this._connection!==void 0&&this._connection.dispose()}catch{}let e={action:Ur.DoNotRestart};if(this.$state!==fe.Stopping)try{e=await this._clientOptions.errorHandler.closed()}catch{}this._connection=void 0,e.action===Ur.DoNotRestart?(this.error(e.message??"Connection to server got closed. Server will not be restarted.",void 0,e.handled===!0?!1:"force"),this.cleanUp("stop"),this.$state===fe.Starting?this.$state=fe.StartFailed:this.$state=fe.Stopped,this._onStop=Promise.resolve(),this._onStart=void 0):e.action===Ur.Restart&&(this.info(e.message??"Connection to server got closed. Server will restart.",!e.handled),this.cleanUp("restart"),this.$state=fe.Initial,this._onStop=Promise.resolve(),this._onStart=void 0,this.start().catch(t=>this.error("Restarting server failed",t,"force")))}async handleConnectionError(e,t,r){let i=await this._clientOptions.errorHandler.error(e,t,r);i.action===Zo.Shutdown?(this.error(i.message??`Client ${this._name}: connection to server is erroring.
${e.message}
Shutting down server.`,void 0,i.handled===!0?!1:"force"),this.stop().catch(o=>{this.error("Stopping server failed",o,!1)})):this.error(i.message??`Client ${this._name}: connection to server is erroring.
${e.message}`,void 0,i.handled===!0?!1:"force")}hookConfigurationChanged(e){this._listeners.push(xe.workspace.onDidChangeConfiguration(()=>{this.refreshTrace(e,!0)}))}refreshTrace(e,t=!1){let r=xe.workspace.getConfiguration(this._id),i=$.Trace.Off,o=$.TraceFormat.Text;if(r){let s=r.get("trace.server","off");typeof s=="string"?i=$.Trace.fromString(s):(i=$.Trace.fromString(r.get("trace.server.verbosity","off")),o=$.TraceFormat.fromString(r.get("trace.server.format","text")))}this._trace=i,this._traceFormat=o,e.trace(this._trace,this._tracer,{sendNotification:t,traceFormat:this._traceFormat}).catch(s=>{this.error("Updating trace failed with error",s,!1)})}hookFileEvents(e){let t=this._clientOptions.synchronize.fileEvents;if(!t)return;let r;Wn.array(t)?r=t:r=[t],r&&this._dynamicFeatures.get($.DidChangeWatchedFilesNotification.type.method).registerRaw(x1.generateUuid(),r)}registerFeatures(e){for(let t of e)this.registerFeature(t)}registerFeature(e){if(this._features.push(e),zn.DynamicFeature.is(e)){let t=e.registrationType;this._dynamicFeatures.set(t.method,e)}}getFeature(e){return this._dynamicFeatures.get(e)}hasDedicatedTextSynchronizationFeature(e){let t=this.getFeature($.NotebookDocumentSyncRegistrationType.method);return t===void 0||!(t instanceof P1.NotebookDocumentSyncFeature)?!1:t.handles(e)}registerBuiltinFeatures(){let e=new Map;this.registerFeature(new q1.ConfigurationFeature(this)),this.registerFeature(new to.DidOpenTextDocumentFeature(this,this._syncedDocuments)),this._didChangeTextDocumentFeature=new to.DidChangeTextDocumentFeature(this,e),this._didChangeTextDocumentFeature.onPendingChangeAdded(()=>{this.triggerPendingChangeDelivery()}),this.registerFeature(this._didChangeTextDocumentFeature),this.registerFeature(new to.WillSaveFeature(this)),this.registerFeature(new to.WillSaveWaitUntilFeature(this)),this.registerFeature(new to.DidSaveTextDocumentFeature(this)),this.registerFeature(new to.DidCloseTextDocumentFeature(this,this._syncedDocuments,e)),this.registerFeature(new yT.FileSystemWatcherFeature(this,t=>this.notifyFileEvent(t))),this.registerFeature(new iT.CompletionItemFeature(this)),this.registerFeature(new oT.HoverFeature(this)),this.registerFeature(new aT.SignatureHelpFeature(this)),this.registerFeature(new sT.DefinitionFeature(this)),this.registerFeature(new dT.ReferencesFeature(this)),this.registerFeature(new cT.DocumentHighlightFeature(this)),this.registerFeature(new uT.DocumentSymbolFeature(this)),this.registerFeature(new lT.WorkspaceSymbolFeature(this)),this.registerFeature(new fT.CodeActionFeature(this)),this.registerFeature(new hT.CodeLensFeature(this)),this.registerFeature(new Dh.DocumentFormattingFeature(this)),this.registerFeature(new Dh.DocumentRangeFormattingFeature(this)),this.registerFeature(new Dh.DocumentOnTypeFormattingFeature(this)),this.registerFeature(new gT.RenameFeature(this)),this.registerFeature(new pT.DocumentLinkFeature(this)),this.registerFeature(new mT.ExecuteCommandFeature(this)),this.registerFeature(new q1.SyncConfigurationFeature(this)),this.registerFeature(new CT.TypeDefinitionFeature(this)),this.registerFeature(new vT.ImplementationFeature(this)),this.registerFeature(new bT.ColorProviderFeature(this)),this.clientOptions.workspaceFolder===void 0&&this.registerFeature(new wT.WorkspaceFoldersFeature(this)),this.registerFeature(new DT.FoldingRangeFeature(this)),this.registerFeature(new RT.DeclarationFeature(this)),this.registerFeature(new _T.SelectionRangeFeature(this)),this.registerFeature(new ST.ProgressFeature(this)),this.registerFeature(new TT.CallHierarchyFeature(this)),this.registerFeature(new ET.SemanticTokensFeature(this)),this.registerFeature(new xT.LinkedEditingFeature(this)),this.registerFeature(new no.DidCreateFilesFeature(this)),this.registerFeature(new no.DidRenameFilesFeature(this)),this.registerFeature(new no.DidDeleteFilesFeature(this)),this.registerFeature(new no.WillCreateFilesFeature(this)),this.registerFeature(new no.WillRenameFilesFeature(this)),this.registerFeature(new no.WillDeleteFilesFeature(this)),this.registerFeature(new PT.TypeHierarchyFeature(this)),this.registerFeature(new qT.InlineValueFeature(this)),this.registerFeature(new IT.InlayHintsFeature(this)),this.registerFeature(new rT.DiagnosticFeature(this)),this.registerFeature(new P1.NotebookDocumentSyncFeature(this))}registerProposedFeatures(){this.registerFeatures(Th.createAll(this))}fillInitializeParams(e){for(let t of this._features)Wn.func(t.fillInitializeParams)&&t.fillInitializeParams(e)}computeClientCapabilities(){let e={};(0,zn.ensure)(e,"workspace").applyEdit=!0;let t=(0,zn.ensure)((0,zn.ensure)(e,"workspace"),"workspaceEdit");t.documentChanges=!0,t.resourceOperations=[$.ResourceOperationKind.Create,$.ResourceOperationKind.Rename,$.ResourceOperationKind.Delete],t.failureHandling=$.FailureHandlingKind.TextOnlyTransactional,t.normalizesLineEndings=!0,t.changeAnnotationSupport={groupsOnLabel:!0};let r=(0,zn.ensure)((0,zn.ensure)(e,"textDocument"),"publishDiagnostics");r.relatedInformation=!0,r.versionSupport=!1,r.tagSupport={valueSet:[$.DiagnosticTag.Unnecessary,$.DiagnosticTag.Deprecated]},r.codeDescriptionSupport=!0,r.dataSupport=!0;let i=(0,zn.ensure)(e,"window"),o=(0,zn.ensure)(i,"showMessage");o.messageActionItem={additionalPropertiesSupport:!0};let s=(0,zn.ensure)(i,"showDocument");s.support=!0;let a=(0,zn.ensure)(e,"general");a.staleRequestSupport={cancel:!0,retryOnContentModified:Array.from(n.RequestsToCancelOnContentModified)},a.regularExpressions={engine:"ECMAScript",version:"ES2020"},a.markdown={parser:"marked",version:"1.1.0"},a.positionEncodings=["utf-16"],this._clientOptions.markdown.supportHtml&&(a.markdown.allowedTags=["ul","li","p","code","blockquote","ol","h1","h2","h3","h4","h5","h6","hr","em","pre","table","thead","tbody","tr","th","td","div","del","a","strong","br","img","span"]);for(let c of this._features)c.fillClientCapabilities(e);return e}initializeFeatures(e){let t=this._clientOptions.documentSelector;for(let r of this._features)Wn.func(r.preInitialize)&&r.preInitialize(this._capabilities,t);for(let r of this._features)r.initialize(this._capabilities,t)}async handleRegistrationRequest(e){let t=this.clientOptions.middleware?.handleRegisterCapability;return t?t(e,r=>this.doRegisterCapability(r)):this.doRegisterCapability(e)}async doRegisterCapability(e){if(!this.isRunning()){for(let t of e.registrations)this._ignoredRegistrations.add(t.id);return}for(let t of e.registrations){let r=this._dynamicFeatures.get(t.method);if(r===void 0)return Promise.reject(new Error(`No feature implementation for ${t.method} found. Registration failed.`));let i=t.registerOptions??{};i.documentSelector=i.documentSelector??this._clientOptions.documentSelector;let o={id:t.id,registerOptions:i};try{r.register(o)}catch(s){return Promise.reject(s)}}}async handleUnregistrationRequest(e){let t=this.clientOptions.middleware?.handleUnregisterCapability;return t?t(e,r=>this.doUnregisterCapability(r)):this.doUnregisterCapability(e)}async doUnregisterCapability(e){for(let t of e.unregisterations){if(this._ignoredRegistrations.has(t.id))continue;let r=this._dynamicFeatures.get(t.method);if(!r)return Promise.reject(new Error(`No feature implementation for ${t.method} found. Unregistration failed.`));r.unregister(t.id)}}async handleApplyWorkspaceEdit(e){let t=e.edit,r=await this.workspaceEditLock.lock(()=>this._p2c.asWorkspaceEdit(t)),i=new Map;xe.workspace.textDocuments.forEach(s=>i.set(s.uri.toString(),s));let o=!1;if(t.documentChanges){for(let s of t.documentChanges)if($.TextDocumentEdit.is(s)&&s.textDocument.version&&s.textDocument.version>=0){let a=this._p2c.asUri(s.textDocument.uri).toString(),c=i.get(a);if(c&&c.version!==s.textDocument.version){o=!0;break}}}return o?Promise.resolve({applied:!1}):Wn.asPromise(xe.workspace.applyEdit(r).then(s=>({applied:s})))}handleFailedRequest(e,t,r,i,o=!0){if(r instanceof $.ResponseError){if(r.code===$.ErrorCodes.PendingResponseRejected||r.code===$.ErrorCodes.ConnectionInactive)return i;if(r.code===$.LSPErrorCodes.RequestCancelled||r.code===$.LSPErrorCodes.ServerCancelled){if(t!==void 0&&t.isCancellationRequested)return i;throw r.data!==void 0?new zn.LSPCancellationError(r.data):new xe.CancellationError}else if(r.code===$.LSPErrorCodes.ContentModified){if(n.RequestsToCancelOnContentModified.has(e.method)||n.CancellableResolveCalls.has(e.method))throw new xe.CancellationError;return i}}throw this.error(`Request ${e.method} failed.`,r,o),r}};_t.BaseLanguageClient=Qo;Qo.RequestsToCancelOnContentModified=new Set([$.SemanticTokensRequest.method,$.SemanticTokensRangeRequest.method,$.SemanticTokensDeltaRequest.method]);Qo.CancellableResolveCalls=new Set([$.CompletionResolveRequest.method,$.CodeLensResolveRequest.method,$.CodeActionResolveRequest.method,$.InlayHintResolveRequest.method,$.DocumentLinkResolveRequest.method,$.WorkspaceSymbolResolveRequest.method]);var Sh=class{error(e){(0,$.RAL)().console.error(e)}warn(e){(0,$.RAL)().console.warn(e)}info(e){(0,$.RAL)().console.info(e)}log(e){(0,$.RAL)().console.log(e)}};function FT(n,e,t,r,i){let o=new Sh,s=(0,$.createProtocolConnection)(n,e,o,i);return s.onError(c=>{t(c[0],c[1],c[2])}),s.onClose(r),{listen:()=>s.listen(),sendRequest:s.sendRequest,onRequest:s.onRequest,hasPendingResponse:s.hasPendingResponse,sendNotification:s.sendNotification,onNotification:s.onNotification,onProgress:s.onProgress,sendProgress:s.sendProgress,trace:(c,u,d)=>{let h={sendNotification:!1,traceFormat:$.TraceFormat.Text};return d===void 0?s.trace(c,u,h):(Wn.boolean(d),s.trace(c,u,d))},initialize:c=>s.sendRequest($.InitializeRequest.type,c),shutdown:()=>s.sendRequest($.ShutdownRequest.type,void 0),exit:()=>s.sendNotification($.ExitNotification.type),end:()=>s.end(),dispose:()=>s.dispose()}}var Th;(function(n){function e(t){return[new kT.InlineCompletionItemFeature(t)]}n.createAll=e})(Th||(_t.ProposedFeatures=Th={}))});var M1=k(lc=>{"use strict";Object.defineProperty(lc,"__esModule",{value:!0});lc.terminate=void 0;var F1=require("child_process"),MT=require("path"),OT=process.platform==="win32",LT=process.platform==="darwin",AT=process.platform==="linux";function NT(n,e){if(OT)try{let i={stdio:["pipe","pipe","ignore"]};return e&&(i.cwd=e),F1.execFileSync("taskkill",["/T","/F","/PID",n.pid.toString()],i),!0}catch{return!1}else if(AT||LT)try{var t=(0,MT.join)(__dirname,"terminateProcess.sh"),r=F1.spawnSync(t,[n.pid.toString()]);return!r.error}catch{return!1}else return n.kill("SIGKILL"),!0}lc.terminate=NT});var xh=k((Ek,O1)=>{"use strict";O1.exports=re()});var es=k((xk,L1)=>{var $T=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...n)=>console.error("SEMVER",...n):()=>{};L1.exports=$T});var dc=k((Pk,A1)=>{var jT="2.0.0",HT=Number.MAX_SAFE_INTEGER||9007199254740991,UT=16,zT=250,WT=["major","premajor","minor","preminor","patch","prepatch","prerelease"];A1.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:UT,MAX_SAFE_BUILD_LENGTH:zT,MAX_SAFE_INTEGER:HT,RELEASE_TYPES:WT,SEMVER_SPEC_VERSION:jT,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var fc=k((mr,N1)=>{var{MAX_SAFE_COMPONENT_LENGTH:Ph,MAX_SAFE_BUILD_LENGTH:VT,MAX_LENGTH:BT}=dc(),KT=es();mr=N1.exports={};var GT=mr.re=[],XT=mr.safeRe=[],K=mr.src=[],G=mr.t={},YT=0,qh="[a-zA-Z0-9-]",JT=[["\\s",1],["\\d",BT],[qh,VT]],ZT=n=>{for(let[e,t]of JT)n=n.split(`${e}*`).join(`${e}{0,${t}}`).split(`${e}+`).join(`${e}{1,${t}}`);return n},ue=(n,e,t)=>{let r=ZT(e),i=YT++;KT(n,i,e),G[n]=i,K[i]=e,GT[i]=new RegExp(e,t?"g":void 0),XT[i]=new RegExp(r,t?"g":void 0)};ue("NUMERICIDENTIFIER","0|[1-9]\\d*");ue("NUMERICIDENTIFIERLOOSE","\\d+");ue("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${qh}*`);ue("MAINVERSION",`(${K[G.NUMERICIDENTIFIER]})\\.(${K[G.NUMERICIDENTIFIER]})\\.(${K[G.NUMERICIDENTIFIER]})`);ue("MAINVERSIONLOOSE",`(${K[G.NUMERICIDENTIFIERLOOSE]})\\.(${K[G.NUMERICIDENTIFIERLOOSE]})\\.(${K[G.NUMERICIDENTIFIERLOOSE]})`);ue("PRERELEASEIDENTIFIER",`(?:${K[G.NUMERICIDENTIFIER]}|${K[G.NONNUMERICIDENTIFIER]})`);ue("PRERELEASEIDENTIFIERLOOSE",`(?:${K[G.NUMERICIDENTIFIERLOOSE]}|${K[G.NONNUMERICIDENTIFIER]})`);ue("PRERELEASE",`(?:-(${K[G.PRERELEASEIDENTIFIER]}(?:\\.${K[G.PRERELEASEIDENTIFIER]})*))`);ue("PRERELEASELOOSE",`(?:-?(${K[G.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${K[G.PRERELEASEIDENTIFIERLOOSE]})*))`);ue("BUILDIDENTIFIER",`${qh}+`);ue("BUILD",`(?:\\+(${K[G.BUILDIDENTIFIER]}(?:\\.${K[G.BUILDIDENTIFIER]})*))`);ue("FULLPLAIN",`v?${K[G.MAINVERSION]}${K[G.PRERELEASE]}?${K[G.BUILD]}?`);ue("FULL",`^${K[G.FULLPLAIN]}$`);ue("LOOSEPLAIN",`[v=\\s]*${K[G.MAINVERSIONLOOSE]}${K[G.PRERELEASELOOSE]}?${K[G.BUILD]}?`);ue("LOOSE",`^${K[G.LOOSEPLAIN]}$`);ue("GTLT","((?:<|>)?=?)");ue("XRANGEIDENTIFIERLOOSE",`${K[G.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);ue("XRANGEIDENTIFIER",`${K[G.NUMERICIDENTIFIER]}|x|X|\\*`);ue("XRANGEPLAIN",`[v=\\s]*(${K[G.XRANGEIDENTIFIER]})(?:\\.(${K[G.XRANGEIDENTIFIER]})(?:\\.(${K[G.XRANGEIDENTIFIER]})(?:${K[G.PRERELEASE]})?${K[G.BUILD]}?)?)?`);ue("XRANGEPLAINLOOSE",`[v=\\s]*(${K[G.XRANGEIDENTIFIERLOOSE]})(?:\\.(${K[G.XRANGEIDENTIFIERLOOSE]})(?:\\.(${K[G.XRANGEIDENTIFIERLOOSE]})(?:${K[G.PRERELEASELOOSE]})?${K[G.BUILD]}?)?)?`);ue("XRANGE",`^${K[G.GTLT]}\\s*${K[G.XRANGEPLAIN]}$`);ue("XRANGELOOSE",`^${K[G.GTLT]}\\s*${K[G.XRANGEPLAINLOOSE]}$`);ue("COERCEPLAIN",`(^|[^\\d])(\\d{1,${Ph}})(?:\\.(\\d{1,${Ph}}))?(?:\\.(\\d{1,${Ph}}))?`);ue("COERCE",`${K[G.COERCEPLAIN]}(?:$|[^\\d])`);ue("COERCEFULL",K[G.COERCEPLAIN]+`(?:${K[G.PRERELEASE]})?(?:${K[G.BUILD]})?(?:$|[^\\d])`);ue("COERCERTL",K[G.COERCE],!0);ue("COERCERTLFULL",K[G.COERCEFULL],!0);ue("LONETILDE","(?:~>?)");ue("TILDETRIM",`(\\s*)${K[G.LONETILDE]}\\s+`,!0);mr.tildeTrimReplace="$1~";ue("TILDE",`^${K[G.LONETILDE]}${K[G.XRANGEPLAIN]}$`);ue("TILDELOOSE",`^${K[G.LONETILDE]}${K[G.XRANGEPLAINLOOSE]}$`);ue("LONECARET","(?:\\^)");ue("CARETTRIM",`(\\s*)${K[G.LONECARET]}\\s+`,!0);mr.caretTrimReplace="$1^";ue("CARET",`^${K[G.LONECARET]}${K[G.XRANGEPLAIN]}$`);ue("CARETLOOSE",`^${K[G.LONECARET]}${K[G.XRANGEPLAINLOOSE]}$`);ue("COMPARATORLOOSE",`^${K[G.GTLT]}\\s*(${K[G.LOOSEPLAIN]})$|^$`);ue("COMPARATOR",`^${K[G.GTLT]}\\s*(${K[G.FULLPLAIN]})$|^$`);ue("COMPARATORTRIM",`(\\s*)${K[G.GTLT]}\\s*(${K[G.LOOSEPLAIN]}|${K[G.XRANGEPLAIN]})`,!0);mr.comparatorTrimReplace="$1$2$3";ue("HYPHENRANGE",`^\\s*(${K[G.XRANGEPLAIN]})\\s+-\\s+(${K[G.XRANGEPLAIN]})\\s*$`);ue("HYPHENRANGELOOSE",`^\\s*(${K[G.XRANGEPLAINLOOSE]})\\s+-\\s+(${K[G.XRANGEPLAINLOOSE]})\\s*$`);ue("STAR","(<|>)?=?\\s*\\*");ue("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");ue("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var hc=k((qk,$1)=>{var QT=Object.freeze({loose:!0}),eE=Object.freeze({}),tE=n=>n?typeof n!="object"?QT:n:eE;$1.exports=tE});var z1=k((Ik,U1)=>{var j1=/^[0-9]+$/,H1=(n,e)=>{let t=j1.test(n),r=j1.test(e);return t&&r&&(n=+n,e=+e),n===e?0:t&&!r?-1:r&&!t?1:n<e?-1:1},nE=(n,e)=>H1(e,n);U1.exports={compareIdentifiers:H1,rcompareIdentifiers:nE}});var ts=k((kk,K1)=>{var gc=es(),{MAX_LENGTH:W1,MAX_SAFE_INTEGER:pc}=dc(),{safeRe:V1,t:B1}=fc(),rE=hc(),{compareIdentifiers:ro}=z1(),Ih=class n{constructor(e,t){if(t=rE(t),e instanceof n){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>W1)throw new TypeError(`version is longer than ${W1} characters`);gc("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;let r=e.trim().match(t.loose?V1[B1.LOOSE]:V1[B1.FULL]);if(!r)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>pc||this.major<0)throw new TypeError("Invalid major version");if(this.minor>pc||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>pc||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let o=+i;if(o>=0&&o<pc)return o}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(gc("SemVer.compare",this.version,this.options,e),!(e instanceof n)){if(typeof e=="string"&&e===this.version)return 0;e=new n(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof n||(e=new n(e,this.options)),ro(this.major,e.major)||ro(this.minor,e.minor)||ro(this.patch,e.patch)}comparePre(e){if(e instanceof n||(e=new n(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{let r=this.prerelease[t],i=e.prerelease[t];if(gc("prerelease compare",t,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return ro(r,i)}while(++t)}compareBuild(e){e instanceof n||(e=new n(e,this.options));let t=0;do{let r=this.build[t],i=e.build[t];if(gc("build compare",t,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return ro(r,i)}while(++t)}inc(e,t,r){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,r),this.inc("pre",t,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t,r),this.inc("pre",t,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let i=Number(r)?1:0;if(!t&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let o=this.prerelease.length;for(;--o>=0;)typeof this.prerelease[o]=="number"&&(this.prerelease[o]++,o=-2);if(o===-1){if(t===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(t){let o=[t,i];r===!1&&(o=[t]),ro(this.prerelease[0],t)===0?isNaN(this.prerelease[1])&&(this.prerelease=o):this.prerelease=o}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};K1.exports=Ih});var Y1=k((Fk,X1)=>{var G1=ts(),iE=(n,e,t=!1)=>{if(n instanceof G1)return n;try{return new G1(n,e)}catch(r){if(!t)return null;throw r}};X1.exports=iE});var Z1=k((Mk,J1)=>{var kh=class{constructor(){this.max=1e3,this.map=new Map}get(e){let t=this.map.get(e);if(t!==void 0)return this.map.delete(e),this.map.set(e,t),t}delete(e){return this.map.delete(e)}set(e,t){if(!this.delete(e)&&t!==void 0){if(this.map.size>=this.max){let i=this.map.keys().next().value;this.delete(i)}this.map.set(e,t)}return this}};J1.exports=kh});var fi=k((Ok,eC)=>{var Q1=ts(),oE=(n,e,t)=>new Q1(n,t).compare(new Q1(e,t));eC.exports=oE});var nC=k((Lk,tC)=>{var sE=fi(),aE=(n,e,t)=>sE(n,e,t)===0;tC.exports=aE});var iC=k((Ak,rC)=>{var cE=fi(),uE=(n,e,t)=>cE(n,e,t)!==0;rC.exports=uE});var sC=k((Nk,oC)=>{var lE=fi(),dE=(n,e,t)=>lE(n,e,t)>0;oC.exports=dE});var cC=k(($k,aC)=>{var fE=fi(),hE=(n,e,t)=>fE(n,e,t)>=0;aC.exports=hE});var lC=k((jk,uC)=>{var gE=fi(),pE=(n,e,t)=>gE(n,e,t)<0;uC.exports=pE});var fC=k((Hk,dC)=>{var mE=fi(),yE=(n,e,t)=>mE(n,e,t)<=0;dC.exports=yE});var gC=k((Uk,hC)=>{var bE=nC(),vE=iC(),CE=sC(),wE=cC(),DE=lC(),RE=fC(),_E=(n,e,t,r)=>{switch(e){case"===":return typeof n=="object"&&(n=n.version),typeof t=="object"&&(t=t.version),n===t;case"!==":return typeof n=="object"&&(n=n.version),typeof t=="object"&&(t=t.version),n!==t;case"":case"=":case"==":return bE(n,t,r);case"!=":return vE(n,t,r);case">":return CE(n,t,r);case">=":return wE(n,t,r);case"<":return DE(n,t,r);case"<=":return RE(n,t,r);default:throw new TypeError(`Invalid operator: ${e}`)}};hC.exports=_E});var wC=k((zk,CC)=>{var ns=Symbol("SemVer ANY"),Oh=class n{static get ANY(){return ns}constructor(e,t){if(t=pC(t),e instanceof n){if(e.loose===!!t.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),Mh("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===ns?this.value="":this.value=this.operator+this.semver.version,Mh("comp",this)}parse(e){let t=this.options.loose?mC[yC.COMPARATORLOOSE]:mC[yC.COMPARATOR],r=e.match(t);if(!r)throw new TypeError(`Invalid comparator: ${e}`);this.operator=r[1]!==void 0?r[1]:"",this.operator==="="&&(this.operator=""),r[2]?this.semver=new bC(r[2],this.options.loose):this.semver=ns}toString(){return this.value}test(e){if(Mh("Comparator.test",e,this.options.loose),this.semver===ns||e===ns)return!0;if(typeof e=="string")try{e=new bC(e,this.options)}catch{return!1}return Fh(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof n))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new vC(e.value,t).test(this.value):e.operator===""?e.value===""?!0:new vC(this.value,t).test(e.semver):(t=pC(t),t.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!t.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||Fh(this.semver,"<",e.semver,t)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||Fh(this.semver,">",e.semver,t)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};CC.exports=Oh;var pC=hc(),{safeRe:mC,t:yC}=fc(),Fh=gC(),Mh=es(),bC=ts(),vC=Lh()});var Lh=k((Wk,SC)=>{var SE=/\s+/g,Ah=class n{constructor(e,t){if(t=EE(t),e instanceof n)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new n(e.raw,t);if(e instanceof Nh)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e.trim().replace(SE," "),this.set=this.raw.split("||").map(r=>this.parseRange(r.trim())).filter(r=>r.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let r=this.set[0];if(this.set=this.set.filter(i=>!RC(i[0])),this.set.length===0)this.set=[r];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&ME(i[0])){this.set=[i];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");let t=this.set[e];for(let r=0;r<t.length;r++)r>0&&(this.formatted+=" "),this.formatted+=t[r].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){let r=((this.options.includePrerelease&&kE)|(this.options.loose&&FE))+":"+e,i=DC.get(r);if(i)return i;let o=this.options.loose,s=o?sn[Bt.HYPHENRANGELOOSE]:sn[Bt.HYPHENRANGE];e=e.replace(s,WE(this.options.includePrerelease)),je("hyphen replace",e),e=e.replace(sn[Bt.COMPARATORTRIM],PE),je("comparator trim",e),e=e.replace(sn[Bt.TILDETRIM],qE),je("tilde trim",e),e=e.replace(sn[Bt.CARETTRIM],IE),je("caret trim",e);let a=e.split(" ").map(h=>OE(h,this.options)).join(" ").split(/\s+/).map(h=>zE(h,this.options));o&&(a=a.filter(h=>(je("loose invalid filter",h,this.options),!!h.match(sn[Bt.COMPARATORLOOSE])))),je("range list",a);let c=new Map,u=a.map(h=>new Nh(h,this.options));for(let h of u){if(RC(h))return[h];c.set(h.value,h)}c.size>1&&c.has("")&&c.delete("");let d=[...c.values()];return DC.set(r,d),d}intersects(e,t){if(!(e instanceof n))throw new TypeError("a Range is required");return this.set.some(r=>_C(r,t)&&e.set.some(i=>_C(i,t)&&r.every(o=>i.every(s=>o.intersects(s,t)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new xE(e,this.options)}catch{return!1}for(let t=0;t<this.set.length;t++)if(VE(this.set[t],e,this.options))return!0;return!1}};SC.exports=Ah;var TE=Z1(),DC=new TE,EE=hc(),Nh=wC(),je=es(),xE=ts(),{safeRe:sn,t:Bt,comparatorTrimReplace:PE,tildeTrimReplace:qE,caretTrimReplace:IE}=fc(),{FLAG_INCLUDE_PRERELEASE:kE,FLAG_LOOSE:FE}=dc(),RC=n=>n.value==="<0.0.0-0",ME=n=>n.value==="",_C=(n,e)=>{let t=!0,r=n.slice(),i=r.pop();for(;t&&r.length;)t=r.every(o=>i.intersects(o,e)),i=r.pop();return t},OE=(n,e)=>(je("comp",n,e),n=NE(n,e),je("caret",n),n=LE(n,e),je("tildes",n),n=jE(n,e),je("xrange",n),n=UE(n,e),je("stars",n),n),Kt=n=>!n||n.toLowerCase()==="x"||n==="*",LE=(n,e)=>n.trim().split(/\s+/).map(t=>AE(t,e)).join(" "),AE=(n,e)=>{let t=e.loose?sn[Bt.TILDELOOSE]:sn[Bt.TILDE];return n.replace(t,(r,i,o,s,a)=>{je("tilde",n,r,i,o,s,a);let c;return Kt(i)?c="":Kt(o)?c=`>=${i}.0.0 <${+i+1}.0.0-0`:Kt(s)?c=`>=${i}.${o}.0 <${i}.${+o+1}.0-0`:a?(je("replaceTilde pr",a),c=`>=${i}.${o}.${s}-${a} <${i}.${+o+1}.0-0`):c=`>=${i}.${o}.${s} <${i}.${+o+1}.0-0`,je("tilde return",c),c})},NE=(n,e)=>n.trim().split(/\s+/).map(t=>$E(t,e)).join(" "),$E=(n,e)=>{je("caret",n,e);let t=e.loose?sn[Bt.CARETLOOSE]:sn[Bt.CARET],r=e.includePrerelease?"-0":"";return n.replace(t,(i,o,s,a,c)=>{je("caret",n,i,o,s,a,c);let u;return Kt(o)?u="":Kt(s)?u=`>=${o}.0.0${r} <${+o+1}.0.0-0`:Kt(a)?o==="0"?u=`>=${o}.${s}.0${r} <${o}.${+s+1}.0-0`:u=`>=${o}.${s}.0${r} <${+o+1}.0.0-0`:c?(je("replaceCaret pr",c),o==="0"?s==="0"?u=`>=${o}.${s}.${a}-${c} <${o}.${s}.${+a+1}-0`:u=`>=${o}.${s}.${a}-${c} <${o}.${+s+1}.0-0`:u=`>=${o}.${s}.${a}-${c} <${+o+1}.0.0-0`):(je("no pr"),o==="0"?s==="0"?u=`>=${o}.${s}.${a}${r} <${o}.${s}.${+a+1}-0`:u=`>=${o}.${s}.${a}${r} <${o}.${+s+1}.0-0`:u=`>=${o}.${s}.${a} <${+o+1}.0.0-0`),je("caret return",u),u})},jE=(n,e)=>(je("replaceXRanges",n,e),n.split(/\s+/).map(t=>HE(t,e)).join(" ")),HE=(n,e)=>{n=n.trim();let t=e.loose?sn[Bt.XRANGELOOSE]:sn[Bt.XRANGE];return n.replace(t,(r,i,o,s,a,c)=>{je("xRange",n,r,i,o,s,a,c);let u=Kt(o),d=u||Kt(s),h=d||Kt(a),p=h;return i==="="&&p&&(i=""),c=e.includePrerelease?"-0":"",u?i===">"||i==="<"?r="<0.0.0-0":r="*":i&&p?(d&&(s=0),a=0,i===">"?(i=">=",d?(o=+o+1,s=0,a=0):(s=+s+1,a=0)):i==="<="&&(i="<",d?o=+o+1:s=+s+1),i==="<"&&(c="-0"),r=`${i+o}.${s}.${a}${c}`):d?r=`>=${o}.0.0${c} <${+o+1}.0.0-0`:h&&(r=`>=${o}.${s}.0${c} <${o}.${+s+1}.0-0`),je("xRange return",r),r})},UE=(n,e)=>(je("replaceStars",n,e),n.trim().replace(sn[Bt.STAR],"")),zE=(n,e)=>(je("replaceGTE0",n,e),n.trim().replace(sn[e.includePrerelease?Bt.GTE0PRE:Bt.GTE0],"")),WE=n=>(e,t,r,i,o,s,a,c,u,d,h,p)=>(Kt(r)?t="":Kt(i)?t=`>=${r}.0.0${n?"-0":""}`:Kt(o)?t=`>=${r}.${i}.0${n?"-0":""}`:s?t=`>=${t}`:t=`>=${t}${n?"-0":""}`,Kt(u)?c="":Kt(d)?c=`<${+u+1}.0.0-0`:Kt(h)?c=`<${u}.${+d+1}.0-0`:p?c=`<=${u}.${d}.${h}-${p}`:n?c=`<${u}.${d}.${+h+1}-0`:c=`<=${c}`,`${t} ${c}`.trim()),VE=(n,e,t)=>{for(let r=0;r<n.length;r++)if(!n[r].test(e))return!1;if(e.prerelease.length&&!t.includePrerelease){for(let r=0;r<n.length;r++)if(je(n[r].semver),n[r].semver!==Nh.ANY&&n[r].semver.prerelease.length>0){let i=n[r].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}});var EC=k((Vk,TC)=>{var BE=Lh(),KE=(n,e,t)=>{try{e=new BE(e,t)}catch{return!1}return e.test(n)};TC.exports=KE});var PC=k(bn=>{"use strict";var GE=bn&&bn.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,i)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),$h=bn&&bn.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&GE(e,n,t)};Object.defineProperty(bn,"__esModule",{value:!0});bn.DiagnosticPullMode=bn.vsdiag=void 0;$h(re(),bn);$h(Ce(),bn);var xC=Vd();Object.defineProperty(bn,"vsdiag",{enumerable:!0,get:function(){return xC.vsdiag}});Object.defineProperty(bn,"DiagnosticPullMode",{enumerable:!0,get:function(){return xC.DiagnosticPullMode}});$h(Eh(),bn)});var FC=k(an=>{"use strict";var XE=an&&an.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,i)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),kC=an&&an.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&XE(e,n,t)};Object.defineProperty(an,"__esModule",{value:!0});an.SettingMonitor=an.LanguageClient=an.TransportKind=void 0;var yr=require("child_process"),jh=require("fs"),Hh=require("path"),Wr=require("vscode"),Ke=Tn(),qC=Eh(),YE=M1(),Je=xh(),JE=Y1(),ZE=EC();kC(xh(),an);kC(PC(),an);var IC="^1.82.0",Ze;(function(n){n[n.stdio=0]="stdio",n[n.ipc=1]="ipc",n[n.pipe=2]="pipe",n[n.socket=3]="socket"})(Ze||(an.TransportKind=Ze={}));var zr;(function(n){function e(t){let r=t;return r&&r.kind===Ze.socket&&Ke.number(r.port)}n.isSocket=e})(zr||(zr={}));var Uh;(function(n){function e(t){return Ke.string(t.command)}n.is=e})(Uh||(Uh={}));var zh;(function(n){function e(t){return Ke.string(t.module)}n.is=e})(zh||(zh={}));var Wh;(function(n){function e(t){let r=t;return r&&r.writer!==void 0&&r.reader!==void 0}n.is=e})(Wh||(Wh={}));var Vh;(function(n){function e(t){let r=t;return r&&r.process!==void 0&&typeof r.detached=="boolean"}n.is=e})(Vh||(Vh={}));var Bh=class extends qC.BaseLanguageClient{constructor(e,t,r,i,o){let s,a,c,u,d;Ke.string(t)?(s=e,a=t,c=r,u=i,d=!!o):(s=e.toLowerCase(),a=e,c=t,u=r,d=i),d===void 0&&(d=!1),super(s,a,u),this._serverOptions=c,this._forceDebug=d,this._isInDebugMode=d;try{this.checkVersion()}catch(h){throw Ke.string(h.message)&&this.outputChannel.appendLine(h.message),h}}checkVersion(){let e=JE(Wr.version);if(!e)throw new Error(`No valid VS Code version detected. Version string is: ${Wr.version}`);if(e.prerelease&&e.prerelease.length>0&&(e.prerelease=[]),!ZE(e,IC))throw new Error(`The language client requires VS Code version ${IC} but received version ${Wr.version}`)}get isInDebugMode(){return this._isInDebugMode}async restart(){await this.stop(),this.isInDebugMode?(await new Promise(e=>setTimeout(e,1e3)),await this.start()):await this.start()}stop(e=2e3){return super.stop(e).finally(()=>{if(this._serverProcess){let t=this._serverProcess;this._serverProcess=void 0,(this._isDetached===void 0||!this._isDetached)&&this.checkProcessDied(t),this._isDetached=void 0}})}checkProcessDied(e){!e||e.pid===void 0||setTimeout(()=>{try{e.pid!==void 0&&(process.kill(e.pid,0),(0,YE.terminate)(e))}catch{}},2e3)}handleConnectionClosed(){return this._serverProcess=void 0,super.handleConnectionClosed()}fillInitializeParams(e){super.fillInitializeParams(e),e.processId===null&&(e.processId=process.pid)}createMessageTransports(e){function t(d,h){if(!d&&!h)return;let p=Object.create(null);return Object.keys(process.env).forEach(v=>p[v]=process.env[v]),h&&(p.ELECTRON_RUN_AS_NODE="1",p.ELECTRON_NO_ASAR="1"),d&&Object.keys(d).forEach(v=>p[v]=d[v]),p}let r=["--debug=","--debug-brk=","--inspect=","--inspect-brk="],i=["--debug","--debug-brk","--inspect","--inspect-brk"];function o(){let d=process.execArgv;return d?d.some(h=>r.some(p=>h.startsWith(p))||i.some(p=>h===p)):!1}function s(d){if(d.stdin===null||d.stdout===null||d.stderr===null)throw new Error("Process created without stdio streams")}let a=this._serverOptions;if(Ke.func(a))return a().then(d=>{if(qC.MessageTransports.is(d))return this._isDetached=!!d.detached,d;if(Wh.is(d))return this._isDetached=!!d.detached,{reader:new Je.StreamMessageReader(d.reader),writer:new Je.StreamMessageWriter(d.writer)};{let h;return Vh.is(d)?(h=d.process,this._isDetached=d.detached):(h=d,this._isDetached=!1),h.stderr.on("data",p=>this.outputChannel.append(Ke.string(p)?p:p.toString(e))),{reader:new Je.StreamMessageReader(h.stdout),writer:new Je.StreamMessageWriter(h.stdin)}}});let c,u=a;return u.run||u.debug?this._forceDebug||o()?(c=u.debug,this._isInDebugMode=!0):(c=u.run,this._isInDebugMode=!1):c=a,this._getServerWorkingDir(c.options).then(d=>{if(zh.is(c)&&c.module){let h=c,p=h.transport||Ze.stdio;if(h.runtime){let v=[],y=h.options??Object.create(null);y.execArgv&&y.execArgv.forEach(O=>v.push(O)),v.push(h.module),h.args&&h.args.forEach(O=>v.push(O));let R=Object.create(null);R.cwd=d,R.env=t(y.env,!1);let E=this._getRuntimePath(h.runtime,d),I;if(p===Ze.ipc?(R.stdio=[null,null,null,"ipc"],v.push("--node-ipc")):p===Ze.stdio?v.push("--stdio"):p===Ze.pipe?(I=(0,Je.generateRandomPipeName)(),v.push(`--pipe=${I}`)):zr.isSocket(p)&&v.push(`--socket=${p.port}`),v.push(`--clientProcessId=${process.pid.toString()}`),p===Ze.ipc||p===Ze.stdio){let O=yr.spawn(E,v,R);return!O||!O.pid?io(O,`Launching server using runtime ${E} failed.`):(this._serverProcess=O,O.stderr.on("data",q=>this.outputChannel.append(Ke.string(q)?q:q.toString(e))),p===Ze.ipc?(O.stdout.on("data",q=>this.outputChannel.append(Ke.string(q)?q:q.toString(e))),Promise.resolve({reader:new Je.IPCMessageReader(O),writer:new Je.IPCMessageWriter(O)})):Promise.resolve({reader:new Je.StreamMessageReader(O.stdout),writer:new Je.StreamMessageWriter(O.stdin)}))}else{if(p===Ze.pipe)return(0,Je.createClientPipeTransport)(I).then(O=>{let q=yr.spawn(E,v,R);return!q||!q.pid?io(q,`Launching server using runtime ${E} failed.`):(this._serverProcess=q,q.stderr.on("data",N=>this.outputChannel.append(Ke.string(N)?N:N.toString(e))),q.stdout.on("data",N=>this.outputChannel.append(Ke.string(N)?N:N.toString(e))),O.onConnected().then(N=>({reader:N[0],writer:N[1]})))});if(zr.isSocket(p))return(0,Je.createClientSocketTransport)(p.port).then(O=>{let q=yr.spawn(E,v,R);return!q||!q.pid?io(q,`Launching server using runtime ${E} failed.`):(this._serverProcess=q,q.stderr.on("data",N=>this.outputChannel.append(Ke.string(N)?N:N.toString(e))),q.stdout.on("data",N=>this.outputChannel.append(Ke.string(N)?N:N.toString(e))),O.onConnected().then(N=>({reader:N[0],writer:N[1]})))})}}else{let v;return new Promise((y,R)=>{let E=(h.args&&h.args.slice())??[];p===Ze.ipc?E.push("--node-ipc"):p===Ze.stdio?E.push("--stdio"):p===Ze.pipe?(v=(0,Je.generateRandomPipeName)(),E.push(`--pipe=${v}`)):zr.isSocket(p)&&E.push(`--socket=${p.port}`),E.push(`--clientProcessId=${process.pid.toString()}`);let I=h.options??Object.create(null);if(I.env=t(I.env,!0),I.execArgv=I.execArgv||[],I.cwd=d,I.silent=!0,p===Ze.ipc||p===Ze.stdio){let O=yr.fork(h.module,E||[],I);s(O),this._serverProcess=O,O.stderr.on("data",q=>this.outputChannel.append(Ke.string(q)?q:q.toString(e))),p===Ze.ipc?(O.stdout.on("data",q=>this.outputChannel.append(Ke.string(q)?q:q.toString(e))),y({reader:new Je.IPCMessageReader(this._serverProcess),writer:new Je.IPCMessageWriter(this._serverProcess)})):y({reader:new Je.StreamMessageReader(O.stdout),writer:new Je.StreamMessageWriter(O.stdin)})}else p===Ze.pipe?(0,Je.createClientPipeTransport)(v).then(O=>{let q=yr.fork(h.module,E||[],I);s(q),this._serverProcess=q,q.stderr.on("data",N=>this.outputChannel.append(Ke.string(N)?N:N.toString(e))),q.stdout.on("data",N=>this.outputChannel.append(Ke.string(N)?N:N.toString(e))),O.onConnected().then(N=>{y({reader:N[0],writer:N[1]})},R)},R):zr.isSocket(p)&&(0,Je.createClientSocketTransport)(p.port).then(O=>{let q=yr.fork(h.module,E||[],I);s(q),this._serverProcess=q,q.stderr.on("data",N=>this.outputChannel.append(Ke.string(N)?N:N.toString(e))),q.stdout.on("data",N=>this.outputChannel.append(Ke.string(N)?N:N.toString(e))),O.onConnected().then(N=>{y({reader:N[0],writer:N[1]})},R)},R)})}}else if(Uh.is(c)&&c.command){let h=c,p=c.args!==void 0?c.args.slice(0):[],v,y=c.transport;if(y===Ze.stdio)p.push("--stdio");else if(y===Ze.pipe)v=(0,Je.generateRandomPipeName)(),p.push(`--pipe=${v}`);else if(zr.isSocket(y))p.push(`--socket=${y.port}`);else if(y===Ze.ipc)throw new Error("Transport kind ipc is not support for command executable");let R=Object.assign({},h.options);if(R.cwd=R.cwd||d,y===void 0||y===Ze.stdio){let E=yr.spawn(h.command,p,R);return!E||!E.pid?io(E,`Launching server using command ${h.command} failed.`):(E.stderr.on("data",I=>this.outputChannel.append(Ke.string(I)?I:I.toString(e))),this._serverProcess=E,this._isDetached=!!R.detached,Promise.resolve({reader:new Je.StreamMessageReader(E.stdout),writer:new Je.StreamMessageWriter(E.stdin)}))}else{if(y===Ze.pipe)return(0,Je.createClientPipeTransport)(v).then(E=>{let I=yr.spawn(h.command,p,R);return!I||!I.pid?io(I,`Launching server using command ${h.command} failed.`):(this._serverProcess=I,this._isDetached=!!R.detached,I.stderr.on("data",O=>this.outputChannel.append(Ke.string(O)?O:O.toString(e))),I.stdout.on("data",O=>this.outputChannel.append(Ke.string(O)?O:O.toString(e))),E.onConnected().then(O=>({reader:O[0],writer:O[1]})))});if(zr.isSocket(y))return(0,Je.createClientSocketTransport)(y.port).then(E=>{let I=yr.spawn(h.command,p,R);return!I||!I.pid?io(I,`Launching server using command ${h.command} failed.`):(this._serverProcess=I,this._isDetached=!!R.detached,I.stderr.on("data",O=>this.outputChannel.append(Ke.string(O)?O:O.toString(e))),I.stdout.on("data",O=>this.outputChannel.append(Ke.string(O)?O:O.toString(e))),E.onConnected().then(O=>({reader:O[0],writer:O[1]})))})}}return Promise.reject(new Error("Unsupported server configuration "+JSON.stringify(a,null,4)))}).finally(()=>{this._serverProcess!==void 0&&this._serverProcess.on("exit",(d,h)=>{d!==null&&this.error(`Server process exited with code ${d}.`,void 0,!1),h!==null&&this.error(`Server process exited with signal ${h}.`,void 0,!1)})})}_getRuntimePath(e,t){if(Hh.isAbsolute(e))return e;let r=this._mainGetRootPath();if(r!==void 0){let i=Hh.join(r,e);if(jh.existsSync(i))return i}if(t!==void 0){let i=Hh.join(t,e);if(jh.existsSync(i))return i}return e}_mainGetRootPath(){let e=Wr.workspace.workspaceFolders;if(!e||e.length===0)return;let t=e[0];if(t.uri.scheme==="file")return t.uri.fsPath}_getServerWorkingDir(e){let t=e&&e.cwd;return t||(t=this.clientOptions.workspaceFolder?this.clientOptions.workspaceFolder.uri.fsPath:this._mainGetRootPath()),t?new Promise(r=>{jh.lstat(t,(i,o)=>{r(!i&&o.isDirectory()?t:void 0)})}):Promise.resolve(void 0)}};an.LanguageClient=Bh;var Kh=class{constructor(e,t){this._client=e,this._setting=t,this._listeners=[]}start(){return Wr.workspace.onDidChangeConfiguration(this.onDidChangeConfiguration,this,this._listeners),this.onDidChangeConfiguration(),new Wr.Disposable(()=>{this._client.needsStop()&&this._client.stop()})}onDidChangeConfiguration(){let e=this._setting.indexOf("."),t=e>=0?this._setting.substr(0,e):this._setting,r=e>=0?this._setting.substr(e+1):void 0,i=r?Wr.workspace.getConfiguration(t).get(r,!1):Wr.workspace.getConfiguration(t);i&&this._client.needsStart()?this._client.start().catch(o=>this._client.error("Start failed after configuration change",o,"force")):!i&&this._client.needsStop()&&this._client.stop().catch(o=>this._client.error("Stop failed after configuration change",o,"force"))}};an.SettingMonitor=Kh;function io(n,e){return n===null?Promise.reject(e):new Promise((t,r)=>{n.on("error",i=>{r(`${e} ${i}`)}),setImmediate(()=>r(e))})}});var OC=k((Gk,MC)=>{"use strict";MC.exports=FC()});var fx={};GC(fx,{ColorizeContext:()=>yc,activate:()=>ux,canColorize:()=>$C,cleanDecorationList:()=>ox,colorize:()=>bc,config:()=>It,deactivate:()=>dx,extension:()=>U,generateDecorations:()=>Es,q:()=>Vr,removeDuplicateDecorations:()=>Ts,updateContextDecorations:()=>Ss});module.exports=XC(fx);var dt=require("vscode");var hi=class{strategies;enabledStrategies=[];constructor(){this.strategies=[]}enableStrategies(e){this.enabledStrategies=this.strategies.filter(t=>{if(e.find(r=>r===t.name)){let r=t.constructor;return new r}})}registerStrategy(e){this.has(e)||this.strategies.push(e)}has(e){return typeof e=="string"?this.strategies.some(t=>t.name===e):this.strategies.some(t=>t.name===e.name)}get(e){if(this.has(e)!==!1)return this.strategies.find(t=>t.name===e)}};var wc=class extends hi{async extract(e){let t=await Promise.all(this.enabledStrategies.map(r=>r.extractColors(e)));return gi(t)}extractOneColor(e){return this.enabledStrategies.map(r=>r.extractColor(e)).find(r=>r!==null)}},YC=new wc,gt=YC;var zt=class{constructor(e,t,r,i){this.name=e;this.REGEXP=t;this.REGEXP_ONE=r;this.colorFromRegexp=i}extractColors(e){return Promise.resolve(e.map(({line:t,text:r})=>{let i=null,o=[];for(;(i=this.REGEXP.exec(r))!==null;){let s=this.colorFromRegexp(i);s&&o.push(s)}return{line:t,colors:o}}))}extractColor(e){let t=this.REGEXP_ONE.exec(e);return t?this.colorFromRegexp(t):null}};var ge="(?:$|`|\"|'|,| |;|\\)|\\r|\\n|}|\\]|<)",Ft="(?:\\.\\d+)",pi=`(?:1(:?\\.0+)?|0${Ft}?|${Ft})`,Zt="[\\da-f]";var Dc=class{value;rgb;alpha;positionInText;constructor(e,t=0,r,i){this.value=e,this.positionInText=t,this.alpha=i??1,this.rgb=r}toRgbString(){return this.alpha===-1?this.value:`rgb(${this.rgb.join(", ")})`}toRgbaString(){return this.alpha===-1?this.value:`rgba(${this.rgb.join(", ")}, ${this.alpha})`}},Ct=Dc;var Qh="(?:#|0x)",JC=new RegExp(`(${Qh}(?:${Zt}{3,4}|${Zt}{6}|${Zt}{8}))${ge}`,"gi"),ZC=new RegExp(`^(${Qh}(?:${Zt}{3,4}|${Zt}{6}|${Zt}{8}))${ge}`,"i");function QC(n){let e=n.slice(0,6);if(n.length===3||n.length===4){let t=n.slice(0,3);e=[t[0],t[0],t[1],t[1],t[2],t[2]]}return[16*e[0]+e[1],16*e[2]+e[3],16*e[4]+e[5]]}function e2(n){if(n.length===4){let e=n[3];return(16*e+e)/255}if(n.length===8){let e=n.slice(6,8);return(16*e[0]+e[1])/255}return 1}function t2(n){return/(?:#|0x)(.+)/gi.exec(n)}function n2(n){return n.split("").map(e=>parseInt(e,16))}function r2(n){let e=n[1],t=t2(e)[1],r=n2(t),i=QC(r),o=e2(r);return new Ct(e,n.index,i,o)}var i2=new zt("HEXA",JC,ZC,r2);gt.registerStrategy(i2);var eg="(?:#|0x)",o2=new RegExp(`(${eg}(?:${Zt}{3,4}|${Zt}{6}|${Zt}{8}))${ge}`,"gi"),s2=new RegExp(`^(${eg}(?:${Zt}{3,4}|${Zt}{6}|${Zt}{8}))${ge}`,"i");function a2(n){let e=n.slice(-6);if(n.length===3||n.length===4){let t=n.slice(-3);e=[t[0],t[0],t[1],t[1],t[2],t[2]]}return[16*e[0]+e[1],16*e[2]+e[3],16*e[4]+e[5]]}function c2(n){if(n.length===4){let e=n[0];return(16*e+e)/255}if(n.length===8){let e=n.slice(0,2);return(16*e[0]+e[1])/255}return 1}function u2(n){return/(?:#|0x)(.+)/gi.exec(n)}function l2(n){return n.split("").map(e=>parseInt(e,16))}function d2(n){let e=n[1],t=u2(e)[1],r=l2(t),i=a2(r),o=c2(r);return new Ct(e,n.index,i,o)}var f2=new zt("ARGB",o2,s2,d2);gt.registerStrategy(f2);var oo=`(?:\\d{1,3}${Ft}?|${Ft})`,Rc=oo,_c=oo,tg=`rgba?\\(\\s*${oo}%?\\s*${Rc}%?\\s*${_c}%?(?:\\s*\\/\\s*(?:\\d{1,3}${Ft}?|${pi})?%?)?\\)`,ng=`rgb\\(\\s*${oo}\\s*,\\s*${Rc}\\s*,\\s*${_c}\\s*\\)`,rg=`rgba\\(\\s*${oo}\\s*,\\s*${Rc}\\s*,\\s*${_c}\\s*,\\s*${pi}\\s*\\)`,h2=new RegExp(`(${ng}|${rg}|${tg})${ge}`,"gi"),g2=new RegExp(`^(${ng}|${rg}|${tg})${ge}`,"i");function p2(n){let t=n.replace(/rgb(a){0,1}\(/,"").replace(/\)/,"").replace("/"," ").replaceAll(","," ").split(/\s+/),[r,i,o]=t.slice(0,3).map(c=>{let u=parseFloat(c);return c.includes("%")?255*(u>100?100:u)/100:u}),s=/%/.test(t[3]),a=parseFloat(t[3]??1);return!s&&a>1&&(a=1),s&&a>100&&(a=1),a>1&&(a=a/100),[r,i,o,a]}function m2(n){let e=n[1],t=p2(e),r=t[3]??1,i=t.slice(0,3);return i.every(o=>o<=255)?new Ct(n[1],n.index,i,r):null}var y2=new zt("RGB",h2,g2,m2);gt.registerStrategy(y2);var Sc={aliceblue:{value:"#F0F8FF",rgb:[240,248,255],luminace:1},antiquewhite:{value:"#FAEBD7",rgb:[250,235,215],luminace:1},aqua:{value:"#00FFFF",rgb:[0,255,255],luminace:1},aquamarine:{value:"#7FFFD4",rgb:[127,255,212],luminace:1},azure:{value:"#F0FFFF",rgb:[240,255,255],luminace:1},beige:{value:"#F5F5DC",rgb:[245,245,220],luminace:1},bisque:{value:"#FFE4C4",rgb:[255,228,196],luminace:1},black:{value:"#000000",rgb:[0,0,0],luminace:1},blanchedalmond:{value:"#FFEBCD",rgb:[255,235,205],luminace:1},blue:{value:"#0000FF",rgb:[0,0,255],luminace:1},blueviolet:{value:"#8A2BE2",rgb:[138,43,226],luminace:1},brown:{value:"#A52A2A",rgb:[165,42,42],luminace:1},burlywood:{value:"#DEB887",rgb:[222,184,135],luminace:1},cadetblue:{value:"#5F9EA0",rgb:[95,158,160],luminace:1},chartreuse:{value:"#7FFF00",rgb:[127,255,0],luminace:1},chocolate:{value:"#D2691E",rgb:[210,105,30],luminace:1},coral:{value:"#FF7F50",rgb:[255,127,80],luminace:1},cornflowerblue:{value:"#6495ED",rgb:[100,149,237],luminace:1},cornsilk:{value:"#FFF8DC",rgb:[255,248,220],luminace:1},crimson:{value:"#DC143C",rgb:[220,20,60],luminace:1},cyan:{value:"#00FFFF",rgb:[0,255,255],luminace:1},darkblue:{value:"#00008B",rgb:[0,0,139],luminace:1},darkcyan:{value:"#008B8B",rgb:[0,139,139],luminace:1},darkgoldenrod:{value:"#B8860B",rgb:[184,134,11],luminace:1},darkgray:{value:"#A9A9A9",rgb:[169,169,169],luminace:1},darkgrey:{value:"#A9A9A9",rgb:[169,169,169],luminace:1},darkgreen:{value:"#006400",rgb:[0,100,0],luminace:1},darkkhaki:{value:"#BDB76B",rgb:[189,183,107],luminace:1},darkmagenta:{value:"#8B008B",rgb:[139,0,139],luminace:1},darkolivegreen:{value:"#556B2F",rgb:[85,107,47],luminace:1},darkorange:{value:"#FF8C00",rgb:[255,140,0],luminace:1},darkorchid:{value:"#9932CC",rgb:[153,50,204],luminace:1},darkred:{value:"#8B0000",rgb:[139,0,0],luminace:1},darksalmon:{value:"#E9967A",rgb:[233,150,122],luminace:1},darkseagreen:{value:"#8FBC8F",rgb:[143,188,143],luminace:1},darkslateblue:{value:"#483D8B",rgb:[72,61,139],luminace:1},darkslategray:{value:"#2F4F4F",rgb:[47,79,79],luminace:1},darkslategrey:{value:"#2F4F4F",rgb:[47,79,79],luminace:1},darkturquoise:{value:"#00CED1",rgb:[0,206,209],luminace:1},darkviolet:{value:"#9400D3",rgb:[148,0,211],luminace:1},deeppink:{value:"#FF1493",rgb:[255,20,147],luminace:1},deepskyblue:{value:"#00BFFF",rgb:[0,191,255],luminace:1},dimgray:{value:"#696969",rgb:[105,105,105],luminace:1},dimgrey:{value:"#696969",rgb:[105,105,105],luminace:1},dodgerblue:{value:"#1E90FF",rgb:[30,144,255],luminace:1},firebrick:{value:"#B22222",rgb:[178,34,34],luminace:1},floralwhite:{value:"#FFFAF0",rgb:[255,250,240],luminace:1},forestgreen:{value:"#228B22",rgb:[34,139,34],luminace:1},fuchsia:{value:"#FF00FF",rgb:[255,0,255],luminace:1},gainsboro:{value:"#DCDCDC",rgb:[220,220,220],luminace:1},ghostwhite:{value:"#F8F8FF",rgb:[248,248,255],luminace:1},gold:{value:"#FFD700",rgb:[255,215,0],luminace:1},goldenrod:{value:"#DAA520",rgb:[218,165,32],luminace:1},gray:{value:"#808080",rgb:[128,128,128],luminace:1},grey:{value:"#808080",rgb:[128,128,128],luminace:1},green:{value:"#008000",rgb:[0,128,0],luminace:1},greenyellow:{value:"#ADFF2F",rgb:[173,255,47],luminace:1},honeydew:{value:"#F0FFF0",rgb:[240,255,240],luminace:1},hotpink:{value:"#FF69B4",rgb:[255,105,180],luminace:1},indianred:{value:"#CD5C5C",rgb:[205,92,92],luminace:1},indigo:{value:"#4B0082",rgb:[75,0,130],luminace:1},ivory:{value:"#FFFFF0",rgb:[255,255,240],luminace:1},khaki:{value:"#F0E68C",rgb:[240,230,140],luminace:1},lavender:{value:"#E6E6FA",rgb:[230,230,250],luminace:1},lavenderblush:{value:"#FFF0F5",rgb:[255,240,245],luminace:1},lawngreen:{value:"#7CFC00",rgb:[124,252,0],luminace:1},lemonchiffon:{value:"#FFFACD",rgb:[255,250,205],luminace:1},lightblue:{value:"#ADD8E6",rgb:[173,216,230],luminace:1},lightcoral:{value:"#F08080",rgb:[240,128,128],luminace:1},lightcyan:{value:"#E0FFFF",rgb:[224,255,255],luminace:1},lightgoldenrodyellow:{value:"#FAFAD2",rgb:[250,250,210],luminace:1},lightgray:{value:"#D3D3D3",rgb:[211,211,211],luminace:1},lightgrey:{value:"#D3D3D3",rgb:[211,211,211],luminace:1},lightgreen:{value:"#90EE90",rgb:[144,238,144],luminace:1},lightpink:{value:"#FFB6C1",rgb:[255,182,193],luminace:1},lightsalmon:{value:"#FFA07A",rgb:[255,160,122],luminace:1},lightseagreen:{value:"#20B2AA",rgb:[32,178,170],luminace:1},lightskyblue:{value:"#87CEFA",rgb:[135,206,250],luminace:1},lightslategray:{value:"#778899",rgb:[119,136,153],luminace:1},lightslategrey:{value:"#778899",rgb:[119,136,153],luminace:1},lightsteelblue:{value:"#B0C4DE",rgb:[176,196,222],luminace:1},lightyellow:{value:"#FFFFE0",rgb:[255,255,224],luminace:1},lime:{value:"#00FF00",rgb:[0,255,0],luminace:1},limegreen:{value:"#32CD32",rgb:[50,205,50],luminace:1},linen:{value:"#FAF0E6",rgb:[250,240,230],luminace:1},magenta:{value:"#FF00FF",rgb:[255,0,255],luminace:1},maroon:{value:"#800000",rgb:[128,0,0],luminace:1},mediumaquamarine:{value:"#66CDAA",rgb:[102,205,170],luminace:1},mediumblue:{value:"#0000CD",rgb:[0,0,205],luminace:1},mediumorchid:{value:"#BA55D3",rgb:[186,85,211],luminace:1},mediumpurple:{value:"#9370DB",rgb:[147,112,219],luminace:1},mediumseagreen:{value:"#3CB371",rgb:[60,179,113],luminace:1},mediumslateblue:{value:"#7B68EE",rgb:[123,104,238],luminace:1},mediumspringgreen:{value:"#00FA9A",rgb:[0,250,154],luminace:1},mediumturquoise:{value:"#48D1CC",rgb:[72,209,204],luminace:1},mediumvioletred:{value:"#C71585",rgb:[199,21,133],luminace:1},midnightblue:{value:"#191970",rgb:[25,25,112],luminace:1},mintcream:{value:"#F5FFFA",rgb:[245,255,250],luminace:1},mistyrose:{value:"#FFE4E1",rgb:[255,228,225],luminace:1},moccasin:{value:"#FFE4B5",rgb:[255,228,181],luminace:1},navajowhite:{value:"#FFDEAD",rgb:[255,222,173],luminace:1},navy:{value:"#000080",rgb:[0,0,128],luminace:1},oldlace:{value:"#FDF5E6",rgb:[253,245,230],luminace:1},olive:{value:"#808000",rgb:[128,128,0],luminace:1},olivedrab:{value:"#6B8E23",rgb:[107,142,35],luminace:1},orange:{value:"#FFA500",rgb:[255,165,0],luminace:1},orangered:{value:"#FF4500",rgb:[255,69,0],luminace:1},orchid:{value:"#DA70D6",rgb:[218,112,214],luminace:1},palegoldenrod:{value:"#EEE8AA",rgb:[238,232,170],luminace:1},palegreen:{value:"#98FB98",rgb:[152,251,152],luminace:1},paleturquoise:{value:"#AFEEEE",rgb:[175,238,238],luminace:1},palevioletred:{value:"#DB7093",rgb:[219,112,147],luminace:1},papayawhip:{value:"#FFEFD5",rgb:[255,239,213],luminace:1},peachpuff:{value:"#FFDAB9",rgb:[255,218,185],luminace:1},peru:{value:"#CD853F",rgb:[205,133,63],luminace:1},pink:{value:"#FFC0CB",rgb:[255,192,203],luminace:1},plum:{value:"#DDA0DD",rgb:[221,160,221],luminace:1},powderblue:{value:"#B0E0E6",rgb:[176,224,230],luminace:1},purple:{value:"#800080",rgb:[128,0,128],luminace:1},rebeccapurple:{value:"#663399",rgb:[102,51,153],luminace:1},red:{value:"#FF0000",rgb:[255,0,0],luminace:1},rosybrown:{value:"#BC8F8F",rgb:[188,143,143],luminace:1},royalblue:{value:"#4169E1",rgb:[65,105,225],luminace:1},saddlebrown:{value:"#8B4513",rgb:[139,69,19],luminace:1},salmon:{value:"#FA8072",rgb:[250,128,114],luminace:1},sandybrown:{value:"#F4A460",rgb:[244,164,96],luminace:1},seagreen:{value:"#2E8B57",rgb:[46,139,87],luminace:1},seashell:{value:"#FFF5EE",rgb:[255,245,238],luminace:1},sienna:{value:"#A0522D",rgb:[160,82,45],luminace:1},silver:{value:"#C0C0C0",rgb:[192,192,192],luminace:1},skyblue:{value:"#87CEEB",rgb:[135,206,235],luminace:1},slateblue:{value:"#6A5ACD",rgb:[106,90,205],luminace:1},slategray:{value:"#708090",rgb:[112,128,144],luminace:1},slategrey:{value:"#708090",rgb:[112,128,144],luminace:1},snow:{value:"#FFFAFA",rgb:[255,250,250],luminace:1},springgreen:{value:"#00FF7F",rgb:[0,255,127],luminace:1},steelblue:{value:"#4682B4",rgb:[70,130,180],luminace:1},tan:{value:"#D2B48C",rgb:[210,180,140],luminace:1},teal:{value:"#008080",rgb:[0,128,128],luminace:1},thistle:{value:"#D8BFD8",rgb:[216,191,216],luminace:1},tomato:{value:"#FF6347",rgb:[255,99,71],luminace:1},turquoise:{value:"#40E0D0",rgb:[64,224,208],luminace:1},violet:{value:"#EE82EE",rgb:[238,130,238],luminace:1},wheat:{value:"#F5DEB3",rgb:[245,222,179],luminace:1},white:{value:"#FFFFFF",rgb:[255,255,255],luminace:1},whitesmoke:{value:"#F5F5F5",rgb:[245,245,245],luminace:1},yellow:{value:"#FFFF00",rgb:[255,255,0],luminace:1},yellowgreen:{value:"#9ACD32",rgb:[154,205,50],luminace:1}},ig=Object.keys(Sc).map(n=>`(?:${n.toLowerCase()})`).join("|"),b2=RegExp(`(?:,| |'|"|\\(|:)(${ig})${ge}`,"i"),v2=RegExp(`^(?:^|,|\\s|\\(|:)(${ig})${ge}`,"i"),Tc=class{name="BROWSERS_COLORS";extractColors(e){return Promise.resolve(e.map(({line:t,text:r})=>{let i=null,o=[],s=0;for(;(i=r.match(b2))!==null;){s+=(i.index??0)+1;let a=i[1];o.push(new Ct(i[1],s,Sc[a.toLowerCase()].rgb)),r=r.slice((i.index??0)+1+i[1].length),s+=i[1].length}return{line:t,colors:o}}))}extractColor(e){let t=e.match(v2);if(t){let r=t[1];return new Ct(t[1],t.index,Sc[r.toLowerCase()].rgb)}return null}};gt.registerStrategy(new Tc);var Ec=`\\d*${Ft}?`,so=`(?:\\d{1,3}${Ft}?|${Ft})`,xc=so,C2=`([ ,]\\s*${pi}\\s*|\\s*\\/\\s*${so}%?\\s*)?`,og=`hsla?\\(\\s*${Ec}(deg|turn)?\\s*\\s*${so}%?\\s*\\s*${xc}%?\\s*${C2}\\)`,sg=`hsl\\(\\s*${Ec}\\s*,\\s*${so}%\\s*,\\s*${xc}%\\s*\\)`,ag=`hsla\\(\\s*${Ec}\\s*,\\s*${so}%\\s*,\\s*${xc}%\\s*,\\s*${pi}\\s*\\)`,w2=new RegExp(`(${sg}|${ag}|${og})${ge}`,"gi"),D2=new RegExp(`^(${sg}|${ag}|${og})${ge}`,"i");function R2(n){let e=n.replace(/hsl(a){0,1}\(/,"").replace(/\)/,"").replace("/"," ").replaceAll(","," ").split(/\s+/),t=parseFloat(e[0]);/turn/.test(e[0])&&(t=t%1*360);let[r,i]=e.slice(1,3).map(parseFloat),o=/%/.test(e[3]),s=parseFloat(e[3]??1);return!o&&s>1&&(s=1),o&&s>100&&(s=1),s>1&&(s=s/100),[t,r,i,s]}function _2(n){let e=n[1],[t,r,i,o]=R2(e);if(r<=100&&i<=100){let[s,a,c]=cg(t,r,i,o);return new Ct(n[1],n.index,[s,a,c],o)}return null}var S2=new zt("HSL",w2,D2,_2);gt.registerStrategy(S2);function We(n,e){let t=n.length;Array.isArray(n[0])||(n=[n]),Array.isArray(e[0])||(e=e.map(s=>[s]));let r=e[0].length,i=e[0].map((s,a)=>e.map(c=>c[a])),o=n.map(s=>i.map(a=>{let c=0;if(!Array.isArray(s)){for(let u of a)c+=s*u;return c}for(let u=0;u<s.length;u++)c+=s[u]*(a[u]||0);return c}));return t===1&&(o=o[0]),r===1?o.map(s=>s[0]):o}function ho(n){return Dr(n)==="string"}function Dr(n){return(Object.prototype.toString.call(n).match(/^\[object\s+(.*?)\]$/)[1]||"").toLowerCase()}function ps(n,{precision:e,unit:t}){return Rr(n)?"none":sp(n,e)+(t??"")}function Rr(n){return Number.isNaN(n)||n instanceof Number&&n?.none}function at(n){return Rr(n)?0:n}function sp(n,e){if(n===0)return 0;let t=~~n,r=0;t&&e&&(r=~~Math.log10(Math.abs(t))+1);let i=10**(e-r);return Math.floor(n*i+.5)/i}var T2={deg:1,grad:.9,rad:180/Math.PI,turn:360};function ap(n){if(!n)return;n=n.trim();let e=/^([a-z]+)\((.+?)\)$/i,t=/^-?[\d.]+$/,r=/%|deg|g?rad|turn$/,i=/\/?\s*(none|[-\w.]+(?:%|deg|g?rad|turn)?)/g,o=n.match(e);if(o){let s=[];return o[2].replace(i,(a,c)=>{let u=c.match(r),d=c;if(u){let h=u[0],p=d.slice(0,-h.length);h==="%"?(d=new Number(p/100),d.type="<percentage>"):(d=new Number(p*T2[h]),d.type="<angle>",d.unit=h)}else t.test(d)?(d=new Number(d),d.type="<number>"):d==="none"&&(d=new Number(NaN),d.none=!0);a.startsWith("/")&&(d=d instanceof Number?d:new Number(d),d.alpha=!0),typeof d=="object"&&d instanceof Number&&(d.raw=c),s.push(d)}),{name:o[1].toLowerCase(),rawName:o[1],rawArgs:o[2],args:s}}}function cp(n){return n[n.length-1]}function uo(n,e,t){return isNaN(n)?e:isNaN(e)?n:n+(e-n)*t}function up(n,e,t){return(t-n)/(e-n)}function Gc(n,e,t){return uo(e[0],e[1],up(n[0],n[1],t))}function lp(n){return n.map(e=>e.split("|").map(t=>{t=t.trim();let r=t.match(/^(<[a-z]+>)\[(-?[.\d]+),\s*(-?[.\d]+)\]?$/);if(r){let i=new String(r[1]);return i.range=[+r[2],+r[3]],i}return t}))}function dp(n,e,t){return Math.max(Math.min(t,e),n)}function vs(n,e){return Math.sign(n)===Math.sign(e)?n:-n}function Zn(n,e){return vs(Math.abs(n)**e,n)}function Xc(n,e){return e===0?0:n/e}function fp(n,e,t=0,r=n.length){for(;t<r;){let i=t+r>>1;n[i]<e?t=i+1:r=i}return t}var E2=Object.freeze({__proto__:null,bisectLeft:fp,clamp:dp,copySign:vs,interpolate:uo,interpolateInv:up,isNone:Rr,isString:ho,last:cp,mapRange:Gc,multiplyMatrices:We,parseCoordGrammar:lp,parseFunction:ap,serializeNumber:ps,skipNone:at,spow:Zn,toPrecision:sp,type:Dr,zdiv:Xc}),$c=class{add(e,t,r){if(typeof arguments[0]!="string"){for(var e in arguments[0])this.add(e,arguments[0][e],arguments[1]);return}(Array.isArray(e)?e:[e]).forEach(function(i){this[i]=this[i]||[],t&&this[i][r?"unshift":"push"](t)},this)}run(e,t){this[e]=this[e]||[],this[e].forEach(function(r){r.call(t&&t.context?t.context:t,t)})}},_r=new $c,fn={gamut_mapping:"css",precision:5,deltaE:"76",verbose:globalThis?.process?.env?.NODE_ENV?.toLowerCase()!=="test",warn:function(e){this.verbose&&globalThis?.console?.warn?.(e)}},Wt={D50:[.3457/.3585,1,(1-.3457-.3585)/.3585],D65:[.3127/.329,1,(1-.3127-.329)/.329]};function jc(n){return Array.isArray(n)?n:Wt[n]}function ms(n,e,t,r={}){if(n=jc(n),e=jc(e),!n||!e)throw new TypeError(`Missing white point to convert ${n?"":"from"}${!n&&!e?"/":""}${e?"":"to"}`);if(n===e)return t;let i={W1:n,W2:e,XYZ:t,options:r};if(_r.run("chromatic-adaptation-start",i),i.M||(i.W1===Wt.D65&&i.W2===Wt.D50?i.M=[[1.0479297925449969,.022946870601609652,-.05019226628920524],[.02962780877005599,.9904344267538799,-.017073799063418826],[-.009243040646204504,.015055191490298152,.7518742814281371]]:i.W1===Wt.D50&&i.W2===Wt.D65&&(i.M=[[.955473421488075,-.02309845494876471,.06325924320057072],[-.0283697093338637,1.0099953980813041,.021041441191917323],[.012314014864481998,-.020507649298898964,1.330365926242124]])),_r.run("chromatic-adaptation-end",i),i.M)return We(i.M,i.XYZ);throw new TypeError("Only Bradford CAT with white points D50 and D65 supported for now.")}var x2=new Set(["<number>","<percentage>","<angle>"]);function ug(n,e,t,r){return Object.entries(n.coords).map(([o,s],a)=>{let c=e.coordGrammar[a],u=r[a],d=u?.type,h;if(u.none?h=c.find(y=>x2.has(y)):h=c.find(y=>y==d),!h){let y=s.name||o;throw new TypeError(`${d??u.raw} not allowed for ${y} in ${t}()`)}let p=h.range;d==="<percentage>"&&(p||=[0,1]);let v=s.range||s.refRange;return p&&v&&(r[a]=Gc(p,v,r[a])),h})}function hp(n,{meta:e}={}){let t={str:String(n)?.trim()};if(_r.run("parse-start",t),t.color)return t.color;if(t.parsed=ap(t.str),t.parsed){let r=t.parsed.name;if(r==="color"){let i=t.parsed.args.shift(),o=i.startsWith("--")?i.substring(2):`--${i}`,s=[i,o],a=t.parsed.rawArgs.indexOf("/")>0?t.parsed.args.pop():1;for(let d of Z.all){let h=d.getFormat("color");if(h&&(s.includes(h.id)||h.ids?.filter(p=>s.includes(p)).length)){let p=Object.keys(d.coords).map((y,R)=>t.parsed.args[R]||0),v;return h.coordGrammar&&(v=ug(d,h,"color",p)),e&&Object.assign(e,{formatId:"color",types:v}),h.id.startsWith("--")&&!i.startsWith("--")&&fn.warn(`${d.name} is a non-standard space and not currently supported in the CSS spec. Use prefixed color(${h.id}) instead of color(${i}).`),i.startsWith("--")&&!h.id.startsWith("--")&&fn.warn(`${d.name} is a standard space and supported in the CSS spec. Use color(${h.id}) instead of prefixed color(${i}).`),{spaceId:d.id,coords:p,alpha:a}}}let c="",u=i in Z.registry?i:o;if(u in Z.registry){let d=Z.registry[u].formats?.color?.id;d&&(c=`Did you mean color(${d})?`)}throw new TypeError(`Cannot parse color(${i}). `+(c||"Missing a plugin?"))}else for(let i of Z.all){let o=i.getFormat(r);if(o&&o.type==="function"){let s=1;(o.lastAlpha||cp(t.parsed.args).alpha)&&(s=t.parsed.args.pop());let a=t.parsed.args,c;return o.coordGrammar&&(c=ug(i,o,r,a)),e&&Object.assign(e,{formatId:o.name,types:c}),{spaceId:i.id,coords:a,alpha:s}}}}else for(let r of Z.all)for(let i in r.formats){let o=r.formats[i];if(o.type!=="custom"||o.test&&!o.test(t.str))continue;let s=o.parse(t.str);if(s)return s.alpha??=1,e&&(e.formatId=i),s}throw new TypeError(`Could not parse ${n} as a color. Missing a plugin?`)}function de(n){if(Array.isArray(n))return n.map(de);if(!n)throw new TypeError("Empty color reference");ho(n)&&(n=hp(n));let e=n.space||n.spaceId;return e instanceof Z||(n.space=Z.get(e)),n.alpha===void 0&&(n.alpha=1),n}var P2=75e-6,Z=class n{constructor(e){this.id=e.id,this.name=e.name,this.base=e.base?n.get(e.base):null,this.aliases=e.aliases,this.base&&(this.fromBase=e.fromBase,this.toBase=e.toBase);let t=e.coords??this.base.coords;for(let i in t)"name"in t[i]||(t[i].name=i);this.coords=t;let r=e.white??this.base.white??"D65";this.white=jc(r),this.formats=e.formats??{};for(let i in this.formats){let o=this.formats[i];o.type||="function",o.name||=i}this.formats.color?.id||(this.formats.color={...this.formats.color??{},id:e.cssId||this.id}),e.gamutSpace?this.gamutSpace=e.gamutSpace==="self"?this:n.get(e.gamutSpace):this.isPolar?this.gamutSpace=this.base:this.gamutSpace=this,this.gamutSpace.isUnbounded&&(this.inGamut=(i,o)=>!0),this.referred=e.referred,Object.defineProperty(this,"path",{value:q2(this).reverse(),writable:!1,enumerable:!0,configurable:!0}),_r.run("colorspace-init-end",this)}inGamut(e,{epsilon:t=P2}={}){if(!this.equals(this.gamutSpace))return e=this.to(this.gamutSpace,e),this.gamutSpace.inGamut(e,{epsilon:t});let r=Object.values(this.coords);return e.every((i,o)=>{let s=r[o];if(s.type!=="angle"&&s.range){if(Number.isNaN(i))return!0;let[a,c]=s.range;return(a===void 0||i>=a-t)&&(c===void 0||i<=c+t)}return!0})}get isUnbounded(){return Object.values(this.coords).every(e=>!("range"in e))}get cssId(){return this.formats?.color?.id||this.id}get isPolar(){for(let e in this.coords)if(this.coords[e].type==="angle")return!0;return!1}getFormat(e){if(typeof e=="object")return e=lg(e,this),e;let t;return e==="default"?t=Object.values(this.formats)[0]:t=this.formats[e],t?(t=lg(t,this),t):null}equals(e){return e?this===e||this.id===e||this.id===e.id:!1}to(e,t){if(arguments.length===1){let a=de(e);[e,t]=[a.space,a.coords]}if(e=n.get(e),this.equals(e))return t;t=t.map(a=>Number.isNaN(a)?0:a);let r=this.path,i=e.path,o,s;for(let a=0;a<r.length&&r[a].equals(i[a]);a++)o=r[a],s=a;if(!o)throw new Error(`Cannot convert between color spaces ${this} and ${e}: no connection space was found`);for(let a=r.length-1;a>s;a--)t=r[a].toBase(t);for(let a=s+1;a<i.length;a++)t=i[a].fromBase(t);return t}from(e,t){if(arguments.length===1){let r=de(e);[e,t]=[r.space,r.coords]}return e=n.get(e),e.to(this,t)}toString(){return`${this.name} (${this.id})`}getMinCoords(){let e=[];for(let t in this.coords){let r=this.coords[t],i=r.range||r.refRange;e.push(i?.min??0)}return e}static registry={};static get all(){return[...new Set(Object.values(n.registry))]}static register(e,t){if(arguments.length===1&&(t=arguments[0],e=t.id),t=this.get(t),this.registry[e]&&this.registry[e]!==t)throw new Error(`Duplicate color space registration: '${e}'`);if(this.registry[e]=t,arguments.length===1&&t.aliases)for(let r of t.aliases)this.register(r,t);return t}static get(e,...t){if(!e||e instanceof n)return e;if(Dr(e)==="string"){let i=n.registry[e.toLowerCase()];if(!i)throw new TypeError(`No color space found with id = "${e}"`);return i}if(t.length)return n.get(...t);throw new TypeError(`${e} is not a valid color space`)}static resolveCoord(e,t){let r=Dr(e),i,o;if(r==="string"?e.includes(".")?[i,o]=e.split("."):[i,o]=[,e]:Array.isArray(e)?[i,o]=e:(i=e.space,o=e.coordId),i=n.get(i),i||(i=t),!i)throw new TypeError(`Cannot resolve coordinate reference ${e}: No color space specified and relative references are not allowed here`);if(r=Dr(o),r==="number"||r==="string"&&o>=0){let c=Object.entries(i.coords)[o];if(c)return{space:i,id:c[0],index:o,...c[1]}}i=n.get(i);let s=o.toLowerCase(),a=0;for(let c in i.coords){let u=i.coords[c];if(c.toLowerCase()===s||u.name?.toLowerCase()===s)return{space:i,id:c,index:a,...u};a++}throw new TypeError(`No "${o}" coordinate found in ${i.name}. Its coordinates are: ${Object.keys(i.coords).join(", ")}`)}static DEFAULT_FORMAT={type:"functions",name:"color"}};function q2(n){let e=[n];for(let t=n;t=t.base;)e.push(t);return e}function lg(n,{coords:e}={}){if(n.coords&&!n.coordGrammar){n.type||="function",n.name||="color",n.coordGrammar=lp(n.coords);let t=Object.entries(e).map(([r,i],o)=>{let s=n.coordGrammar[o][0],a=i.range||i.refRange,c=s.range,u="";return s=="<percentage>"?(c=[0,100],u="%"):s=="<angle>"&&(u="deg"),{fromRange:a,toRange:c,suffix:u}});n.serializeCoords=(r,i)=>r.map((o,s)=>{let{fromRange:a,toRange:c,suffix:u}=t[s];return a&&c&&(o=Gc(a,c,o)),o=ps(o,{precision:i,unit:u}),o})}return n}var Et=new Z({id:"xyz-d65",name:"XYZ D65",coords:{x:{name:"X"},y:{name:"Y"},z:{name:"Z"}},white:"D65",formats:{color:{ids:["xyz-d65","xyz"]}},aliases:["xyz"]}),Mt=class extends Z{constructor(e){e.coords||(e.coords={r:{range:[0,1],name:"Red"},g:{range:[0,1],name:"Green"},b:{range:[0,1],name:"Blue"}}),e.base||(e.base=Et),e.toXYZ_M&&e.fromXYZ_M&&(e.toBase??=t=>{let r=We(e.toXYZ_M,t);return this.white!==this.base.white&&(r=ms(this.white,this.base.white,r)),r},e.fromBase??=t=>(t=ms(this.base.white,this.white,t),We(e.fromXYZ_M,t))),e.referred??="display",super(e)}};function go(n,e){return n=de(n),!e||n.space.equals(e)?n.coords.slice():(e=Z.get(e),e.from(n))}function ln(n,e){n=de(n);let{space:t,index:r}=Z.resolveCoord(e,n.space);return go(n,t)[r]}function Yc(n,e,t){return n=de(n),e=Z.get(e),n.coords=e.to(n.space,t),n}Yc.returns="color";function ur(n,e,t){if(n=de(n),arguments.length===2&&Dr(arguments[1])==="object"){let r=arguments[1];for(let i in r)ur(n,i,r[i])}else{typeof t=="function"&&(t=t(ln(n,e)));let{space:r,index:i}=Z.resolveCoord(e,n.space),o=go(n,r);o[i]=t,Yc(n,r,o)}return n}ur.returns="color";var Jc=new Z({id:"xyz-d50",name:"XYZ D50",white:"D50",base:Et,fromBase:n=>ms(Et.white,"D50",n),toBase:n=>ms("D50",Et.white,n)}),I2=216/24389,dg=24/116,ss=24389/27,Pc=Wt.D50,dn=new Z({id:"lab",name:"Lab",coords:{l:{refRange:[0,100],name:"Lightness"},a:{refRange:[-125,125]},b:{refRange:[-125,125]}},white:Pc,base:Jc,fromBase(n){let t=n.map((r,i)=>r/Pc[i]).map(r=>r>I2?Math.cbrt(r):(ss*r+16)/116);return[116*t[1]-16,500*(t[0]-t[1]),200*(t[1]-t[2])]},toBase(n){let e=[];return e[1]=(n[0]+16)/116,e[0]=n[1]/500+e[1],e[2]=e[1]-n[2]/200,[e[0]>dg?Math.pow(e[0],3):(116*e[0]-16)/ss,n[0]>8?Math.pow((n[0]+16)/116,3):n[0]/ss,e[2]>dg?Math.pow(e[2],3):(116*e[2]-16)/ss].map((r,i)=>r*Pc[i])},formats:{lab:{coords:["<number> | <percentage>","<number> | <percentage>[-1,1]","<number> | <percentage>[-1,1]"]}}});function Qn(n){return(n%360+360)%360}function k2(n,e){if(n==="raw")return e;let[t,r]=e.map(Qn),i=r-t;return n==="increasing"?i<0&&(r+=360):n==="decreasing"?i>0&&(t+=360):n==="longer"?-180<i&&i<180&&(i>0?t+=360:r+=360):n==="shorter"&&(i>180?t+=360:i<-180&&(r+=360)),[t,r]}var lo=new Z({id:"lch",name:"LCH",coords:{l:{refRange:[0,100],name:"Lightness"},c:{refRange:[0,150],name:"Chroma"},h:{refRange:[0,360],type:"angle",name:"Hue"}},base:dn,fromBase(n){let[e,t,r]=n,i,o=.02;return Math.abs(t)<o&&Math.abs(r)<o?i=NaN:i=Math.atan2(r,t)*180/Math.PI,[e,Math.sqrt(t**2+r**2),Qn(i)]},toBase(n){let[e,t,r]=n;return t<0&&(t=0),isNaN(r)&&(r=0),[e,t*Math.cos(r*Math.PI/180),t*Math.sin(r*Math.PI/180)]},formats:{lch:{coords:["<number> | <percentage>","<number> | <percentage>","<number> | <angle>"]}}}),fg=25**7,ys=Math.PI,hg=180/ys,mi=ys/180;function gg(n){let e=n*n;return e*e*e*n}function gp(n,e,{kL:t=1,kC:r=1,kH:i=1}={}){[n,e]=de([n,e]);let[o,s,a]=dn.from(n),c=lo.from(dn,[o,s,a])[1],[u,d,h]=dn.from(e),p=lo.from(dn,[u,d,h])[1];c<0&&(c=0),p<0&&(p=0);let v=(c+p)/2,y=gg(v),R=.5*(1-Math.sqrt(y/(y+fg))),E=(1+R)*s,I=(1+R)*d,O=Math.sqrt(E**2+a**2),q=Math.sqrt(I**2+h**2),N=E===0&&a===0?0:Math.atan2(a,E),B=I===0&&h===0?0:Math.atan2(h,I);N<0&&(N+=2*ys),B<0&&(B+=2*ys),N*=hg,B*=hg;let se=u-o,V=q-O,J=B-N,ie=N+B,He=Math.abs(J),Ie;O*q===0?Ie=0:He<=180?Ie=J:J>180?Ie=J-360:J<-180?Ie=J+360:fn.warn("the unthinkable has happened");let Ge=2*Math.sqrt(q*O)*Math.sin(Ie*mi/2),Gt=(o+u)/2,ft=(O+q)/2,it=gg(ft),Oe;O*q===0?Oe=ie:He<=180?Oe=ie/2:ie<360?Oe=(ie+360)/2:Oe=(ie-360)/2;let Xt=(Gt-50)**2,vn=1+.015*Xt/Math.sqrt(20+Xt),Pe=1+.045*ft,ot=1;ot-=.17*Math.cos((Oe-30)*mi),ot+=.24*Math.cos(2*Oe*mi),ot+=.32*Math.cos((3*Oe+6)*mi),ot-=.2*Math.cos((4*Oe-63)*mi);let yt=1+.015*ft*ot,ht=30*Math.exp(-1*((Oe-275)/25)**2),Vn=2*Math.sqrt(it/(it+fg)),Cn=-1*Math.sin(2*ht*mi)*Vn,Ht=(se/(t*vn))**2;return Ht+=(V/(r*Pe))**2,Ht+=(Ge/(i*yt))**2,Ht+=Cn*(V/(r*Pe))*(Ge/(i*yt)),Math.sqrt(Ht)}var F2=[[.819022437996703,.3619062600528904,-.1288737815209879],[.0329836539323885,.9292868615863434,.0361446663506424],[.0481771893596242,.2642395317527308,.6335478284694309]],M2=[[1.2268798758459243,-.5578149944602171,.2813910456659647],[-.0405757452148008,1.112286803280317,-.0717110580655164],[-.0763729366746601,-.4214933324022432,1.5869240198367816]],O2=[[.210454268309314,.7936177747023054,-.0040720430116193],[1.9779985324311684,-2.42859224204858,.450593709617411],[.0259040424655478,.7827717124575296,-.8086757549230774]],L2=[[1,.3963377773761749,.2158037573099136],[1,-.1055613458156586,-.0638541728258133],[1,-.0894841775298119,-1.2914855480194092]],Ci=new Z({id:"oklab",name:"Oklab",coords:{l:{refRange:[0,1],name:"Lightness"},a:{refRange:[-.4,.4]},b:{refRange:[-.4,.4]}},white:"D65",base:Et,fromBase(n){let t=We(F2,n).map(r=>Math.cbrt(r));return We(O2,t)},toBase(n){let t=We(L2,n).map(r=>r**3);return We(M2,t)},formats:{oklab:{coords:["<percentage> | <number>","<number> | <percentage>[-1,1]","<number> | <percentage>[-1,1]"]}}});function Hc(n,e){[n,e]=de([n,e]);let[t,r,i]=Ci.from(n),[o,s,a]=Ci.from(e),c=t-o,u=r-s,d=i-a;return Math.sqrt(c**2+u**2+d**2)}var A2=75e-6;function Kr(n,e,{epsilon:t=A2}={}){n=de(n),e||(e=n.space),e=Z.get(e);let r=n.coords;return e!==n.space&&(r=e.from(n)),e.inGamut(r,{epsilon:t})}function wi(n){return{space:n.space,coords:n.coords.slice(),alpha:n.alpha}}function pp(n,e,t="lab"){t=Z.get(t);let r=t.from(n),i=t.from(e);return Math.sqrt(r.reduce((o,s,a)=>{let c=i[a];return isNaN(s)||isNaN(c)?o:o+(c-s)**2},0))}function N2(n,e){return pp(n,e,"lab")}var $2=Math.PI,pg=$2/180;function j2(n,e,{l:t=2,c:r=1}={}){[n,e]=de([n,e]);let[i,o,s]=dn.from(n),[,a,c]=lo.from(dn,[i,o,s]),[u,d,h]=dn.from(e),p=lo.from(dn,[u,d,h])[1];a<0&&(a=0),p<0&&(p=0);let v=i-u,y=a-p,R=o-d,E=s-h,I=R**2+E**2-y**2,O=.511;i>=16&&(O=.040975*i/(1+.01765*i));let q=.0638*a/(1+.0131*a)+.638,N;Number.isNaN(c)&&(c=0),c>=164&&c<=345?N=.56+Math.abs(.2*Math.cos((c+168)*pg)):N=.36+Math.abs(.4*Math.cos((c+35)*pg));let B=Math.pow(a,4),se=Math.sqrt(B/(B+1900)),V=q*(se*N+1-se),J=(v/(t*O))**2;return J+=(y/(r*q))**2,J+=I/V**2,Math.sqrt(J)}var mg=203,Zc=new Z({id:"xyz-abs-d65",cssId:"--xyz-abs-d65",name:"Absolute XYZ D65",coords:{x:{refRange:[0,9504.7],name:"Xa"},y:{refRange:[0,1e4],name:"Ya"},z:{refRange:[0,10888.3],name:"Za"}},base:Et,fromBase(n){return n.map(e=>Math.max(e*mg,0))},toBase(n){return n.map(e=>Math.max(e/mg,0))}}),as=1.15,cs=.66,yg=2610/2**14,H2=2**14/2610,bg=3424/2**12,vg=2413/2**7,Cg=2392/2**7,U2=1.7*2523/2**5,wg=2**5/(1.7*2523),us=-.56,qc=16295499532821565e-27,z2=[[.41478972,.579999,.014648],[-.20151,1.120649,.0531008],[-.0166008,.2648,.6684799]],W2=[[1.9242264357876067,-1.0047923125953657,.037651404030618],[.35031676209499907,.7264811939316552,-.06538442294808501],[-.09098281098284752,-.3127282905230739,1.5227665613052603]],V2=[[.5,.5,0],[3.524,-4.066708,.542708],[.199076,1.096799,-1.295875]],B2=[[1,.1386050432715393,.05804731615611886],[.9999999999999999,-.1386050432715393,-.05804731615611886],[.9999999999999998,-.09601924202631895,-.8118918960560388]],mp=new Z({id:"jzazbz",name:"Jzazbz",coords:{jz:{refRange:[0,1],name:"Jz"},az:{refRange:[-.5,.5]},bz:{refRange:[-.5,.5]}},base:Zc,fromBase(n){let[e,t,r]=n,i=as*e-(as-1)*r,o=cs*t-(cs-1)*e,a=We(z2,[i,o,r]).map(function(p){let v=bg+vg*(p/1e4)**yg,y=1+Cg*(p/1e4)**yg;return(v/y)**U2}),[c,u,d]=We(V2,a);return[(1+us)*c/(1+us*c)-qc,u,d]},toBase(n){let[e,t,r]=n,i=(e+qc)/(1+us-us*(e+qc)),s=We(B2,[i,t,r]).map(function(p){let v=bg-p**wg,y=Cg*p**wg-vg;return 1e4*(v/y)**H2}),[a,c,u]=We(W2,s),d=(a+(as-1)*u)/as,h=(c+(cs-1)*d)/cs;return[d,h,u]},formats:{color:{coords:["<number> | <percentage>","<number> | <percentage>[-1,1]","<number> | <percentage>[-1,1]"]}}}),Uc=new Z({id:"jzczhz",name:"JzCzHz",coords:{jz:{refRange:[0,1],name:"Jz"},cz:{refRange:[0,1],name:"Chroma"},hz:{refRange:[0,360],type:"angle",name:"Hue"}},base:mp,fromBase(n){let[e,t,r]=n,i,o=2e-4;return Math.abs(t)<o&&Math.abs(r)<o?i=NaN:i=Math.atan2(r,t)*180/Math.PI,[e,Math.sqrt(t**2+r**2),Qn(i)]},toBase(n){return[n[0],n[1]*Math.cos(n[2]*Math.PI/180),n[1]*Math.sin(n[2]*Math.PI/180)]}});function K2(n,e){[n,e]=de([n,e]);let[t,r,i]=Uc.from(n),[o,s,a]=Uc.from(e),c=t-o,u=r-s;Number.isNaN(i)&&Number.isNaN(a)?(i=0,a=0):Number.isNaN(i)?i=a:Number.isNaN(a)&&(a=i);let d=i-a,h=2*Math.sqrt(r*s)*Math.sin(d/2*(Math.PI/180));return Math.sqrt(c**2+u**2+h**2)}var yp=3424/4096,bp=2413/128,vp=2392/128,Dg=2610/16384,G2=2523/32,X2=16384/2610,Rg=32/2523,Y2=[[.3592832590121217,.6976051147779502,-.035891593232029],[-.1920808463704993,1.100476797037432,.0753748658519118],[.0070797844607479,.0748396662186362,.8433265453898765]],J2=[[2048/4096,2048/4096,0],[6610/4096,-13613/4096,7003/4096],[17933/4096,-17390/4096,-543/4096]],Z2=[[.9999999999999998,.0086090370379328,.111029625003026],[.9999999999999998,-.0086090370379328,-.1110296250030259],[.9999999999999998,.5600313357106791,-.3206271749873188]],Q2=[[2.0701522183894223,-1.3263473389671563,.2066510476294053],[.3647385209748072,.6805660249472273,-.0453045459220347],[-.0497472075358123,-.0492609666966131,1.1880659249923042]],zc=new Z({id:"ictcp",name:"ICTCP",coords:{i:{refRange:[0,1],name:"I"},ct:{refRange:[-.5,.5],name:"CT"},cp:{refRange:[-.5,.5],name:"CP"}},base:Zc,fromBase(n){let e=We(Y2,n);return ew(e)},toBase(n){let e=tw(n);return We(Q2,e)}});function ew(n){let e=n.map(function(t){let r=yp+bp*(t/1e4)**Dg,i=1+vp*(t/1e4)**Dg;return(r/i)**G2});return We(J2,e)}function tw(n){return We(Z2,n).map(function(r){let i=Math.max(r**Rg-yp,0),o=bp-vp*r**Rg;return 1e4*(i/o)**X2})}function nw(n,e){[n,e]=de([n,e]);let[t,r,i]=zc.from(n),[o,s,a]=zc.from(e);return 720*Math.sqrt((t-o)**2+.25*(r-s)**2+(i-a)**2)}var rw=Wt.D65,Cp=.42,_g=1/Cp,Ic=2*Math.PI,wp=[[.401288,.650173,-.051461],[-.250268,1.204414,.045854],[-.002079,.048952,.953127]],iw=[[1.8620678550872327,-1.0112546305316843,.14918677544445175],[.38752654323613717,.6214474419314753,-.008973985167612518],[-.015841498849333856,-.03412293802851557,1.0499644368778496]],ow=[[460,451,288],[460,-891,-261],[460,-220,-6300]],sw={dark:[.8,.525,.8],dim:[.9,.59,.9],average:[1,.69,1]},Br={h:[20.14,90,164.25,237.53,380.14],e:[.8,.7,1,1.2,.8],H:[0,100,200,300,400]},aw=180/Math.PI,Sg=Math.PI/180;function Dp(n,e){return n.map(r=>{let i=Zn(e*Math.abs(r)*.01,Cp);return 400*vs(i,r)/(i+27.13)})}function cw(n,e){let t=100/e*27.13**_g;return n.map(r=>{let i=Math.abs(r);return vs(t*Zn(i/(400-i),_g),r)})}function uw(n){let e=Qn(n);e<=Br.h[0]&&(e+=360);let t=fp(Br.h,e)-1,[r,i]=Br.h.slice(t,t+2),[o,s]=Br.e.slice(t,t+2),a=Br.H[t],c=(e-r)/o;return a+100*c/(c+(i-e)/s)}function lw(n){let e=(n%400+400)%400,t=Math.floor(.01*e);e=e%100;let[r,i]=Br.h.slice(t,t+2),[o,s]=Br.e.slice(t,t+2);return Qn((e*(s*r-o*i)-100*r*s)/(e*(s-o)-100*s))}function Rp(n,e,t,r,i){let o={};o.discounting=i,o.refWhite=n,o.surround=r;let s=n.map(R=>R*100);o.la=e,o.yb=t;let a=s[1],c=We(wp,s);r=sw[o.surround];let u=r[0];o.c=r[1],o.nc=r[2];let h=(1/(5*o.la+1))**4;o.fl=h*o.la+.1*(1-h)*(1-h)*Math.cbrt(5*o.la),o.flRoot=o.fl**.25,o.n=o.yb/a,o.z=1.48+Math.sqrt(o.n),o.nbb=.725*o.n**-.2,o.ncb=o.nbb;let p=i?1:Math.max(Math.min(u*(1-1/3.6*Math.exp((-o.la-42)/92)),1),0);o.dRgb=c.map(R=>uo(1,a/R,p)),o.dRgbInv=o.dRgb.map(R=>1/R);let v=c.map((R,E)=>R*o.dRgb[E]),y=Dp(v,o.fl);return o.aW=o.nbb*(2*y[0]+y[1]+.05*y[2]),o}var Tg=Rp(rw,64/Math.PI*.2,20,"average",!1);function Wc(n,e){if(!(n.J!==void 0^n.Q!==void 0))throw new Error("Conversion requires one and only one: 'J' or 'Q'");if(!(n.C!==void 0^n.M!==void 0^n.s!==void 0))throw new Error("Conversion requires one and only one: 'C', 'M' or 's'");if(!(n.h!==void 0^n.H!==void 0))throw new Error("Conversion requires one and only one: 'h' or 'H'");if(n.J===0||n.Q===0)return[0,0,0];let t=0;n.h!==void 0?t=Qn(n.h)*Sg:t=lw(n.H)*Sg;let r=Math.cos(t),i=Math.sin(t),o=0;n.J!==void 0?o=Zn(n.J,1/2)*.1:n.Q!==void 0&&(o=.25*e.c*n.Q/((e.aW+4)*e.flRoot));let s=0;n.C!==void 0?s=n.C/o:n.M!==void 0?s=n.M/e.flRoot/o:n.s!==void 0&&(s=4e-4*n.s**2*(e.aW+4)/e.c);let a=Zn(s*Math.pow(1.64-Math.pow(.29,e.n),-.73),10/9),c=.25*(Math.cos(t+2)+3.8),u=e.aW*Zn(o,2/e.c/e.z),d=5e4/13*e.nc*e.ncb*c,h=u/e.nbb,p=23*(h+.305)*Xc(a,23*d+a*(11*r+108*i)),v=p*r,y=p*i,R=cw(We(ow,[h,v,y]).map(E=>E*1/1403),e.fl);return We(iw,R.map((E,I)=>E*e.dRgbInv[I])).map(E=>E/100)}function _p(n,e){let t=n.map(q=>q*100),r=Dp(We(wp,t).map((q,N)=>q*e.dRgb[N]),e.fl),i=r[0]+(-12*r[1]+r[2])/11,o=(r[0]+r[1]-2*r[2])/9,s=(Math.atan2(o,i)%Ic+Ic)%Ic,a=.25*(Math.cos(s+2)+3.8),c=5e4/13*e.nc*e.ncb*Xc(a*Math.sqrt(i**2+o**2),r[0]+r[1]+1.05*r[2]+.305),u=Zn(c,.9)*Math.pow(1.64-Math.pow(.29,e.n),.73),d=e.nbb*(2*r[0]+r[1]+.05*r[2]),h=Zn(d/e.aW,.5*e.c*e.z),p=100*Zn(h,2),v=4/e.c*h*(e.aW+4)*e.flRoot,y=u*h,R=y*e.flRoot,E=Qn(s*aw),I=uw(E),O=50*Zn(e.c*u/(e.aW+4),1/2);return{J:p,C:y,h:E,s:O,Q:v,M:R,H:I}}var dw=new Z({id:"cam16-jmh",cssId:"--cam16-jmh",name:"CAM16-JMh",coords:{j:{refRange:[0,100],name:"J"},m:{refRange:[0,105],name:"Colorfulness"},h:{refRange:[0,360],type:"angle",name:"Hue"}},base:Et,fromBase(n){let e=_p(n,Tg);return[e.J,e.M,e.h]},toBase(n){return Wc({J:n[0],M:n[1],h:n[2]},Tg)}}),fw=Wt.D65,hw=216/24389,Sp=24389/27;function gw(n){return 116*(n>hw?Math.cbrt(n):(Sp*n+16)/116)-16}function Vc(n){return n>8?Math.pow((n+16)/116,3):n/Sp}function pw(n,e){let[t,r,i]=n,o=[],s=0;if(i===0)return[0,0,0];let a=Vc(i);i>0?s=.00379058511492914*i**2+.608983189401032*i+.9155088574762233:s=9514440756550361e-21*i**2+.08693057439788597*i-21.928975842194614;let c=2e-12,u=15,d=0,h=1/0;for(;d<=u;){o=Wc({J:s,C:r,h:t},e);let p=Math.abs(o[1]-a);if(p<h){if(p<=c)return o;h=p}s=s-(o[1]-a)*s/(2*o[1]),d+=1}return Wc({J:s,C:r,h:t},e)}function mw(n,e){let t=gw(n[1]);if(t===0)return[0,0,0];let r=_p(n,Qc);return[Qn(r.h),r.C,t]}var Qc=Rp(fw,200/Math.PI*Vc(50),Vc(50)*100,"average",!1),fo=new Z({id:"hct",name:"HCT",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},c:{refRange:[0,145],name:"Colorfulness"},t:{refRange:[0,100],name:"Tone"}},base:Et,fromBase(n){return mw(n)},toBase(n){return pw(n,Qc)},formats:{color:{id:"--hct",coords:["<number> | <angle>","<percentage> | <number>","<percentage> | <number>"]}}}),yw=Math.PI/180,Eg=[1,.007,.0228];function xg(n){n[1]<0&&(n=fo.fromBase(fo.toBase(n)));let e=Math.log(Math.max(1+Eg[2]*n[1]*Qc.flRoot,1))/Eg[2],t=n[0]*yw,r=e*Math.cos(t),i=e*Math.sin(t);return[n[2],r,i]}function bw(n,e){[n,e]=de([n,e]);let[t,r,i]=xg(fo.from(n)),[o,s,a]=xg(fo.from(e));return Math.sqrt((t-o)**2+(r-s)**2+(i-a)**2)}var Di={deltaE76:N2,deltaECMC:j2,deltaE2000:gp,deltaEJz:K2,deltaEITP:nw,deltaEOK:Hc,deltaEHCT:bw};function vw(n){let e=n?Math.floor(Math.log10(Math.abs(n))):0;return Math.max(parseFloat(`1e${e-2}`),1e-6)}var Pg={hct:{method:"hct.c",jnd:2,deltaEMethod:"hct",blackWhiteClamp:{}},"hct-tonal":{method:"hct.c",jnd:0,deltaEMethod:"hct",blackWhiteClamp:{channel:"hct.t",min:0,max:100}}};function Sr(n,{method:e=fn.gamut_mapping,space:t=void 0,deltaEMethod:r="",jnd:i=2,blackWhiteClamp:o={}}={}){if(n=de(n),ho(arguments[1])?t=arguments[1]:t||(t=n.space),t=Z.get(t),Kr(n,t,{epsilon:0}))return n;let s;if(e==="css")s=Cw(n,{space:t});else{if(e!=="clip"&&!Kr(n,t)){Object.prototype.hasOwnProperty.call(Pg,e)&&({method:e,jnd:i,deltaEMethod:r,blackWhiteClamp:o}=Pg[e]);let a=gp;if(r!==""){for(let u in Di)if("deltae"+r.toLowerCase()===u.toLowerCase()){a=Di[u];break}}let c=Sr(ze(n,t),{method:"clip",space:t});if(a(n,c)>i){if(Object.keys(o).length===3){let O=Z.resolveCoord(o.channel),q=ln(ze(n,O.space),O.id);if(Rr(q)&&(q=0),q>=o.max)return ze({space:"xyz-d65",coords:Wt.D65},n.space);if(q<=o.min)return ze({space:"xyz-d65",coords:[0,0,0]},n.space)}let u=Z.resolveCoord(e),d=u.space,h=u.id,p=ze(n,d);p.coords.forEach((O,q)=>{Rr(O)&&(p.coords[q]=0)});let y=(u.range||u.refRange)[0],R=vw(i),E=y,I=ln(p,h);for(;I-E>R;){let O=wi(p);O=Sr(O,{space:t,method:"clip"}),a(p,O)-i<R?E=ln(p,h):I=ln(p,h),ur(p,h,(E+I)/2)}s=ze(p,t)}else s=c}else s=ze(n,t);if(e==="clip"||!Kr(s,t,{epsilon:0})){let a=Object.values(t.coords).map(c=>c.range||[]);s.coords=s.coords.map((c,u)=>{let[d,h]=a[u];return d!==void 0&&(c=Math.max(d,c)),h!==void 0&&(c=Math.min(c,h)),c})}}return t!==n.space&&(s=ze(s,n.space)),n.coords=s.coords,n}Sr.returns="color";var qg={WHITE:{space:Ci,coords:[1,0,0]},BLACK:{space:Ci,coords:[0,0,0]}};function Cw(n,{space:e}={}){n=de(n),e||(e=n.space),e=Z.get(e);let i=Z.get("oklch");if(e.isUnbounded)return ze(n,e);let o=ze(n,i),s=o.coords[0];if(s>=1){let y=ze(qg.WHITE,e);return y.alpha=n.alpha,ze(y,e)}if(s<=0){let y=ze(qg.BLACK,e);return y.alpha=n.alpha,ze(y,e)}if(Kr(o,e,{epsilon:0}))return ze(o,e);function a(y){let R=ze(y,e),E=Object.values(e.coords);return R.coords=R.coords.map((I,O)=>{if("range"in E[O]){let[q,N]=E[O].range;return dp(q,I,N)}return I}),R}let c=0,u=o.coords[1],d=!0,h=wi(o),p=a(h),v=Hc(p,h);if(v<.02)return p;for(;u-c>1e-4;){let y=(c+u)/2;if(h.coords[1]=y,d&&Kr(h,e,{epsilon:0}))c=y;else if(p=a(h),v=Hc(p,h),v<.02){if(.02-v<1e-4)break;d=!1,c=y}else u=y}return p}function ze(n,e,{inGamut:t}={}){n=de(n),e=Z.get(e);let r=e.from(n),i={space:e,coords:r,alpha:n.alpha};return t&&(i=Sr(i,t===!0?void 0:t)),i}ze.returns="color";function co(n,{precision:e=fn.precision,format:t="default",inGamut:r=!0,...i}={}){let o;n=de(n);let s=t;t=n.space.getFormat(t)??n.space.getFormat("default")??Z.DEFAULT_FORMAT;let a=n.coords.slice();if(r||=t.toGamut,r&&!Kr(n)&&(a=Sr(wi(n),r===!0?void 0:r).coords),t.type==="custom")if(i.precision=e,t.serialize)o=t.serialize(a,n.alpha,i);else throw new TypeError(`format ${s} can only be used to parse colors, not for serialization`);else{let c=t.name||"color";t.serializeCoords?a=t.serializeCoords(a,e):e!==null&&(a=a.map(p=>ps(p,{precision:e})));let u=[...a];if(c==="color"){let p=t.id||t.ids?.[0]||n.space.id;u.unshift(p)}let d=n.alpha;e!==null&&(d=ps(d,{precision:e}));let h=n.alpha>=1||t.noAlpha?"":`${t.commas?",":" /"} ${d}`;o=`${c}(${u.join(t.commas?", ":" ")}${h})`}return o}var ww=[[.6369580483012914,.14461690358620832,.1688809751641721],[.2627002120112671,.6779980715188708,.05930171646986196],[0,.028072693049087428,1.060985057710791]],Dw=[[1.716651187971268,-.355670783776392,-.25336628137366],[-.666684351832489,1.616481236634939,.0157685458139111],[.017639857445311,-.042770613257809,.942103121235474]],Cs=new Mt({id:"rec2020-linear",cssId:"--rec2020-linear",name:"Linear REC.2020",white:"D65",toXYZ_M:ww,fromXYZ_M:Dw}),ls=1.09929682680944,Ig=.018053968510807,Tp=new Mt({id:"rec2020",name:"REC.2020",base:Cs,toBase(n){return n.map(function(e){return e<Ig*4.5?e/4.5:Math.pow((e+ls-1)/ls,1/.45)})},fromBase(n){return n.map(function(e){return e>=Ig?ls*Math.pow(e,.45)-(ls-1):4.5*e})}}),Rw=[[.4865709486482162,.26566769316909306,.1982172852343625],[.2289745640697488,.6917385218365064,.079286914093745],[0,.04511338185890264,1.043944368900976]],_w=[[2.493496911941425,-.9313836179191239,-.40271078445071684],[-.8294889695615747,1.7626640603183463,.023624685841943577],[.03584583024378447,-.07617238926804182,.9568845240076872]],Ep=new Mt({id:"p3-linear",cssId:"--display-p3-linear",name:"Linear P3",white:"D65",toXYZ_M:Rw,fromXYZ_M:_w}),Sw=[[.41239079926595934,.357584339383878,.1804807884018343],[.21263900587151027,.715168678767756,.07219231536073371],[.01933081871559182,.11919477979462598,.9505321522496607]],pt=[[3.2409699419045226,-1.537383177570094,-.4986107602930034],[-.9692436362808796,1.8759675015077202,.04155505740717559],[.05563007969699366,-.20397695888897652,1.0569715142428786]],xp=new Mt({id:"srgb-linear",name:"Linear sRGB",white:"D65",toXYZ_M:Sw,fromXYZ_M:pt}),kg={aliceblue:[240/255,248/255,1],antiquewhite:[250/255,235/255,215/255],aqua:[0,1,1],aquamarine:[127/255,1,212/255],azure:[240/255,1,1],beige:[245/255,245/255,220/255],bisque:[1,228/255,196/255],black:[0,0,0],blanchedalmond:[1,235/255,205/255],blue:[0,0,1],blueviolet:[138/255,43/255,226/255],brown:[165/255,42/255,42/255],burlywood:[222/255,184/255,135/255],cadetblue:[95/255,158/255,160/255],chartreuse:[127/255,1,0],chocolate:[210/255,105/255,30/255],coral:[1,127/255,80/255],cornflowerblue:[100/255,149/255,237/255],cornsilk:[1,248/255,220/255],crimson:[220/255,20/255,60/255],cyan:[0,1,1],darkblue:[0,0,139/255],darkcyan:[0,139/255,139/255],darkgoldenrod:[184/255,134/255,11/255],darkgray:[169/255,169/255,169/255],darkgreen:[0,100/255,0],darkgrey:[169/255,169/255,169/255],darkkhaki:[189/255,183/255,107/255],darkmagenta:[139/255,0,139/255],darkolivegreen:[85/255,107/255,47/255],darkorange:[1,140/255,0],darkorchid:[153/255,50/255,204/255],darkred:[139/255,0,0],darksalmon:[233/255,150/255,122/255],darkseagreen:[143/255,188/255,143/255],darkslateblue:[72/255,61/255,139/255],darkslategray:[47/255,79/255,79/255],darkslategrey:[47/255,79/255,79/255],darkturquoise:[0,206/255,209/255],darkviolet:[148/255,0,211/255],deeppink:[1,20/255,147/255],deepskyblue:[0,191/255,1],dimgray:[105/255,105/255,105/255],dimgrey:[105/255,105/255,105/255],dodgerblue:[30/255,144/255,1],firebrick:[178/255,34/255,34/255],floralwhite:[1,250/255,240/255],forestgreen:[34/255,139/255,34/255],fuchsia:[1,0,1],gainsboro:[220/255,220/255,220/255],ghostwhite:[248/255,248/255,1],gold:[1,215/255,0],goldenrod:[218/255,165/255,32/255],gray:[128/255,128/255,128/255],green:[0,128/255,0],greenyellow:[173/255,1,47/255],grey:[128/255,128/255,128/255],honeydew:[240/255,1,240/255],hotpink:[1,105/255,180/255],indianred:[205/255,92/255,92/255],indigo:[75/255,0,130/255],ivory:[1,1,240/255],khaki:[240/255,230/255,140/255],lavender:[230/255,230/255,250/255],lavenderblush:[1,240/255,245/255],lawngreen:[124/255,252/255,0],lemonchiffon:[1,250/255,205/255],lightblue:[173/255,216/255,230/255],lightcoral:[240/255,128/255,128/255],lightcyan:[224/255,1,1],lightgoldenrodyellow:[250/255,250/255,210/255],lightgray:[211/255,211/255,211/255],lightgreen:[144/255,238/255,144/255],lightgrey:[211/255,211/255,211/255],lightpink:[1,182/255,193/255],lightsalmon:[1,160/255,122/255],lightseagreen:[32/255,178/255,170/255],lightskyblue:[135/255,206/255,250/255],lightslategray:[119/255,136/255,153/255],lightslategrey:[119/255,136/255,153/255],lightsteelblue:[176/255,196/255,222/255],lightyellow:[1,1,224/255],lime:[0,1,0],limegreen:[50/255,205/255,50/255],linen:[250/255,240/255,230/255],magenta:[1,0,1],maroon:[128/255,0,0],mediumaquamarine:[102/255,205/255,170/255],mediumblue:[0,0,205/255],mediumorchid:[186/255,85/255,211/255],mediumpurple:[147/255,112/255,219/255],mediumseagreen:[60/255,179/255,113/255],mediumslateblue:[123/255,104/255,238/255],mediumspringgreen:[0,250/255,154/255],mediumturquoise:[72/255,209/255,204/255],mediumvioletred:[199/255,21/255,133/255],midnightblue:[25/255,25/255,112/255],mintcream:[245/255,1,250/255],mistyrose:[1,228/255,225/255],moccasin:[1,228/255,181/255],navajowhite:[1,222/255,173/255],navy:[0,0,128/255],oldlace:[253/255,245/255,230/255],olive:[128/255,128/255,0],olivedrab:[107/255,142/255,35/255],orange:[1,165/255,0],orangered:[1,69/255,0],orchid:[218/255,112/255,214/255],palegoldenrod:[238/255,232/255,170/255],palegreen:[152/255,251/255,152/255],paleturquoise:[175/255,238/255,238/255],palevioletred:[219/255,112/255,147/255],papayawhip:[1,239/255,213/255],peachpuff:[1,218/255,185/255],peru:[205/255,133/255,63/255],pink:[1,192/255,203/255],plum:[221/255,160/255,221/255],powderblue:[176/255,224/255,230/255],purple:[128/255,0,128/255],rebeccapurple:[102/255,51/255,153/255],red:[1,0,0],rosybrown:[188/255,143/255,143/255],royalblue:[65/255,105/255,225/255],saddlebrown:[139/255,69/255,19/255],salmon:[250/255,128/255,114/255],sandybrown:[244/255,164/255,96/255],seagreen:[46/255,139/255,87/255],seashell:[1,245/255,238/255],sienna:[160/255,82/255,45/255],silver:[192/255,192/255,192/255],skyblue:[135/255,206/255,235/255],slateblue:[106/255,90/255,205/255],slategray:[112/255,128/255,144/255],slategrey:[112/255,128/255,144/255],snow:[1,250/255,250/255],springgreen:[0,1,127/255],steelblue:[70/255,130/255,180/255],tan:[210/255,180/255,140/255],teal:[0,128/255,128/255],thistle:[216/255,191/255,216/255],tomato:[1,99/255,71/255],turquoise:[64/255,224/255,208/255],violet:[238/255,130/255,238/255],wheat:[245/255,222/255,179/255],white:[1,1,1],whitesmoke:[245/255,245/255,245/255],yellow:[1,1,0],yellowgreen:[154/255,205/255,50/255]},Fg=Array(3).fill("<percentage> | <number>[0, 255]"),Mg=Array(3).fill("<number>[0, 255]"),Ri=new Mt({id:"srgb",name:"sRGB",base:xp,fromBase:n=>n.map(e=>{let t=e<0?-1:1,r=e*t;return r>.0031308?t*(1.055*r**(1/2.4)-.055):12.92*e}),toBase:n=>n.map(e=>{let t=e<0?-1:1,r=e*t;return r<=.04045?e/12.92:t*((r+.055)/1.055)**2.4}),formats:{rgb:{coords:Fg},rgb_number:{name:"rgb",commas:!0,coords:Mg,noAlpha:!0},color:{},rgba:{coords:Fg,commas:!0,lastAlpha:!0},rgba_number:{name:"rgba",commas:!0,coords:Mg},hex:{type:"custom",toGamut:!0,test:n=>/^#([a-f0-9]{3,4}){1,2}$/i.test(n),parse(n){n.length<=5&&(n=n.replace(/[a-f0-9]/gi,"$&$&"));let e=[];return n.replace(/[a-f0-9]{2}/gi,t=>{e.push(parseInt(t,16)/255)}),{spaceId:"srgb",coords:e.slice(0,3),alpha:e.slice(3)[0]}},serialize:(n,e,{collapse:t=!0}={})=>{e<1&&n.push(e),n=n.map(o=>Math.round(o*255));let r=t&&n.every(o=>o%17===0);return"#"+n.map(o=>r?(o/17).toString(16):o.toString(16).padStart(2,"0")).join("")}},keyword:{type:"custom",test:n=>/^[a-z]+$/i.test(n),parse(n){n=n.toLowerCase();let e={spaceId:"srgb",coords:null,alpha:1};if(n==="transparent"?(e.coords=kg.black,e.alpha=0):e.coords=kg[n],e.coords)return e}}}}),Pp=new Mt({id:"p3",cssId:"display-p3",name:"P3",base:Ep,fromBase:Ri.fromBase,toBase:Ri.toBase});fn.display_space=Ri;var Tw;if(typeof CSS<"u"&&CSS.supports)for(let n of[dn,Tp,Pp]){let e=n.getMinCoords(),r=co({space:n,coords:e,alpha:1});if(CSS.supports("color",r)){fn.display_space=n;break}}function Ew(n,{space:e=fn.display_space,...t}={}){let r=co(n,t);if(typeof CSS>"u"||CSS.supports("color",r)||!fn.display_space)r=new String(r),r.color=n;else{let i=n;if((n.coords.some(Rr)||Rr(n.alpha))&&!(Tw??=CSS.supports("color","hsl(none 50% 50%)"))&&(i=wi(n),i.coords=i.coords.map(at),i.alpha=at(i.alpha),r=co(i,t),CSS.supports("color",r)))return r=new String(r),r.color=i,r;i=ze(i,e),r=new String(co(i,t)),r.color=i}return r}function xw(n,e){return n=de(n),e=de(e),n.space===e.space&&n.alpha===e.alpha&&n.coords.every((t,r)=>t===e.coords[r])}function Tr(n){return ln(n,[Et,"y"])}function qp(n,e){ur(n,[Et,"y"],e)}function Pw(n){Object.defineProperty(n.prototype,"luminance",{get(){return Tr(this)},set(e){qp(this,e)}})}var qw=Object.freeze({__proto__:null,getLuminance:Tr,register:Pw,setLuminance:qp});function Iw(n,e){n=de(n),e=de(e);let t=Math.max(Tr(n),0),r=Math.max(Tr(e),0);return r>t&&([t,r]=[r,t]),(t+.05)/(r+.05)}var kw=.56,Fw=.57,Mw=.62,Ow=.65,Og=.022,Lw=1.414,Aw=.1,Nw=5e-4,$w=1.14,Lg=.027,jw=1.14;function Ag(n){return n>=Og?n:n+(Og-n)**Lw}function yi(n){let e=n<0?-1:1,t=Math.abs(n);return e*Math.pow(t,2.4)}function Hw(n,e){e=de(e),n=de(n);let t,r,i,o,s,a;e=ze(e,"srgb"),[o,s,a]=e.coords;let c=yi(o)*.2126729+yi(s)*.7151522+yi(a)*.072175;n=ze(n,"srgb"),[o,s,a]=n.coords;let u=yi(o)*.2126729+yi(s)*.7151522+yi(a)*.072175,d=Ag(c),h=Ag(u),p=h>d;return Math.abs(h-d)<Nw?r=0:p?(t=h**kw-d**Fw,r=t*$w):(t=h**Ow-d**Mw,r=t*jw),Math.abs(r)<Aw?i=0:r>0?i=r-Lg:i=r+Lg,i*100}function Uw(n,e){n=de(n),e=de(e);let t=Math.max(Tr(n),0),r=Math.max(Tr(e),0);r>t&&([t,r]=[r,t]);let i=t+r;return i===0?0:(t-r)/i}var zw=5e4;function Ww(n,e){n=de(n),e=de(e);let t=Math.max(Tr(n),0),r=Math.max(Tr(e),0);return r>t&&([t,r]=[r,t]),r===0?zw:(t-r)/r}function Vw(n,e){n=de(n),e=de(e);let t=ln(n,[dn,"l"]),r=ln(e,[dn,"l"]);return Math.abs(t-r)}var Bw=216/24389,Ng=24/116,ds=24389/27,kc=Wt.D65,Bc=new Z({id:"lab-d65",name:"Lab D65",coords:{l:{refRange:[0,100],name:"Lightness"},a:{refRange:[-125,125]},b:{refRange:[-125,125]}},white:kc,base:Et,fromBase(n){let t=n.map((r,i)=>r/kc[i]).map(r=>r>Bw?Math.cbrt(r):(ds*r+16)/116);return[116*t[1]-16,500*(t[0]-t[1]),200*(t[1]-t[2])]},toBase(n){let e=[];return e[1]=(n[0]+16)/116,e[0]=n[1]/500+e[1],e[2]=e[1]-n[2]/200,[e[0]>Ng?Math.pow(e[0],3):(116*e[0]-16)/ds,n[0]>8?Math.pow((n[0]+16)/116,3):n[0]/ds,e[2]>Ng?Math.pow(e[2],3):(116*e[2]-16)/ds].map((r,i)=>r*kc[i])},formats:{"lab-d65":{coords:["<number> | <percentage>","<number> | <percentage>[-1,1]","<number> | <percentage>[-1,1]"]}}}),Fc=Math.pow(5,.5)*.5+.5;function Kw(n,e){n=de(n),e=de(e);let t=ln(n,[Bc,"l"]),r=ln(e,[Bc,"l"]),i=Math.abs(Math.pow(t,Fc)-Math.pow(r,Fc)),o=Math.pow(i,1/Fc)*Math.SQRT2-40;return o<7.5?0:o}var gs=Object.freeze({__proto__:null,contrastAPCA:Hw,contrastDeltaPhi:Kw,contrastLstar:Vw,contrastMichelson:Uw,contrastWCAG21:Iw,contrastWeber:Ww});function Gw(n,e,t={}){ho(t)&&(t={algorithm:t});let{algorithm:r,...i}=t;if(!r){let o=Object.keys(gs).map(s=>s.replace(/^contrast/,"")).join(", ");throw new TypeError(`contrast() function needs a contrast algorithm. Please specify one of: ${o}`)}n=de(n),e=de(e);for(let o in gs)if("contrast"+r.toLowerCase()===o.toLowerCase())return gs[o](n,e,i);throw new TypeError(`Unknown contrast algorithm: ${r}`)}function ws(n){let[e,t,r]=go(n,Et),i=e+15*t+3*r;return[4*e/i,9*t/i]}function Ip(n){let[e,t,r]=go(n,Et),i=e+t+r;return[e/i,t/i]}function Xw(n){Object.defineProperty(n.prototype,"uv",{get(){return ws(this)}}),Object.defineProperty(n.prototype,"xy",{get(){return Ip(this)}})}var Yw=Object.freeze({__proto__:null,register:Xw,uv:ws,xy:Ip});function ao(n,e,t={}){ho(t)&&(t={method:t});let{method:r=fn.deltaE,...i}=t;for(let o in Di)if("deltae"+r.toLowerCase()===o.toLowerCase())return Di[o](n,e,i);throw new TypeError(`Unknown deltaE method: ${r}`)}function Jw(n,e=.25){let r=[Z.get("oklch","lch"),"l"];return ur(n,r,i=>i*(1+e))}function Zw(n,e=.25){let r=[Z.get("oklch","lch"),"l"];return ur(n,r,i=>i*(1-e))}var Qw=Object.freeze({__proto__:null,darken:Zw,lighten:Jw});function kp(n,e,t=.5,r={}){return[n,e]=[de(n),de(e)],Dr(t)==="object"&&([t,r]=[.5,t]),po(n,e,r)(t)}function Fp(n,e,t={}){let r;eu(n)&&([r,t]=[n,e],[n,e]=r.rangeArgs.colors);let{maxDeltaE:i,deltaEMethod:o,steps:s=2,maxSteps:a=1e3,...c}=t;r||([n,e]=[de(n),de(e)],r=po(n,e,c));let u=ao(n,e),d=i>0?Math.max(s,Math.ceil(u/i)+1):s,h=[];if(a!==void 0&&(d=Math.min(d,a)),d===1)h=[{p:.5,color:r(.5)}];else{let p=1/(d-1);h=Array.from({length:d},(v,y)=>{let R=y*p;return{p:R,color:r(R)}})}if(i>0){let p=h.reduce((v,y,R)=>{if(R===0)return 0;let E=ao(y.color,h[R-1].color,o);return Math.max(v,E)},0);for(;p>i;){p=0;for(let v=1;v<h.length&&h.length<a;v++){let y=h[v-1],R=h[v],E=(R.p+y.p)/2,I=r(E);p=Math.max(p,ao(I,y.color),ao(I,R.color)),h.splice(v,0,{p:E,color:r(E)}),v++}}}return h=h.map(p=>p.color),h}function po(n,e,t={}){if(eu(n)){let[c,u]=[n,e];return po(...c.rangeArgs.colors,{...c.rangeArgs.options,...u})}let{space:r,outputSpace:i,progression:o,premultiplied:s}=t;n=de(n),e=de(e),n=wi(n),e=wi(e);let a={colors:[n,e],options:t};if(r?r=Z.get(r):r=Z.registry[fn.interpolationSpace]||n.space,i=i?Z.get(i):r,n=ze(n,r),e=ze(e,r),n=Sr(n),e=Sr(e),r.coords.h&&r.coords.h.type==="angle"){let c=t.hue=t.hue||"shorter",u=[r,"h"],[d,h]=[ln(n,u),ln(e,u)];isNaN(d)&&!isNaN(h)?d=h:isNaN(h)&&!isNaN(d)&&(h=d),[d,h]=k2(c,[d,h]),ur(n,u,d),ur(e,u,h)}return s&&(n.coords=n.coords.map(c=>c*n.alpha),e.coords=e.coords.map(c=>c*e.alpha)),Object.assign(c=>{c=o?o(c):c;let u=n.coords.map((p,v)=>{let y=e.coords[v];return uo(p,y,c)}),d=uo(n.alpha,e.alpha,c),h={space:r,coords:u,alpha:d};return s&&(h.coords=h.coords.map(p=>p/d)),i!==r&&(h=ze(h,i)),h},{rangeArgs:a})}function eu(n){return Dr(n)==="function"&&!!n.rangeArgs}fn.interpolationSpace="lab";function eD(n){n.defineFunction("mix",kp,{returns:"color"}),n.defineFunction("range",po,{returns:"function<color>"}),n.defineFunction("steps",Fp,{returns:"array<color>"})}var tD=Object.freeze({__proto__:null,isRange:eu,mix:kp,range:po,register:eD,steps:Fp}),Mp=new Z({id:"hsl",name:"HSL",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},s:{range:[0,100],name:"Saturation"},l:{range:[0,100],name:"Lightness"}},base:Ri,fromBase:n=>{let e=Math.max(...n),t=Math.min(...n),[r,i,o]=n,[s,a,c]=[NaN,0,(t+e)/2],u=e-t;if(u!==0){switch(a=c===0||c===1?0:(e-c)/Math.min(c,1-c),e){case r:s=(i-o)/u+(i<o?6:0);break;case i:s=(o-r)/u+2;break;case o:s=(r-i)/u+4}s=s*60}return a<0&&(s+=180,a=Math.abs(a)),s>=360&&(s-=360),[s,a*100,c*100]},toBase:n=>{let[e,t,r]=n;e=e%360,e<0&&(e+=360),t/=100,r/=100;function i(o){let s=(o+e/30)%12,a=t*Math.min(r,1-r);return r-a*Math.max(-1,Math.min(s-3,9-s,1))}return[i(0),i(8),i(4)]},formats:{hsl:{coords:["<number> | <angle>","<percentage>","<percentage>"]},hsla:{coords:["<number> | <angle>","<percentage>","<percentage>"],commas:!0,lastAlpha:!0}}}),Op=new Z({id:"hsv",name:"HSV",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},s:{range:[0,100],name:"Saturation"},v:{range:[0,100],name:"Value"}},base:Mp,fromBase(n){let[e,t,r]=n;t/=100,r/=100;let i=r+t*Math.min(r,1-r);return[e,i===0?0:200*(1-r/i),100*i]},toBase(n){let[e,t,r]=n;t/=100,r/=100;let i=r*(1-t/2);return[e,i===0||i===1?0:(r-i)/Math.min(i,1-i)*100,i*100]},formats:{color:{id:"--hsv",coords:["<number> | <angle>","<percentage> | <number>","<percentage> | <number>"]}}}),nD=new Z({id:"hwb",name:"HWB",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},w:{range:[0,100],name:"Whiteness"},b:{range:[0,100],name:"Blackness"}},base:Op,fromBase(n){let[e,t,r]=n;return[e,r*(100-t)/100,100-r]},toBase(n){let[e,t,r]=n;t/=100,r/=100;let i=t+r;if(i>=1){let a=t/i;return[e,0,a*100]}let o=1-r,s=o===0?0:1-t/o;return[e,s*100,o*100]},formats:{hwb:{coords:["<number> | <angle>","<percentage> | <number>","<percentage> | <number>"]}}}),rD=[[.5766690429101305,.1855582379065463,.1882286462349947],[.29734497525053605,.6273635662554661,.07529145849399788],[.02703136138641234,.07068885253582723,.9913375368376388]],iD=[[2.0415879038107465,-.5650069742788596,-.34473135077832956],[-.9692436362808795,1.8759675015077202,.04155505740717557],[.013444280632031142,-.11836239223101838,1.0151749943912054]],Lp=new Mt({id:"a98rgb-linear",cssId:"--a98-rgb-linear",name:"Linear Adobe\xAE 98 RGB compatible",white:"D65",toXYZ_M:rD,fromXYZ_M:iD}),oD=new Mt({id:"a98rgb",cssId:"a98-rgb",name:"Adobe\xAE 98 RGB compatible",base:Lp,toBase:n=>n.map(e=>Math.pow(Math.abs(e),563/256)*Math.sign(e)),fromBase:n=>n.map(e=>Math.pow(Math.abs(e),256/563)*Math.sign(e))}),sD=[[.7977666449006423,.13518129740053308,.0313477341283922],[.2880748288194013,.711835234241873,8993693872564e-17],[0,0,.8251046025104602]],aD=[[1.3457868816471583,-.25557208737979464,-.05110186497554526],[-.5446307051249019,1.5082477428451468,.02052744743642139],[0,0,1.2119675456389452]],Ap=new Mt({id:"prophoto-linear",cssId:"--prophoto-rgb-linear",name:"Linear ProPhoto",white:"D50",base:Jc,toXYZ_M:sD,fromXYZ_M:aD}),cD=1/512,uD=16/512,lD=new Mt({id:"prophoto",cssId:"prophoto-rgb",name:"ProPhoto",base:Ap,toBase(n){return n.map(e=>e<uD?e/16:e**1.8)},fromBase(n){return n.map(e=>e>=cD?e**(1/1.8):16*e)}}),dD=new Z({id:"oklch",name:"Oklch",coords:{l:{refRange:[0,1],name:"Lightness"},c:{refRange:[0,.4],name:"Chroma"},h:{refRange:[0,360],type:"angle",name:"Hue"}},white:"D65",base:Ci,fromBase(n){let[e,t,r]=n,i,o=2e-4;return Math.abs(t)<o&&Math.abs(r)<o?i=NaN:i=Math.atan2(r,t)*180/Math.PI,[e,Math.sqrt(t**2+r**2),Qn(i)]},toBase(n){let[e,t,r]=n,i,o;return isNaN(r)?(i=0,o=0):(i=t*Math.cos(r*Math.PI/180),o=t*Math.sin(r*Math.PI/180)),[e,i,o]},formats:{oklch:{coords:["<percentage> | <number>","<number> | <percentage>[0,1]","<number> | <angle>"]}}}),Np=Wt.D65,fD=216/24389,$g=24389/27,[jg,Hg]=ws({space:Et,coords:Np}),$p=new Z({id:"luv",name:"Luv",coords:{l:{refRange:[0,100],name:"Lightness"},u:{refRange:[-215,215]},v:{refRange:[-215,215]}},white:Np,base:Et,fromBase(n){let e=[at(n[0]),at(n[1]),at(n[2])],t=e[1],[r,i]=ws({space:Et,coords:e});if(!Number.isFinite(r)||!Number.isFinite(i))return[0,0,0];let o=t<=fD?$g*t:116*Math.cbrt(t)-16;return[o,13*o*(r-jg),13*o*(i-Hg)]},toBase(n){let[e,t,r]=n;if(e===0||Rr(e))return[0,0,0];t=at(t),r=at(r);let i=t/(13*e)+jg,o=r/(13*e)+Hg,s=e<=8?e/$g:Math.pow((e+16)/116,3);return[s*(9*i/(4*o)),s,s*((12-3*i-20*o)/(4*o))]},formats:{color:{id:"--luv",coords:["<number> | <percentage>","<number> | <percentage>[-1,1]","<number> | <percentage>[-1,1]"]}}}),tu=new Z({id:"lchuv",name:"LChuv",coords:{l:{refRange:[0,100],name:"Lightness"},c:{refRange:[0,220],name:"Chroma"},h:{refRange:[0,360],type:"angle",name:"Hue"}},base:$p,fromBase(n){let[e,t,r]=n,i,o=.02;return Math.abs(t)<o&&Math.abs(r)<o?i=NaN:i=Math.atan2(r,t)*180/Math.PI,[e,Math.sqrt(t**2+r**2),Qn(i)]},toBase(n){let[e,t,r]=n;return t<0&&(t=0),isNaN(r)&&(r=0),[e,t*Math.cos(r*Math.PI/180),t*Math.sin(r*Math.PI/180)]},formats:{color:{id:"--lchuv",coords:["<number> | <percentage>","<number> | <percentage>","<number> | <angle>"]}}}),hD=216/24389,gD=24389/27,Ug=pt[0][0],zg=pt[0][1],Mc=pt[0][2],Wg=pt[1][0],Vg=pt[1][1],Oc=pt[1][2],Bg=pt[2][0],Kg=pt[2][1],Lc=pt[2][2];function bi(n,e,t){let r=e/(Math.sin(t)-n*Math.cos(t));return r<0?1/0:r}function bs(n){let e=Math.pow(n+16,3)/1560896,t=e>hD?e:n/gD,r=t*(284517*Ug-94839*Mc),i=t*(838422*Mc+769860*zg+731718*Ug),o=t*(632260*Mc-126452*zg),s=t*(284517*Wg-94839*Oc),a=t*(838422*Oc+769860*Vg+731718*Wg),c=t*(632260*Oc-126452*Vg),u=t*(284517*Bg-94839*Lc),d=t*(838422*Lc+769860*Kg+731718*Bg),h=t*(632260*Lc-126452*Kg);return{r0s:r/o,r0i:i*n/o,r1s:r/(o+126452),r1i:(i-769860)*n/(o+126452),g0s:s/c,g0i:a*n/c,g1s:s/(c+126452),g1i:(a-769860)*n/(c+126452),b0s:u/h,b0i:d*n/h,b1s:u/(h+126452),b1i:(d-769860)*n/(h+126452)}}function Gg(n,e){let t=e/360*Math.PI*2,r=bi(n.r0s,n.r0i,t),i=bi(n.r1s,n.r1i,t),o=bi(n.g0s,n.g0i,t),s=bi(n.g1s,n.g1i,t),a=bi(n.b0s,n.b0i,t),c=bi(n.b1s,n.b1i,t);return Math.min(r,i,o,s,a,c)}var pD=new Z({id:"hsluv",name:"HSLuv",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},s:{range:[0,100],name:"Saturation"},l:{range:[0,100],name:"Lightness"}},base:tu,gamutSpace:Ri,fromBase(n){let[e,t,r]=[at(n[0]),at(n[1]),at(n[2])],i;if(e>99.9999999)i=0,e=100;else if(e<1e-8)i=0,e=0;else{let o=bs(e),s=Gg(o,r);i=t/s*100}return[r,i,e]},toBase(n){let[e,t,r]=[at(n[0]),at(n[1]),at(n[2])],i;if(r>99.9999999)r=100,i=0;else if(r<1e-8)r=0,i=0;else{let o=bs(r);i=Gg(o,e)/100*t}return[r,i,e]},formats:{color:{id:"--hsluv",coords:["<number> | <angle>","<percentage> | <number>","<percentage> | <number>"]}}});pt[0][0];pt[0][1];pt[0][2];pt[1][0];pt[1][1];pt[1][2];pt[2][0];pt[2][1];pt[2][2];function vi(n,e){return Math.abs(e)/Math.sqrt(Math.pow(n,2)+1)}function Xg(n){let e=vi(n.r0s,n.r0i),t=vi(n.r1s,n.r1i),r=vi(n.g0s,n.g0i),i=vi(n.g1s,n.g1i),o=vi(n.b0s,n.b0i),s=vi(n.b1s,n.b1i);return Math.min(e,t,r,i,o,s)}var mD=new Z({id:"hpluv",name:"HPLuv",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},s:{range:[0,100],name:"Saturation"},l:{range:[0,100],name:"Lightness"}},base:tu,gamutSpace:"self",fromBase(n){let[e,t,r]=[at(n[0]),at(n[1]),at(n[2])],i;if(e>99.9999999)i=0,e=100;else if(e<1e-8)i=0,e=0;else{let o=bs(e),s=Xg(o);i=t/s*100}return[r,i,e]},toBase(n){let[e,t,r]=[at(n[0]),at(n[1]),at(n[2])],i;if(r>99.9999999)r=100,i=0;else if(r<1e-8)r=0,i=0;else{let o=bs(r);i=Xg(o)/100*t}return[r,i,e]},formats:{color:{id:"--hpluv",coords:["<number> | <angle>","<percentage> | <number>","<percentage> | <number>"]}}}),Yg=203,Jg=2610/2**14,yD=2**14/2610,bD=2523/2**5,Zg=2**5/2523,Qg=3424/2**12,ep=2413/2**7,tp=2392/2**7,vD=new Mt({id:"rec2100pq",cssId:"rec2100-pq",name:"REC.2100-PQ",base:Cs,toBase(n){return n.map(function(e){return(Math.max(e**Zg-Qg,0)/(ep-tp*e**Zg))**yD*1e4/Yg})},fromBase(n){return n.map(function(e){let t=Math.max(e*Yg/1e4,0),r=Qg+ep*t**Jg,i=1+tp*t**Jg;return(r/i)**bD})}}),np=.17883277,rp=.28466892,ip=.55991073,Ac=3.7743,CD=new Mt({id:"rec2100hlg",cssId:"rec2100-hlg",name:"REC.2100-HLG",referred:"scene",base:Cs,toBase(n){return n.map(function(e){return e<=.5?e**2/3*Ac:(Math.exp((e-ip)/np)+rp)/12*Ac})},fromBase(n){return n.map(function(e){return e/=Ac,e<=1/12?Math.sqrt(3*e):np*Math.log(12*e-rp)+ip})}}),jp={};_r.add("chromatic-adaptation-start",n=>{n.options.method&&(n.M=Hp(n.W1,n.W2,n.options.method))});_r.add("chromatic-adaptation-end",n=>{n.M||(n.M=Hp(n.W1,n.W2,n.options.method))});function Ds({id:n,toCone_M:e,fromCone_M:t}){jp[n]=arguments[0]}function Hp(n,e,t="Bradford"){let r=jp[t],[i,o,s]=We(r.toCone_M,n),[a,c,u]=We(r.toCone_M,e),d=[[a/i,0,0],[0,c/o,0],[0,0,u/s]],h=We(d,r.toCone_M);return We(r.fromCone_M,h)}Ds({id:"von Kries",toCone_M:[[.40024,.7076,-.08081],[-.2263,1.16532,.0457],[0,0,.91822]],fromCone_M:[[1.8599363874558397,-1.1293816185800916,.21989740959619328],[.3611914362417676,.6388124632850422,-6370596838649899e-21],[0,0,1.0890636230968613]]});Ds({id:"Bradford",toCone_M:[[.8951,.2664,-.1614],[-.7502,1.7135,.0367],[.0389,-.0685,1.0296]],fromCone_M:[[.9869929054667121,-.14705425642099013,.15996265166373122],[.4323052697233945,.5183602715367774,.049291228212855594],[-.00852866457517732,.04004282165408486,.96848669578755]]});Ds({id:"CAT02",toCone_M:[[.7328,.4296,-.1624],[-.7036,1.6975,.0061],[.003,.0136,.9834]],fromCone_M:[[1.0961238208355142,-.27886900021828726,.18274517938277307],[.4543690419753592,.4735331543074117,.07209780371722911],[-.009627608738429355,-.00569803121611342,1.0153256399545427]]});Ds({id:"CAT16",toCone_M:[[.401288,.650173,-.051461],[-.250268,1.204414,.045854],[-.002079,.048952,.953127]],fromCone_M:[[1.862067855087233,-1.0112546305316845,.14918677544445172],[.3875265432361372,.6214474419314753,-.008973985167612521],[-.01584149884933386,-.03412293802851557,1.0499644368778496]]});Object.assign(Wt,{A:[1.0985,1,.35585],C:[.98074,1,1.18232],D55:[.95682,1,.92149],D75:[.94972,1,1.22638],E:[1,1,1],F2:[.99186,1,.67393],F7:[.95041,1,1.08747],F11:[1.00962,1,.6435]});Wt.ACES=[.32168/.33767,1,(1-.32168-.33767)/.33767];var wD=[[.6624541811085053,.13400420645643313,.1561876870049078],[.27222871678091454,.6740817658111484,.05368951740793705],[-.005574649490394108,.004060733528982826,1.0103391003129971]],DD=[[1.6410233796943257,-.32480329418479,-.23642469523761225],[-.6636628587229829,1.6153315916573379,.016756347685530137],[.011721894328375376,-.008284441996237409,.9883948585390215]],Up=new Mt({id:"acescg",cssId:"--acescg",name:"ACEScg",coords:{r:{range:[0,65504],name:"Red"},g:{range:[0,65504],name:"Green"},b:{range:[0,65504],name:"Blue"}},referred:"scene",white:Wt.ACES,toXYZ_M:wD,fromXYZ_M:DD}),fs=2**-16,Nc=-.35828683,hs=(Math.log2(65504)+9.72)/17.52,RD=new Mt({id:"acescc",cssId:"--acescc",name:"ACEScc",coords:{r:{range:[Nc,hs],name:"Red"},g:{range:[Nc,hs],name:"Green"},b:{range:[Nc,hs],name:"Blue"}},referred:"scene",base:Up,toBase(n){let e=-.3013698630136986;return n.map(function(t){return t<=e?(2**(t*17.52-9.72)-fs)*2:t<hs?2**(t*17.52-9.72):65504})},fromBase(n){return n.map(function(e){return e<=0?(Math.log2(fs)+9.72)/17.52:e<fs?(Math.log2(fs+e*.5)+9.72)/17.52:(Math.log2(e)+9.72)/17.52})}}),op=Object.freeze({__proto__:null,A98RGB:oD,A98RGB_Linear:Lp,ACEScc:RD,ACEScg:Up,CAM16_JMh:dw,HCT:fo,HPLuv:mD,HSL:Mp,HSLuv:pD,HSV:Op,HWB:nD,ICTCP:zc,JzCzHz:Uc,Jzazbz:mp,LCH:lo,LCHuv:tu,Lab:dn,Lab_D65:Bc,Luv:$p,OKLCH:dD,OKLab:Ci,P3:Pp,P3_Linear:Ep,ProPhoto:lD,ProPhoto_Linear:Ap,REC_2020:Tp,REC_2020_Linear:Cs,REC_2100_HLG:CD,REC_2100_PQ:vD,XYZ_ABS_D65:Zc,XYZ_D50:Jc,XYZ_D65:Et,sRGB:Ri,sRGB_Linear:xp}),ct=class n{constructor(...e){let t;e.length===1&&(t=de(e[0]));let r,i,o;t?(r=t.space||t.spaceId,i=t.coords,o=t.alpha):[r,i,o]=e,Object.defineProperty(this,"space",{value:Z.get(r),writable:!1,enumerable:!0,configurable:!0}),this.coords=i?i.slice():[0,0,0],this.alpha=o>1||o===void 0?1:o<0?0:o;for(let s=0;s<this.coords.length;s++)this.coords[s]==="NaN"&&(this.coords[s]=NaN);for(let s in this.space.coords)Object.defineProperty(this,s,{get:()=>this.get(s),set:a=>this.set(s,a)})}get spaceId(){return this.space.id}clone(){return new n(this.space,this.coords,this.alpha)}toJSON(){return{spaceId:this.spaceId,coords:this.coords,alpha:this.alpha}}display(...e){let t=Ew(this,...e);return t.color=new n(t.color),t}static get(e,...t){return e instanceof n?e:new n(e,...t)}static defineFunction(e,t,r=t){let{instance:i=!0,returns:o}=r,s=function(...a){let c=t(...a);if(o==="color")c=n.get(c);else if(o==="function<color>"){let u=c;c=function(...d){let h=u(...d);return n.get(h)},Object.assign(c,u)}else o==="array<color>"&&(c=c.map(u=>n.get(u)));return c};e in n||(n[e]=s),i&&(n.prototype[e]=function(...a){return s(this,...a)})}static defineFunctions(e){for(let t in e)n.defineFunction(t,e[t],e[t])}static extend(e){if(e.register)e.register(n);else for(let t in e)n.defineFunction(t,e[t])}};ct.defineFunctions({get:ln,getAll:go,set:ur,setAll:Yc,to:ze,equals:xw,inGamut:Kr,toGamut:Sr,distance:pp,toString:co});Object.assign(ct,{util:E2,hooks:_r,WHITES:Wt,Space:Z,spaces:Z.registry,parse:hp,defaults:fn});for(let n of Object.keys(op))Z.register(op[n]);for(let n in Z.registry)Kc(n,Z.registry[n]);_r.add("colorspace-init-end",n=>{Kc(n.id,n),n.aliases?.forEach(e=>{Kc(e,n)})});function Kc(n,e){let t=n.replace(/-/g,"_");Object.defineProperty(ct.prototype,t,{get(){let r=this.getAll(n);return typeof Proxy>"u"?r:new Proxy(r,{has:(i,o)=>{try{return Z.resolveCoord([e,o]),!0}catch{}return Reflect.has(i,o)},get:(i,o,s)=>{if(o&&typeof o!="symbol"&&!(o in i)){let{index:a}=Z.resolveCoord([e,o]);if(a>=0)return i[a]}return Reflect.get(i,o,s)},set:(i,o,s,a)=>{if(o&&typeof o!="symbol"&&!(o in i)||o>=0){let{index:c}=Z.resolveCoord([e,o]);if(c>=0)return i[c]=s,this.setAll(n,i),!0}return Reflect.set(i,o,s,a)}})},set(r){this.setAll(n,r)},configurable:!0,enumerable:!0})}ct.extend(Di);ct.extend({deltaE:ao});Object.assign(ct,{deltaEMethods:Di});ct.extend(Qw);ct.extend({contrast:Gw});ct.extend(Yw);ct.extend(qw);ct.extend(tD);ct.extend(gs);var Rs=`(?:\\d{1,3}${Ft}?|${Ft})`,_D=Rs,SD=Rs,TD=`(\\s*\\/\\s*${Rs}%?\\s*)?`,zp=`oklab?\\(\\s*${Rs}%?\\s*\\s*-?${_D}%?\\s*\\s*-?${SD}%?\\s*${TD}\\)`,ED=new RegExp(`(${zp})${ge}`,"gi"),xD=new RegExp(`^(${zp})${ge}`,"i");function PD(n){let e=new ct(n[1]),[t,r,i]=e.srgb.map(o=>o*255);return new Ct(n[1],n.index,[t,r,i],e.alpha)}var qD=new zt("OKLAB",ED,xD,PD);gt.registerStrategy(qD);var _s=`(?:\\d{1,3}${Ft}?|${Ft})`,ID=_s,kD=_s,FD=`(\\s*\\/\\s*${_s}%?\\s*)?`,Wp=`oklch?\\(\\s*${_s}%?\\s*\\s*-?${ID}%?\\s*\\s*-?${kD}(deg)?\\s*${FD}\\)`,MD=new RegExp(`(${Wp})${ge}`,"gi"),OD=new RegExp(`^(${Wp})${ge}`,"i");function LD(n){let e=new ct(n[1]),[t,r,i]=e.srgb.map(o=>o*255);return new Ct(n[1],n.index,[t,r,i],e.alpha)}var AD=new zt("OKLCH",MD,OD,LD);gt.registerStrategy(AD);var mo=require("vscode"),nu=class{color;disposed=!1;hidden=!1;decorationFn;_decoration;get decoration(){return this._generateDecorator(),this._decoration}set decoration(e){this._decoration=e}get rgb(){return this.color.rgb}constructor(e,t,r){this.color=e,this.decorationFn=r,this.generateRange(t)}dispose(){this._decoration?.dispose(),this.disposed=!0}hide(){this._decoration?.dispose(),this.hidden=!0}generateRange(e){let t=new mo.Range(new mo.Position(e,this.color.positionInText),new mo.Position(e,this.color.positionInText+this.color.value.length));return this.currentRange=t,t}shouldGenerateDecoration(){return this.disposed===!0?!1:this._decoration===null||this._decoration===void 0||this.hidden}_generateDecorator(){this._decoration=this.decorationFn(this.color)}},Vp=nu;var Gr=n=>n.dispose(),gi=n=>n.flat(2).filter(e=>e.colors.length!==0),Bp="#FFFFFF",Kp="#000000",iu=class{static textToFileLines(e){return e.split(/\n/).map((t,r)=>({text:t,line:r}))}static findColors(e){return gt.extract(e)}static setupColorsExtractors(e){gt.enableStrategies(e)}static generateDecoration(e,t,r){return new Vp(e,t,r)}};function Gp(n){let e=new ct(n.toRgbaString()),t=e.contrastWCAG21(Bp),r=e.contrastWCAG21(Kp);return t>r?Bp:Kp}function cg(n,e,t,r=1){let i,o,s;if(e===0)return i=o=s=Math.round(t/100*255),[i,o,s,r];t=t/100,e=e/100;let a=t<.5?t*(1+e):t+e-t*e,c=2*t-a;n=n%360/360;let u=(n+.333)%1,d=n,h=n-.333;return h<0&&(h=h+1),i=ru(a,c,u),o=ru(a,c,d),s=ru(a,c,h),[Math.round(i*255),Math.round(o*255),Math.round(s*255),r]}function ru(n,e,t){let r=e;return 6*t<1?e+(n-e)*6*t:2*t<1?n:3*t<2?e+(n-e)*(2/3-t)*6:r}var Rn=iu;var ou=class{_running=!1;_queue=[];push(e){return this._queue.push(e),this._running||this._next(),this}_next(){this._running=!1;let e=this._queue.shift();if(e){this._running=!0;try{e(this._next.bind(this))}catch{this._next.call(this)}}}},Xp=ou;var Er=require("vscode");var su=class{disposed=!1;hidden=!1;decorationFn;_decoration;get decoration(){return this._generateDecorator(),this._decoration}set decoration(e){this._decoration=e}get rgb(){return this.variable.color.rgb}constructor(e,t,r){this.variable=e,this.decorationFn=r,this.variable.color?this.generateRange(t):this.currentRange=new Er.Range(new Er.Position(t,0),new Er.Position(t,0))}dispose(){this._decoration?.dispose(),this.disposed=!0}hide(){this._decoration?.dispose(),this.hidden=!0}generateRange(e){let t=new Er.Range(new Er.Position(e,this.variable.color.positionInText),new Er.Position(e,this.variable.color.positionInText+this.variable.value.length));return this.currentRange=t,t}shouldGenerateDecoration(){let e=xt.findVariable(this.variable);return this.disposed===!0||e===null?!1:this._decoration===null||this._decoration===void 0||this.hidden}_generateDecorator(){let e=xt.findVariable(this.variable);e&&this.variable.color!==e&&(this.variable.color=e),this.variable.color&&this.variable.color.rgb&&(this._decoration=this.decorationFn(this.variable.color))}},Yp=su;var au=class extends hi{async extractVariables(e,t){let r=await Promise.all(this.enabledStrategies.map(i=>i.extractVariables(e,t)));return gi(r)}deleteVariableInLine(e,t){this.enabledStrategies.forEach(r=>r.deleteVariable(e,t))}async extractDeclarations(e,t){return Promise.all(this.enabledStrategies.map(r=>r.extractDeclarations(e,t)))}getVariablesCount(){return this.enabledStrategies.reduce((e,t)=>e+t.variablesCount(),0)}findVariable(e){return this.get(e.type).getVariableValue(e)}removeVariablesDeclarations(e){this.enabledStrategies.forEach(t=>t.deleteVariable(e))}},ND=new au,Pt=ND;var cu=class{name;value;color;location;type;constructor(e,t,r,i,o){this.name=e,this.value=t,this.color=r,this.location=i,this.type=o}toRgbString(){return this.color.toRgbString()}update(e){this.color=e}},uu=cu;var Jp=require("path"),lu=class{entries=new Map;has(e,t,r){let i=this.get(e,t,r);return i&&i.length>0}get(e,t,r){let i=this.entries.get(e)||[];return t!==void 0&&(i=i.filter(o=>o.location.fileName===t)),r!==void 0&&(i=i.filter(o=>o.location.line===r)),i}__delete(e,t,r){let i=this.get(e);r!==null?i=i.filter(o=>o.location.fileName!==t||o.location.fileName===t&&o.location.line!==r):t!==null&&(i=i.filter(o=>o.location.fileName!==t)),this.entries.set(e,i)}deleteVariablesFile(e,t){let r=this.entries.entries(),i=r.next();for(;i.done===!1;){let o=i.value[0];this.__delete(o,e,t),i=r.next()}}delete(e,t,r){this.__delete(e,t,r)}addEntry(e,t){let r=Array.isArray(t)?t:[t];if(this.entries.has(e)){let i=this.entries.get(e);this.entries.set(e,i?i.concat(r):r)}else this.entries.set(e,r)}get count(){return Array.from(this.entries.values()).filter(e=>e.length!==0).length}findDeclaration(e,t,r){return this.findClosestDeclaration(e,t,r)}findClosestDeclaration(e,t,r){let i=this.get(e,t);i.length===0&&(i=this.get(e)),i.length===0&&this.delete(e),i=this.filterDecorations(i,t),r?i=i.filter(a=>a.location.line===r):i=i.sort((a,c)=>a.location.line-c.location.line);let o=i[i.length-1],s=i.pop();for(;s&&s.color===void 0;)s=i.pop();return s||o}filterDecorations(e,t){let r=(0,Jp.dirname)(t),i=new RegExp(`^${encodeURI(r)}`),o=e.filter(s=>i.test(encodeURI(s.location.fileName)));return o.length!==0||r===t?o:this.filterDecorations(e,r)}},Zp=lu;var Nn=class{constructor(e,t,r,i,o){this.name=e;this.DECLARATION_REGEXP=t;this.USES_REGEXP=r;this.USE_REGEXP=i;this.regexpExtractor=o}store=new Zp;async extractDeclarations(e,t){return Promise.resolve(t.map(({text:r,line:i})=>this.__extractDeclarations(e,r,i)).length)}__extractDeclarations(e,t,r){let i=null;for(;(i=this.DECLARATION_REGEXP.exec(t))!==null;){let o=this.regexpExtractor.getVariableNameFromDeclaration(i),s=gt.extractOneColor(t.slice(i.index+i[0].length).trim())||this.extractVariable(e,t.slice(i.index+i[0].length).trim());if(this.store.has(o,e,r))this.store.findDeclaration(o,e,r).update(s);else{let a=new uu(o,o,s,{fileName:e,line:r,position:i.index},this.name);this.store.addEntry(o,a)}}}extractVariables(e,t){let r=t.map(({line:i,text:o})=>{let s=null,a=[];for(;(s=this.USES_REGEXP.exec(o))!==null;){let[c,u,d]=this.regexpExtractor.getVariableNameFromUses(s),h=(d||"").length,p={fileName:e,line:i,position:h+s.index},v=new uu(c,u||c,new Ct(u||c,h+s.index,null,null),p,this.name);a.push(v)}return{line:i,colors:a}});return gi(r)}extractVariable(e,t){let r=t.match(this.USE_REGEXP),i;if(r){let o=this.regexpExtractor.getVariableNameFromUse(r);return i=this.store.findClosestDeclaration(o,e),i?i.color:void 0}}getVariableValue(e){let t=null;if(this.store.has(e.name)===!0){let r=this.store.findClosestDeclaration(e.name,e.location.fileName);r?.color===void 0&&(r=this.store.findClosestDeclaration(e.name,".")),r?.color&&(t=new Ct(r.color.alpha===-1?r.color.value:e.color.value,e.location.position,r.color.rgb,r.color.alpha))}return t}variablesCount(){return this.store.count}deleteVariable(e,t){this.store.deleteVariablesFile(e,t)}};var $D=new RegExp(`(var\\((--(?:[a-z]+[\\-_a-z\\d]*))\\))(?!:)${ge}`,"gi"),jD=new RegExp(`^(var\\((--(?:[a-z]+[\\-_a-z\\d]*))\\))(?!:)${ge}`,"i"),HD=new RegExp(`(?:(--(?:[a-z]+[\\-_a-z\\d]*)\\s*):)${ge}`,"gi"),UD={getVariableNameFromDeclaration(n){return(n[1]||n[2]).trim()},getVariableNameFromUses(n){return[n[2].trim(),n[1].trim()]},getVariableNameFromUse(n){return n[2].trim()}},zD=new Nn("CSS",HD,$D,jD,UD);Pt.registerStrategy(zD);var WD=new RegExp(`(@(?:[a-z]+[\\-_a-z\\d]*)(?!:))${ge}`,"gi"),VD=new RegExp(`^(@(?:[a-z]+[\\-_a-z\\d]*)(?!:))${ge}`,"i"),BD=new RegExp(`(?:(@(?:[a-z]+[\\-_a-z\\d]*)\\s*):)${ge}`,"gi"),KD={getVariableNameFromDeclaration(n){return(n[1]||n[2]).trim()},getVariableNameFromUses(n){return[n[1].trim()]},getVariableNameFromUse(n){return n[1].trim()}};Pt.registerStrategy(new Nn("LESS",BD,WD,VD,KD));var GD=new RegExp(`(\\$(?:[_a-z]+[\\-_a-z\\d]*)(?!:))${ge}`,"gi"),XD=new RegExp(`^(\\$(?:[_a-z]+[\\-_a-z\\d]*)(?!:))${ge}`,"i"),YD=new RegExp(`(?:(\\$(?:[_a-z]+[\\-_a-z\\d]*)\\s*):)${ge}`,"gi"),JD={getVariableNameFromDeclaration(n){return(n[1]||n[2]).trim()},getVariableNameFromUses(n){return[n[1].trim()]},getVariableNameFromUse(n){return n[1].trim()}};Pt.registerStrategy(new Nn("SASS",YD,GD,XD,JD));var ZD=new RegExp(`(^|(?::|=)\\s*)((?:[\\-]*[$a-z_][\\-_\\d]*)+)(?!=)${ge}`,"gi"),QD=new RegExp(`(^|(?::|=)\\s*)((?:[\\-]*[$a-z_][\\-_\\d]*)+)(?!=)${ge}`,"i"),eR=new RegExp(`(?:(^(?:\\$|(?:[\\-_$]+[a-z\\d]+)|(?:[^\\d||\\-|@]+))(?:[_a-z\\d][\\-]*)*))\\s*=${ge}`,"gi"),tR={getVariableNameFromDeclaration(n){return(n[1]||n[2]).trim()},getVariableNameFromUses(n){return[n[2].trim(),null,n[1]]},getVariableNameFromUse(n){return n[2].trim()}};Pt.registerStrategy(new Nn("STYLUS",eR,ZD,QD,tR));var Xr=require("vscode"),du=class{statusBar;constructor(){this.statusBar=Xr.window.createStatusBarItem(Xr.StatusBarAlignment.Right)}startVariableExtraction(){this.statusBar.show(),this.statusBar.text="Colorize: $(loading~spin) Searching for color variables..."}updateVariableExtractionCount(){this.statusBar.show();let e=Pt.getVariablesCount();this.statusBar.text=`Colorize: ${e} variables`}onVariableExtractionFail(){this.statusBar.show(),this.statusBar.backgroundColor=new Xr.ThemeColor("statusBarItem.errorBackground"),this.statusBar.color=new Xr.ThemeColor("statusBarItem.errorForeground"),this.statusBar.text="Colorize: $(circle-slash) Variables extraction fail"}async getWorkspaceVariables(e){this.startVariableExtraction();try{await Promise.all(e.map(async({fileName:t,content:r})=>Pt.extractDeclarations(t,r))),this.updateVariableExtractionCount()}catch{this.onVariableExtractionFail()}}findVariablesDeclarations(e,t){return Pt.extractDeclarations(e,t).then(()=>this.updateVariableExtractionCount())}findVariables(e,t){return Pt.extractVariables(e,t)}findVariable(e){return Pt.findVariable(e)}generateDecoration(e,t,r){return new Yp(e,t,r)}setupVariablesExtractors(e){Pt.enableStrategies(e)}deleteVariableInLine(e,t){t.forEach(r=>Pt.deleteVariableInLine(e,r)),this.updateVariableExtractionCount()}removeVariablesDeclarations(e){Pt.removeVariablesDeclarations(e),this.updateVariableExtractionCount()}},nR=new du,xt=nR;var fu=class{_dirtyCache;_decorationsCache;constructor(){this._dirtyCache=new Map,this._decorationsCache=new Map}getCachedDecorations(e){if(!e.isDirty&&this._decorationsCache.has(e.fileName))return this._decorationsCache.get(e.fileName);if(this._dirtyCache.has(e.fileName))return this._dirtyCache.get(e.fileName)}saveDecorations(e,t){e.isDirty?this._saveDirtyDecoration(e.fileName,t):this._saveSavedDecorations(e.fileName,t)}_saveDirtyDecoration(e,t){return this._dirtyCache.set(e,t)}_saveSavedDecorations(e,t){return this._decorationsCache.set(e,t)}clearCache(){this._dirtyCache.clear(),this._decorationsCache.clear()}},rR=new fu,Yr=rR;var hu=class{static decorate(e,t,r){let i=t.entries(),o=i.next();for(;!o.done;){let s=o.value[0],a=o.value[1];r.indexOf(s)===-1&&this.decorateOneLine(e,a,s),o=i.next()}}static decorateOneLine(e,t,r){t.forEach(i=>{i.shouldGenerateDecoration()===!0&&e.setDecorations(i.decoration,[i.generateRange(r)])})}},Jr=hu;function Qp(n,e){let t=n;return e&&(t=n.map(e)),n.filter((r,i)=>t.indexOf(t[i])===i)}function em(n,e){return n===null||e===null||n.length!==e.length?!1:(n.forEach((t,r)=>{if(n[r]!==e[r])return!1}),!0)}var er=require("vscode");var iR="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAKQWlDQ1BJQ0MgUHJvZmlsZQAASA2dlndUU9kWh8+9N73QEiIgJfQaegkg0jtIFQRRiUmAUAKGhCZ2RAVGFBEpVmRUwAFHhyJjRRQLg4Ji1wnyEFDGwVFEReXdjGsJ7601896a/cdZ39nnt9fZZ+9917oAUPyCBMJ0WAGANKFYFO7rwVwSE8vE9wIYEAEOWAHA4WZmBEf4RALU/L09mZmoSMaz9u4ugGS72yy/UCZz1v9/kSI3QyQGAApF1TY8fiYX5QKUU7PFGTL/BMr0lSkyhjEyFqEJoqwi48SvbPan5iu7yZiXJuShGlnOGbw0noy7UN6aJeGjjAShXJgl4GejfAdlvVRJmgDl9yjT0/icTAAwFJlfzOcmoWyJMkUUGe6J8gIACJTEObxyDov5OWieAHimZ+SKBIlJYqYR15hp5ejIZvrxs1P5YjErlMNN4Yh4TM/0tAyOMBeAr2+WRQElWW2ZaJHtrRzt7VnW5mj5v9nfHn5T/T3IevtV8Sbsz55BjJ5Z32zsrC+9FgD2JFqbHbO+lVUAtG0GQOXhrE/vIADyBQC03pzzHoZsXpLE4gwnC4vs7GxzAZ9rLivoN/ufgm/Kv4Y595nL7vtWO6YXP4EjSRUzZUXlpqemS0TMzAwOl89k/fcQ/+PAOWnNycMsnJ/AF/GF6FVR6JQJhIlou4U8gViQLmQKhH/V4X8YNicHGX6daxRodV8AfYU5ULhJB8hvPQBDIwMkbj96An3rWxAxCsi+vGitka9zjzJ6/uf6Hwtcim7hTEEiU+b2DI9kciWiLBmj34RswQISkAd0oAo0gS4wAixgDRyAM3AD3iAAhIBIEAOWAy5IAmlABLJBPtgACkEx2AF2g2pwANSBetAEToI2cAZcBFfADXALDIBHQAqGwUswAd6BaQiC8BAVokGqkBakD5lC1hAbWgh5Q0FQOBQDxUOJkBCSQPnQJqgYKoOqoUNQPfQjdBq6CF2D+qAH0CA0Bv0BfYQRmALTYQ3YALaA2bA7HAhHwsvgRHgVnAcXwNvhSrgWPg63whfhG/AALIVfwpMIQMgIA9FGWAgb8URCkFgkAREha5EipAKpRZqQDqQbuY1IkXHkAwaHoWGYGBbGGeOHWYzhYlZh1mJKMNWYY5hWTBfmNmYQM4H5gqVi1bGmWCesP3YJNhGbjS3EVmCPYFuwl7ED2GHsOxwOx8AZ4hxwfrgYXDJuNa4Etw/XjLuA68MN4SbxeLwq3hTvgg/Bc/BifCG+Cn8cfx7fjx/GvyeQCVoEa4IPIZYgJGwkVBAaCOcI/YQRwjRRgahPdCKGEHnEXGIpsY7YQbxJHCZOkxRJhiQXUiQpmbSBVElqIl0mPSa9IZPJOmRHchhZQF5PriSfIF8lD5I/UJQoJhRPShxFQtlOOUq5QHlAeUOlUg2obtRYqpi6nVpPvUR9Sn0vR5Mzl/OX48mtk6uRa5Xrl3slT5TXl3eXXy6fJ18hf0r+pvy4AlHBQMFTgaOwVqFG4bTCPYVJRZqilWKIYppiiWKD4jXFUSW8koGStxJPqUDpsNIlpSEaQtOledK4tE20Otpl2jAdRzek+9OT6cX0H+i99AllJWVb5SjlHOUa5bPKUgbCMGD4M1IZpYyTjLuMj/M05rnP48/bNq9pXv+8KZX5Km4qfJUilWaVAZWPqkxVb9UU1Z2qbapP1DBqJmphatlq+9Uuq43Pp893ns+dXzT/5PyH6rC6iXq4+mr1w+o96pMamhq+GhkaVRqXNMY1GZpumsma5ZrnNMe0aFoLtQRa5VrntV4wlZnuzFRmJbOLOaGtru2nLdE+pN2rPa1jqLNYZ6NOs84TXZIuWzdBt1y3U3dCT0svWC9fr1HvoT5Rn62fpL9Hv1t/ysDQINpgi0GbwaihiqG/YZ5ho+FjI6qRq9Eqo1qjO8Y4Y7ZxivE+41smsImdSZJJjclNU9jU3lRgus+0zwxr5mgmNKs1u8eisNxZWaxG1qA5wzzIfKN5m/krCz2LWIudFt0WXyztLFMt6ywfWSlZBVhttOqw+sPaxJprXWN9x4Zq42Ozzqbd5rWtqS3fdr/tfTuaXbDdFrtOu8/2DvYi+yb7MQc9h3iHvQ732HR2KLuEfdUR6+jhuM7xjOMHJ3snsdNJp9+dWc4pzg3OowsMF/AX1C0YctFx4bgccpEuZC6MX3hwodRV25XjWuv6zE3Xjed2xG3E3dg92f24+ysPSw+RR4vHlKeT5xrPC16Il69XkVevt5L3Yu9q76c+Oj6JPo0+E752vqt9L/hh/QL9dvrd89fw5/rX+08EOASsCegKpARGBFYHPgsyCRIFdQTDwQHBu4IfL9JfJFzUFgJC/EN2hTwJNQxdFfpzGC4sNKwm7Hm4VXh+eHcELWJFREPEu0iPyNLIR4uNFksWd0bJR8VF1UdNRXtFl0VLl1gsWbPkRoxajCCmPRYfGxV7JHZyqffS3UuH4+ziCuPuLjNclrPs2nK15anLz66QX8FZcSoeGx8d3xD/iRPCqeVMrvRfuXflBNeTu4f7kufGK+eN8V34ZfyRBJeEsoTRRJfEXYljSa5JFUnjAk9BteB1sl/ygeSplJCUoykzqdGpzWmEtPi000IlYYqwK10zPSe9L8M0ozBDuspp1e5VE6JA0ZFMKHNZZruYjv5M9UiMJJslg1kLs2qy3mdHZZ/KUcwR5vTkmuRuyx3J88n7fjVmNXd1Z752/ob8wTXuaw6thdauXNu5Tnddwbrh9b7rj20gbUjZ8MtGy41lG99uit7UUaBRsL5gaLPv5sZCuUJR4b0tzlsObMVsFWzt3WazrWrblyJe0fViy+KK4k8l3JLr31l9V/ndzPaE7b2l9qX7d+B2CHfc3em681iZYlle2dCu4F2t5czyovK3u1fsvlZhW3FgD2mPZI+0MqiyvUqvakfVp+qk6oEaj5rmvep7t+2d2sfb17/fbX/TAY0DxQc+HhQcvH/I91BrrUFtxWHc4azDz+ui6rq/Z39ff0TtSPGRz0eFR6XHwo911TvU1zeoN5Q2wo2SxrHjccdv/eD1Q3sTq+lQM6O5+AQ4ITnx4sf4H++eDDzZeYp9qukn/Z/2ttBailqh1tzWibakNml7THvf6YDTnR3OHS0/m/989Iz2mZqzymdLz5HOFZybOZ93fvJCxoXxi4kXhzpXdD66tOTSna6wrt7LgZevXvG5cqnbvfv8VZerZ645XTt9nX297Yb9jdYeu56WX+x+aem172296XCz/ZbjrY6+BX3n+l37L972un3ljv+dGwOLBvruLr57/17cPel93v3RB6kPXj/Mejj9aP1j7OOiJwpPKp6qP6391fjXZqm99Oyg12DPs4hnj4a4Qy//lfmvT8MFz6nPK0a0RupHrUfPjPmM3Xqx9MXwy4yX0+OFvyn+tveV0auffnf7vWdiycTwa9HrmT9K3qi+OfrW9m3nZOjk03dp76anit6rvj/2gf2h+2P0x5Hp7E/4T5WfjT93fAn88ngmbWbm3/eE8/syOll+AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAM0lEQVQ4EWPMysr6z4AHiImJ4ZFlYGDCK0uE5KgBgyEQWQjF86tXr/BG5mg0DoZopDgWABkEBaGe4IM3AAAAAElFTkSuQmCC";function gu(){let n=er.workspace.getConfiguration("colorize",er.window.activeTextEditor?.document),e=Array.from(new Set(n.get("colorized_variables",[]))),t=Array.from(new Set(n.get("colorized_colors",[]))),r=n.get("languages",[]),i=oR(r).map(c=>`**/*${c}`),o=Array.from(new Set(n.get("include",[]))),s=Array.from(new Set(n.get("exclude",[]))),a=n.get("enable_search_variables",!1);return{languages:r,shouldHideCurrentLineDecorations:n.get("hide_current_line_decorations")??!0,colorizedColors:t,colorizedVariables:e,filesToIncludes:o,filesToExcludes:s,inferredFilesToInclude:i,searchVariables:a,decorationFn:pu(n.get("decoration_type"),n.get("ruler_decoration"))}}function pu(n="background",e){return function(t){let r={rangeBehavior:er.DecorationRangeBehavior.ClosedClosed};e&&(r={...r,overviewRulerColor:t.toRgbaString()});let i=er.workspace.getConfiguration("editor").get("fontSize"),o=t.toRgbaString();switch(n){case"underline":r={...r,borderWidth:"0 0 2px 0",borderStyle:"solid",borderColor:t.toRgbString()};break;case"outline":r={...r,borderWidth:"1px",borderStyle:"solid",borderColor:t.toRgbString()};break;case"dot":r={...r,after:{margin:"0 0 0 5px",contentText:"\u2B24",color:o}};break;case"square-dot":r={...r,after:{height:`${i}px`,width:`${i}px`,margin:"0 0 0 5px",backgroundColor:o,contentText:""}};break;case"background":default:r={...r,borderWidth:"1px",borderStyle:"solid",borderColor:o,backgroundColor:`transparent;
            background-image:
              linear-gradient(${o}, ${o}),
              linear-gradient(to bottom, rgba(255,255,255,0) 0%, rgba(255,255,255,0) 100%),
              url(${iR});
            background-size: 10px 10px;
            background-position: 0 0, 5px 5px;
          `,color:Gp(t)};break}return er.window.createTextEditorDecorationType(r)}}function oR(n){let e=er.extensions.all.reduce((t,r)=>(r.packageJSON?.contributes?.languages&&r.packageJSON.contributes.languages.forEach(i=>{n.indexOf(i.id)!==-1&&i.extensions&&(t=[...t,...i.extensions])}),t),[]);return Qp(e.flat())}var bo=require("vscode");var yo=require("vscode");function tm(n){let e=[],t=0,r=0;return n.reverse(),n.forEach(i=>{t=i.range.start.line+r,i.text.split(/\n/).map((o,s,a)=>{s===0&&o===""&&a.length===1?t++:e.push(sR(t++,o)),r++}),r--}),e}function sR(n,e){return{rangeLength:0,rangeOffset:0,text:e,range:new yo.Range(new yo.Position(n,0),new yo.Position(n,e.length))}}var mu=class{_currentTask=null;run(e){return this._currentTask&&this._currentTask.return?.(),this._currentTask=e(),this._run(),this}stop(){this._currentTask&&this._currentTask.return?.()}_run(){let e=this._currentTask;function t(r){try{let i=e.next(r);return i.done?i.value:Promise.resolve(i.value).then(t)}catch{}}t()}},nm=mu;var rm=new nm;function aR(n,e,t){return n.updated===null?(e.get(n.old)?.forEach(Gr),!1):n.updated===0&&U.editor?.document.lineCount===1&&U.editor?.document.lineAt(0).text===""?(e.get(n.old)?.forEach(Gr),!1):(Math.abs(n.old-n.updated)>Math.abs(t)&&(n.updated=n.old+t),!0)}function cR(n,e){n.map(({range:t})=>{let r=t.start.line;e.deco.has(r)&&e.deco.get(r)?.forEach(Gr)})}function uR(n,e){let t=n.end.line-n.start.line;return e.forEach(r=>{if(r.updated!==null){if(r.old>n.start.line&&r.old<=n.end.line){r.updated=null;return}r.old>=n.end.line&&(r.updated=r.updated-t),r.updated<0&&(r.updated=0)}}),e}function lR(n,e){return n.reverse(),n.forEach(({range:t})=>{let r=Array(t.end.line-t.start.line+1).fill(0).map((i,o)=>o+t.start.line);xt.deleteVariableInLine(U.editor?.document.fileName,r),e=uR(t,e)}),n}function dR(n,e){return n=tm(n),n.forEach(t=>{e.forEach(r=>{r.updated>=t.range.start.line&&(r.updated=r.updated+1)})}),n}function fR(n,e,t){let r=Array.from(e.deco.keys()).map(i=>({old:i,updated:i}));return t<0?n=lR(n,r):n=dR(n,r),r=r.filter(i=>aR(i,e.deco,t)),e.deco=r.reduce((i,o)=>{if(i.has(o.updated)){let a=i.get(o.updated)?.concat(e.deco.get(o.old));return a.forEach(c=>c.generateRange(o.updated)),i.set(o.updated,a)}return e.deco.get(o.old)?.forEach(a=>a.generateRange(o.updated)),i.set(o.updated,e.deco.get(o.old))},new Map),n}function im(n,e){let t=Es(n,e,new Map);function r(i,o){return i.filter(s=>o.findIndex(c=>{let u=s.currentRange.isEqual(c.currentRange);if(s.rgb===null&&c.rgb!==null)return!1;let d=em(s.rgb,c.rgb);return u&&d})===-1)}return U.editor?.visibleRanges.forEach(i=>{let o=i.start.line;for(o;o<=i.end.line+1;o++)U.deco.has(o)===!0&&t.has(o)===!0&&t.set(o,r(t.get(o),U.deco.get(o))),U.deco.has(o)&&!t.has(o)&&U.deco.get(o)?.forEach(Gr)}),sm(t),t}function om(){let n=U.editor?.document.getText()??"",e=Rn.textToFileLines(n),t=[];return U.editor?.visibleRanges.forEach(r=>{let i=r.start.line;for(i;i<=r.end.line+1;i++)e[i]&&e[i].line!==null&&t.push(e[i])}),t}function*hR(){let n=U.editor?.document.getText()??"",e=Rn.textToFileLines(n),t=om();yield xt.findVariablesDeclarations(U.editor?.document.fileName,e);let r=yield xt.findVariables(U.editor?.document.fileName,t),i=yield Rn.findColors(t),o=im(i,r);Jr.decorate(U.editor,o,U.currentSelection??[]),Ss(o,U),Ts(U)}function*gR(){yield new Promise(s=>setTimeout(s,50));let n=U.editor?.document.fileName,e=Rn.textToFileLines(U.editor?.document.getText()??""),t=om();xt.removeVariablesDeclarations(U.editor?.document.fileName),sm(U.deco),yield xt.findVariablesDeclarations(n,e);let r=yield xt.findVariables(n,t),i=yield Rn.findColors(t),o=im(i,r);Jr.decorate(U.editor,o,U.currentSelection??[]),Ss(o,U),Ts(U)}function sm(n){let e=n.entries(),t=e.next();for(;!t.done;){let r=t.value[0],i=t.value[1];n.set(r,i.filter(o=>!o.disposed)),t=e.next()}}function pR(n){if(n.contentChanges.length!==0&&U.editor&&n.document.fileName===U.editor.document.fileName){U.editor=bo.window.activeTextEditor;let e=n.contentChanges.map(r=>r),t=U.editor.document.lineCount-(U.nbLine??0);t!==0&&(e=fR(e,U,t),U.nbLine=U.editor.document.lineCount),cR(e,U),rm.run(gR)}}function mR(n){bo.workspace.onDidChangeTextDocument(pR,null,n.subscriptions),bo.window.onDidChangeTextEditorVisibleRanges(()=>rm.run(hR),null,n.subscriptions)}var am={setupEventListeners:mR};var Em=Cc(vu(),1);var Co=n=>{if(typeof n!="string")throw new TypeError("invalid pattern");if(n.length>65536)throw new TypeError("pattern is too long")};var _R={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},wo=n=>n.replace(/[[\]\\-]/g,"\\$&"),SR=n=>n.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),Cm=n=>n.join(""),wm=(n,e)=>{let t=e;if(n.charAt(t)!=="[")throw new Error("not in a brace expression");let r=[],i=[],o=t+1,s=!1,a=!1,c=!1,u=!1,d=t,h="";e:for(;o<n.length;){let R=n.charAt(o);if((R==="!"||R==="^")&&o===t+1){u=!0,o++;continue}if(R==="]"&&s&&!c){d=o+1;break}if(s=!0,R==="\\"&&!c){c=!0,o++;continue}if(R==="["&&!c){for(let[E,[I,O,q]]of Object.entries(_R))if(n.startsWith(E,o)){if(h)return["$.",!1,n.length-t,!0];o+=E.length,q?i.push(I):r.push(I),a=a||O;continue e}}if(c=!1,h){R>h?r.push(wo(h)+"-"+wo(R)):R===h&&r.push(wo(R)),h="",o++;continue}if(n.startsWith("-]",o+1)){r.push(wo(R+"-")),o+=2;continue}if(n.startsWith("-",o+1)){h=R,o+=2;continue}r.push(wo(R)),o++}if(d<o)return["",!1,0,!1];if(!r.length&&!i.length)return["$.",!1,n.length-t,!0];if(i.length===0&&r.length===1&&/^\\?.$/.test(r[0])&&!u){let R=r[0].length===2?r[0].slice(-1):r[0];return[SR(R),!1,d-t,!1]}let p="["+(u?"^":"")+Cm(r)+"]",v="["+(u?"":"^")+Cm(i)+"]";return[r.length&&i.length?"("+p+"|"+v+")":r.length?p:v,a,d-t,!0]};var xr=(n,{windowsPathsNoEscape:e=!1}={})=>e?n.replace(/\[([^\/\\])\]/g,"$1"):n.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1");var TR=new Set(["!","?","+","*","@"]),Dm=n=>TR.has(n),ER="(?!(?:^|/)\\.\\.?(?:$|/))",xs="(?!\\.)",xR=new Set(["[","."]),PR=new Set(["..","."]),qR=new Set("().*{}+?[]^$\\!"),IR=n=>n.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),Cu="[^/]",Rm=Cu+"*?",_m=Cu+"+?",_i=class n{type;#n;#r;#o=!1;#e=[];#t;#s;#c;#a=!1;#i;#u;#d=!1;constructor(e,t,r={}){this.type=e,e&&(this.#r=!0),this.#t=t,this.#n=this.#t?this.#t.#n:this,this.#i=this.#n===this?r:this.#n.#i,this.#c=this.#n===this?[]:this.#n.#c,e==="!"&&!this.#n.#a&&this.#c.push(this),this.#s=this.#t?this.#t.#e.length:0}get hasMagic(){if(this.#r!==void 0)return this.#r;for(let e of this.#e)if(typeof e!="string"&&(e.type||e.hasMagic))return this.#r=!0;return this.#r}toString(){return this.#u!==void 0?this.#u:this.type?this.#u=this.type+"("+this.#e.map(e=>String(e)).join("|")+")":this.#u=this.#e.map(e=>String(e)).join("")}#h(){if(this!==this.#n)throw new Error("should only call on root");if(this.#a)return this;this.toString(),this.#a=!0;let e;for(;e=this.#c.pop();){if(e.type!=="!")continue;let t=e,r=t.#t;for(;r;){for(let i=t.#s+1;!r.type&&i<r.#e.length;i++)for(let o of e.#e){if(typeof o=="string")throw new Error("string part in extglob AST??");o.copyIn(r.#e[i])}t=r,r=t.#t}}return this}push(...e){for(let t of e)if(t!==""){if(typeof t!="string"&&!(t instanceof n&&t.#t===this))throw new Error("invalid part: "+t);this.#e.push(t)}}toJSON(){let e=this.type===null?this.#e.slice().map(t=>typeof t=="string"?t:t.toJSON()):[this.type,...this.#e.map(t=>t.toJSON())];return this.isStart()&&!this.type&&e.unshift([]),this.isEnd()&&(this===this.#n||this.#n.#a&&this.#t?.type==="!")&&e.push({}),e}isStart(){if(this.#n===this)return!0;if(!this.#t?.isStart())return!1;if(this.#s===0)return!0;let e=this.#t;for(let t=0;t<this.#s;t++){let r=e.#e[t];if(!(r instanceof n&&r.type==="!"))return!1}return!0}isEnd(){if(this.#n===this||this.#t?.type==="!")return!0;if(!this.#t?.isEnd())return!1;if(!this.type)return this.#t?.isEnd();let e=this.#t?this.#t.#e.length:0;return this.#s===e-1}copyIn(e){typeof e=="string"?this.push(e):this.push(e.clone(this))}clone(e){let t=new n(this.type,e);for(let r of this.#e)t.copyIn(r);return t}static#l(e,t,r,i){let o=!1,s=!1,a=-1,c=!1;if(t.type===null){let v=r,y="";for(;v<e.length;){let R=e.charAt(v++);if(o||R==="\\"){o=!o,y+=R;continue}if(s){v===a+1?(R==="^"||R==="!")&&(c=!0):R==="]"&&!(v===a+2&&c)&&(s=!1),y+=R;continue}else if(R==="["){s=!0,a=v,c=!1,y+=R;continue}if(!i.noext&&Dm(R)&&e.charAt(v)==="("){t.push(y),y="";let E=new n(R,t);v=n.#l(e,E,v,i),t.push(E);continue}y+=R}return t.push(y),v}let u=r+1,d=new n(null,t),h=[],p="";for(;u<e.length;){let v=e.charAt(u++);if(o||v==="\\"){o=!o,p+=v;continue}if(s){u===a+1?(v==="^"||v==="!")&&(c=!0):v==="]"&&!(u===a+2&&c)&&(s=!1),p+=v;continue}else if(v==="["){s=!0,a=u,c=!1,p+=v;continue}if(Dm(v)&&e.charAt(u)==="("){d.push(p),p="";let y=new n(v,d);d.push(y),u=n.#l(e,y,u,i);continue}if(v==="|"){d.push(p),p="",h.push(d),d=new n(null,t);continue}if(v===")")return p===""&&t.#e.length===0&&(t.#d=!0),d.push(p),p="",t.push(...h,d),u;p+=v}return t.type=null,t.#r=void 0,t.#e=[e.substring(r-1)],u}static fromGlob(e,t={}){let r=new n(null,void 0,t);return n.#l(e,r,0,t),r}toMMPattern(){if(this!==this.#n)return this.#n.toMMPattern();let e=this.toString(),[t,r,i,o]=this.toRegExpSource();if(!(i||this.#r||this.#i.nocase&&!this.#i.nocaseMagicOnly&&e.toUpperCase()!==e.toLowerCase()))return r;let a=(this.#i.nocase?"i":"")+(o?"u":"");return Object.assign(new RegExp(`^${t}$`,a),{_src:t,_glob:e})}get options(){return this.#i}toRegExpSource(e){let t=e??!!this.#i.dot;if(this.#n===this&&this.#h(),!this.type){let c=this.isStart()&&this.isEnd(),u=this.#e.map(v=>{let[y,R,E,I]=typeof v=="string"?n.#g(v,this.#r,c):v.toRegExpSource(e);return this.#r=this.#r||E,this.#o=this.#o||I,y}).join(""),d="";if(this.isStart()&&typeof this.#e[0]=="string"&&!(this.#e.length===1&&PR.has(this.#e[0]))){let y=xR,R=t&&y.has(u.charAt(0))||u.startsWith("\\.")&&y.has(u.charAt(2))||u.startsWith("\\.\\.")&&y.has(u.charAt(4)),E=!t&&!e&&y.has(u.charAt(0));d=R?ER:E?xs:""}let h="";return this.isEnd()&&this.#n.#a&&this.#t?.type==="!"&&(h="(?:$|\\/)"),[d+u+h,xr(u),this.#r=!!this.#r,this.#o]}let r=this.type==="*"||this.type==="+",i=this.type==="!"?"(?:(?!(?:":"(?:",o=this.#f(t);if(this.isStart()&&this.isEnd()&&!o&&this.type!=="!"){let c=this.toString();return this.#e=[c],this.type=null,this.#r=void 0,[c,xr(this.toString()),!1,!1]}let s=!r||e||t||!xs?"":this.#f(!0);s===o&&(s=""),s&&(o=`(?:${o})(?:${s})*?`);let a="";if(this.type==="!"&&this.#d)a=(this.isStart()&&!t?xs:"")+_m;else{let c=this.type==="!"?"))"+(this.isStart()&&!t&&!e?xs:"")+Rm+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&s?")":this.type==="*"&&s?")?":`)${this.type}`;a=i+o+c}return[a,xr(o),this.#r=!!this.#r,this.#o]}#f(e){return this.#e.map(t=>{if(typeof t=="string")throw new Error("string type in extglob ast??");let[r,i,o,s]=t.toRegExpSource(e);return this.#o=this.#o||s,r}).filter(t=>!(this.isStart()&&this.isEnd())||!!t).join("|")}static#g(e,t,r=!1){let i=!1,o="",s=!1;for(let a=0;a<e.length;a++){let c=e.charAt(a);if(i){i=!1,o+=(qR.has(c)?"\\":"")+c;continue}if(c==="\\"){a===e.length-1?o+="\\\\":i=!0;continue}if(c==="["){let[u,d,h,p]=wm(e,a);if(h){o+=u,s=s||d,a+=h-1,t=t||p;continue}}if(c==="*"){r&&e==="*"?o+=_m:o+=Rm,t=!0;continue}if(c==="?"){o+=Cu,t=!0;continue}o+=IR(c)}return[o,xr(e),!!t,s]}};var wu=(n,{windowsPathsNoEscape:e=!1}={})=>e?n.replace(/[?*()[\]]/g,"[$&]"):n.replace(/[?*()[\]\\]/g,"\\$&");var wt=(n,e,t={})=>(Co(e),!t.nocomment&&e.charAt(0)==="#"?!1:new Si(e,t).match(n)),kR=/^\*+([^+@!?\*\[\(]*)$/,FR=n=>e=>!e.startsWith(".")&&e.endsWith(n),MR=n=>e=>e.endsWith(n),OR=n=>(n=n.toLowerCase(),e=>!e.startsWith(".")&&e.toLowerCase().endsWith(n)),LR=n=>(n=n.toLowerCase(),e=>e.toLowerCase().endsWith(n)),AR=/^\*+\.\*+$/,NR=n=>!n.startsWith(".")&&n.includes("."),$R=n=>n!=="."&&n!==".."&&n.includes("."),jR=/^\.\*+$/,HR=n=>n!=="."&&n!==".."&&n.startsWith("."),UR=/^\*+$/,zR=n=>n.length!==0&&!n.startsWith("."),WR=n=>n.length!==0&&n!=="."&&n!=="..",VR=/^\?+([^+@!?\*\[\(]*)?$/,BR=([n,e=""])=>{let t=xm([n]);return e?(e=e.toLowerCase(),r=>t(r)&&r.toLowerCase().endsWith(e)):t},KR=([n,e=""])=>{let t=Pm([n]);return e?(e=e.toLowerCase(),r=>t(r)&&r.toLowerCase().endsWith(e)):t},GR=([n,e=""])=>{let t=Pm([n]);return e?r=>t(r)&&r.endsWith(e):t},XR=([n,e=""])=>{let t=xm([n]);return e?r=>t(r)&&r.endsWith(e):t},xm=([n])=>{let e=n.length;return t=>t.length===e&&!t.startsWith(".")},Pm=([n])=>{let e=n.length;return t=>t.length===e&&t!=="."&&t!==".."},qm=typeof process=="object"&&process?typeof process.env=="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",Sm={win32:{sep:"\\"},posix:{sep:"/"}},YR=qm==="win32"?Sm.win32.sep:Sm.posix.sep;wt.sep=YR;var Sn=Symbol("globstar **");wt.GLOBSTAR=Sn;var JR="[^/]",ZR=JR+"*?",QR="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",e_="(?:(?!(?:\\/|^)\\.).)*?",t_=(n,e={})=>t=>wt(t,n,e);wt.filter=t_;var _n=(n,e={})=>Object.assign({},n,e),n_=n=>{if(!n||typeof n!="object"||!Object.keys(n).length)return wt;let e=wt;return Object.assign((r,i,o={})=>e(r,i,_n(n,o)),{Minimatch:class extends e.Minimatch{constructor(i,o={}){super(i,_n(n,o))}static defaults(i){return e.defaults(_n(n,i)).Minimatch}},AST:class extends e.AST{constructor(i,o,s={}){super(i,o,_n(n,s))}static fromGlob(i,o={}){return e.AST.fromGlob(i,_n(n,o))}},unescape:(r,i={})=>e.unescape(r,_n(n,i)),escape:(r,i={})=>e.escape(r,_n(n,i)),filter:(r,i={})=>e.filter(r,_n(n,i)),defaults:r=>e.defaults(_n(n,r)),makeRe:(r,i={})=>e.makeRe(r,_n(n,i)),braceExpand:(r,i={})=>e.braceExpand(r,_n(n,i)),match:(r,i,o={})=>e.match(r,i,_n(n,o)),sep:e.sep,GLOBSTAR:Sn})};wt.defaults=n_;var Im=(n,e={})=>(Co(n),e.nobrace||!/\{(?:(?!\{).)*\}/.test(n)?[n]:(0,Em.default)(n));wt.braceExpand=Im;var r_=(n,e={})=>new Si(n,e).makeRe();wt.makeRe=r_;var i_=(n,e,t={})=>{let r=new Si(e,t);return n=n.filter(i=>r.match(i)),r.options.nonull&&!n.length&&n.push(e),n};wt.match=i_;var Tm=/[?*]|[+@!]\(.*?\)|\[|\]/,o_=n=>n.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),Si=class{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(e,t={}){Co(e),t=t||{},this.options=t,this.pattern=e,this.platform=t.platform||qm,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!t.windowsPathsNoEscape||t.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!t.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!t.nonegate,this.comment=!1,this.empty=!1,this.partial=!!t.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=t.windowsNoMagicRoot!==void 0?t.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let e of this.set)for(let t of e)if(typeof t!="string")return!0;return!1}debug(...e){}make(){let e=this.pattern,t=this.options;if(!t.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],t.debug&&(this.debug=(...o)=>console.error(...o)),this.debug(this.pattern,this.globSet);let r=this.globSet.map(o=>this.slashSplit(o));this.globParts=this.preprocess(r),this.debug(this.pattern,this.globParts);let i=this.globParts.map((o,s,a)=>{if(this.isWindows&&this.windowsNoMagicRoot){let c=o[0]===""&&o[1]===""&&(o[2]==="?"||!Tm.test(o[2]))&&!Tm.test(o[3]),u=/^[a-z]:/i.test(o[0]);if(c)return[...o.slice(0,4),...o.slice(4).map(d=>this.parse(d))];if(u)return[o[0],...o.slice(1).map(d=>this.parse(d))]}return o.map(c=>this.parse(c))});if(this.debug(this.pattern,i),this.set=i.filter(o=>o.indexOf(!1)===-1),this.isWindows)for(let o=0;o<this.set.length;o++){let s=this.set[o];s[0]===""&&s[1]===""&&this.globParts[o][2]==="?"&&typeof s[3]=="string"&&/^[a-z]:$/i.test(s[3])&&(s[2]="?")}this.debug(this.pattern,this.set)}preprocess(e){if(this.options.noglobstar)for(let r=0;r<e.length;r++)for(let i=0;i<e[r].length;i++)e[r][i]==="**"&&(e[r][i]="*");let{optimizationLevel:t=1}=this.options;return t>=2?(e=this.firstPhasePreProcess(e),e=this.secondPhasePreProcess(e)):t>=1?e=this.levelOneOptimize(e):e=this.adjascentGlobstarOptimize(e),e}adjascentGlobstarOptimize(e){return e.map(t=>{let r=-1;for(;(r=t.indexOf("**",r+1))!==-1;){let i=r;for(;t[i+1]==="**";)i++;i!==r&&t.splice(r,i-r)}return t})}levelOneOptimize(e){return e.map(t=>(t=t.reduce((r,i)=>{let o=r[r.length-1];return i==="**"&&o==="**"?r:i===".."&&o&&o!==".."&&o!=="."&&o!=="**"?(r.pop(),r):(r.push(i),r)},[]),t.length===0?[""]:t))}levelTwoFileOptimize(e){Array.isArray(e)||(e=this.slashSplit(e));let t=!1;do{if(t=!1,!this.preserveMultipleSlashes){for(let i=1;i<e.length-1;i++){let o=e[i];i===1&&o===""&&e[0]===""||(o==="."||o==="")&&(t=!0,e.splice(i,1),i--)}e[0]==="."&&e.length===2&&(e[1]==="."||e[1]==="")&&(t=!0,e.pop())}let r=0;for(;(r=e.indexOf("..",r+1))!==-1;){let i=e[r-1];i&&i!=="."&&i!==".."&&i!=="**"&&(t=!0,e.splice(r-1,2),r-=2)}}while(t);return e.length===0?[""]:e}firstPhasePreProcess(e){let t=!1;do{t=!1;for(let r of e){let i=-1;for(;(i=r.indexOf("**",i+1))!==-1;){let s=i;for(;r[s+1]==="**";)s++;s>i&&r.splice(i+1,s-i);let a=r[i+1],c=r[i+2],u=r[i+3];if(a!==".."||!c||c==="."||c===".."||!u||u==="."||u==="..")continue;t=!0,r.splice(i,1);let d=r.slice(0);d[i]="**",e.push(d),i--}if(!this.preserveMultipleSlashes){for(let s=1;s<r.length-1;s++){let a=r[s];s===1&&a===""&&r[0]===""||(a==="."||a==="")&&(t=!0,r.splice(s,1),s--)}r[0]==="."&&r.length===2&&(r[1]==="."||r[1]==="")&&(t=!0,r.pop())}let o=0;for(;(o=r.indexOf("..",o+1))!==-1;){let s=r[o-1];if(s&&s!=="."&&s!==".."&&s!=="**"){t=!0;let c=o===1&&r[o+1]==="**"?["."]:[];r.splice(o-1,2,...c),r.length===0&&r.push(""),o-=2}}}}while(t);return e}secondPhasePreProcess(e){for(let t=0;t<e.length-1;t++)for(let r=t+1;r<e.length;r++){let i=this.partsMatch(e[t],e[r],!this.preserveMultipleSlashes);if(i){e[t]=[],e[r]=i;break}}return e.filter(t=>t.length)}partsMatch(e,t,r=!1){let i=0,o=0,s=[],a="";for(;i<e.length&&o<t.length;)if(e[i]===t[o])s.push(a==="b"?t[o]:e[i]),i++,o++;else if(r&&e[i]==="**"&&t[o]===e[i+1])s.push(e[i]),i++;else if(r&&t[o]==="**"&&e[i]===t[o+1])s.push(t[o]),o++;else if(e[i]==="*"&&t[o]&&(this.options.dot||!t[o].startsWith("."))&&t[o]!=="**"){if(a==="b")return!1;a="a",s.push(e[i]),i++,o++}else if(t[o]==="*"&&e[i]&&(this.options.dot||!e[i].startsWith("."))&&e[i]!=="**"){if(a==="a")return!1;a="b",s.push(t[o]),i++,o++}else return!1;return e.length===t.length&&s}parseNegate(){if(this.nonegate)return;let e=this.pattern,t=!1,r=0;for(let i=0;i<e.length&&e.charAt(i)==="!";i++)t=!t,r++;r&&(this.pattern=e.slice(r)),this.negate=t}matchOne(e,t,r=!1){let i=this.options;if(this.isWindows){let R=typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]),E=!R&&e[0]===""&&e[1]===""&&e[2]==="?"&&/^[a-z]:$/i.test(e[3]),I=typeof t[0]=="string"&&/^[a-z]:$/i.test(t[0]),O=!I&&t[0]===""&&t[1]===""&&t[2]==="?"&&typeof t[3]=="string"&&/^[a-z]:$/i.test(t[3]),q=E?3:R?0:void 0,N=O?3:I?0:void 0;if(typeof q=="number"&&typeof N=="number"){let[B,se]=[e[q],t[N]];B.toLowerCase()===se.toLowerCase()&&(t[N]=B,N>q?t=t.slice(N):q>N&&(e=e.slice(q)))}}let{optimizationLevel:o=1}=this.options;o>=2&&(e=this.levelTwoFileOptimize(e)),this.debug("matchOne",this,{file:e,pattern:t}),this.debug("matchOne",e.length,t.length);for(var s=0,a=0,c=e.length,u=t.length;s<c&&a<u;s++,a++){this.debug("matchOne loop");var d=t[a],h=e[s];if(this.debug(t,d,h),d===!1)return!1;if(d===Sn){this.debug("GLOBSTAR",[t,d,h]);var p=s,v=a+1;if(v===u){for(this.debug("** at the end");s<c;s++)if(e[s]==="."||e[s]===".."||!i.dot&&e[s].charAt(0)===".")return!1;return!0}for(;p<c;){var y=e[p];if(this.debug(`
globstar while`,e,p,t,v,y),this.matchOne(e.slice(p),t.slice(v),r))return this.debug("globstar found match!",p,c,y),!0;if(y==="."||y===".."||!i.dot&&y.charAt(0)==="."){this.debug("dot detected!",e,p,t,v);break}this.debug("globstar swallow a segment, and continue"),p++}return!!(r&&(this.debug(`
>>> no match, partial?`,e,p,t,v),p===c))}let R;if(typeof d=="string"?(R=h===d,this.debug("string match",d,h,R)):(R=d.test(h),this.debug("pattern match",d,h,R)),!R)return!1}if(s===c&&a===u)return!0;if(s===c)return r;if(a===u)return s===c-1&&e[s]==="";throw new Error("wtf?")}braceExpand(){return Im(this.pattern,this.options)}parse(e){Co(e);let t=this.options;if(e==="**")return Sn;if(e==="")return"";let r,i=null;(r=e.match(UR))?i=t.dot?WR:zR:(r=e.match(kR))?i=(t.nocase?t.dot?LR:OR:t.dot?MR:FR)(r[1]):(r=e.match(VR))?i=(t.nocase?t.dot?KR:BR:t.dot?GR:XR)(r):(r=e.match(AR))?i=t.dot?$R:NR:(r=e.match(jR))&&(i=HR);let o=_i.fromGlob(e,this.options).toMMPattern();return i&&typeof o=="object"&&Reflect.defineProperty(o,"test",{value:i}),o}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let t=this.options,r=t.noglobstar?ZR:t.dot?QR:e_,i=new Set(t.nocase?["i"]:[]),o=e.map(c=>{let u=c.map(d=>{if(d instanceof RegExp)for(let h of d.flags.split(""))i.add(h);return typeof d=="string"?o_(d):d===Sn?Sn:d._src});return u.forEach((d,h)=>{let p=u[h+1],v=u[h-1];d!==Sn||v===Sn||(v===void 0?p!==void 0&&p!==Sn?u[h+1]="(?:\\/|"+r+"\\/)?"+p:u[h]=r:p===void 0?u[h-1]=v+"(?:\\/|"+r+")?":p!==Sn&&(u[h-1]=v+"(?:\\/|\\/"+r+"\\/)"+p,u[h+1]=Sn))}),u.filter(d=>d!==Sn).join("/")}).join("|"),[s,a]=e.length>1?["(?:",")"]:["",""];o="^"+s+o+a+"$",this.negate&&(o="^(?!"+o+").+$");try{this.regexp=new RegExp(o,[...i].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(e){return this.preserveMultipleSlashes?e.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(e)?["",...e.split(/\/+/)]:e.split(/\/+/)}match(e,t=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&t)return!0;let r=this.options;this.isWindows&&(e=e.split("\\").join("/"));let i=this.slashSplit(e);this.debug(this.pattern,"split",i);let o=this.set;this.debug(this.pattern,"set",o);let s=i[i.length-1];if(!s)for(let a=i.length-2;!s&&a>=0;a--)s=i[a];for(let a=0;a<o.length;a++){let c=o[a],u=i;if(r.matchBase&&c.length===1&&(u=[s]),this.matchOne(u,c,t))return r.flipNegate?!0:!this.negate}return r.flipNegate?!1:this.negate}static defaults(e){return wt.defaults(e).Minimatch}};wt.AST=_i;wt.Minimatch=Si;wt.escape=wu;wt.unescape=xr;var rs=Cc(OC()),NC=Cc(require("path")),mc,It={languages:[],shouldHideCurrentLineDecorations:!0,colorizedVariables:[],colorizedColors:[],filesToExcludes:[],filesToIncludes:[],inferredFilesToInclude:[],searchVariables:!1,decorationFn:pu()},yc=class{editor=void 0;nbLine=0;deco=new Map;currentSelection=null;statusBar;serverPath;constructor(e){this.statusBar=dt.window.createStatusBarItem(dt.StatusBarAlignment.Right),this.serverPath=e}updateStatusBar(e){let t=e?"$(check)":"$(circle-slash)",r=e?"Colorize is activated for this file":"Colorize is not activated for this file";this.statusBar.text=`${t} Colorize`,this.statusBar.backgroundColor=new dt.ThemeColor("statusBar.background"),this.statusBar.color=new dt.ThemeColor("statusBar.foreground"),this.statusBar.tooltip=r,this.statusBar.show()}},Vr=new Xp;async function QE(n){if(!n.editor)return;let e=n.editor.document.getText(),t=Rn.textToFileLines(e),r=n.editor.visibleRanges.reduce((a,c)=>[...a,...t.slice(c.start.line,c.end.line+2)],[]);await xt.findVariablesDeclarations(n.editor.document.fileName,t);let i=await xt.findVariables(n.editor.document.fileName,r),o=await Rn.findColors(r);Es(o,i,n.deco);let s=It.shouldHideCurrentLineDecorations?n.currentSelection??[]:[];return Jr.decorate(n.editor,n.deco,s)}function Ss(n,e){let t=n.entries(),r=t.next();for(;!r.done;){let i=r.value[0];e.deco.has(i)?e.deco.set(i,e.deco.get(i).concat(n.get(i))):e.deco.set(i,n.get(i)??[]),r=t.next()}}function Ts(n){let e=n.deco.entries(),t=new Map,r=e.next();for(;!r.done;){let i=r.value[0],o=r.value[1],s=[];o.forEach(a=>{a.generateRange(i);let c=s.findIndex(u=>a.currentRange.isEqual(u.currentRange));c!==-1&&(s[c].dispose(),s=s.filter((u,d)=>d!==c)),s.push(a)}),t.set(i,s),r=e.next()}n.deco=t}function LC(n,e,t){n.has(e)?n.set(e,n.get(e).concat([t])):n.set(e,[t])}function Es(n,e,t){return n.map(({line:r,colors:i})=>i.forEach(o=>{let s=Rn.generateDecoration(o,r,It.decorationFn);LC(t,r,s)})),e.map(({line:r,colors:i})=>i.forEach(o=>{let s=xt.generateDecoration(o,r,It.decorationFn);LC(t,r,s)})),t}function ex(n){return It.languages.indexOf(n)!==-1}function tx(n){return It.filesToIncludes.some(e=>wt(n,e,{nonegate:!0}))}function nx(n){return It.filesToExcludes.some(e=>wt(n,e,{nonegate:!0}))}function $C(n){return!nx(n.fileName)&&(ex(n.languageId)||tx(n.fileName))}function rx(n,e){return!It.shouldHideCurrentLineDecorations||n.textEditor!==U.editor||(U.currentSelection&&U.currentSelection.forEach(t=>{let r=U.deco.get(t);r!==void 0&&Jr.decorateOneLine(U.editor,r,t)}),U.currentSelection=[],n.selections.forEach(t=>{let r=U.deco.get(t.active.line);r&&r.forEach(i=>i.hide())}),U.currentSelection=n.selections.map(t=>t.active.line)),e()}function AC(n){Vr.push(e=>(U.editor&&U.editor.document.fileName===n.fileName&&Yr.saveDecorations(n,U.deco),e()))}async function bc(n,e){if(U.editor=void 0,U.deco=new Map,!n||!$C(n.document))return U.updateStatusBar(!1),e();U.updateStatusBar(!0),U.editor=n,It.shouldHideCurrentLineDecorations&&(U.currentSelection=n.selections.map(r=>r.active.line));let t=Yr.getCachedDecorations(n.document);if(t)U.deco=t,U.nbLine=n.document.lineCount,Jr.decorate(U.editor,U.deco,U.currentSelection??[]);else{U.nbLine=n.document.lineCount;try{await QE(U)}finally{Yr.saveDecorations(U.editor.document,U.deco)}}return e()}function ix(n){n&&(U.editor!==void 0&&U.editor!==null&&(U.deco.forEach(e=>e.forEach(t=>t.hide())),Yr.saveDecorations(U.editor.document,U.deco)),jC().filter(e=>e!==n).forEach(e=>{Vr.push(t=>bc(e,t))}),Vr.push(e=>bc(n,e)))}function ox(n,e){let t=n.deco.entries(),r=t.next();for(;!r.done;){let i=r.value[0],o=r.value[1];n.deco.set(i,o.filter(s=>!s.disposed)),r=t.next()}return e()}function sx(){U.deco.forEach(n=>{n.forEach(Gr)}),U.deco.clear(),U.deco=new Map,Yr.clearCache()}function ax(n){if(!n.affectsConfiguration("colorize"))return;let t=gu();sx(),Rn.setupColorsExtractors(t.colorizedColors),Vr.push(async r=>(xt.setupVariablesExtractors(t.colorizedVariables),t.searchVariables&&dt.window.activeTextEditor&&await Gh(dt.window.activeTextEditor.document),r())),It=t,HC()}async function Gh(n){mc||await lx(U.serverPath);let e=dt.workspace.getWorkspaceFolder(n.uri),t=await mc.sendRequest("colorize_extract_variables",{rootFolder:e?.uri.fsPath,includes:It.filesToIncludes.concat(It.inferredFilesToInclude),excludes:It.filesToExcludes});await xt.getWorkspaceVariables(t)}function cx(n){dt.window.onDidChangeTextEditorSelection(e=>Vr.push(t=>rx(e,t)),null,n.subscriptions),dt.workspace.onDidOpenTextDocument(Gh,null,n.subscriptions),dt.workspace.onDidCloseTextDocument(AC,null,n.subscriptions),dt.workspace.onDidSaveTextDocument(AC,null,n.subscriptions),dt.window.onDidChangeActiveTextEditor(ix,null,n.subscriptions),dt.workspace.onDidChangeConfiguration(ax,null,n.subscriptions),am.setupEventListeners(n)}function jC(){return dt.window.visibleTextEditors.filter(n=>n.document.uri.scheme==="file")}function HC(){U.nbLine=65,jC().forEach(n=>Vr.push(e=>bc(n,e)))}var U;function ux(n){return U=new yc(n.asAbsolutePath(NC.default.join("server","out","server.js"))),It=gu(),Rn.setupColorsExtractors(It.colorizedColors),xt.setupVariablesExtractors(It.colorizedVariables),Vr.push(async e=>{try{It.searchVariables&&dt.window.activeTextEditor&&await Gh(dt.window.activeTextEditor.document),cx(n)}catch(t){console.log(t)}return e()}),HC(),U}function lx(n){let e={execArgv:["--nolazy","--inspect=6009"]},t={run:{module:n,transport:rs.TransportKind.ipc},debug:{module:n,transport:rs.TransportKind.ipc,options:e}},r={documentSelector:[{scheme:"file",pattern:"**"}]};return mc=new rs.LanguageClient("colorizeServer","Colorize Server",t,r),mc.start()}function dx(){U.nbLine=null,U.editor=void 0,U.deco.clear(),Yr.clearCache()}0&&(module.exports={ColorizeContext,activate,canColorize,cleanDecorationList,colorize,config,deactivate,extension,generateDecorations,q,removeDuplicateDecorations,updateContextDecorations});
